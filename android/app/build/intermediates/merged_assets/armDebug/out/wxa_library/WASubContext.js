this.__wxLibrary={fileName:"WASubContext.js",envType:"Service",contextType:"App:SubContext",execStart:Date.now(),mayHaveSnapshot:!0};var __WASubContextStartTime__=this.__wxLibrary.execStart;(function(e){var t={updateTime:"2023.12.13 11:18:45",version:"2.27.3",features:{pruneWxConfigByPage:!0,injectGameContextPlugin:!0,lazyCodeLoading2:!0,lazyCodeLoadingForDevTool:!0,injectAppSeparatedPlugin:!0,nativeTrans:!0,gameLive:!0,skyline:!0,supportInvokeWithAppId:!0,wkFeatureVersion:4,delayedServiceCodeCache:!0,gameLiveInvite:!0,expt:["clicfg_appbrand_ios_native_download_new","clicfg_appbrand_native_download","clicfg_appbrand_ios_native_socket_wcwss_new","clicfg_navigation_use_scl_alert_v5","clicfg_appbrand_ios_native_readfile","clicfg_appbrand_native_readfile","clicfg_appbrand_ios_game_split_multi_plugincode","clicfg_appbrand_game_split_multi_plugincode","clicfg_appbrand_android_tcp_buffer","clicfg_appbrand_ios_tcp_buffer","clicfg_weapp_weak_net_predict_local","clicfg_wa_ar_iosurface_switch","clicfg_canvas_use_magic_brush","clicfg_appbrand_report_trace_event","clicfg_appbrand_ios_allow_inner_context_use_webaudio","clicfg_appbrand_android_reject_inner_context_use_webaudio","clicfg_appbrand_skyline_text_style","clicfg_appbrand_ios_free_httpdns_sdk_cache","clicfg_appbrand_android_free_httpdns_sdk_cache","clicfg_appbrand_ios_inneraudio2webaudio","clicfg_appbrand_android_inneraudio2webaudio","clicfg_appbrand_game_split_multi_plugincode"],snapshotConfig:{"app:main":["WAServiceMainContext.js"],"app:sub":["WASubContext.js"],"app:subRender":["WARenderContext.js"],"game:main":["WAGame.js"],"game:sub":["WAGameSubContext.js"]}},debugOptions:{}},r=!0,n=e.Function,i=n,o,a,s,l,u,c,d,p,f,h,_,g={};(()=>{var e={2230:(e,t,r)=>{var n={"./applyDecoratedDescriptor":1356,"./asyncToGenerator":6591,"./extends":1782,"./initializerDefineProperty":5672,"./initializerWarningHelper":2741,"./objectSpread2":4067,"./objectWithoutProperties":858};function i(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=2230},1356:(e,t,r)=>{"use strict";function n(e,t,r,n,i){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}r.r(t),r.d(t,{default:()=>n})},6591:(e,t,r)=>{"use strict";function n(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,l,"next",e)}function l(e){n(a,i,o,s,l,"throw",e)}s(void 0)}))}}r.r(t),r.d(t,{default:()=>i})},1782:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.r(t),r.d(t,{default:()=>n})},5672:(e,t,r)=>{"use strict";function n(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}r.r(t),r.d(t,{default:()=>n})},2741:(e,t,r)=>{"use strict";function n(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}r.r(t),r.d(t,{default:()=>n})},4067:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.r(t),r.d(t,{default:()=>o})},858:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.r(t),r.d(t,{default:()=>n})},3869:(e,t,r)=>{var n=r(7289),i=r(7121),o=r(1896),a=r(140),s=o.data,l=o.normalize,u="USE_FUNCTION_CONSTRUCTOR",c="AsyncIteratorPrototype",d=function(e,t){if(i(e))for(var r=0;r<e.length;r++)s[l(e[r])]=t};e.exports=function(e){"object"==typeof e&&(d(e.useNative,o.NATIVE),d(e.usePolyfill,o.POLYFILL),d(e.useFeatureDetection,null),n(e,u)&&(a.USE_FUNCTION_CONSTRUCTOR=!!e.USE_FUNCTION_CONSTRUCTOR),n(e,c)&&(a.USE_FUNCTION_CONSTRUCTOR=e.AsyncIteratorPrototype))}},2764:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},4212:(e,t,r)=>{var n=r(1635);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},199:(e,t,r)=>{var n=r(4946),i=r(7520),o=r(7447),a=n("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},2597:(e,t,r)=>{"use strict";var n=r(7433).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},6435:e=>{e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},9973:(e,t,r)=>{var n=r(1635);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},8548:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},5310:(e,t,r)=>{"use strict";var n,o=r(8548),a=r(7048),s=r(9065),l=r(1635),u=r(7289),c=r(5225),d=r(2784),p=r(1198),f=r(7447).f,h=r(7435),_=r(3474),g=r(4946),v=r(9086),m=s.Int8Array,y=m&&m.prototype,b=s.Uint8ClampedArray,w=b&&b.prototype,A=m&&h(m),E=y&&h(y),S=Object.prototype,I=S.isPrototypeOf,T=g("toStringTag"),C=v("TYPED_ARRAY_TAG"),O=o&&!!_&&"Opera"!==c(s.opera),N=!1,x={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},R={BigInt64Array:8,BigUint64Array:8},P=function(e){if(!l(e))return!1;var t=c(e);return u(x,t)||u(R,t)};for(n in x)s[n]||(O=!1);if((!O||"function"!=typeof A||A===i.prototype)&&(A=function(){throw TypeError("Incorrect invocation")},O))for(n in x)s[n]&&_(s[n],A);if((!O||!E||E===S)&&(E=A.prototype,O))for(n in x)s[n]&&_(s[n].prototype,E);if(O&&h(w)!==E&&_(w,E),a&&!u(E,T))for(n in N=!0,f(E,T,{get:function(){return l(this)?this[C]:void 0}}),x)s[n]&&d(s[n],C,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:N&&C,aTypedArray:function(e){if(P(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(_){if(I.call(A,e))return e}else for(var t in x)if(u(x,n)){var r=s[t];if(r&&(e===r||I.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(a){if(r)for(var n in x){var i=s[n];if(i&&u(i.prototype,e))try{delete i.prototype[e]}catch(e){}}E[e]&&!r||p(E,e,r?t:O&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,r){var n,i;if(a){if(_){if(r)for(n in x)if((i=s[n])&&u(i,e))try{delete i[e]}catch(e){}if(A[e]&&!r)return;try{return p(A,e,r?t:O&&A[e]||t)}catch(e){}}for(n in x)!(i=s[n])||i[e]&&!r||p(i,e,t)}},isView:function(e){if(!l(e))return!1;var t=c(e);return"DataView"===t||u(x,t)||u(R,t)},isTypedArray:P,TypedArray:A,TypedArrayPrototype:E}},6678:(e,t,r)=>{"use strict";var n=r(9065),i=r(7048),o=r(8548),a=r(2784),s=r(7692),l=r(1668),u=r(6435),c=r(1597),d=r(4086),p=r(137),f=r(9896),h=r(7435),_=r(3474),g=r(8476).f,v=r(7447).f,m=r(5385),y=r(7277),b=r(8927),w=b.get,A=b.set,E="ArrayBuffer",S="DataView",I="Wrong index",T=n.ArrayBuffer,C=T,O=n.DataView,N=O&&O.prototype,x=Object.prototype,R=n.RangeError,P=f.pack,D=f.unpack,L=function(e){return[255&e]},B=function(e){return[255&e,e>>8&255]},k=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},M=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return P(e,23,4)},j=function(e){return P(e,52,8)},U=function(e,t){v(e.prototype,t,{get:function(){return w(this)[t]}})},$=function(e,t,r,n){var i=p(r),o=w(e);if(i+t>o.byteLength)throw R(I);var a=w(o.buffer).bytes,s=i+o.byteOffset,l=a.slice(s,s+t);return n?l:l.reverse()},W=function(e,t,r,n,i,o){var a=p(r),s=w(e);if(a+t>s.byteLength)throw R(I);for(var l=w(s.buffer).bytes,u=a+s.byteOffset,c=n(+i),d=0;d<t;d++)l[u+d]=c[o?d:t-d-1]};if(o){if(!l((function(){T(1)}))||!l((function(){new T(-1)}))||l((function(){return new T,new T(1.5),new T(NaN),T.name!=E}))){for(var q,H=(C=function(e){return u(this,C),new T(p(e))}).prototype=T.prototype,G=g(T),Q=0;G.length>Q;)(q=G[Q++])in C||a(C,q,T[q]);H.constructor=C}_&&h(N)!==x&&_(N,x);var z=new O(new C(2)),K=N.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||s(N,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else C=function(e){u(this,C,E);var t=p(e);A(this,{bytes:m.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},O=function(e,t,r){u(this,O,S),u(e,C,S);var n=w(e).byteLength,o=c(t);if(o<0||o>n)throw R("Wrong offset");if(o+(r=void 0===r?n-o:d(r))>n)throw R("Wrong length");A(this,{buffer:e,byteLength:r,byteOffset:o}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=o)},i&&(U(C,"byteLength"),U(O,"buffer"),U(O,"byteLength"),U(O,"byteOffset")),s(O.prototype,{getInt8:function(e){return $(this,1,e)[0]<<24>>24},getUint8:function(e){return $(this,1,e)[0]},getInt16:function(e){var t=$(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=$(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return M($(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return M($(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D($(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D($(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){W(this,1,e,L,t)},setUint8:function(e,t){W(this,1,e,L,t)},setInt16:function(e,t){W(this,2,e,B,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){W(this,2,e,B,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){W(this,4,e,k,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){W(this,4,e,k,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){W(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){W(this,8,e,j,t,arguments.length>2?arguments[2]:void 0)}});y(C,E),y(O,S),e.exports={ArrayBuffer:C,DataView:O}},5385:(e,t,r)=>{"use strict";var n=r(8432),i=r(3225),o=r(4086);e.exports=function(e){for(var t=n(this),r=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),l=a>2?arguments[2]:void 0,u=void 0===l?r:i(l,r);u>s;)t[s++]=e;return t}},8117:(e,t,r)=>{var n=r(2401),i=r(4086),o=r(3225),a=function(e){return function(t,r,a){var s,l=n(t),u=i(l.length),c=o(a,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},4100:(e,t,r)=>{var n=r(3280),i=r(3231),o=r(8432),a=r(4086),s=function(e){var t=6==e;return function(r,s,l){for(var u,c=o(r),d=i(c),p=n(s,l,3),f=a(d.length);f-- >0;)if(p(u=d[f],f,c))switch(e){case 5:return u;case 6:return f}return t?-1:void 0}};e.exports={findLast:s(5),findLastIndex:s(6)}},4937:(e,t,r)=>{var n=r(3280),i=r(3231),o=r(8432),a=r(4086),s=r(1785),l=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,c=4==e,d=6==e,p=7==e,f=5==e||d;return function(h,_,g,v){for(var m,y,b=o(h),w=i(b),A=n(_,g,3),E=a(w.length),S=0,I=v||s,T=t?I(h,E):r||p?I(h,0):void 0;E>S;S++)if((f||S in w)&&(y=A(m=w[S],S,b),e))if(t)T[S]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return S;case 2:l.call(T,m)}else switch(e){case 4:return!1;case 7:l.call(T,m)}return d?-1:u||c?c:T}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},834:(e,t,r)=>{"use strict";var n=r(1668);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},8113:(e,t,r)=>{var n=r(2764),i=r(8432),o=r(3231),a=r(4086),s=function(e){return function(t,r,s,l){n(r);var u=i(t),c=o(u),d=a(u.length),p=e?d-1:0,f=e?-1:1;if(s<2)for(;;){if(p in c){l=c[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in c&&(l=r(l,c[p],p,u));return l}};e.exports={left:s(!1),right:s(!0)}},5713:e=>{var t=Math.floor,r=function(e,o){var a=e.length,s=t(a/2);return a<8?n(e,o):i(r(e.slice(0,s),o),r(e.slice(s),o),o)},n=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},i=function(e,t,r){for(var n=e.length,i=t.length,o=0,a=0,s=[];o<n||a<i;)o<n&&a<i?s.push(r(e[o],t[a])<=0?e[o++]:t[a++]):s.push(o<n?e[o++]:t[a++]);return s};e.exports=r},1785:(e,t,r)=>{var n=r(1635),i=r(7121),o=r(4946)("species");e.exports=function(e,t){var r;return i(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[o])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},7513:(e,t,r)=>{var n=r(4946)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},7020:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},5225:(e,t,r)=>{var n=r(1590),i=r(7020),o=r(4946)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:a?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},5323:(e,t,r)=>{var n=r(7289),i=r(5044),o=r(8225),a=r(7447);e.exports=function(e,t){for(var r=i(t),s=a.f,l=o.f,u=0;u<r.length;u++){var c=r[u];n(e,c)||s(e,c,l(t,c))}}},9471:(e,t,r)=>{var n=r(1668);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},918:(e,t,r)=>{"use strict";var n=r(4180).IteratorPrototype,i=r(7520),o=r(9910),a=r(7277),s=r(5488),l=function(){return this};e.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=i(n,{next:o(1,r)}),a(e,u,!1,!0),s[u]=l,e}},2784:(e,t,r)=>{var n=r(7048),i=r(7447),o=r(9910);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},9910:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7615:(e,t,r)=>{"use strict";var n=r(3979),i=r(7447),o=r(9910);e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,o(0,r)):e[a]=r}},7387:(e,t,r)=>{var n=r(242),i=r(7289),o=r(2869),a=r(7447).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},7048:(e,t,r)=>{var n=r(1668);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},6385:(e,t,r)=>{var n=r(9065),i=r(1635),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},8482:(e,t,r)=>{var n=r(8177).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},4194:e=>{e.exports="object"==typeof window},7302:(e,t,r)=>{var n=r(8177);e.exports=/MSIE|Trident/.test(n)},6250:(e,t,r)=>{var n=r(8177);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},8563:(e,t,r)=>{var n=r(7020),i=r(9065);e.exports="process"==n(i.process)},2813:(e,t,r)=>{var n=r(8177);e.exports=/web0s(?!.*chrome)/i.test(n)},8177:(e,t,r)=>{var n=r(8905);e.exports=n("navigator","userAgent")||""},5753:(e,t,r)=>{var n,i,o=r(9065),a=r(8177),s=o.process,l=s&&s.versions,u=l&&l.v8;u?i=(n=u.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(i=n[1]),e.exports=i&&+i},4289:(e,t,r)=>{var n=r(8177).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},905:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3151:(e,t,r)=>{var n=r(9065),i=r(8225).f,o=r(2784),a=r(1198),s=r(4553),l=r(5323),u=r(1896);e.exports=function(e,t){var r,c,d,p,f,h=e.target,_=e.global,g=e.stat;if(r=_?n:g?n[h]||s(h,{}):(n[h]||{}).prototype)for(c in t){if(p=t[c],d=e.noTargetGet?(f=i(r,c))&&f.value:r[c],!u(_?c:h+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),a(r,c,p,e)}}},1668:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},2982:(e,t,r)=>{"use strict";r(1283);var n=r(1198),i=r(2591),o=r(1668),a=r(4946),s=r(2784),l=a("species"),u=RegExp.prototype;e.exports=function(e,t,r,c){var d=a(e),p=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),f=p&&!o((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[l]=function(){return r},r.flags="",r[d]=/./[d]),r.exec=function(){return t=!0,null},r[d](""),!t}));if(!p||!f||r){var h=/./[d],_=t(d,""[e],(function(e,t,r,n,o){var a=t.exec;return a===i||a===u.exec?p&&!o?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));n(String.prototype,e,_[0]),n(u,d,_[1])}c&&s(u[d],"sham",!0)}},6007:(e,t,r)=>{"use strict";var n=r(7121),i=r(4086),o=r(3280),a=function(e,t,r,s,l,u,c,d){for(var p,f=l,h=0,_=!!c&&o(c,d,3);h<s;){if(h in r){if(p=_?_(r[h],h,t):r[h],u>0&&n(p))f=a(e,t,p,i(p.length),f,u-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=p}f++}h++}return f};e.exports=a},3280:(e,t,r)=>{var n=r(2764);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},8905:(e,t,r)=>{var n=r(242),i=r(9065),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e])||o(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},6265:(e,t,r)=>{var n=r(5225),i=r(5488),o=r(4946)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[n(e)]}},1383:(e,t,r)=>{var n=r(8432),i=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,l,u,c){var d=r+e.length,p=l.length,f=s;return void 0!==u&&(u=n(u),f=a),o.call(c,f,(function(n,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(d);case"<":a=u[o.slice(1,-1)];break;default:var s=+o;if(0===s)return n;if(s>p){var c=i(s/10);return 0===c?n:c<=p?void 0===l[c-1]?o.charAt(1):l[c-1]+o.charAt(1):n}a=l[s-1]}return void 0===a?"":a}))}},9065:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||i("return this")()},7289:(e,t,r)=>{var n=r(8432),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(n(e),t)}},352:e=>{e.exports={}},336:(e,t,r)=>{var n=r(9065);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},7738:(e,t,r)=>{var n=r(8905);e.exports=n("document","documentElement")},3731:(e,t,r)=>{var n=r(7048),i=r(1668),o=r(6385);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},9896:e=>{var t=Math.abs,r=Math.pow,n=Math.floor,i=Math.log,o=Math.LN2;e.exports={pack:function(e,a,s){var l,u,c,d=new Array(s),p=8*s-a-1,f=(1<<p)-1,h=f>>1,_=23===a?r(2,-24)-r(2,-77):0,g=e<0||0===e&&1/e<0?1:0,v=0;for((e=t(e))!=e||e===1/0?(u=e!=e?1:0,l=f):(l=n(i(e)/o),e*(c=r(2,-l))<1&&(l--,c*=2),(e+=l+h>=1?_/c:_*r(2,1-h))*c>=2&&(l++,c/=2),l+h>=f?(u=0,l=f):l+h>=1?(u=(e*c-1)*r(2,a),l+=h):(u=e*r(2,h-1)*r(2,a),l=0));a>=8;d[v++]=255&u,u/=256,a-=8);for(l=l<<a|u,p+=a;p>0;d[v++]=255&l,l/=256,p-=8);return d[--v]|=128*g,d},unpack:function(e,t){var n,i=e.length,o=8*i-t-1,a=(1<<o)-1,s=a>>1,l=o-7,u=i-1,c=e[u--],d=127&c;for(c>>=7;l>0;d=256*d+e[u],u--,l-=8);for(n=d&(1<<-l)-1,d>>=-l,l+=t;l>0;n=256*n+e[u],u--,l-=8);if(0===d)d=1-s;else{if(d===a)return n?NaN:c?-1/0:1/0;n+=r(2,t),d-=s}return(c?-1:1)*n*r(2,d-t)}}},3231:(e,t,r)=>{var n=r(1668),i=r(7020),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},7133:(e,t,r)=>{var n=r(1635),i=r(3474);e.exports=function(e,t,r){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==r&&n(a=o.prototype)&&a!==r.prototype&&i(e,a),e}},3724:(e,t,r)=>{var n=r(140),o=i.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},8927:(e,t,r)=>{var n,i,o,a=r(1454),s=r(9065),l=r(1635),u=r(2784),c=r(7289),d=r(140),p=r(2929),f=r(352),h="Object already initialized",_=s.WeakMap;if(a||d.state){var g=d.state||(d.state=new _),v=g.get,m=g.has,y=g.set;n=function(e,t){if(m.call(g,e))throw new TypeError(h);return t.facade=e,y.call(g,e,t),t},i=function(e){return v.call(g,e)||{}},o=function(e){return m.call(g,e)}}else{var b=p("state");f[b]=!0,n=function(e,t){if(c(e,b))throw new TypeError(h);return t.facade=e,u(e,b,t),t},i=function(e){return c(e,b)?e[b]:{}},o=function(e){return c(e,b)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},8057:(e,t,r)=>{var n=r(4946),i=r(5488),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},7121:(e,t,r)=>{var n=r(7020);e.exports=Array.isArray||function(e){return"Array"==n(e)}},1896:(e,t,r)=>{var n=r(1668),i=/#|\.prototype\./,o=function(e,t){var r=s[a(e)];return r==u||r!=l&&("function"==typeof t?n(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},1635:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},6326:e=>{e.exports=!1},8101:(e,t,r)=>{var n=r(1635),i=r(7020),o=r(4946)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},4242:(e,t,r)=>{var n=r(9973),i=r(8057),o=r(4086),a=r(3280),s=r(6265),l=r(7590),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var c,d,p,f,h,_,g,v=r&&r.that,m=!(!r||!r.AS_ENTRIES),y=!(!r||!r.IS_ITERATOR),b=!(!r||!r.INTERRUPTED),w=a(t,v,1+m+b),A=function(e){return c&&l(c),new u(!0,e)},E=function(e){return m?(n(e),b?w(e[0],e[1],A):w(e[0],e[1])):b?w(e,A):w(e)};if(y)c=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(i(d)){for(p=0,f=o(e.length);f>p;p++)if((h=E(e[p]))&&h instanceof u)return h;return new u(!1)}c=d.call(e)}for(_=c.next;!(g=_.call(c)).done;){try{h=E(g.value)}catch(e){throw l(c),e}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},7590:(e,t,r)=>{var n=r(9973);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},4180:(e,t,r)=>{"use strict";var n,i,o,a=r(1668),s=r(7435),l=r(2784),u=r(7289),c=r(4946),d=r(6326),p=c("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(n=i):f=!0);var h=null==n||a((function(){var e={};return n[p].call(e)!==e}));h&&(n={}),d&&!h||u(n,p)||l(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},5488:e=>{e.exports={}},81:(e,t,r)=>{var n,i,o,a,s,l,u,c,d=r(9065),p=r(8225).f,f=r(2258).set,h=r(6250),_=r(2813),g=r(8563),v=d.MutationObserver||d.WebKitMutationObserver,m=d.document,y=d.process,b=d.Promise,w=p(d,"queueMicrotask"),A=w&&w.value;A||(n=function(){var e,t;for(g&&(e=y.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},h||g||_||!v||!m?b&&b.resolve?((u=b.resolve(void 0)).constructor=b,c=u.then,a=function(){c.call(u,n)}):a=g?function(){y.nextTick(n)}:function(){f.call(d,n)}:(s=!0,l=m.createTextNode(""),new v(n).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),e.exports=A||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},71:(e,t,r)=>{var n=r(9065);e.exports=n.Promise},7693:(e,t,r)=>{var n=r(5753),i=r(1668);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},1454:(e,t,r)=>{var n=r(9065),i=r(3724),o=n.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},9494:(e,t,r)=>{"use strict";var n=r(2764),i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},3310:(e,t,r)=>{var n=r(9065),i=r(903).trim,o=r(9525),a=n.parseFloat,s=1/a(o+"-0")!=-1/0;e.exports=s?function(e){var t=i(String(e)),r=a(t);return 0===r&&"-"==t.charAt(0)?-0:r}:a},7520:(e,t,r)=>{var n,i=r(9973),o=r(2152),a=r(905),s=r(352),l=r(7738),u=r(6385),c=r(2929),d=c("IE_PROTO"),p=function(){},f=function(e){return"<script>"+e+"</"+"script>"},h=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=n?function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F);for(var r=a.length;r--;)delete h.prototype[a[r]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p.prototype=i(e),r=new p,p.prototype=null,r[d]=e):r=h(),void 0===t?r:o(r,t)}},2152:(e,t,r)=>{var n=r(7048),i=r(7447),o=r(9973),a=r(7583);e.exports=n?Object.defineProperties:function(e,t){o(e);for(var r,n=a(t),s=n.length,l=0;s>l;)i.f(e,r=n[l++],t[r]);return e}},7447:(e,t,r)=>{var n=r(7048),i=r(3731),o=r(9973),a=r(3979),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(o(e),t=a(t,!0),o(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},8225:(e,t,r)=>{var n=r(7048),i=r(1738),o=r(9910),a=r(2401),s=r(3979),l=r(7289),u=r(3731),c=Object.getOwnPropertyDescriptor;t.f=n?c:function(e,t){if(e=a(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},8476:(e,t,r)=>{var n=r(5266),i=r(905).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},119:(e,t)=>{t.f=Object.getOwnPropertySymbols},7435:(e,t,r)=>{var n=r(7289),i=r(8432),o=r(2929),a=r(9471),s=o("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},5266:(e,t,r)=>{var n=r(7289),i=r(2401),o=r(8117).indexOf,a=r(352);e.exports=function(e,t){var r,s=i(e),l=0,u=[];for(r in s)!n(a,r)&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~o(u,r)||u.push(r));return u}},7583:(e,t,r)=>{var n=r(5266),i=r(905);e.exports=Object.keys||function(e){return n(e,i)}},1738:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},3474:(e,t,r)=>{var n=r(9973),i=r(4212);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e.call(r,o):r.__proto__=o,r}}():void 0)},9810:(e,t,r)=>{var n=r(7048),i=r(7583),o=r(2401),a=r(1738).f,s=function(e){return function(t){for(var r,s=o(t),l=i(s),u=l.length,c=0,d=[];u>c;)r=l[c++],n&&!a.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}};e.exports={entries:s(!0),values:s(!1)}},5044:(e,t,r)=>{var n=r(8905),i=r(8476),o=r(119),a=r(9973);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=o.f;return r?t.concat(r(e)):t}},242:(e,t,r)=>{var n=r(9065);e.exports=n},9958:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},6038:(e,t,r)=>{var n=r(9973),i=r(1635),o=r(9494);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},7692:(e,t,r)=>{var n=r(1198);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},1198:(e,t,r)=>{var n=r(9065),o=r(2784),a=r(7289),s=r(4553),l=r(3724),u=r(8927),c=u.get,d=u.enforce,p=String(String).split("String");(e.exports=function(e,t,r,i){var l,u=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,f=!!i&&!!i.noTargetGet;"function"==typeof r&&("string"!=typeof t||a(r,"name")||o(r,"name",t),(l=d(r)).source||(l.source=p.join("string"==typeof t?t:""))),e!==n?(u?!f&&e[t]&&(c=!0):delete e[t],c?e[t]=r:o(e,t,r)):c?e[t]=r:s(t,r)})(i.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||l(this)}))},2186:(e,t,r)=>{var n=r(7020),i=r(2591);e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var o=r.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},2591:(e,t,r)=>{"use strict";var n,i,o=r(230),a=r(2149),s=r(1546),l=r(7520),u=r(8927).get,c=r(8570),d=r(2804),p=RegExp.prototype.exec,f=s("native-string-replace",String.prototype.replace),h=p,_=(n=/a/,i=/b*/g,p.call(n,"a"),p.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),g=a.UNSUPPORTED_Y||a.BROKEN_CARET,v=void 0!==/()??/.exec("")[1];(_||v||g||c||d)&&(h=function(e){var t,r,n,i,a,s,c,d=this,m=u(d),y=m.raw;if(y)return y.lastIndex=d.lastIndex,t=h.call(y,e),d.lastIndex=y.lastIndex,t;var b=m.groups,w=g&&d.sticky,A=o.call(d),E=d.source,S=0,I=e;if(w&&(-1===(A=A.replace("y","")).indexOf("g")&&(A+="g"),I=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(E="(?: "+E+")",I=" "+I,S++),r=new RegExp("^(?:"+E+")",A)),v&&(r=new RegExp("^"+E+"$(?!\\s)",A)),_&&(n=d.lastIndex),i=p.call(w?r:d,I),w?i?(i.input=i.input.slice(S),i[0]=i[0].slice(S),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:_&&i&&(d.lastIndex=d.global?i.index+i[0].length:n),v&&i&&i.length>1&&f.call(i[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(i[a]=void 0)})),i&&b)for(i.groups=s=l(null),a=0;a<b.length;a++)s[(c=b[a])[0]]=i[c[1]];return i}),e.exports=h},230:(e,t,r)=>{"use strict";var n=r(9973);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2149:(e,t,r)=>{var n=r(1668),i=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=n((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},8570:(e,t,r)=>{var n=r(1668);e.exports=n((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},2804:(e,t,r)=>{var n=r(1668);e.exports=n((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},7968:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},4553:(e,t,r)=>{var n=r(9065),i=r(2784);e.exports=function(e,t){try{i(n,e,t)}catch(r){n[e]=t}return t}},8003:(e,t,r)=>{"use strict";var n=r(8905),i=r(7447),o=r(4946),a=r(7048),s=o("species");e.exports=function(e){var t=n(e),r=i.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},7277:(e,t,r)=>{var n=r(7447).f,i=r(7289),o=r(4946)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},2929:(e,t,r)=>{var n=r(1546),i=r(9086),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},140:(e,t,r)=>{var n=r(9065),i=r(4553),o="__core-js_shared__",a=n[o]||i(o,{});e.exports=a},1546:(e,t,r)=>{var n=r(6326),i=r(140);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},2437:(e,t,r)=>{var n=r(9973),i=r(2764),o=r(4946)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[o])?t:i(r)}},7433:(e,t,r)=>{var n=r(1597),i=r(7968),o=function(e){return function(t,r){var o,a,s=String(i(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},6359:(e,t,r)=>{var n=r(8177);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},2468:(e,t,r)=>{var n=r(4086),i=r(2630),o=r(7968),a=Math.ceil,s=function(e){return function(t,r,s){var l,u,c=String(o(t)),d=c.length,p=void 0===s?" ":String(s),f=n(r);return f<=d||""==p?c:(l=f-d,(u=i.call(p,a(l/p.length))).length>l&&(u=u.slice(0,l)),e?c+u:u+c)}};e.exports={start:s(!1),end:s(!0)}},2630:(e,t,r)=>{"use strict";var n=r(1597),i=r(7968);e.exports=function(e){var t=String(i(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},3413:(e,t,r)=>{var n=r(1668),i=r(9525);e.exports=function(e){return n((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},903:(e,t,r)=>{var n=r(7968),i="["+r(9525)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(a,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},2258:(e,t,r)=>{var n,o,a,s=r(9065),l=r(1668),u=r(3280),c=r(7738),d=r(6385),p=r(6250),f=r(8563),h=s.location,_=s.setImmediate,g=s.clearImmediate,v=s.process,m=s.MessageChannel,y=s.Dispatch,b=0,w={},A="onreadystatechange",E=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},S=function(e){return function(){E(e)}},I=function(e){E(e.data)},T=function(e){s.postMessage(e+"",h.protocol+"//"+h.host)};_&&g||(_=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return w[++b]=function(){("function"==typeof e?e:i(e)).apply(void 0,t)},n(b),b},g=function(e){delete w[e]},f?n=function(e){v.nextTick(S(e))}:y&&y.now?n=function(e){y.now(S(e))}:m&&!p?(a=(o=new m).port2,o.port1.onmessage=I,n=u(a.postMessage,a,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&h&&"file:"!==h.protocol&&!l(T)?(n=T,s.addEventListener("message",I,!1)):n=A in d("script")?function(e){c.appendChild(d("script")).onreadystatechange=function(){c.removeChild(this),E(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:_,clear:g}},3225:(e,t,r)=>{var n=r(1597),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},137:(e,t,r)=>{var n=r(1597),i=r(4086);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length or index");return r}},2401:(e,t,r)=>{var n=r(3231),i=r(7968);e.exports=function(e){return n(i(e))}},1597:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},4086:(e,t,r)=>{var n=r(1597),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},8432:(e,t,r)=>{var n=r(7968);e.exports=function(e){return Object(n(e))}},2961:(e,t,r)=>{var n=r(5750);e.exports=function(e,t){var r=n(e);if(r%t)throw RangeError("Wrong offset");return r}},5750:(e,t,r)=>{var n=r(1597);e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},3979:(e,t,r)=>{var n=r(1635);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},1590:(e,t,r)=>{var n={};n[r(4946)("toStringTag")]="z",e.exports="[object z]"===String(n)},3860:(e,t,r)=>{"use strict";var n=r(3151),i=r(9065),o=r(7048),a=r(5792),s=r(5310),l=r(6678),u=r(6435),c=r(9910),d=r(2784),p=r(4086),f=r(137),h=r(2961),_=r(3979),g=r(7289),v=r(5225),m=r(1635),y=r(7520),b=r(3474),w=r(8476).f,A=r(4617),E=r(4937).forEach,S=r(8003),I=r(7447),T=r(8225),C=r(8927),O=r(7133),N=C.get,x=C.set,R=I.f,P=T.f,D=Math.round,L=i.RangeError,B=l.ArrayBuffer,k=l.DataView,M=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,j=s.TypedArray,U=s.TypedArrayPrototype,$=s.aTypedArrayConstructor,W=s.isTypedArray,q="BYTES_PER_ELEMENT",H="Wrong length",G=function(e,t){for(var r=0,n=t.length,i=new($(e))(n);n>r;)i[r]=t[r++];return i},Q=function(e,t){R(e,t,{get:function(){return N(this)[t]}})},z=function(e){var t;return e instanceof B||"ArrayBuffer"==(t=v(e))||"SharedArrayBuffer"==t},K=function(e,t){return W(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},V=function(e,t){return K(e,t=_(t,!0))?c(2,e[t]):P(e,t)},J=function(e,t,r){return!(K(e,t=_(t,!0))&&m(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?R(e,t,r):(e[t]=r.value,e)};o?(M||(T.f=V,I.f=J,Q(U,"buffer"),Q(U,"byteOffset"),Q(U,"byteLength"),Q(U,"length")),n({target:"Object",stat:!0,forced:!M},{getOwnPropertyDescriptor:V,defineProperty:J}),e.exports=function(e,t,r){var o=e.match(/\d+$/)[0]/8,s=e+(r?"Clamped":"")+"Array",l="get"+e,c="set"+e,_=i[s],g=_,v=g&&g.prototype,I={},T=function(e,t){R(e,t,{get:function(){return function(e,t){var r=N(e);return r.view[l](t*o+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=N(e);r&&(n=(n=D(n))<0?0:n>255?255:255&n),i.view[c](t*o+i.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};M?a&&(g=t((function(e,t,r,n){return u(e,g,s),O(m(t)?z(t)?void 0!==n?new _(t,h(r,o),n):void 0!==r?new _(t,h(r,o)):new _(t):W(t)?G(g,t):A.call(g,t):new _(f(t)),e,g)})),b&&b(g,j),E(w(_),(function(e){e in g||d(g,e,_[e])})),g.prototype=v):(g=t((function(e,t,r,n){u(e,g,s);var i,a,l,c=0,d=0;if(m(t)){if(!z(t))return W(t)?G(g,t):A.call(g,t);i=t,d=h(r,o);var _=t.byteLength;if(void 0===n){if(_%o)throw L(H);if((a=_-d)<0)throw L(H)}else if((a=p(n)*o)+d>_)throw L(H);l=a/o}else l=f(t),i=new B(a=l*o);for(x(e,{buffer:i,byteOffset:d,byteLength:a,length:l,view:new k(i)});c<l;)T(e,c++)})),b&&b(g,j),v=g.prototype=y(U)),v.constructor!==g&&d(v,"constructor",g),F&&d(v,F,s),I[s]=g,n({global:!0,forced:g!=_,sham:!M},I),q in g||d(g,q,o),q in v||d(v,q,o),S(s)}):e.exports=function(){}},5792:(e,t,r)=>{var n=r(9065),i=r(1668),o=r(7513),a=r(5310).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,l=n.Int8Array;e.exports=!a||!i((function(){l(1)}))||!i((function(){new l(-1)}))||!o((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||i((function(){return 1!==new l(new s(2),1,void 0).length}))},4617:(e,t,r)=>{var n=r(8432),i=r(4086),o=r(6265),a=r(8057),s=r(3280),l=r(5310).aTypedArrayConstructor;e.exports=function(e){var t,r,u,c,d,p,f=n(e),h=arguments.length,_=h>1?arguments[1]:void 0,g=void 0!==_,v=o(f);if(null!=v&&!a(v))for(p=(d=v.call(f)).next,f=[];!(c=p.call(d)).done;)f.push(c.value);for(g&&h>2&&(_=s(_,arguments[2],2)),r=i(f.length),u=new(l(this))(r),t=0;r>t;t++)u[t]=g?_(f[t],t):f[t];return u}},9086:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},9534:(e,t,r)=>{var n=r(7693);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2869:(e,t,r)=>{var n=r(4946);t.f=n},4946:(e,t,r)=>{var n=r(9065),i=r(1546),o=r(7289),a=r(9086),s=r(7693),l=r(9534),u=i("wks"),c=n.Symbol,d=l?c:c&&c.withoutSetter||a;e.exports=function(e){return o(u,e)&&(s||"string"==typeof u[e])||(s&&o(c,e)?u[e]=c[e]:u[e]=d("Symbol."+e)),u[e]}},9525:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2326:(e,t,r)=>{"use strict";var n=r(3151),i=r(7435),o=r(3474),a=r(7520),s=r(2784),l=r(9910),u=r(4242),c=function(e,t){var r=this;if(!(r instanceof c))return new c(e,t);o&&(r=o(new Error(void 0),i(r))),void 0!==t&&s(r,"message",String(t));var n=[];return u(e,n.push,{that:n}),s(r,"errors",n),r};c.prototype=a(Error.prototype,{constructor:l(5,c),message:l(5,""),name:l(5,"AggregateError")}),n({global:!0},{AggregateError:c})},3657:(e,t,r)=>{"use strict";var n=r(3151),i=r(9065),o=r(6678),a=r(8003),s="ArrayBuffer",l=o.ArrayBuffer;n({global:!0,forced:i.ArrayBuffer!==l},{ArrayBuffer:l}),a(s)},6068:(e,t,r)=>{"use strict";var n=r(3151),i=r(1668),o=r(6678),a=r(9973),s=r(3225),l=r(4086),u=r(2437),c=o.ArrayBuffer,d=o.DataView,p=c.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(a(this),e);for(var r=a(this).byteLength,n=s(e,r),i=s(void 0===t?r:t,r),o=new(u(this,c))(l(i-n)),f=new d(this),h=new d(o),_=0;n<i;)h.setUint8(_++,f.getUint8(n++));return o}})},5979:(e,t,r)=>{"use strict";var n=r(3151),i=r(6007),o=r(8432),a=r(4086),s=r(2764),l=r(1785);n({target:"Array",proto:!0},{flatMap:function(e){var t,r=o(this),n=a(r.length);return s(e),(t=l(r,0)).length=i(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},9581:(e,t,r)=>{"use strict";var n=r(3151),i=r(6007),o=r(8432),a=r(4086),s=r(1597),l=r(1785);n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),r=a(t.length),n=l(t,0);return n.length=i(n,t,t,r,0,void 0===e?1:s(e)),n}})},6540:(e,t,r)=>{"use strict";var n=r(3151),i=r(8113).right,o=r(834),a=r(5753),s=r(8563);n({target:"Array",proto:!0,forced:!o("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},5075:(e,t,r)=>{"use strict";var n=r(3151),i=r(8113).left,o=r(834),a=r(5753),s=r(8563);n({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},6621:(e,t,r)=>{"use strict";var n=r(3151),i=r(7121),o=[].reverse,a=[1,2];n({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},5711:(e,t,r)=>{"use strict";var n=r(3151),i=r(2764),o=r(8432),a=r(4086),s=r(1668),l=r(5713),u=r(834),c=r(8482),d=r(7302),p=r(5753),f=r(4289),h=[],_=h.sort,g=s((function(){h.sort(void 0)})),v=s((function(){h.sort(null)})),m=u("sort"),y=!s((function(){if(p)return p<70;if(!(c&&c>3)){if(d)return!0;if(f)return f<603;var e,t,r,n,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)h.push({k:t+n,v:r})}for(h.sort((function(e,t){return t.v-e.v})),n=0;n<h.length;n++)t=h[n].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));n({target:"Array",proto:!0,forced:g||!v||!m||!y},{sort:function(e){void 0!==e&&i(e);var t=o(this);if(y)return void 0===e?_.call(t):_.call(t,e);var r,n,s=[],u=a(t.length);for(n=0;n<u;n++)n in t&&s.push(t[n]);for(s=l(s,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:String(t)>String(r)?1:-1}}(e)),r=s.length,n=0;n<r;)t[n]=s[n++];for(;n<u;)delete t[n++];return t}})},3684:(e,t,r)=>{r(199)("flatMap")},4891:(e,t,r)=>{r(199)("flat")},1127:(e,t,r)=>{r(3151)({global:!0},{globalThis:r(9065)})},5985:(e,t,r)=>{var n=r(3151),i=r(8905),o=r(1668),a=i("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,c=function(e,t,r){var n=r.charAt(t-1),i=r.charAt(t+1);return l.test(e)&&!u.test(i)||u.test(e)&&!l.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},d=o((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&n({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,r){var n=a.apply(null,arguments);return"string"==typeof n?n.replace(s,c):n}})},9423:(e,t,r)=>{var n=r(3151),i=Math.hypot,o=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var r,n,i=0,s=0,l=arguments.length,u=0;s<l;)u<(r=o(arguments[s++]))?(i=i*(n=u/r)*n+1,u=r):i+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*a(i)}})},3759:(e,t,r)=>{var n=r(3151),i=r(3310);n({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},5007:(e,t,r)=>{var n=r(3151),i=r(9810).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},314:(e,t,r)=>{var n=r(3151),i=r(4242),o=r(7615);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},5463:(e,t,r)=>{var n=r(3151),i=r(9810).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},2261:(e,t,r)=>{"use strict";var n=r(3151),i=r(2764),o=r(9494),a=r(9958),s=r(4242);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=o.f(t),n=r.resolve,l=r.reject,u=a((function(){var r=i(t.resolve),o=[],a=0,l=1;s(e,(function(e){var i=a++,s=!1;o.push(void 0),l++,r.call(t,e).then((function(e){s||(s=!0,o[i]={status:"fulfilled",value:e},--l||n(o))}),(function(e){s||(s=!0,o[i]={status:"rejected",reason:e},--l||n(o))}))})),--l||n(o)}));return u.error&&l(u.value),r.promise}})},6696:(e,t,r)=>{"use strict";var n=r(3151),i=r(2764),o=r(8905),a=r(9494),s=r(9958),l=r(4242),u="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var t=this,r=a.f(t),n=r.resolve,c=r.reject,d=s((function(){var r=i(t.resolve),a=[],s=0,d=1,p=!1;l(e,(function(e){var i=s++,l=!1;a.push(void 0),d++,r.call(t,e).then((function(e){l||p||(p=!0,n(e))}),(function(e){l||p||(l=!0,a[i]=e,--d||c(new(o("AggregateError"))(a,u)))}))})),--d||c(new(o("AggregateError"))(a,u))}));return d.error&&c(d.value),r.promise}})},1269:(e,t,r)=>{"use strict";var n=r(3151),i=r(6326),o=r(71),a=r(1668),s=r(8905),l=r(2437),u=r(6038),c=r(1198);if(n({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),r="function"==typeof e;return this.then(r?function(r){return u(t,e()).then((function(){return r}))}:e,r?function(r){return u(t,e()).then((function(){throw r}))}:e)}}),!i&&"function"==typeof o){var d=s("Promise").prototype.finally;o.prototype.finally!==d&&c(o.prototype,"finally",d,{unsafe:!0})}},7169:(e,t,r)=>{"use strict";var n,i,o,a,s=r(3151),l=r(6326),u=r(9065),c=r(8905),d=r(71),p=r(1198),f=r(7692),h=r(3474),_=r(7277),g=r(8003),v=r(1635),m=r(2764),y=r(6435),b=r(3724),w=r(4242),A=r(7513),E=r(2437),S=r(2258).set,I=r(81),T=r(6038),C=r(336),O=r(9494),N=r(9958),x=r(8927),R=r(1896),P=r(4946),D=r(4194),L=r(8563),B=r(5753),k=P("species"),M="Promise",F=x.get,j=x.set,U=x.getterFor(M),$=d&&d.prototype,W=d,q=$,H=u.TypeError,G=u.document,Q=u.process,z=O.f,K=z,V=!!(G&&G.createEvent&&u.dispatchEvent),J="function"==typeof PromiseRejectionEvent,X="unhandledrejection",Y=!1,Z=R(M,(function(){var e=b(W)!==String(W);if(!e&&66===B)return!0;if(l&&!q.finally)return!0;if(B>=51&&/native code/.test(W))return!1;var t=new W((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[k]=r,!(Y=t.then((function(){}))instanceof r)||!e&&D&&!J})),ee=Z||!A((function(e){W.all(e).catch((function(){}))})),te=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},re=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;I((function(){for(var n=e.value,i=1==e.state,o=0;r.length>o;){var a,s,l,u=r[o++],c=i?u.ok:u.fail,d=u.resolve,p=u.reject,f=u.domain;try{c?(i||(2===e.rejection&&ae(e),e.rejection=1),!0===c?a=n:(f&&f.enter(),a=c(n),f&&(f.exit(),l=!0)),a===u.promise?p(H("Promise-chain cycle")):(s=te(a))?s.call(a,d,p):d(a)):p(n)}catch(e){f&&!l&&f.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ie(e)}))}},ne=function(e,t,r){var n,i;V?((n=G.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!J&&(i=u["on"+e])?i(n):e===X&&C("Unhandled promise rejection",r)},ie=function(e){S.call(u,(function(){var t,r=e.facade,n=e.value;if(oe(e)&&(t=N((function(){L?Q.emit("unhandledRejection",n,r):ne(X,r,n)})),e.rejection=L||oe(e)?2:1,t.error))throw t.value}))},oe=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){S.call(u,(function(){var t=e.facade;L?Q.emit("rejectionHandled",t):ne("rejectionhandled",t,e.value)}))},se=function(e,t,r){return function(n){e(t,n,r)}},le=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,re(e,!0))},ue=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw H("Promise can't be resolved itself");var n=te(t);n?I((function(){var r={done:!1};try{n.call(t,se(ue,r,e),se(le,r,e))}catch(t){le(r,t,e)}})):(e.value=t,e.state=1,re(e,!1))}catch(t){le({done:!1},t,e)}}};if(Z&&(q=(W=function(e){y(this,W,M),m(e),n.call(this);var t=F(this);try{e(se(ue,t),se(le,t))}catch(e){le(t,e)}}).prototype,(n=function(e){j(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(q,{then:function(e,t){var r=U(this),n=z(E(this,W));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=L?Q.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&re(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=F(e);this.promise=e,this.resolve=se(ue,t),this.reject=se(le,t)},O.f=z=function(e){return e===W||e===o?new i(e):K(e)},!l&&"function"==typeof d&&$!==Object.prototype)){a=$.then,Y||(p($,"then",(function(e,t){var r=this;return new W((function(e,t){a.call(r,e,t)})).then(e,t)}),{unsafe:!0}),p($,"catch",q.catch,{unsafe:!0}));try{delete $.constructor}catch(e){}h&&h($,q)}s({global:!0,wrap:!0,forced:Z},{Promise:W}),_(W,M,!1,!0),g(M),o=c(M),s({target:M,stat:!0,forced:Z},{reject:function(e){var t=z(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:l||Z},{resolve:function(e){return T(l&&this===o?W:this,e)}}),s({target:M,stat:!0,forced:ee},{all:function(e){var t=this,r=z(t),n=r.resolve,i=r.reject,o=N((function(){var r=m(t.resolve),o=[],a=0,s=1;w(e,(function(e){var l=a++,u=!1;o.push(void 0),s++,r.call(t,e).then((function(e){u||(u=!0,o[l]=e,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=z(t),n=r.reject,i=N((function(){var i=m(t.resolve);w(e,(function(e){i.call(t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},4950:(e,t,r)=>{var n=r(3151),i=r(9065),o=r(7277);n({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},1460:(e,t,r)=>{var n=r(7048),i=r(9065),o=r(1896),a=r(7133),s=r(2784),l=r(7447).f,u=r(8476).f,c=r(8101),d=r(230),p=r(2149),f=r(1198),h=r(1668),_=r(7289),g=r(8927).enforce,v=r(8003),m=r(4946),y=r(8570),b=r(2804),w=m("match"),A=i.RegExp,E=A.prototype,S=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,I=/a/g,T=/a/g,C=new A(I)!==I,O=p.UNSUPPORTED_Y,N=n&&(!C||O||y||b||h((function(){return T[w]=!1,A(I)!=I||A(T)==T||"/a/i"!=A(I,"i")})));if(o("RegExp",N)){for(var x=function(e,t){var r,n,i,o,l,u,p=this instanceof x,f=c(e),h=void 0===t,v=[],m=e;if(!p&&f&&h&&e.constructor===x)return e;if((f||e instanceof x)&&(e=e.source,h&&(t="flags"in m?m.flags:d.call(m))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),m=e,y&&"dotAll"in I&&(n=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),r=t,O&&"sticky"in I&&(i=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),b&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],a={},s=!1,l=!1,u=0,c="";n<=r;n++){if("\\"===(t=e.charAt(n)))t+=e.charAt(++n);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:S.test(e.slice(n+1))&&(n+=2,l=!0),i+=t,u++;continue;case">"===t&&l:if(""===c||_(a,c))throw new SyntaxError("Invalid capture group name");a[c]=!0,o.push([c,u]),l=!1,c="";continue}l?c+=t:i+=t}return[i,o]}(e),e=o[0],v=o[1]),l=a(A(e,t),p?this:E,x),(n||i||v.length)&&(u=g(l),n&&(u.dotAll=!0,u.raw=x(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=e.charAt(n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+e.charAt(++n);return i}(e),r)),i&&(u.sticky=!0),v.length&&(u.groups=v)),e!==m)try{s(l,"source",""===m?"(?:)":m)}catch(e){}return l},R=function(e){e in x||l(x,e,{configurable:!0,get:function(){return A[e]},set:function(t){A[e]=t}})},P=u(A),D=0;P.length>D;)R(P[D++]);E.constructor=x,x.prototype=E,f(i,"RegExp",x)}v("RegExp")},566:(e,t,r)=>{var n=r(7048),i=r(8570),o=r(7447).f,a=r(8927).get,s=RegExp.prototype;n&&i&&o(s,"dotAll",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!a(this).dotAll;throw TypeError("Incompatible receiver, RegExp required")}}})},1283:(e,t,r)=>{"use strict";var n=r(3151),i=r(2591);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},3694:(e,t,r)=>{var n=r(7048),i=r(7447),o=r(230),a=r(1668);n&&a((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},5698:(e,t,r)=>{"use strict";var n=r(3151),i=r(918),o=r(7968),a=r(4086),s=r(2764),l=r(9973),u=r(7020),c=r(8101),d=r(230),p=r(2784),f=r(1668),h=r(4946),_=r(2437),g=r(2597),v=r(8927),m=r(6326),y=h("matchAll"),b="RegExp String",w="RegExp String Iterator",A=v.set,E=v.getterFor(w),S=RegExp.prototype,I=S.exec,T="".matchAll,C=!!T&&!f((function(){"a".matchAll(/./)})),O=i((function(e,t,r,n){A(this,{type:w,regexp:e,string:t,global:r,unicode:n,done:!1})}),b,(function(){var e=E(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,r=e.string,n=function(e,t){var r,n=e.exec;if("function"==typeof n){if("object"!=typeof(r=n.call(e,t)))throw TypeError("Incorrect exec result");return r}return I.call(e,t)}(t,r);return null===n?{value:void 0,done:e.done=!0}:e.global?(""==String(n[0])&&(t.lastIndex=g(r,a(t.lastIndex),e.unicode)),{value:n,done:!1}):(e.done=!0,{value:n,done:!1})})),N=function(e){var t,r,n,i,o,s,u=l(this),c=String(e);return t=_(u,RegExp),void 0===(r=u.flags)&&u instanceof RegExp&&!("flags"in S)&&(r=d.call(u)),n=void 0===r?"":String(r),i=new t(t===RegExp?u.source:u,n),o=!!~n.indexOf("g"),s=!!~n.indexOf("u"),i.lastIndex=a(u.lastIndex),new O(i,c,o,s)};n({target:"String",proto:!0,forced:C},{matchAll:function(e){var t,r,n,i=o(this);if(null!=e){if(c(e)&&!~String(o("flags"in S?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(C)return T.apply(i,arguments);if(void 0===(r=e[y])&&m&&"RegExp"==u(e)&&(r=N),null!=r)return s(r).call(e,i)}else if(C)return T.apply(i,arguments);return t=String(i),n=new RegExp(e,"g"),m?N.call(n,t):n[y](t)}}),m||y in S||p(S,y,N)},2460:(e,t,r)=>{"use strict";var n=r(3151),i=r(2468).end;n({target:"String",proto:!0,forced:r(6359)},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},1377:(e,t,r)=>{"use strict";var n=r(3151),i=r(2468).start;n({target:"String",proto:!0,forced:r(6359)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},586:(e,t,r)=>{"use strict";var n=r(3151),i=r(7968),o=r(8101),a=r(230),s=r(1383),l=r(4946),u=r(6326),c=l("replace"),d=RegExp.prototype,p=Math.max,f=function(e,t,r){return r>e.length?-1:""===t?r:e.indexOf(t,r)};n({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,l,h,_,g,v,m,y=i(this),b=0,w=0,A="";if(null!=e){if((r=o(e))&&!~String(i("flags"in d?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(n=e[c]))return n.call(e,y,t);if(u&&r)return String(y).replace(e,t)}for(l=String(y),h=String(e),(_="function"==typeof t)||(t=String(t)),g=h.length,v=p(1,g),b=f(l,h,0);-1!==b;)m=_?String(t(h,b,l)):s(h,l,b,[],void 0,t),A+=l.slice(w,b)+m,w=b+g,b=f(l,h,b+v);return w<l.length&&(A+=l.slice(w)),A}})},6081:(e,t,r)=>{"use strict";var n=r(2982),i=r(1668),o=r(9973),a=r(4086),s=r(1597),l=r(7968),u=r(2597),c=r(1383),d=r(2186),p=r(4946)("replace"),f=Math.max,h=Math.min,_="$0"==="a".replace(/./,"$0"),g=!!/./[p]&&""===/./[p]("a","$0");n("replace",(function(e,t,r){var n=g?"$":"$0";return[function(e,r){var n=l(this),i=null==e?void 0:e[p];return void 0!==i?i.call(e,n,r):t.call(String(n),e,r)},function(e,i){if("string"==typeof i&&-1===i.indexOf(n)&&-1===i.indexOf("$<")){var l=r(t,this,e,i);if(l.done)return l.value}var p=o(this),_=String(e),g="function"==typeof i;g||(i=String(i));var v=p.global;if(v){var m=p.unicode;p.lastIndex=0}for(var y=[];;){var b=d(p,_);if(null===b)break;if(y.push(b),!v)break;""===String(b[0])&&(p.lastIndex=u(_,a(p.lastIndex),m))}for(var w,A="",E=0,S=0;S<y.length;S++){b=y[S];for(var I=String(b[0]),T=f(h(s(b.index),_.length),0),C=[],O=1;O<b.length;O++)C.push(void 0===(w=b[O])?w:String(w));var N=b.groups;if(g){var x=[I].concat(C,T,_);void 0!==N&&x.push(N);var R=String(i.apply(void 0,x))}else R=c(I,_,T,C,N,i);T>=E&&(A+=_.slice(E,T)+R,E=T+I.length)}return A+_.slice(E)}]}),!!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!_||g)},1720:(e,t,r)=>{"use strict";var n=r(3151),i=r(903).end,o=r(3413)("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;n({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},4069:(e,t,r)=>{"use strict";var n=r(3151),i=r(903).start,o=r(3413)("trimStart"),a=o?function(){return i(this)}:"".trimStart;n({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},2348:(e,t,r)=>{"use strict";var n=r(3151),i=r(903).trim;n({target:"String",proto:!0,forced:r(3413)("trim")},{trim:function(){return i(this)}})},7705:(e,t,r)=>{r(7387)("asyncIterator")},6479:(e,t,r)=>{"use strict";var n=r(3151),i=r(7048),o=r(9065),a=r(7289),s=r(1635),l=r(7447).f,u=r(5323),c=o.Symbol;if(i&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new c(e):void 0===e?c():c(e);return""===e&&(d[t]=!0),t};u(p,c);var f=p.prototype=c.prototype;f.constructor=p;var h=f.toString,_="Symbol(test)"==String(c("test")),g=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var r=_?t.slice(7,-1):t.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},2054:(e,t,r)=>{r(7387)("matchAll")},7100:(e,t,r)=>{"use strict";var n=r(5310),i=r(5385),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",(function(e){return i.apply(o(this),arguments)}))},2848:(e,t,r)=>{r(3860)("Float32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},2126:(e,t,r)=>{r(3860)("Float64",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},4208:(e,t,r)=>{"use strict";var n=r(5792);(0,r(5310).exportTypedArrayStaticMethod)("from",r(4617),n)},532:(e,t,r)=>{r(3860)("Int16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},6514:(e,t,r)=>{r(3860)("Int32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},3848:(e,t,r)=>{r(3860)("Int8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},4035:(e,t,r)=>{"use strict";var n=r(5310),i=r(5792),o=n.aTypedArrayConstructor;(0,n.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,r=new(o(this))(t);t>e;)r[e]=arguments[e++];return r}),i)},4092:(e,t,r)=>{"use strict";var n=r(5310),i=r(4086),o=r(2961),a=r(8432),s=r(1668),l=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",(function(e){l(this);var t=o(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=a(e),s=i(n.length),u=0;if(s+t>r)throw RangeError("Wrong length");for(;u<s;)this[t+u]=n[u++]}),s((function(){new Int8Array(1).set({})})))},2791:(e,t,r)=>{"use strict";var n=r(5310),i=r(9065),o=r(1668),a=r(2764),s=r(4086),l=r(5713),u=r(8482),c=r(7302),d=r(5753),p=r(4289),f=n.aTypedArray,h=n.exportTypedArrayMethod,_=i.Uint16Array,g=_&&_.prototype.sort,v=!!g&&!o((function(){var e=new _(2);e.sort(null),e.sort({})})),m=!!g&&!o((function(){if(d)return d<74;if(u)return u<67;if(c)return!0;if(p)return p<602;var e,t,r=new _(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(r.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));h("sort",(function(e){var t=this;if(void 0!==e&&a(e),m)return g.call(t,e);f(t);var r,n=s(t.length),i=Array(n);for(r=0;r<n;r++)i[r]=t[r];for(i=l(t,function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e)),r=0;r<n;r++)t[r]=i[r];return t}),!m||v)},5681:(e,t,r)=>{r(3860)("Uint16",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},7764:(e,t,r)=>{r(3860)("Uint32",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},8049:(e,t,r)=>{r(3860)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},8239:(e,t,r)=>{r(3860)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}),!0)},3879:(e,t,r)=>{r(2326)},8060:(e,t,r)=>{"use strict";var n=r(3151),i=r(8432),o=r(4086),a=r(1597),s=r(199);n({target:"Array",proto:!0},{at:function(e){var t=i(this),r=o(t.length),n=a(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}}),s("at")},9215:(e,t,r)=>{"use strict";var n=r(3151),i=r(4100).findLastIndex,o=r(199);n({target:"Array",proto:!0},{findLastIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findLastIndex")},8535:(e,t,r)=>{"use strict";var n=r(3151),i=r(4100).findLast,o=r(199);n({target:"Array",proto:!0},{findLast:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findLast")},6524:(e,t,r)=>{r(1127)},3671:(e,t,r)=>{r(3151)({target:"Object",stat:!0},{hasOwn:r(7289)})},9292:(e,t,r)=>{r(2261)},5975:(e,t,r)=>{r(6696)},8852:(e,t,r)=>{r(5698)},6706:(e,t,r)=>{r(586)},8276:(e,t,r)=>{"use strict";var n=r(5310),i=r(4086),o=r(1597),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function(e){var t=a(this),r=i(t.length),n=o(e),s=n>=0?n:r+n;return s<0||s>=r?void 0:t[s]}))},2379:(e,t,r)=>{"use strict";var n=r(5310),i=r(4100).findLastIndex,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3412:(e,t,r)=>{"use strict";var n=r(5310),i=r(4100).findLast,o=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},3995:(e,t,r)=>{var n=r(2230);n.keys().forEach((e=>{g[e.substr(2)]=n(e)}))},4825:(e,t,r)=>{"use strict";r.r(t);r(6479),r(7705),r(2054),r(2326),r(9581),r(5979),r(5075),r(6540),r(6621),r(5711),r(4891),r(3684),r(3657),r(6068),r(1127),r(5985),r(9423),r(3759),r(5007),r(314),r(5463),r(7169),r(2261),r(6696),r(1269),r(4950),r(1460),r(566),r(1283),r(3694),r(5698),r(2460),r(1377),r(6081),r(586),r(2348),r(1720),r(4069),r(2848),r(2126),r(3848),r(532),r(6514),r(8049),r(8239),r(5681),r(7764),r(7100),r(4208),r(4035),r(4092),r(2791),r(3879),r(8060),r(6524),r(3671),r(9292),r(5975),r(8852),r(6706),r(8276),r(8535),r(9215),r(3412),r(2379);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r.g.__polyfill_injecting=!0;var e=!1,t=!1;if(r.g.__wxConfig&&"string"==typeof r.g.__wxConfig.platform)"ios"===r.g.__wxConfig.platform.toLowerCase()?e=!0:"mac"===r.g.__wxConfig.platform.toLowerCase()&&(t=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var n=navigator.userAgent.toLowerCase();n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?e=!0:n.indexOf("miniprogramenv/mac")>=0&&(t=!0)}var i=[];(e||t)&&(r.g.Promise=void 0,i.push("Promise")),r(3869)({usePolyfill:i,useNative:["WeakMap"]}),r(4825),r(3995),delete r.g.__polyfill_injecting})()})();var v=!1,m=function(e){e()},y,b;(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{e.d(r,{default:()=>nt});var a={};e.r(a),e.d(a,{emitFrameworkError:()=>ne,emitUnhandledError:()=>ie,emitUnhandledRejection:()=>Z,onFrameworkError:()=>ae,onUnhandledError:()=>se,onUnhandledRejection:()=>oe});var l=g.objectSpread2,u=e.n(l),d=e.g.__wxLibrary,p=e.g.__wxConfig,f=d.envType,_=d.contextType,v="Service"===f,m="WebView"===f,b="Worker"===f,w=m||v&&0===_.indexOf("App:"),A=v&&0===_.indexOf("Game:"),E=!!p.isIsolateContext,S=E&&v&&_.indexOf("MainContext")>=0,I=E&&v&&_.indexOf("SubContext")>=0,T=I&&_.indexOf("Safe")>=0,C=S||I,O="wxlib"===p.workerContentType,N=m||S||T||O,x=function(){var e,t,r=p.platform;if(!r&&"string"==typeof(null===(e=window)||void 0===e||null===(t=e.navigator)||void 0===t?void 0:t.userAgent)){var n=window.navigator.userAgent.toLowerCase();n.indexOf("devtools")>=0?r="devtools":n.indexOf("miniprogramenv/windows")>=0?r="windows":n.indexOf("miniprogramenv/mac")>=0?r="mac":n.indexOf("miniprogramenv/mina")>=0?r="mina":n.indexOf("iphone")>=0||n.indexOf("ipad")>=0?r="ios":n.indexOf("android")>=0&&(r="android")}return(r||"unknown").toLowerCase()}(),R=t,P={platform:x,SDKVersion:void 0===R||"develop"===R.version?"9.9.9":R.version,isIsolateContext:C,isGame:A,isApp:w,isMainContext:S,isSubContext:I,isSafeEnv:N,isService:v,isWebView:m,isWorker:b,isWidget:!1,typeStr:I?"SubContext":f,isWXLibWorker:O,workerType:"user",contextName:"",mayHaveSnapShot:!!d.mayHaveSnapshot},D=()=>{},L="devtools"===P.platform;"undefined"!=typeof performance&&performance.now;function B(e,t=(()=>D)){return e.reduce(((e,r)=>(e[r]=t(r),e)),{})}function k(){var t=y||e.g.__wxConfig;if(t&&"debug"in t&&void 0!==t.debug)return!!t.debug}var M=()=>{},F=["log","info","warn","error","debug"],j=B(F),U=["log","info","warn","error","profile","profileSync","traceBegin","traceEnd"],$=(()=>{var e=B(U);return e})(),W=$,q=Symbol("error"),H=Symbol("slow");class G{constructor(){this.$=Object.create(null),this.$$=Object.create(null)}onInternalEvent(e,t){var r=this.$$[e];return r?r.push(t):this.$$[e]=[t],this}emitPrivate(e,...t){var r=this.$$[e];return!!(r&&r.length>0)&&(r.forEach((e=>{try{e(...t)}catch(e){console.error("EventEmitter error:",e)}})),!0)}onError(e){return this.onInternalEvent(q,e),this}onSlow(e){return this.onInternalEvent(H,e),this}_privEmit(e,t,...r){var n=this.$[e];if(n&&n.length>0){var i,o=!1;for(var a of n){if(0!==a.count)try{var s=Date.now();i=a.cb(...r);var l=Date.now();l-s>G.SLOW_CALLBACK_THRESHOLD&&this.emitPrivate(H,e,s,l,a.cb)}catch(t){if(!this.emitPrivate(q,e,t))throw t}if(a.count>0&&a.count--,0===a.count&&(o=!0),!1===i&&t.cancelable)break}return o&&(this.$[e]=n.filter((e=>0!==e.count))),!0}return!1}emit(e,...t){return this._privEmit(e,{},...t)}emitCancelable(e,...t){return this._privEmit(e,{cancelable:!0},...t)}many(e,t,r,n={}){if(!t)return this;var i={count:r,cb:t},o=this.$[e];return o?n.prepend?o.unshift(i):o.push(i):this.$[e]=[i],this}on(e,t,r){return this.many(e,t,-1,r)}once(e,t,r){return this.many(e,t,1,r)}off(e,t){var r=this.$[e];if(!r)return!1;var n=r.findIndex((e=>e.cb===t));return!(n<0)&&(r.splice(n,1),!0)}}G.SLOW_CALLBACK_THRESHOLD=50;var Q=new G,z="unhandlederror",K="unhandledrejection",V="frameworkerror",J=new WeakMap;var X=Object.prototype.hasOwnProperty;function Y(e){var t;if(e&&"Object"===(null===(t=e.constructor)||void 0===t?void 0:t.name)&&"string"==typeof e.message&&"string"==typeof e.stack){var r=new Error(e.message);return Object.assign(r,e),r}return e}function Z(e,t){e=Y(e),je.onLoad((()=>{Q.emit(K,{reason:e,promise:t})||console.error("Uncaught (in promise)",e)}),!0)}var ee,te=!1,re=!1;function ne(e,t){if(e instanceof Error&&t&&(e.message=`${t} fail: ${e.message}`),e=Y(e),y.isSnapshoting)throw e;je.onLoad((()=>{if(te)console.error("[ErrorHandler] recursive framework error detected.",e);else{te=!0;try{Q.emit(V,e)||ie(e)}catch(e){console.error("Framework",e)}te=!1}}),!0)}function ie(e){if(e=Y(e),y.isSnapshoting)throw e;je.onLoad((()=>{if(re)console.error("[ErrorHandler] recursive uncaught error detected.",e);else{re=!0;try{Q.emit(z,e)||console.error("Uncaught",e)}catch(e){console.error("Uncaught",e)}re=!1}}),!0)}function oe(e){Q.on(K,e)}function ae(e){Q.on(V,e)}function se(e){Q.on(z,e)}"object"==typeof(ee=e.g)&&"function"==typeof ee.addEventListener?(ee.addEventListener("unhandledrejection",(e=>{Z(e.reason,e.promise),e.reason&&e.preventDefault()})),ee.addEventListener("error",(e=>{var t,r;ie(e.error||{message:e.message,stack:`${e.message}\nEmpty stack, maybe muted error. (xweb=${(null===(t=ee.navigator)||void 0===t||null===(r=t.userAgent)||void 0===r?void 0:r.toUpperCase().indexOf("XWEB"))>=0})`}),e.error&&e.preventDefault()}))):void 0===ee.onunhandledrejection&&Object.defineProperty(ee,"onunhandledrejection",{value(e={}){var t,r;X.call(e,"type")?(t={type:e.type,reason:e.reason,promise:e.promise},(r=t.promise)&&(J.has(r)||setTimeout((()=>{var e=J.get(r);0===(null==e?void 0:e.type)&&Z(e.reason,e.promise),J.delete(r)}),0),J.set(r,t))):Z(e.reason,e.promise)}});var le,ue=JSON.parse,ce=JSON.stringify;function de(e){return ue(ce(e))}function pe(e){e.platform=P.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),e.sdkVersion=e.SDKVersion=P.SDKVersion,e.isReady=!1,e.onReady=je.onStart}function fe(e){var r;pe(e),P.isSubContext||(e.preload=!0===e.preload),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio);var n=null===(r=t.debugOptions)||void 0===r?void 0:r.overwriteExpt;n&&(e.expt=Object.assign(e.expt||{},n))}function he(e){if(fe(e),e.isReady=!0,e.appLaunchInfo=e.appLaunchInfo||{},e.preloadType=e.preloadType||e.appLaunchInfo.preloadType||e.preload,"ios"===e.platform){var t=(o=e.appLaunchInfo.clickTimestampInMs)?o+9782784e5-(new Date).getTimezoneOffset()/60*3600*1e3:0,r=Number.MAX_SAFE_INTEGER,n=e.instanceId;if(n)try{var i=n.split("&").filter((e=>0===e.indexOf("ts=")));i.length>0&&(r=parseInt(i[0].slice(3),10))}catch(e){ne(e,"parseInstanceId")}e.coldLaunchTime=Math.min(t,r)}else e.coldLaunchTime=e.appLaunchInfo.clickTimestamp||0;var o}var _e=!(null===(le=t.features)||void 0===le||!le.pruneWxConfigByPage),ge=Object.defineProperty,ve=["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"];function me(e,t,r,n){ge(e,r,{configurable:!0,enumerable:!0,get(){if(r in t)return t[r];try{var e;j.warn("[__wxConfig usage] developer uses __wxConfig."+r),"function"==typeof(null===(e=o)||void 0===e?void 0:e.reportKeyValue)&&o.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+r,force:!0})}catch(e){ne(e,"report __wxConfig usage")}try{return"function"!=typeof n?n:n()}catch(e){return void ne(e,`read mock wxConfig.${r}`)}},set(e){t[r]=e}})}var ye=P.isSafeEnv,be=Object.create(null),we=P.isService?function(e){return new Proxy(e,{set(e,t,r,n){if("__siblings__"===t)return Reflect.set(e,t,r,n);var i=Reflect.get(e,"__siblings__",n);return Array.isArray(i)?(i.length>1&&j.log(`[WXConfig] write __wxConfig.${t.toString()}, sync to all contexts.`),i.forEach((e=>{Reflect.set(e,t,r)})),!0):Reflect.set(e,t,r,n)}})}(be):be,Ae=e=>{},Ee="wxConfig:updatePage";function Se(t,r=!1){return Ae(!1),be.currentPhase="onStart",void 0===t||(r?(Object.assign(be,t),Object.defineProperty(be,"__siblings__",{value:t.__siblings__,enumerable:!1,writable:!1,configurable:!1})):(Object.assign(be,ye?t:de(t)),he(be),function(t,r){var n;Array.isArray(null==t||null===(n=t.tabBar)||void 0===n?void 0:n.list)&&t.tabBar.list.forEach((e=>{delete e.iconData,delete e.selectedIconData})),delete t.permission;var i=t.subPackages||t.subpackages;Array.isArray(i)&&i.length>0&&(i.forEach((e=>{delete e.pages})),t.subPackages=t.subpackages=i),"devtools"===t.platform&&(t.__globalComponentsCount=Object.keys(t.usingComponents||{}).length),_e&&(P.isSubContext||(delete t.usingComponents,Object.values(t.page||{}).forEach((e=>{null!=e&&e.window&&delete e.window.usingComponents})),t._preloadRule=t.preloadRule||{},t._page=t.page||{},delete t.preloadRule,delete t.page),t.updatePage=function(e,t){null!=t&&t.window&&delete t.window.usingComponents,r(e,t)},t.updatePreloadRule=function(e,r){t.preloadRule=t.preloadRule||{},t.preloadRule[e]=r}),e.g.__wxConfig.page=e.g.__wxConfig.page||{},t.page=t.page||{}}(be,((e,t)=>{je.emit(Ee,{key:e,value:t})})),Object.defineProperty(be,"__siblings__",{value:[],enumerable:!1,writable:!1,configurable:!1})),Array.isArray(be.__siblings__)&&be.__siblings__.push(be),be.onPageUpdate((({key:e,value:t})=>{be.page=be.page||{},be.page[e]=be.page[e+".html"]=t,n&&(n[e+".html"]=de(t))})),ye||(n=function(){var t=e.g.__wxConfig,r={},n={},i=_e?{}:t.page||{};try{me(n,r,"deprecated",!0),ve.forEach((e=>{if(e in t){var o=t[e];switch(e){case"page":me(n,r,e,i);break;case"env":me(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:o.USER_DATA_PATH})));break;case"accountInfo":me(n,r,e,{appId:o.appId,icon:o.icon,nickname:o.nickname});break;case"appLaunchInfo":me(n,r,e,(()=>(console.warn("[Deprecation] __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{})));break;case"wxAppInfo":me(n,r,e,{maxRequestConcurrent:o.maxRequestConcurrent,maxUploadConcurrent:o.maxUploadConcurrent,maxDownloadConcurrent:o.maxDownloadConcurrent,maxWorkerConcurrent:o.maxWorkerConcurrent,maxWebsocketConnect:o.maxWebsocketConnect});break;default:me(n,r,e,o)}}})),e.g.__wxConfig=n}catch(r){ne(r,"mockGloablWxConfig"),e.g.__wxConfig=t}return i}())),we;var n}var Ie=new G,Te=new G,Ce={},Oe="WeixinJSBridgeReady",Ne="libraryEnd",xe="load",Re="postLoad",Pe="start",De="postStart";function Le(e,t){if(e in Ce)try{t(Ce[e])}catch(t){ne(t,"LifeCycle."+e)}else Te.once(e,t)}function Be(e,t){return!(e in Ce)&&(Ce[e]=t,Te.emit(e,t))}var ke,Me=Le.bind(null,Ne),Fe=Le.bind(null,xe),je={EventEmitter:G,on:Ie.on.bind(Ie),emit:Ie.emit.bind(Ie),once:Ie.once.bind(Ie),getIsLoaded:()=>xe in Ce,getIsStarted:()=>Pe in Ce,onBridgeReady(e){Le(Oe,e)},setWeixinJSBridge(e){Be(Oe,e)},onLibraryEnd:Me,onCreate(e){e()},onLoadInstant(e){y.isSnapshoting&&P.mayHaveSnapShot?Fe((()=>{e()})):e()},onLoad(e,t=!1){t?Me((()=>{Fe(e)})):Fe(e)},_onPostLoad:Le.bind(null,Re),onStart:Le.bind(null,Pe),onPostStart:Le.bind(null,De)};Te.onError(((e,t)=>{j.error(`[LifeCycle/${P.typeStr}] ${e.toString()} failed: `,t),ne(t,"LifeCycle."+e.toString())})).onSlow(((e,t,r,n)=>{W.warn(`[LifeCycle/${P.typeStr}] slow ${e.toString()} callback (${r-t}ms)\n${n+""}`)})),e.g.__wxLibrary.onEnd=function(){Be(Ne)},ke=e.g.__wxConfig,be.currentPhase="onCreate",void 0===ke||(Ae(!1),Object.assign(be,ye?ke:de(ke)),pe(be),Ae(!0));var Ue=!1,$e=!1;function We(){Ue||$e?ne(new Error(`LifeCycle error: undesired onLoad(${Ue}/${$e})`)):(Ue=!0,y=function(e){return be.currentPhase="onLoad",void 0===e||(Ae(!1),Object.assign(be,ye?e:de(e)),be.onPageUpdate=je.on.bind(null,Ee),fe(be),Ae(!0)),we}(e.g.__wxConfig),"undefined"!=typeof __appserviceSDKExport__&&__appserviceSDKExport__.setConsole&&__appserviceSDKExport__.setConsole(),Be(xe,y),P.isSubContext?y.__readyHandler=e=>{qe(e,!0)}:!0===y.preload?je.onBridgeReady((t=>{t.on("onWxConfigReady",(()=>{qe(e.g.__wxConfig)}))})):je.onLibraryEnd((()=>{qe(e.g.__wxConfig)})),Be(Re,y))}function qe(e,t=!1){if(Ue&&!$e){$e=!0;var r=Date.now();"onReadyStart"in(y=Se(e,t))||(y.onReadyStart=r),Be(Pe,y),y.onReadyEnd=Date.now(),Be(De,y)}else ne(new Error(`LifeCycle error: undesired onStart(${Ue}/${$e})`))}(y=we).isSnapshoting?e.g.WeixinSnapshot={snapshotContextReady(){delete e.g.WeixinSnapshot,y.isSnapshoting=!1,We()}}:P.mayHaveSnapShot?je.onLibraryEnd(We):We();class He{constructor(e,t,r){this.num=e,this.type=t,this.bindingFn=void 0,this.bindingFn="function"==typeof r?r:M}}var Ge={ALL:new He(Number.MIN_VALUE,"ALL"),DEBUG:new He(5e3,"DEBUG",console.debug),LOG:new He(1e4,"LOG",console.log),INFO:new He(2e4,"INFO",console.info),WARN:new He(3e4,"WARN",console.warn),ERROR:new He(4e4,"ERROR",console.error),OFF:new He(Number.MAX_VALUE,"OFF")},Qe=(e,t)=>({debug:e(Ge.DEBUG,t),log:e(Ge.LOG,t),info:e(Ge.INFO,t),warn:e(Ge.WARN,t),error:e(Ge.ERROR,t)}),ze=Ge.INFO,Ke=(()=>{if(P.isWorker||P.isWidget){return Object.assign({createLogger:function(){return j}},j)}return P.isSubContext&&P.isIsolateContext?(e=[],t=(t,r)=>(...n)=>{e.push({level:t,logs:n,category:r})},r=()=>{setTimeout((()=>{var t=s.__isFromMainContext?s.__mergeSubContextLogs:null;t?(t(e),e=[]):r()}),1e3)},je.onStart(r),u()(u()({},Qe(t)),{},{createLogger:e=>Qe(t,"string"==typeof e?e:"default"),__isFromMainContext:!1})):(()=>{var e=P.platform,t="android"!==e,r=[],n=function(t){"android"!==e?h.invoke("systemLog",{dataArray:t.map((t=>{return{message:`\n${r=t.date,n=("0"+(r.getMonth()+1)).slice(-2),i=("0"+r.getDate()).slice(-2),o=("0"+r.getHours()).slice(-2),a=("0"+r.getMinutes()).slice(-2),s=("0"+r.getSeconds()).slice(-2),l=("00"+r.getMilliseconds()).slice(-3),u=r.getFullYear()+"-"+n+"-"+i,c=o+":"+a+":"+s+"."+l,"ios"===e?u+" "+c+"000"+(r.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):u+" "+(r.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+c} [${t.level.type[0].toUpperCase()}][wxapplib]] ${t.content}`};var r,n,i,o,a,s,l,u,c}))}):t.forEach((e=>{e.level.bindingFn("[wxapplib]] "+e.content)}))},i=e=>{if(e instanceof Error)return`${e.message}\n${e.stack}`;if(e&&"string"==typeof e.stack&&"string"==typeof e.message)return`${e.message}\n${e.stack}`;switch(typeof e){case"bigint":case"boolean":case"function":case"number":case"symbol":return e.toString();case"string":return e;case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t;default:return}},o=function(e,o){return function(...a){var s;if(o&&Array.prototype.unshift.call(a,"["+o+"]"),(k()||e.num>=Ge.WARN.num)&&(null===(s=j[e.type.toLowerCase()])||void 0===s||s.call(j,...a)),e.num>=ze.num){var l=Array.prototype.slice.call(a).map(i).join(" ");if(t){var u=new Date;r&&r.length>1024&&r.shift(),r.push({date:u,level:e,content:l})}else n([{level:e,content:l}])}}};return je.onStart((()=>{setTimeout((function e(){setTimeout(e,4e3),0!==r.length&&(n(r),r=[])}),4e3)})),u()(u()({},Qe(o)),{},{createLogger:function(e){return Qe(o,"string"==typeof e?e:"default")},__mergeSubContextLogs:e=>{Array.isArray(e)&&e.forEach((e=>{var{level:t,logs:r,category:n}=e;o(t,n)(...r)}))},__isFromMainContext:!0})})();var e,t,r})();je.onLoad((()=>{Ke.info("[BaseLibVersion] "+JSON.stringify(t))}));var Ve,Je=Ke,Xe=B(["log","info","warn","error"],(e=>function(...t){(L||k())&&console[e]("[system]",...t)}));function Ye(){return Ve||(void 0!==c&&void 0!==c.WebAssembly?c.WebAssembly:void 0!==globalThis.WebAssembly?globalThis.WebAssembly:void 0)}je.onLoad((()=>{Ve=Ye()}));var Ze=Object.create(null);Object.defineProperty(Ze,"WebAssembly",{enumerable:!0,get:Ye});var et=Ze,tt=e.g,rt=u()(u()(u()({env:P,global:tt,get isConfigReady(){return je.getIsStarted()},get isStarted(){return je.getIsStarted()},get isLoaded(){return je.getIsLoaded()}},je),a),{},{wxConsole:j,wxPerfConsole:W,wxNativeConsole:Je,libConsole:Xe,libGlobal:et,globalShare:{}});void 0!==n&&(i=function(){return"return this"===arguments[arguments.length-1]?function(){return tt}:new n(...arguments)},i.prototype=n.prototype);var nt=rt})(),b=r.default})();var w=b.wxConsole,A=b.wxPerfConsole,s=b.wxNativeConsole,E=b.libConsole,S=b.libGlobal,I,T,C,O,N,x,R,P;(()=>{var e={642:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new O(n||[]);return o._invoke=function(e,t,r){var n=d;return function(i,o){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===i)throw o;return x()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=I(a,r);if(s){if(s===_)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var l=c(e,t,r);if("normal"===l.type){if(n=r.done?h:p,l.arg===_)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=h,r.method="throw",r.arg=l.arg)}}}(e,r,a),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",_={};function g(){}function v(){}function m(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==r&&n.call(w,o)&&(y=w);var A=m.prototype=g.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,a,s){var l=c(e[i],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function I(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method))return _;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:x}}function x(){return{value:t,done:!0}}return v.prototype=A.constructor=m,m.constructor=v,v.displayName=l(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new S(u(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(A),l(A,s,"Generator"),A[o]=function(){return this},A.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}(e.exports);try{I=t}catch(e){i("r","regeneratorRuntime = r")(t)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}(()=>{r(642);var e=()=>{var e={};Object.keys(I).forEach((t=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:()=>I[t],set(r){delete e[t],e[t]=r}})})),globalThis.regeneratorRuntime=e};"function"==typeof y.onReady?y.onReady((t=>{"devtools"===t.platform||["develop","trial"].includes(t.envVersion)||e()})):e()})()})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>l});var r,n=Object.prototype.toString,o=(Object.getPrototypeOf,Object.getOwnPropertyNames,Object.getOwnPropertyDescriptor,Object.defineProperty,{}),a={subscribeHandler:(e,t,n={})=>{if(void 0!==e&&e===r)return t=t.valueOf(),Array.isArray(o[t])?o[t].map((e=>e(n))):void 0}};var s={__init__:(e,t)=>{void 0===r&&void 0!==e&&(r=e).register(e,a,t)},publish:(e,t={})=>{var i,o=(i=t,n.call(i).split(" ")[1].split("]")[0]);if("Object"!==o&&"Undefined"!==o)throw new Error("params should be an object.");var s=e.valueOf(),l=t||{};if(r&&"function"==typeof r.subscribeHandler)return r.subscribeHandler(r,a,s,l)},subscribe:(e,t)=>{Array.isArray(o[e])||(o[e]=[]),o[e].push(t)}};b.onLoad((()=>{s.__init__(WeixinJSContext,e.g.WeixinJSContextId),delete s.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId}));var l=s;T=t.default})(),(()=>{var e={632:(e,t,r)=>{"use strict";r.r(t);var n=(()=>(y.onReady((()=>{n!==y&&void 0!==n&&Object.assign(n,y)})),y))();t.default=n},401:(e,t,r)=>{"use strict";r.r(t),r.d(t,{reportDeprecatedAPI:()=>n});var n=e=>{o.reportKeyValue({key:"DeprecatedAPI",value:e})}},387:(e,t,r)=>{var{reportDeprecatedAPI:n}=r(401),{default:i}=r(632);e.exports={hijack:function(e=!0,t=!0){!function(e){if("function"==typeof globalThis.Function){var t={};r.prototype=globalThis.Function.prototype,r.prototype.constructor=r,globalThis.Function=r}function r(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return e?t:{}}}}(t),"undefined"!=typeof eval&&("ios"===i.platform&&r.g.__isAppServiceRemoteDebugMode__||(globalThis.eval=void 0)),e&&function(){if("undefined"!=typeof setTimeout){var e=setTimeout;globalThis.setTimeout=function(t,r=0){if("function"!=typeof t)throw new TypeError(`setTimeout expects a function as first argument but got ${typeof t}.`);var n=R.surroundThirdByTryCatch(t,"at setTimeout callback function"),i=[].slice.call(arguments,2);return e((()=>{n.apply(globalThis,i)}),r)};var t=setInterval;globalThis.setInterval=function(e,r){if("function"!=typeof e)throw new TypeError(`setInterval expects a function as first argument but got ${typeof e}.`);var n=R.surroundThirdByTryCatch(e,"at setInterval callback function"),i=[].slice.call(arguments,2);return t((()=>{n.apply(globalThis,i)}),r)}}}(),"undefined"!=typeof WebAssembly&&["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((e=>{if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:()=>(n("globalWa"),t),set:t=>{Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}}},585:()=>{if("undefined"==typeof navigator){try{new i('var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});var FakeGeneratorFunction = function () {};FakeGeneratorFunction.prototype = GeneratorFunctionProto;Object.defineProperty(GeneratorFunctionProto, "constructor", { value: FakeGeneratorFunction });')()}catch(e){}try{new i('var AsyncFunctionProto = Object.getPrototypeOf(async function () {});var FakeAsyncFunction = function () {};FakeAsyncFunction.prototype = AsyncFunctionProto;Object.defineProperty(AsyncFunctionProto, "constructor", { value: FakeAsyncFunction });')()}catch(e){}try{new i('var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});var FakeAsyncGeneratorFunction = function () {};FakeAsyncGeneratorFunction.prototype = AsyncGeneratorFunctionProto;Object.defineProperty(AsyncGeneratorFunctionProto, "constructor", { value: FakeAsyncGeneratorFunction });')()}catch(e){}}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{bridgeGlobalInstanceOf:()=>ee,deepFreezeGlobalObjs:()=>z,deepFreezeObj:()=>D,deepFreezeObjProperty:()=>P,doNotWriteGlobalObjs:()=>Q,doNotWriteObj:()=>M,doNotWriteObjProperty:()=>L,globalEsHiddenObjs:()=>t,globalEsObjs:()=>i,hijack:()=>K.hijack,overwriteSetPrototypeOf:()=>G});r(585);var e=globalThis.Function,t=[()=>Object.getPrototypeOf(Uint8Array.prototype).constructor,()=>new e("return Object.getPrototypeOf((function* () {})()).constructor")(),()=>new e("return Object.getPrototypeOf(function* () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function () {}).constructor")(),()=>new e("return Object.getPrototypeOf(async function* () {}).constructor")()].map((e=>{try{return e()}catch(e){}})).filter(Boolean),i=["AggregateError","Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","globalThis","Infinity","Int16Array","Int32Array","Int8Array","Intl","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","WebAssembly","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"],o=["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"],a=globalThis,s=r(632),l=(()=>s.default.platform)(),u=(()=>"ios"===l)(),c=(()=>"mac"===l)();var d=/^\s*at .*(\S+:\d+|\(native\))/m,p=/^(eval@)?(\[native code\])?$/;function f(e,t=1/0){if("string"!=typeof e.stack)throw new Error("Cannot parse given Error object");var r=e.stack;return u||c?function(e,t){for(var r=[],n=e.split("\n"),i=0,o=0;i<n.length&&o<t;++i){var a=n[i];if(!p.test(a)){++o;var s=a.indexOf("@");if(-1===s){var l=h(a);r.push({fileName:l.URI,lineNumber:l.line,columnNumber:l.column,source:a})}else{var u=a.substring(0,s),c=h(a.substr(s+1));r.push({functionName:u,fileName:c.URI,lineNumber:c.line,columnNumber:c.column,source:a})}}}return r}(r,t):function(e,t){for(var r=[],n=e.split("\n"),i=0,o=0;i<n.length&&o<t;++i){var a=n[i];d.test(a)&&(r.push(a),++o)}return r.map((e=>{e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=t.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(t=r?t.replace(r[0],""):t).split(/\s+/).slice(1),i=h(r?r[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(i[0])>-1?void 0:i[0],lineNumber:i[1],columnNumber:i[2],source:e}}))}(r,t)}function h(e){var t=/(?::(\d+))?(?::(\d+))?$/.exec(e);return t?{URI:e.substring(0,e.length-t[0].length),line:t[1],column:t[2]}:{URI:e}}var _=Object.freeze,g=Object.setPrototypeOf,v=Object.defineProperty,m=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,b=Object.getOwnPropertySymbols,w=Object.getPrototypeOf,A=Object.preventExtensions;var E=[[e=>!/(WAServiceMainContext|WAGame)\.js/.test(e)]];function S(){var e,t,r=Date.now(),n=f(new Error,3),i=n[1],o=n[2],a=!(i.fileName&&o.fileName&&o.fileName!==i.fileName&&(e=o.fileName,t=i.fileName,!E.some((r=>r.some((t=>t(e)))&&r.some((e=>e(t)))))));return Date.now()-r,a}function I(e,t=!1){if("function"==typeof e||"object"==typeof e&&null!==e){var r=m(e,"__proto__");r&&!r.configurable||(r||Object.isExtensible(e))&&v(e,"__proto__",{get(){return w(this)},set(r){if(this===e)t&&S()&&g(e,r);else{if("function"!=typeof this&&("object"!=typeof this||null===e))return;g(this,r)}},enumerable:!1,configurable:!1})}}var T=new Map,C=(e,t,r)=>{T.has(e)||T.set(e,new Map);var n=T.get(e);n.has(t)?Object.assign(n.get(t),r):n.set(t,r)};function O(e,t,r=!1){if("function"!=typeof e&&("object"!=typeof e||null===e))return!1;try{var n=m(e,t);return!!n&&(n.configurable&&(v(e,t,{get:n.get||(()=>n.value),set(i){if(this===e)r&&S()&&(n.set?n.set.call(this,i):n.writable&&(n.value=i));else{if("function"!=typeof this&&"object"!=typeof this)return;!function(e,t,r){try{"__proto__"===t?g(e,r):v(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}catch(e){}}(this,t,i)}},enumerable:n.enumerable,configurable:!1}),r&&C(e,t,n)),!n.get&&("function"==typeof n.value||"object"==typeof n.value&&null!==n.value))}catch(e){throw e.message,e}}var N=new WeakSet;function x(e){N.add(e)}function R(e){return N.has(e)}function P(e,t,r){O(e,t)&&D(e[t],r)}function D(e,t){if(e&&!R(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis)if(e!==Error){x(e);for(var r=y(e),n=b(e),i=0;i<r.length;++i)P(e,r[i],t);for(var o=0;o<n.length;++o)P(e,n[o],t);t?A(e):I(e,!1)}else if(t){var a=e=>{if(e&&!R(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){x(e),_(e);for(var t=y(e),r=b(e),n=0;n<t.length;++n)a(e[t[n]]);for(var i=0;i<r.length;++i)a(e[r[i]])}};a(Error)}}function L(e,t){O(e,t,!0)&&M(e[t])}var B=new WeakSet;function k(e){return B.has(e)}function M(e){if(e&&!k(e)&&("function"==typeof e||"object"==typeof e)&&e!==globalThis){!function(e){B.add(e)}(e);for(var t=y(e),r=b(e),n=0;n<t.length;++n)L(e,t[n]);for(var i=0;i<r.length;++i)L(e,r[i]);I(e,!0)}}var F=Object.prototype.hasOwnProperty,j=Object.defineProperty,U=Object.defineProperties,$=Object.getOwnPropertyNames,W=Object.getOwnPropertySymbols,q=Object.getOwnPropertyDescriptor,H=!1,G=function(){H||(H=!0,j(a.Object,"setPrototypeOf",{value:(e,t)=>(e.__proto__=t,e),configurable:!0}),j(a.Object,"defineProperty",{value(e,t,r){if(!k(e))return j(e,t,r);if(!S())return r;var n=q(e,t);if(!n||n.configurable){var i=j(e,t,r);return L(e,t),i}return C(e,t,r),r},configurable:!0}),j(a.Object,"defineProperties",{value(e,t){if(!k(e))return U(e,t);if(!S())return t;var r=r=>{var n=q(e,r);if(!n||n.configurable){var i=j(e,r,t[r]);return L(e,r),i}return C(e,r,t[r]),t[r]};return $(t).forEach(r),W(t).forEach(r),t},configurable:!0}))},Q=function(e=[]){try{for(var r=[...i,...o,...t,...e],n=(Date.now(),0);n<r.length;++n){var s=r[n],l=typeof s;"string"===l?F.call(a,s)&&L(a,s):"function"!==l&&"object"!==l||M(s)}Date.now()}catch(e){}},z=function(e=[],r=!1){try{for(var n=[...i,...o,...t,...e],s=(Date.now(),0);s<n.length;++s){var l=n[s],u=typeof l;"string"===u?F.call(a,l)&&P(a,l,r):"function"!==u&&"object"!==u||D(l,r)}Date.now()}catch(e){}},K=r(387),V=Object.prototype.isPrototypeOf,J=Object.defineProperty,X=Symbol.hasInstance,Y=function(e){return!("function"!=typeof this||!Z(e))&&((e,t)=>V.call(t.prototype,e))(e,this)},Z=e=>"object"==typeof e?null!==e:"function"==typeof e;function ee(e,t){for(var r=function(r){var n=e[r],i=t[r];if("function"!=typeof n)return"continue";var o=n[X]||Y,a=i[X]||Y;J(n,X,{value(e){return o.call(this,e)||a.call(i,e)},writable:!0,enumerable:!1,configurable:!0}),J(i,X,{value(e){return a.call(this,e)||o.call(n,e)},writable:!0,enumerable:!1,configurable:!0})},n=0;n<e.length;++n)r(n)}})(),C=n})(),(()=>{var e={449:(e,t,r)=>{var n;r.d(t,{k:()=>o,r:()=>i}),b.onLoad((()=>{n=[...C.globalEsObjs.map((e=>globalThis[e])),...C.globalEsHiddenObjs].filter(Boolean)}));var i=()=>n;function o(e){var t=e.getGlobals(),r=i();t.length===r.length?C.bridgeGlobalInstanceOf(i(),t):b.emitFrameworkError(new Error("remoteGlobals mismatch with currentGlobals"),"bridgeGlobalInstanceOf")}},425:(e,t,r)=>{r.d(t,{A:()=>n});var n=(globalThis.__wxLibrary||{}).contextType}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{_getSelfBridgeContext:()=>o,bridgeContext:()=>a});var e=r(449),t=r(425),i=new Map;function o(){return{getGlobals:e.r,contextType:t.A,setBridged:(e,t)=>{i.set(e,t)}}}function a(r){var n=r._getSelfBridgeContext();t.A,n.contextType;try{if(i.has(n.contextType))return;i.set(n.contextType,n),n.setBridged(t.A,o()),(0,e.k)(n)}catch(e){t.A,n.contextType}}})(),O=n})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{condom:()=>ce,condomWX:()=>ue});var r={request:3,getStorageSync:3,getStorage:3,getCookies:1};function n(e,t){return function(...r){try{return e(...r)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?o.thirdErrorReport({error:e,extend:t}):o.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function a(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}var s=n(a,"stringToAnyType");var l=e=>"object"==typeof e&&null!==e&&!e._isVue||"function"==typeof e,u=(()=>Object.prototype.toString)(),c=(()=>Object.prototype.hasOwnProperty)(),d=(()=>String.prototype.slice)(),p=i.prototype.call.bind(u),f=i.prototype.call.bind(c),h=i.prototype.call.bind(d),_=["__proto__","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__ob__","__su__","$mobx"],g=(()=>Object.assign)(),v=(()=>Object.getOwnPropertyNames)(),m=(()=>Object.getOwnPropertySymbols)(),y=(()=>Object.getOwnPropertyDescriptors)(),b=(()=>Object.defineProperty)(),w=(()=>Object.getPrototypeOf)(),A=(()=>Object.setPrototypeOf)(),E=(()=>Reflect.get)(),S=(()=>Reflect.set)(),I=(()=>Reflect.deleteProperty)(),T=(()=>Reflect.construct)(),C=(()=>Reflect.apply)();var O=new WeakSet,x=JSON.parse,R=e=>{var t=x(e);return q(t),t},P=(e,t)=>{var r=s(e,t);return q(r),r},D=new WeakSet,L=(e,t,r,n,i,o,a,s)=>a||(a=function(...n){var i=O.has(e),o=D.has(e),s=n.map(((e,t)=>{if(0!==t||"object"!=typeof e||null===e)return e;var n=g({},e);if(i){var{success:a,fail:s,complete:l}=e;f(e,"success")&&(n.success="function"==typeof a?r(((...e)=>{a(...e)})):a),f(e,"fail")&&(n.fail="function"==typeof s?r(((...e)=>{s(...e)})):s),f(e,"complete")&&(n.complete="function"==typeof l?r(((...e)=>{l(...e)})):l)}return o&&g(n,{_jsonParse:R,_stringToAnyType:P}),n}));return!o||"object"==typeof n[0]&&null!==n[0]||s.push({_jsonParse:R,_stringToAnyType:P}),i||(s=r(n)),t(this instanceof a?T(e,s,e):C(e,i?this:r(this,{forceUpdate:!0}),s))},n.set(e,a),i.set(a,e),B(e,t,r,n,i,o,a,s),a),B=(e,t,r,n,i,o,a,s)=>{for(var l=function(e){var t=[...v(e),...m(e)],r=y(e);return t.map((e=>g(r[e],{name:e})))}(e),u=y(a),c=function(n){var i=l[n],o=i.name;if(_.includes(o))return"continue";var c=f(i,"value"),d=f(u,o)&&u[o];d?d.configurable?b(a,o,c?{value:t(i.value,{forceUpdate:s,path:void 0}),writable:i.writable,enumerable:i.enumerable,configurable:i.configurable}:{enumerable:i.enumerable,configurable:i.configurable}):d.writable&&(a[o]=t(i.value,{forceUpdate:s,path:void 0})):b(a,o,c?{value:t(i.value,{forceUpdate:s,path:void 0}),writable:i.writable,enumerable:i.enumerable,configurable:i.configurable}:{get(){return t(E(e,o,r(this,{forceUpdate:!0})))},set(t){S(e,o,r(t),r(this,{forceUpdate:!0}))},enumerable:i.enumerable,configurable:i.configurable}),d&&I(u,o)},d=0;d<l.length;d++)c(d);for(var p=[...v(u),...m(u)],h=0;h<p.length;++h)I(a,p[h]);return a},k=(e,t,r,n,i,o,a,s)=>o||!a||s?(a=a||{},n.set(e,a),i.set(a,e),B(e,t,r,n,i,o,a,s),((e,t,r,n,i,o,a,s)=>{var l=w(e);null!=l&&l.constructor&&"Object"!==l.constructor.name&&A(a,t(l,{forceUpdate:s,path:void 0}))})(e,t,0,0,0,0,a,s),a):a,M=ArrayBuffer.prototype,F=(e,t,r,n,i)=>(o,{forceUpdate:a=!1,path:s}={})=>{if(!l(o)||i.has(o)||W.has(o))return o;var u=void 0;if(n.has(o)&&(u=n.get(o)),$.has(o))return u;$.add(o);var c=h(p(o),8,-1);try{var d=o;switch(c){case"Array":d=((e,t,r,n,i,o,a,s)=>{if(!o&&a&&!s)return a;a=a||[],n.set(e,a),i.set(a,e);for(var l=e.length,u=a.length,c=0;c<u;++c)a[c]=t(e[c],{forceUpdate:s,path:void 0});if(l<u)a.slice(l,u-l);else for(var d=u;d<l;++d)a.push(t(e[d],{forceUpdate:s,path:void 0}));return a})(o,t,0,n,i,e,u,a);break;case"Function":d=L(o,t,r,n,i,e,u,a);break;case"Object":d=k(o,t,r,n,i,e,u,a);break;case"Promise":d=((e,t,r,n,i,o,a,s)=>a||(a=new Promise(((r,n)=>{e.then((e=>r(t(e))),(e=>n(t(e))))})),n.set(e,a),i.set(a,e),a))(o,t,0,n,i,0,u);break;case"ArrayBuffer":e||o===M||A(o,M);break;default:d=o}return d}finally{$.delete(o)}},j=new WeakMap,U=new WeakMap,$=new WeakSet,W=new WeakSet,q=e=>{l(e)&&W.add(e)},H=(()=>{var e=e=>e,t=e=>e,r=(...t)=>e(...t),n=(...e)=>t(...e);return e=F(!1,r,n,j,U),t=F(!0,n,r,U,j),r})();var G=Object.getPrototypeOf,Q=Object.getOwnPropertyNames,z=Object.getOwnPropertyDescriptor,K=Object.defineProperty,V=["constructor","__proto__","__defineGetter__","__defineSetter__"],J=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,re=e=>{for(var t=0;t<V.length;t++){if(V[t]===e)return!0}return!1},ne=function(e){for(var t=ee.has(e)?ee.get(e):{},r=(e=>{for(var t=[],r=e;r;r=G(r))for(var n=Q(r),i=0;i<n.length;i++){var o=n[i],a=z(r,o);void 0!==a&&(a.name=o,t.push(a))}return t})(e),n=0;n<r.length;n++){var i=r[n],o=i.name;re(o)||(o in t||(delete i.value,delete i.writable,K(t,o,Object.assign(i,{get:ie(o).bind(t),set:oe(o).bind(t)}))))}return ee.set(e,t),J.set(t,e),t},ie=function(e){return function(){var t=J.get(this);if(void 0!==t)return null===t?null:se(t[e])}},oe=function(e){return function(t){var r=J.get(this);if(null!=r){if(null!=t){var n=ae(t);if(n)return void(r[e]=n)}r[e]=se(t)}}},ae=function(e){if(("function"==typeof e||"object"==typeof e)&&null!=e)return J.get(e)||X.get(e)||Y.get(e)},se=function(e){var t,r=(t=e,Object.prototype.toString.call(t).split(" ")[1].split("]")[0]);return"String"===r||"Number"===r||"Boolean"===r?e.valueOf():"Array"===r?function(e){if(te.has(e))return te.get(e);for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(se(n))}return te.set(e,t),Y.set(t,e),t}(e):"Function"===r?function(e){if(Z.has(e))return Z.get(e);var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=se(arguments[r]);var n=ae(this)||this,i=e.apply(n,t);return se(i)};return Z.set(e,t),X.set(t,e),t}(e):"Object"===r?ne(e):"ArrayBuffer"===r?(e!==ArrayBuffer.prototype&&(e.__proto__=ArrayBuffer.prototype),e):"Undefined"===r?void 0:"Null"===r?null:e},le=se,ue=(e,t=[])=>{q(e),Object.setPrototypeOf(e,Object.prototype);var n=function(t){var n=r[t],i=Object.getOwnPropertyDescriptor(e,t)||{},o=void 0;Object.defineProperty(e,t,{get(){var e,t=Object.prototype.hasOwnProperty.call(i,"value")?i.value:null===(e=i.get)||void 0===e?void 0:e.call(this);if(o)return o;if(n){var r=t;return 1&n&&(e=>{O.add(e)})(r),2&n&&(e=>{D.add(e)})(r),o=H(r)}if("function"==typeof t&&!o){var a=function(){return this instanceof a?Reflect.construct(t,arguments,t):Reflect.apply(t,this,arguments)};return Object.defineProperty(a,"name",{value:t.name}),o=a,a}return o=t},set(e){Object.prototype.hasOwnProperty.call(i,"value")&&(i.value=e)},enumerable:!0,configurable:!0})};for(var i of Object.keys(e))n(i)},ce=e=>new le(e);N=t})(),(()=>{var e={680:(e,t,r)=>{r.d(t,{D:()=>i,m:()=>n});var n={APP:"app",APP_RENDER:"app_sub_render",APP_XRFRAME_RENDER:"app_xrframe_render",GAME:"game",GAME_OPEN_DATA:"gameOpenData"},i={GAME_PLUGIN_PRELOAD:"gamePlugin_preload_",GAME_PLUGIN:"gamePlugin_"}},959:(e,t,r)=>{r.d(t,{G$:()=>n});r(888),globalThis;var n=function(){return"devtools"===y.platform}},72:(e,t)=>{var r={name:void 0,secure:!0,runningType:"app",init:function(e){this.name=e.contextName,this.secure=e.contextSecure,void 0!==b&&(b.env.contextName=e.contextName,b.env.typeStr=`${e.contextName}_Context`),this.name.startsWith("game")?this.runningType="game":this.name.startsWith("app")&&(this.runningType="app"),this.remoteObjectProto=e.__proto__}};t.Z=r},898:(e,t,r)=>{var n=r(659),i=r(880),o=r(72),a=r(270);b.onLoad((()=>{void 0===r.g.WeixinJSBridge&&(r.g.WeixinJSBridge={},r.g.WeixinJSBridge.subscribeHandler=function(e,t){"onError"===e?b.emitUnhandledError(t):"unhandledRejection"===e&&b.emitUnhandledRejection(null==t?void 0:t.reason,null==t?void 0:t.promise)},r.g.WeixinJSBridge.invokeCallbackHandler=function(){})})),b.onUnhandledRejection((function(e={}){o.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e.reason,"",e.promise||null):(0,n.sK)(e.reason,"",e.promise||null)})),b.onUnhandledError((function(e){e=(0,i.Bs)(e),o.Z.name===a.CONTEXT_NAME.APP_RENDER?(0,n.yH)(e,""):(0,n.sK)(e,"")})),b.onFrameworkError((function(e){"function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),s.error("FrameworkError",e)}))},122:(e,t)=>{var r={},n=Object.keys;r.init=e=>{o=e;for(var t=n(e),i=0;i<t.length;i++){var a=t[i];void 0===r[a]&&(r[a]=e[a])}},t.Z=r},325:(e,t,r)=>{r.d(t,{k:()=>i});var n=r(602),i=e=>{e.onReady((e=>{b._onPostLoad((()=>{var t=y.__readyHandler;n.Z.__wxConfig=Object.assign({},e),"function"==typeof t&&t(e)}))}))}},132:(e,r,i)=>{i.d(r,{E:()=>g});var c=i(602),g=function(e){var r,g,v;"windows"===e.__wxConfig.platform&&e.__wxConfig.host&&"WMPF"===e.__wxConfig.host.env&&e.__isAppServiceRemoteDebugMode__?c.Z.console=i.g.console:e.__isAppServiceRemoteDebugMode__&&"ios"!==e.__wxConfig.platform?c.Z.console=e.originConsole:c.Z.console=new e.BaseConsole,r=e.wxLibVersion,v=(null===(g=t)||void 0===g?void 0:g.version)||"9.9.9",r!==v&&(s.warn(`[checkVersionMatches] baselib versions between context do not match (mainContext ${r}, subContext ${v})`),o.reportIDKey({key:"subContextLibVersionNotMatch"})),n=e.__Function__,l=e.__userActionTracer__,u=e.__appServiceSDK__,f=e.__sclEngine__,h=e.WeixinJSBridge,o=e.Reporter,s=e.wxNativeConsole,d=e.WeixinSharedBuffer,_=e.WeixinNativePluginMgr,a=e.BaseConsole,$dbg=e.$dbg,__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__,__remoteDebug__=e.__remoteDebug__,__debuggerMessager__=e.debuggerMessager,O.bridgeContext(e.__subContextEngineBridge__),e.__freezeLibContextGlobal__(),Object.defineProperty(c.Z,"__wxSourceMap",{get:N.condom(e.getWxSourceMap)}),c.Z.WebAssembly&&delete c.Z.WebAssembly,p=e.Trace}},320:(e,t,r)=>{r.d(t,{D:()=>i});var n=r(602),i=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,o=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,a=e.BaseConsole,n.Z.console=new e.BaseConsole,f=e.__sclEngine__,p=e.Trace,SkylineGlobal=e.SkylineGlobal}},243:(e,t,r)=>{r.d(t,{y:()=>n});var n=function(e){setTimeout=e.setTimeout,clearTimeout=e.clearTimeout,setInterval=e.setInterval,clearInterval=e.clearInterval,h=e.WeixinJSBridge,o=e.Reporter,c=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,s=e.wxNativeConsole,p=e.Trace,b.onLibraryEnd((()=>{xrFrame.init(e.args)}))}},405:(e,t,r)=>{r.d(t,{M:()=>o,O:()=>a});var n,i=r(602),o=function(e){i.Z.__isAdapterInjected=!1,i.Z.console=e.console,i.Z.sharedCanvas=e.sharedCanvas,y.onReady((()=>{!0!==y.useHighPerformanceMode?i.Z.wx=n||N.condomWX(e.wx,e.skipCondom):i.Z.wx=e.wx})),i.Z.requirePlugin=e.requirePlugin,i.Z.WXWebAssembly=e.WXWebAssembly,i.Z.WXWeakRef=e.WXWeakRef,delete i.Z.WebAssembly,i.Z.GameGlobal||(i.Z.GameGlobal=i.Z),s=e.wxNativeConsole,Object.defineProperty(i.Z,"__wxSourceMap",{get:N.condom(e.getWxSourceMap)})},a=function(e,t){e&&e.wx&&(n=N.condomWX(e.wx,t))}},889:(e,t,r)=>{r.d(t,{o:()=>n});var n=function(e){e.getWxSourceMap&&(e.getWxSourceMap=N.condom(e.getWxSourceMap)),__gameOpenDataSDK__.init(e)}},900:(e,t,r)=>{r.d(t,{m:()=>i});var n=r(602),i=function(e){delete n.Z.NativeClient,n.Z.console=e.console,n.Z.WXWebAssembly=e.WXWebAssembly,n.Z.env={},e.pluginEnv&&(n.Z.pluginEnv=e.pluginEnv),e.wx&&(n.Z.wx=e.wx)}},602:(e,t)=>{var r=function(){return this}();t.Z=r},270:(e,t,r)=>{r.r(t),r.d(t,{CONTEXT_NAME:()=>w.m,CONTEXT_NAME_PREFIX:()=>w.D,injectEntryFile:()=>v.Wm,loadJsFiles:()=>v.z5,loadLibFiles:()=>v.C4,onInitReady:()=>I,onMainContextMessage:()=>L,postMessageToMainContext:()=>P,postMessageToMainContextSync:()=>D,surroundByTryCatch:()=>g.Ue,surroundThirdByTryCatch:()=>g.M2});var n=r(97),i=r.n(n),o=(r(898),r(602)),a=r(122),s=r(72),l=r(575),u=r(325),c=r(405),d=r(889),p=r(132),f=r(243),h=r(320),_=r(900),g=r(659),v=r(153),m=r(959),w=r(680),A=r(880),E="subContext:initReady",S=new b.EventEmitter,I=function(e){b.once(E,e)};T.subscribe("subContextEnvReady",(0,g.Ue)((e=>{if(s.Z.init(e),(0,l.v)(e),function(e){r.g.__isAppServiceRemoteDebugMode__=!!e.__isAppServiceRemoteDebugMode__}(e),function(e){if(e.__isAppServiceRemoteDebugMode__&&e.__remoteDebug__&&e.__remoteDebug__.setAutoTestHandler)try{var t;$eval=e.__remoteDebug__.$$eval,e.__remoteDebug__.setAutoTestHandler({$eval:(r,n,o=null)=>(t||(t="ios"===e.__wxConfig.platform?globalThis:i()(i()({},globalThis),{},{console:e.originConsole})),$eval(r,t).apply(o,n)),setGlobalFunctions(e,r){t?t[e]=r:globalThis[e]=r}})}catch(e){console.error(e)}}(e),C.hijack(),a.Z.init(e.Reporter),s.Z.name===w.m.GAME)(0,c.M)(e);else if(s.Z.name===w.m.GAME_OPEN_DATA)(0,d.o)(e);else if(s.Z.name===w.m.APP)(0,p.E)(e);else if(s.Z.name===w.m.APP_RENDER)(0,h.D)(e);else if(s.Z.name===w.m.APP_XRFRAME_RENDER)(0,f.y)(e);else{if(!s.Z.name.startsWith(w.D.GAME_PLUGIN))throw new Error("subContextEnvReady: missing context name.");(0,_.m)(e)}(0,u.k)(e.__wxConfig)}))),T.subscribe("preloadSubContextEnvReady",(0,g.Ue)((e=>{s.Z.init(e),e.preHandleEnv&&(0,c.O)(e.preHandleEnv,e.skipCondomList)}))),T.subscribe("subContextRefreshEnv",(0,g.Ue)((e=>{if("game"===s.Z.name)(0,c.M)(e);else if("gameOpenData"===s.Z.name)(0,d.o)(e);else if("app"===s.Z.name)(0,p.E)(e);else if("app_sub_render"===s.Z.name)(0,h.D)(e);else if("app_xrframe_render"===s.Z.name)(0,f.y)(e);else{if(!s.Z.name.startsWith("gamePlugin_"))throw new Error("subContextRefreshEnv: missing context name.");(0,_.m)(e)}T.publish("subContextRefreshEnvReady",null,!0)}))),T.subscribe("subContextRefreshWxConfig",(0,g.Ue)((e=>{var{key:t,value:r}=e;"string"==typeof t&&r&&(y[t]=r)}))),T.subscribe("exportGlobalRequire",(0,g.Ue)((e=>{var t=/^[A-Za-z]+(\.[A-Za-z]+)*$/,r=e=>{var{name:r,value:n,needCondom:i}=e;if("string"!=typeof r||!t.test(r))throw new Error("exportGlobalRequire: illegal variable name.");r.split(".").reduce(((e,t,o,a)=>{if(o===a.length-1){if(t in e)throw new Error(`exportGlobalRequire: Variable ${r} exists.`);e[t]=i?N.condom(n):n}if("Array"!==(0,g.Em)(e[t])&&"Function"!==(0,g.Em)(e[t])&&"Object"!==(0,g.Em)(e[t])){var s=a.slice(0,o+1).join(".");throw new Error(`exportGlobalRequire: ${s} is not an Object.`)}return e[t]}),o.Z)};return"[object Array]"===Object.prototype.toString.call(e)?e.forEach(r):r(e)}))),T.subscribe("mainContextMessage",(e=>{S.emit("mainContextMessage",e)})),T.subscribe("subContextDestroy",(()=>{}));var O=["WeixinJSCore","WeixinNativeBuffer","WeixinWorker","NativeGlobal","lockSharedNativeBuffer","unlockSharedNativeBuffer","getNativeBufferId","getNativeBuffer","setNativeBuffer","setSharedNativeBuffer","getSharedNativeBuffer","WeixinArrayBuffer"];b.onLoad((()=>{O.forEach((e=>{delete o.Z[e]})),T.publish("subContextReady",{contextGlobal:{get __wxSourceMap(){return o.Z.__wxSourceMap},get __require(){return"game"===s.Z.name||s.Z.name.startsWith("gamePlugin_")?o.Z.require:N.condom(o.Z.require)},jsonParse:JSON.parse,jsonStringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}},!0)}));var x=!1,R=function(){x||(x=!0,C.overwriteSetPrototypeOf(),C.deepFreezeGlobalObjs([],!1))};b.onLibraryEnd((()=>{b.onLoad((()=>{s.Z.secure&&y&&y.isIsolateContext&&R(),b.emit(E)})),b.onStart((()=>{y.plugins&&!(0,m.G$)()&&R()}))}));var P=e=>{(0,A.YF)((()=>{T.publish("subContextMessage",e)}))},D=e=>{T.publish("subContextMessage",e)},L=e=>{S.on("mainContextMessage",e)}},153:(e,t,r)=>{r.d(t,{C4:()=>a,Wm:()=>o,z5:()=>i});var n=r(72),i=(e,t,r)=>T&&T.publish?T.publish("loadJsFiles",{paths:e,options:r,moduleName:t,contextName:n.Z.name}):"failed",o=(e,t)=>T&&T.publish?T.publish("injectEntryFile",{moduleName:e,separatedPlugins:t}):"failed",a=e=>T&&T.publish?T.publish("loadLibFiles",{paths:e,contextName:n.Z.name}):"failed"},575:(e,t,r)=>{r.d(t,{v:()=>s});var n=r(602),i=r(72),o=r(659),a=function(e,t){return function(){return"function"==typeof arguments[0]&&(arguments[0]=(0,o.M2)(arguments[0],t)),e(...arguments)}},s=e=>{n.Z.setTimeout=a(e.setTimeout,"at setTimeout callback function"),n.Z.clearTimeout=a(e.clearTimeout),n.Z.setInterval=a(e.setInterval,"at setInterval callback function"),n.Z.clearInterval=a(e.clearInterval),"game"===i.Z.runningType&&(n.Z.requestAnimationFrame=a(e.requestAnimationFrame,"at requestAnimationFrame callback function"),n.Z.cancelAnimationFrame=a(e.cancelAnimationFrame))}},659:(e,t,r)=>{r.d(t,{Em:()=>c,M2:()=>s,Ue:()=>u,sK:()=>a,yH:()=>l});var n=r(680),i=r(72),o=r(122),a=function(e,t,r){try{var a;if(i.Z.name===n.m.GAME)a=o.Z.RunType.GAME;else if(i.Z.name===n.m.GAME_OPEN_DATA)a=o.Z.RunType.GAME_SUBCONTEXT;else if(i.Z.name===n.m.APP)a=o.Z.RunType.APP;else if(i.Z.name.startsWith(n.D.GAME_PLUGIN))a=o.Z.RunType.GAME_SUBCONTEXT;else if(i.Z.name===n.m.APP_RENDER)a=o.Z.RunType.APP_SUBCONTEXT;else{if(i.Z.name!==n.m.APP_XRFRAME_RENDER)throw new Error("unknown context");a=o.Z.RunType.APP_SUBCONTEXT}void 0!==r?o.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!i.Z.secure,isUnhandledRejection:!0,promise:r}):o.Z.thirdErrorReport({key:a,error:e,extend:t,triggerErrorCallback:!i.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}};function s(e,t){return function(){var r;try{"function"==typeof e&&(r=e.apply(e,arguments))}catch(e){a(e,t)}return r}}function l(e,t,r){var a="";if(i.Z.name===n.m.APP_RENDER?a="appSubContextSDKScriptError":"game"===i.Z.runningType&&(a="gameSubContextSDKScriptError"),"function"==typeof o.Z.thirdErrorReport)try{void 0!==r?o.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!i.Z.secure,isUnhandledRejection:!0,promise:r}):o.Z.errorReport({key:a,error:e,extend:t,triggerErrorCallback:!i.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.errorReport: ",e.message)}else{var s=`${a}\n${t?`${e.message};${t}`:e.message}\n${e.stack}`;"undefined"!=typeof console&&console.error(s)}}function u(e,t){return function(){try{return e.apply(e,arguments)}catch(e){if(e.message,e.stack,"[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;l(e,t)}return}}}function c(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}},880:(e,t,r)=>{r.d(t,{Bs:()=>n,YF:()=>a});var n=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}},i=!1,o=[],a=e=>{o.push(e),i||(i=!0,Promise.resolve().then((()=>{for(var e=0;e<o.length;++e)"function"==typeof o[e]&&o[e]();i=!1,o.length=0})))}},888:e=>{e.exports=g.asyncToGenerator},97:e=>{e.exports=g.objectSpread2}},r={};function v(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,v),i.exports}v.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return v.d(t,{a:t}),t},v.d=(e,t)=>{for(var r in t)v.o(t,r)&&!v.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},v.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),v.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),v.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var m=v(270);x=m})(),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callMiniProgramOrPluginFunction:()=>f,callSystemFunction:()=>d,callThirdPartyFunction:()=>h,convertStack:()=>i,endSystemFunctionCall:()=>c,findCurrentSource:()=>l,startSystemFunctionCall:()=>u,surroundThirdByTryCatch:()=>v,wrapMiniProgramOrPluginFunction:()=>_,wrapSystemFunction:()=>p,wrapThirdPartyFunction:()=>g,wrapperStack:()=>n});var r=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,n=[];function i(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var r=t,i=n.length-1,o=0;o>=0&&i>=0;){var s=r.length,l=0;for(var u in a)if(a[u]){var c=r.indexOf(a[u],o);c<0||s<=c||(s=c,l=a[u].length)}if(s>=r.length)break;var d=`at <${n[i--].description}>`;r=r.slice(0,s)+d+r.slice(s+l),o=s+d.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:r,writable:!0,enumerable:!0,configurable:!0}}),!0}var a={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function s(e){var t=((new Error).stack||"").match(/.+/gm),n="",i=0;t&&t.forEach((e=>{if(r.test(e)&&2===(i+=1)){var t=e.match(/^(\s*)at /),o=t?t[1].length:0;return n=e.slice(o),!1}return!0})),a[e]=n}function l(){for(var e="",t=n.length-1;t>=0;t--)n[t].pluginAppId&&(e=n[t].pluginAppId);return e}var u=e=>{null===a.wrapSystemFunction&&(a.wrapSystemFunction="",p("","",s)("wrapSystemFunction")),n.push({description:e})},c=()=>{n.pop()};function d(e,t,r,u,c,d=!1){var f;null===a.wrapSystemFunction&&(a.wrapSystemFunction="",p("","",s)("wrapSystemFunction")),n.push({description:t});try{f=r.apply(u,c)}catch(t){if(i(t)){if("AppServiceSdkKnownError"===t.type)throw n.pop(),t;if("ThirdScriptError"===t.type){var h=l();o.thirdErrorReport({error:t,source:h,triggerErrorCallback:!d})}else o.errorReport({key:e,error:t,triggerErrorCallback:!d})}if(d)throw n.pop(),t}return n.pop(),f}function p(e,t,r,n=!1){return function(...i){return d(e,t,r,this,i,n)}}function f(e,t,r,l,u,c=!1){var d;null===a.wrapMiniProgramOrPluginFunction&&(a.wrapMiniProgramOrPluginFunction="",_("","",s)("wrapMiniProgramOrPluginFunction")),n.push({description:t,pluginAppId:e});try{d=r.apply(l,u)}catch(t){if(i(t)&&o.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!c}),c)throw n.pop(),t}return n.pop(),d}function h(e,t,r,n,i=!1){return f(l(),e,t,r,n,i)}function _(e,t,r,n=!1){return function(...i){return f(e,t,r,this,i,n)}}function g(e,t,r=!1){return function(...n){return f(l(),e,t,this,n,r)}}function v(e,t){var r=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),n=r?r[1]:"",i=e||function(){};return function(...e){return f(l(),n,i,i,e,!1)}}R=t})(),(()=>{var e={644:e=>{function t(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,l,"next",e)}function l(e){t(a,i,o,s,l,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},425:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},29:(e,t,r)=>{var n=r(425);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},393:(e,t,r)=>{var n=r(771);e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},771:e=>{e.exports=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},359:(e,t,r)=>{"use strict";r.d(t,{V1:()=>U,V3:()=>Qe,j:()=>he,m:()=>$});var n=r(29),i=r.n(n),o=r(644),a=r.n(o),s=Object.create,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(e,t)=>()=>(e&&(t=e(e=0)),t),h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_=(e,t)=>{for(var r in t)l(e,r,{get:t[r],enumerable:!0})},g=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t){var i=function(i){!p.call(e,i)&&i!==r&&l(e,i,{get:()=>t[i],enumerable:!(n=u(t,i))||n.enumerable})};for(var o of c(t))i(o)}return e},v=(e,t,r)=>(r=null!=e?s(d(e)):{},g(!t&&e&&e.__esModule?r:l(r,"default",{value:e,enumerable:!0}),e)),m=f((()=>{})),y=h((e=>{m();var t=[0,255,65535,16777215,4294967295];function r(e,t,r,n,i){var o;for(o=0;o<i;o++)r[n+o]=e[t+o]}function n(e,t,r,n){var i;for(i=0;i<n;i++)e[t+i]=e[t-r+i]}function i(e){this.array=e,this.pos=0}i.prototype.readUncompressedLength=function(){for(var e,t,r=0,n=0;n<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<n>>>n!==t)return-1;if(r|=t<<n,e<128)return r;n+=7}return-1},i.prototype.uncompressToBuffer=function(e){for(var i,o,a,s,l=this.array,u=l.length,c=this.pos,d=0;c<l.length;)if(i=l[c],c+=1,0==(3&i)){if((o=1+(i>>>2))>60){if(c+3>=u)return!1;a=o-60,o=1+((o=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24))&t[a]),c+=a}if(c+o>u)return!1;r(l,c,e,d,o),c+=o,d+=o}else{switch(3&i){case 1:o=4+(i>>>2&7),s=l[c]+(i>>>5<<8),c+=1;break;case 2:if(c+1>=u)return!1;o=1+(i>>>2),s=l[c]+(l[c+1]<<8),c+=2;break;case 3:if(c+3>=u)return!1;o=1+(i>>>2),s=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24),c+=4}if(0===s||s>d)return!1;n(e,d,s,o),d+=o}return!0},e.SnappyDecompressor=i})),b=h((e=>{m();var t=new Array(15);function r(e,t){return 506832829*e>>>t}function n(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function i(e,t,r){return e[t]===e[r]&&e[t+1]===e[r+1]&&e[t+2]===e[r+2]&&e[t+3]===e[r+3]}function o(e,t,r,n,i){return r<=60?(n[i]=r-1<<2,i+=1):r<256?(n[i]=240,n[i+1]=r-1,i+=2):(n[i]=244,n[i+1]=r-1&255,n[i+2]=r-1>>>8,i+=3),function(e,t,r,n,i){var o;for(o=0;o<i;o++)r[n+o]=e[t+o]}(e,t,n,i,r),i+r}function a(e,t,r,n){return n<12&&r<2048?(e[t]=1+(n-4<<2)+(r>>>8<<5),e[t+1]=255&r,t+2):(e[t]=2+(n-1<<2),e[t+1]=255&r,e[t+2]=r>>>8,t+3)}function s(e,t,r,n){for(;n>=68;)t=a(e,t,r,64),n-=64;return n>64&&(t=a(e,t,r,60),n-=60),a(e,t,r,n)}function l(e,a,l,u,c){for(var d=1;1<<d<=l&&d<=14;)d+=1;var p=32-(d-=1);typeof t[d]>"u"&&(t[d]=new Uint16Array(1<<d));var f,h=t[d];for(f=0;f<h.length;f++)h[f]=0;var _,g,v,m,y,b,w,A,E,S,I=a+l,T=a,C=a,O=!0;if(l>=15)for(_=I-15,v=r(n(e,a+=1),p);O;){b=32,m=a;do{if(g=v,w=b>>>5,b+=1,m=(a=m)+w,a>_){O=!1;break}v=r(n(e,m),p),y=T+h[g],h[g]=a-T}while(!i(e,a,y));if(!O)break;c=o(e,C,a-C,u,c);do{for(A=a,E=4;a+E<I&&e[a+E]===e[y+E];)E+=1;if(a+=E,c=s(u,c,A-y,E),C=a,a>=_){O=!1;break}h[r(n(e,a-1),p)]=a-1-T,y=T+h[S=r(n(e,a),p)],h[S]=a-T}while(i(e,a,y));if(!O)break;v=r(n(e,a+=1),p)}return C<I&&(c=o(e,C,I-C,u,c)),c}function u(e){this.array=e}u.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},u.prototype.compressToBuffer=function(e){var t,r=this.array,n=r.length,i=0,o=0;for(o=function(e,t,r){do{t[r]=127&e,(e>>>=7)>0&&(t[r]+=128),r+=1}while(e>0);return r}(n,e,o);i<n;)o=l(r,i,t=Math.min(n-i,65536),e,o),i+=t;return o},e.SnappyCompressor=u})),w=h((e=>{function t(){return"object"==typeof process&&"object"==typeof process.versions&&typeof process.versions.node<"u"}function r(e){return e instanceof Uint8Array&&(!t()||!Buffer.isBuffer(e))}function n(e){return e instanceof ArrayBuffer}function i(e){return!!t()&&Buffer.isBuffer(e)}m();var o=y().SnappyDecompressor,a=b().SnappyCompressor,s="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";e.uncompress=function(e,t){if(!r(e)&&!n(e)&&!i(e))throw new TypeError(s);var a=!1,l=!1;r(e)?a=!0:n(e)&&(l=!0,e=new Uint8Array(e));var u,c,d=new o(e),p=d.readUncompressedLength();if(-1===p)throw new Error("Invalid Snappy bitstream");if(p>t)throw new Error(`The uncompressed length of ${p} is too big, expect at most ${t}`);if(a){if(u=new Uint8Array(p),!d.uncompressToBuffer(u))throw new Error("Invalid Snappy bitstream")}else if(l){if(u=new ArrayBuffer(p),c=new Uint8Array(u),!d.uncompressToBuffer(c))throw new Error("Invalid Snappy bitstream")}else if(u=Buffer.alloc(p),!d.uncompressToBuffer(u))throw new Error("Invalid Snappy bitstream");return u},e.compress=function(e){if(!r(e)&&!n(e)&&!i(e))throw new TypeError(s);var t=!1,o=!1;r(e)?t=!0:n(e)&&(o=!0,e=new Uint8Array(e));var l,u,c,d=new a(e),p=d.maxCompressedLength();if(t?(l=new Uint8Array(p),c=d.compressToBuffer(l)):o?(l=new ArrayBuffer(p),u=new Uint8Array(l),c=d.compressToBuffer(u)):(l=Buffer.alloc(p),c=d.compressToBuffer(l)),!l.slice){var f=new Uint8Array(Array.prototype.slice.call(l,0,c));if(t)return f;if(o)return f.buffer;throw new Error("Not implemented")}return l.slice(0,c)}})),A=h(((e,t)=>{m(),t.exports=function(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,a){r[n]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,a(e))}}))}})),E=h((e=>{m();var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};var r,n=new Array(64),i=new Array(123);for(r=0;r<64;)i[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,r){for(var i,o=null,a=[],s=0,l=0;t<r;){var u=e[t++];switch(l){case 0:a[s++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:a[s++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:a[s++]=n[i|u>>6],a[s++]=n[63&u],l=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return l&&(a[s++]=n[i],a[s++]=61,1===l&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var o="invalid encoding";t.decode=function(e,t,r){for(var n,a=r,s=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&s>1)break;if(void 0===(u=i[u]))throw Error(o);switch(s){case 0:n=u,s=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,s=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,s=3;break;case 3:t[r++]=(3&n)<<6|u,s=0}}if(1===s)throw Error(o);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}})),S=h(((e,t)=>{function r(){this._listeners={}}m(),t.exports=r,r.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}})),I=h(((e,t)=>{function r(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,a=8388607&n;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,o),e.readFloatBE=r.bind(null,a)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,i,o){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=n*Math.pow(2,-l))>>>0,i,o+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,i,o+r)}}}function r(e,t,r,n,i){var o=e(n,i+t),a=e(n,i+r),s=2*(a>>31)+1,l=a>>>20&2047,u=4294967296*(1048575&a)+o;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,o,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}m(),t.exports=r(r)})),T=h(((e,t)=>{function r(e){try{var t=eval("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}m(),t.exports=r})),C=h((e=>{m();var t=e;t.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},t.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],a=0;t<r;)(n=e[t++])<128?o[a++]=n:n>191&&n<224?o[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(n>>10),o[a++]=56320+(1023&n)):o[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,r){for(var n,i,o=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o}})),O=h(((e,t)=>{m(),t.exports=function(e,t,r){var n=r||8192,i=n>>>1,o=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(o=e(n),a=0);var s=t.call(o,a,a+=r);return 7&a&&(a=1+(7|a)),s}}})),N=h(((e,t)=>{m(),t.exports=n;var r=x();function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(r.isString(e)){if(!r.Long)return n.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===o?i:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}})),x=h((e=>{m();var t=e;function n(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(void 0===e[n[i]]||!r)&&(e[n[i]]=t[n[i]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:()=>e,set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}t.asPromise=A(),t.base64=E(),t.EventEmitter=S(),t.float=I(),t.inquire=T(),t.utf8=C(),t.pool=O(),t.LongBits=N(),t.isNode=Boolean(typeof r.g<"u"&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),t.global=t.isNode&&r.g||typeof window<"u"&&window||typeof self<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),R=h(((e,t)=>{m(),t.exports=c;var r,n=x(),i=n.LongBits,o=n.base64,a=n.utf8;function s(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function c(){this.len=0,this.head=new s(l,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(c.create=function(){return new r})()}:function(){return new c}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function _(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}c.create=d(),c.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(c.alloc=n.pool(c.alloc,n.Array.prototype.subarray)),c.prototype._push=function(e,t,r){return this.tail=this.tail.next=new s(e,t,r),this.len+=t,this},f.prototype=Object.create(s.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},c.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},c.prototype.int32=function(e){return e<0?this._push(h,10,i.fromNumber(e)):this.uint32(e)},c.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},c.prototype.uint64=function(e){var t=i.from(e);return this._push(h,t.length(),t)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(h,t.length(),t)},c.prototype.bool=function(e){return this._push(p,1,e?1:0)},c.prototype.fixed32=function(e){return this._push(_,4,e>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(e){var t=i.from(e);return this._push(_,4,t.lo)._push(_,4,t.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},c.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var g=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};c.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=c.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(g,t,e)},c.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},c.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new s(l,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(l,0,0),this.len=0),this},c.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},c.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},c._configure=function(e){r=e,c.create=d(),r._configure()}})),P=h(((e,t)=>{m(),t.exports=i;var r=R();(i.prototype=Object.create(r.prototype)).constructor=i;var n=x();function i(){r.call(this)}function o(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},i._configure()})),D=h(((e,t)=>{m(),t.exports=s;var r,n=x(),i=n.LongBits,o=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var l,u=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")},c=function(){return n.Buffer?function(e){return(s.create=function(e){return n.Buffer.isBuffer(e)?new r(e):u(e)})(e)}:u};function d(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}s.create=c(),s.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,s.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},s.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s._configure=function(e){r=e,s.create=c(),r._configure();var t=n.Long?"toLong":"toNumber";n.merge(s.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}})),L=h(((e,t)=>{m(),t.exports=i;var r=D();(i.prototype=Object.create(r.prototype)).constructor=i;var n=x();function i(e){r.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()})),B=h(((e,t)=>{m(),t.exports=n;var r=x();function n(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,n,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,i,o);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof i))try{r=i[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}})),k=h((e=>{m(),e.Service=B()})),M=h(((e,t)=>{m(),t.exports={}})),F=h((e=>{m();var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=R(),t.BufferWriter=P(),t.Reader=D(),t.BufferReader=L(),t.util=x(),t.rpc=k(),t.roots=M(),t.configure=r,r()})),j=h(((e,t)=>{m(),t.exports=F()}));m();var U={};_(U,{decode:()=>We,decodeRequest:()=>qe,decodeResponse:()=>He,decodeStdPrivResponse:()=>Ge,encode:()=>ke,encodeRequest:()=>Me,encodeResponse:()=>Fe,encodeStdPrivRequest:()=>je}),m(),m(),m();var $=(W=$||{},W.pb="PB",W.json="JSON",W),W;function q(e){return"number"==typeof e}function H(e){return e instanceof Uint8Array}function G(e,t,r){var n=t?t.byteLength:r||65536;if(4095&n||n<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return t=t||new e(new ArrayBuffer(n))}function Q(e,t,r,n,i){var o=e.length-t,a=o<i?o:i;return e.set(r.subarray(n,n+a),t),a}m(),m();var z=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),e})(),K=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}}),e})(),V=(()=>{var e,t,r,n,i,o,a=!1;function s(r,n){var i=e[(t[r]+t[n])%255];return(0===r||0===n)&&(i=0),i}function l(){function l(r){var n,i,o;for(i=o=function(r){var n=e[255-t[r]];return 0===r&&(n=0),n}(r),n=0;n<4;n++)o^=i=255&(i<<1|i>>>7);return o^=99}a||function(){e=[],t=[];var r,n,i=1;for(r=0;r<255;r++)e[r]=i,n=128&i,i<<=1,i&=255,128===n&&(i^=27),i^=e[r],t[e[r]]=r;e[255]=e[0],t[0]=0,a=!0}(),r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]];for(var u=0;u<256;u++){var c=l(u);r[u]=c,n[c]=u,i[0][u]=s(2,c)<<24|c<<16|c<<8|s(3,c),o[0][c]=s(14,u)<<24|s(9,u)<<16|s(13,u)<<8|s(11,u);for(var d=1;d<4;d++)i[d][u]=i[d-1][u]>>>8|i[d-1][u]<<24,o[d][c]=o[d-1][c]>>>8|o[d-1][c]<<24}}var u=function(e,t){l();var a=new Uint32Array(t);a.set(r,512),a.set(n,768);for(var s=0;s<4;s++)a.set(i[s],4096+1024*s>>2),a.set(o[s],8192+1024*s>>2);var u=function(e,t,r){var n=0,i=0,o=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0,f=0,h=0,_=0,g=0,v=0,m=0,y=0,b=new e.Uint32Array(r),w=new e.Uint8Array(r);function A(e,t,r,s,l,u,c,d){t|=0,s|=0,l|=0,u|=0,c|=0,d|=0;var p,f,h,_=0,g=0,v=0,m=0,y=0;for(p=1024|(r|=0),f=2048|r,h=3072|r,l^=b[(0|(e|=0))>>2],u^=b[(4|e)>>2],c^=b[(8|e)>>2],d^=b[(12|e)>>2],y=16;(0|y)<=s<<4;y=y+16|0)_=b[(r|l>>22&1020)>>2]^b[(p|u>>14&1020)>>2]^b[(f|c>>6&1020)>>2]^b[(h|d<<2&1020)>>2]^b[(e|y|0)>>2],g=b[(r|u>>22&1020)>>2]^b[(p|c>>14&1020)>>2]^b[(f|d>>6&1020)>>2]^b[(h|l<<2&1020)>>2]^b[(e|y|4)>>2],v=b[(r|c>>22&1020)>>2]^b[(p|d>>14&1020)>>2]^b[(f|l>>6&1020)>>2]^b[(h|u<<2&1020)>>2]^b[(e|y|8)>>2],m=b[(r|d>>22&1020)>>2]^b[(p|l>>14&1020)>>2]^b[(f|u>>6&1020)>>2]^b[(h|c<<2&1020)>>2]^b[(e|y|12)>>2],l=_,u=g,c=v,d=m;n=b[(t|l>>22&1020)>>2]<<24^b[(t|u>>14&1020)>>2]<<16^b[(t|c>>6&1020)>>2]<<8^b[(t|d<<2&1020)>>2]^b[(e|y|0)>>2],i=b[(t|u>>22&1020)>>2]<<24^b[(t|c>>14&1020)>>2]<<16^b[(t|d>>6&1020)>>2]<<8^b[(t|l<<2&1020)>>2]^b[(e|y|4)>>2],o=b[(t|c>>22&1020)>>2]<<24^b[(t|d>>14&1020)>>2]<<16^b[(t|l>>6&1020)>>2]<<8^b[(t|u<<2&1020)>>2]^b[(e|y|8)>>2],a=b[(t|d>>22&1020)>>2]<<24^b[(t|l>>14&1020)>>2]<<16^b[(t|u>>6&1020)>>2]<<8^b[(t|c<<2&1020)>>2]^b[(e|y|12)>>2]}function E(e,t,r,d){A(0,2048,4096,y,s^(e|=0),l^(t|=0),u^(r|=0),c^(d|=0)),s=n,l=i,u=o,c=a}var S=[,,E,function(e,t,r,d){var p;A(1024,3072,8192,y,e|=0,d|=0,r|=0,t|=0),p=i,i=a,a=p,n^=s,i^=l,o^=u,a^=c,s=e,l=t,u=r,c=d},,,,],I=[E];return{set_rounds:function(e){y=e|=0},set_state:function(e,t,r,s){n=e|=0,i=t|=0,o=r|=0,a=s|=0},set_iv:function(e,t,r,n){s=e|=0,l=t|=0,u=r|=0,c=n|=0},set_nonce:function(e,t,r,n){d=e|=0,p=t|=0,f=r|=0,h=n|=0},set_mask:function(e,t,r,n){_=e|=0,g=t|=0,v=r|=0,m=n|=0},set_counter:function(e,t,r,n){h=~m&h|m&(n|=0),f=~v&f|v&(r|=0),p=~g&p|g&(t|=0),d=~_&d|_&(e|=0)},get_state:function(e){return 15&(e|=0)?-1:(w[0|e]=n>>>24,w[1|e]=n>>>16&255,w[2|e]=n>>>8&255,w[3|e]=255&n,w[4|e]=i>>>24,w[5|e]=i>>>16&255,w[6|e]=i>>>8&255,w[7|e]=255&i,w[8|e]=o>>>24,w[9|e]=o>>>16&255,w[10|e]=o>>>8&255,w[11|e]=255&o,w[12|e]=a>>>24,w[13|e]=a>>>16&255,w[14|e]=a>>>8&255,w[15|e]=255&a,16)},get_iv:function(e){return 15&(e|=0)?-1:(w[0|e]=s>>>24,w[1|e]=s>>>16&255,w[2|e]=s>>>8&255,w[3|e]=255&s,w[4|e]=l>>>24,w[5|e]=l>>>16&255,w[6|e]=l>>>8&255,w[7|e]=255&l,w[8|e]=u>>>24,w[9|e]=u>>>16&255,w[10|e]=u>>>8&255,w[11|e]=255&u,w[12|e]=c>>>24,w[13|e]=c>>>16&255,w[14|e]=c>>>8&255,w[15|e]=255&c,16)},cipher:function(e,t,r){e|=0,r|=0;var s=0;if(15&(t|=0))return-1;for(;(0|r)>=16;)S[7&e](w[0|t]<<24|w[1|t]<<16|w[2|t]<<8|w[3|t],w[4|t]<<24|w[5|t]<<16|w[6|t]<<8|w[7|t],w[8|t]<<24|w[9|t]<<16|w[10|t]<<8|w[11|t],w[12|t]<<24|w[13|t]<<16|w[14|t]<<8|w[15|t]),w[0|t]=n>>>24,w[1|t]=n>>>16&255,w[2|t]=n>>>8&255,w[3|t]=255&n,w[4|t]=i>>>24,w[5|t]=i>>>16&255,w[6|t]=i>>>8&255,w[7|t]=255&i,w[8|t]=o>>>24,w[9|t]=o>>>16&255,w[10|t]=o>>>8&255,w[11|t]=255&o,w[12|t]=a>>>24,w[13|t]=a>>>16&255,w[14|t]=a>>>8&255,w[15|t]=255&a,s=s+16|0,t=t+16|0,r=r-16|0;return 0|s},mac:function(e,t,r){e|=0,r|=0;var n=0;if(15&(t|=0))return-1;for(;(0|r)>=16;)I[1&e](w[0|t]<<24|w[1|t]<<16|w[2|t]<<8|w[3|t],w[4|t]<<24|w[5|t]<<16|w[6|t]<<8|w[7|t],w[8|t]<<24|w[9|t]<<16|w[10|t]<<8|w[11|t],w[12|t]<<24|w[13|t]<<16|w[14|t]<<8|w[15|t]),n=n+16|0,t=t+16|0,r=r-16|0;return 0|n}}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},0,t);return u.set_key=function(e,t,n,i,s,l,c,d,p){var f=a.subarray(0,60),h=a.subarray(256,316);f.set([t,n,i,s,l,c,d,p]);for(var _=e,g=1;_<4*e+28;_++){var v=f[_-1];(_%e==0||8===e&&_%e==4)&&(v=r[v>>>24]<<24^r[v>>>16&255]<<16^r[v>>>8&255]<<8^r[255&v]),_%e==0&&(v=v<<8^v>>>24^g<<24,g=g<<1^(128&g?27:0)),f[_]=f[_-e]^v}for(var m=0;m<_;m+=4)for(var y=0;y<4;y++){v=f[_-(4+m)+(4-y)%4];h[m+y]=m<4||m>=_-4?v:o[0][r[v>>>24]]^o[1][r[v>>>16&255]]^o[2][r[v>>>8&255]]^o[3][r[255&v]]}u.set_rounds(e+5)},u};return u.ENC={CBC:2},u.DEC={CBC:3},u.MAC={CBC:0},u.HEAP_DATA=16384,u})(),J=new Uint8Array(1048576),X=V(null,J.buffer),Y=class{constructor(e,t,r,n,i){this.nonce=null,this.counter=0,this.counterSize=0,this.heap=G(Uint8Array,n).subarray(V.HEAP_DATA),this.asm=i||V(null,this.heap.buffer),this.mode=null,this.key=null,this.AES_reset(e,t,r)}AES_set_key(e){if(void 0!==e){if(!H(e))throw new TypeError("unexpected key type");var t=e.length;if(16!==t&&24!==t&&32!==t)throw new z("illegal key size");var r=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(t>>2,r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12),t>16?r.getUint32(16):0,t>16?r.getUint32(20):0,t>24?r.getUint32(24):0,t>24?r.getUint32(28):0),this.key=e}else if(!this.key)throw new Error("key is required")}AES_CTR_set_options(e,t,r){if(void 0!==r){if(r<8||r>48)throw new z("illegal counter size");this.counterSize=r;var n=Math.pow(2,r)-1;this.asm.set_mask(0,0,n/4294967296|0,0|n)}else this.counterSize=r=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===e)throw new Error("nonce is required");if(!H(e))throw new TypeError("unexpected nonce type");var i=e.length;if(!i||i>16)throw new z("illegal nonce size");this.nonce=e;var o=new DataView(new ArrayBuffer(16));if(new Uint8Array(o.buffer).set(e),this.asm.set_nonce(o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)),void 0!==t){if(!q(t))throw new TypeError("unexpected counter type");if(t<0||t>=Math.pow(2,r))throw new z("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)}else this.counter=0}AES_set_iv(e){if(void 0!==e){if(!H(e))throw new TypeError("unexpected iv type");if(16!==e.length)throw new z("illegal iv size");var t=new DataView(e.buffer,e.byteOffset,e.byteLength);this.iv=e,this.asm.set_iv(t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}AES_set_padding(e){this.padding=void 0===e||!!e}AES_reset(e,t,r){return this.result=null,this.pos=0,this.len=0,this.AES_set_key(e),this.AES_set_iv(t),this.AES_set_padding(r),this}AES_Encrypt_process(e){if(!H(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,r=this.heap,n=V.ENC[this.mode],i=V.HEAP_DATA,o=this.pos,a=this.len,s=0,l=e.length||0,u=0,c=0,d=new Uint8Array(a+l&-16);l>0;)a+=c=Q(r,o+a,e,s,l),s+=c,l-=c,(c=t.cipher(n,i+o,a))&&d.set(r.subarray(o,o+c),u),u+=c,c<a?(o+=c,a-=c):(o=0,a=0);return this.result=d,this.pos=o,this.len=a,this}AES_Encrypt_finish(e){var t=null,r=0;void 0!==e&&(r=(t=this.AES_Encrypt_process(e).result).length);var n=this.asm,i=this.heap,o=V.ENC[this.mode],a=V.HEAP_DATA,s=this.pos,l=this.len,u=16-l%16,c=l;if(this.hasOwnProperty("padding")){if(this.padding){for(var d=0;d<u;++d)i[s+l+d]=u;c=l+=u}else if(l%16)throw new z("data length must be a multiple of the block size")}else l+=u;var p=new Uint8Array(r+c);return r&&p.set(t),l&&n.cipher(o,a+s,l),c&&p.set(i.subarray(s,s+c),r),this.result=p,this.pos=0,this.len=0,this}AES_Decrypt_process(e){if(!H(e))throw new TypeError("data isn't of expected type");var t=this.asm,r=this.heap,n=V.DEC[this.mode],i=V.HEAP_DATA,o=this.pos,a=this.len,s=0,l=e.length||0,u=0,c=a+l&-16,d=0,p=0;this.padding&&(c-=d=a+l-c||16);for(var f=new Uint8Array(c);l>0;)a+=p=Q(r,o+a,e,s,l),s+=p,l-=p,(p=t.cipher(n,i+o,a-(l?0:d)))&&f.set(r.subarray(o,o+p),u),u+=p,p<a?(o+=p,a-=p):(o=0,a=0);return this.result=f,this.pos=o,this.len=a,this}AES_Decrypt_finish(e){var t=null,r=0;void 0!==e&&(r=(t=this.AES_Decrypt_process(e).result).length);var n=this.asm,i=this.heap,o=V.DEC[this.mode],a=V.HEAP_DATA,s=this.pos,l=this.len,u=l;if(l>0){if(l%16){if(this.hasOwnProperty("padding"))throw new z("data length must be a multiple of the block size");l+=16-l%16}if(n.cipher(o,a+s,l),this.hasOwnProperty("padding")&&this.padding){var c=i[s+u-1];if(c<1||c>16||c>u)throw new K("bad padding");for(var d=0,p=c;p>1;p--)d|=c^i[s+u-p];if(d)throw new K("bad padding");u-=c}}var f=new Uint8Array(r+u);return r>0&&f.set(t),u>0&&f.set(i.subarray(s,s+u),r),this.result=f,this.pos=0,this.len=0,this}},Z=(()=>{class e extends Y{constructor(e,t=null,r=!0,n,i){super(e,t,r,n,i),this.mode="CBC",this.BLOCK_SIZE=16}encrypt(e){return this.AES_Encrypt_finish(e)}decrypt(e){return this.AES_Decrypt_finish(e)}}return e.encrypt=te,e.decrypt=re,e})(),ee;function te(e,t,r,n){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new Z(t,n,r,J,X).encrypt(e).result}function re(e,t,r,n){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new Z(t,n,r,J,X).decrypt(e).result}function ne(e){return new Promise(((t,r)=>{for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),o=0;o<n.length;o++)i[n.charCodeAt(o)]=o;var a=typeof a<"u"?a:{},s=Object.assign({},a);"object"==typeof process&&"object"==typeof process.versions&&process.versions.node,a.print||console.log.bind(console);var l=a.printErr||console.warn.bind(console);Object.assign(a,s),s=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&a.wasmBinary,a.noExitRuntime,"object"!=typeof e&&v("[WACloudCrypto] no native wasm support detected");var u,c=!1;a.INITIAL_MEMORY;var d,p=[],f=[],h=[];var _=0,g=null;function v(t){a.onAbort&&a.onAbort(t),l(t="Aborted("+t+")"),c=!0,t+=". Build with -sASSERTIONS for more info.";var n=new e.RuntimeError(t);r(n)}var m={env:{memory:new e.Memory({initial:256,maximum:256}),STACKTOP:0}};function y(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?w(r)():w(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}var b=[];function w(e){var t=b[e];return t||(e>=b.length&&(b.length=e+1),b[e]=t=d.get(e)),t}var A,E={};function S(e){function t(){A||(A=!0,a.calledRun=!0,!c&&(y(f),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),h.unshift(e);var e;y(h)}()))}_>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),p.unshift(e);var e;y(p)}(),_>0)||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t())}if(function(){var r={a:E};function n(e,r){var n=e.exports;a.asm=n,u=a.asm.a,a.memory=u,function(e){a.HEAP8=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=new Int32Array(e),a.HEAPU8=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}(u.buffer),d=a.asm.g,function(e){f.unshift(e)}(a.asm.b),function(e){if(_--,a.monitorRunDependencies&&a.monitorRunDependencies(_),0==_&&g){var t=g;g=null,t()}}(),t(a)}function o(e){n(e.instance)}function s(t){return e.instantiate(function(e){var t,r,n,o,a,s=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<l;t+=4)r=i[e.charCodeAt(t)],n=i[e.charCodeAt(t+1)],o=i[e.charCodeAt(t+2)],a=i[e.charCodeAt(t+3)],d[u++]=r<<2|n>>4,d[u++]=(15&n)<<4|o>>2,d[u++]=(3&o)<<6|63&a;return c}("AGFzbQEAAAABIgVgA39/fwBgBH9/f38AYAAAYAV/f39/fwBgBn9/f39/fwADBwYBAgADBAAEBQFwAQEBBQYBAYACgAIGCQF/AUHAzMACCwcdBwFhAgABYgABAWMAAgFkAAUBZQAEAWYAAwFnAQAK/zoG/hIBCn8gACgCBCIFQRBqIQQgAigADCAFKAIMcyEGIAIoAAggBSgCCHMhByACKAAEIAUoAgRzIQggAigAACAFKAIAcyECIAAoAgAhAAJ/IAFFBEAgAEEETgRAIABBAXYhCQNAIAhBFnZB/AdxQbAiaigCACAHQQ52QfwHcUGwGmooAgAgBkEGdkH8B3FBsBJqKAIAIAJB/wFxQQJ0QbAKaigCACAEKAIAc3NzcyIAQRZ2QfwHcUGwImooAgAgB0EWdkH8B3FBsCJqKAIAIAZBDnZB/AdxQbAaaigCACACQQZ2QfwHcUGwEmooAgAgCEH/AXFBAnRBsApqKAIAIAQoAgRzc3NzIgFBDnZB/AdxQbAaaigCACAGQRZ2QfwHcUGwImooAgAgAkEOdkH8B3FBsBpqKAIAIAhBBnZB/AdxQbASaigCACAHQf8BcUECdEGwCmooAgAgBCgCCHNzc3MiBUEGdkH8B3FBsBJqKAIAIAJBFnZB/AdxQbAiaigCACAIQQ52QfwHcUGwGmooAgAgB0EGdkH8B3FBsBJqKAIAIAZB/wFxQQJ0QbAKaigCACAEKAIMc3NzcyICQf8BcUECdEGwCmooAgAgBCgCHHNzc3MhBiACQRZ2QfwHcUGwImooAgAgAEEOdkH8B3FBsBpqKAIAIAFBBnZB/AdxQbASaigCACAFQf8BcUECdEGwCmooAgAgBCgCGHNzc3MhByAFQRZ2QfwHcUGwImooAgAgAkEOdkH8B3FBsBpqKAIAIABBBnZB/AdxQbASaigCACABQf8BcUECdEGwCmooAgAgBCgCFHNzc3MhCCABQRZ2QfwHcUGwImooAgAgBUEOdkH8B3FBsBpqKAIAIAJBBnZB/AdxQbASaigCACAAQf8BcUECdEGwCmooAgAgBCgCEHNzc3MhAiAEQSBqIQQgCUECSyEAIAlBAWshCSAADQALC0GwKiEFIAdBFnZB/AdxQbAiaigCACAGQQ52QfwHcUGwGmooAgAgAkEGdkH8B3FBsBJqKAIAIAhB/wFxQQJ0QbAKaigCACAEKAIEc3NzcyIAIQEgCEEWdkH8B3FBsCJqKAIAIAdBDnZB/AdxQbAaaigCACAGQQZ2QfwHcUGwEmooAgAgAkH/AXFBAnRBsApqKAIAIAQoAgBzc3NzIgkhCiACQRZ2QfwHcUGwImooAgAgCEEOdkH8B3FBsBpqKAIAIAdBBnZB/AdxQbASaigCACAGQf8BcUECdEGwCmooAgAgBCgCDHNzc3MiCyEMIAZBFnZB/AdxQbAiaigCACACQQ52QfwHcUGwGmooAgAgCEEGdkH8B3FBsBJqKAIAIAdB/wFxQQJ0QbAKaigCACAEKAIIc3NzcyINDAELIABBBE4EQCAAQQF2IQkDQCAIQRZ2QfwHcUGwxABqKAIAIAJBDnZB/AdxQbA8aigCACAGQQZ2QfwHcUGwNGooAgAgB0H/AXFBAnRBsCxqKAIAIAQoAghzc3NzIgBBFnZB/AdxQbDEAGooAgAgAkEWdkH8B3FBsMQAaigCACAGQQ52QfwHcUGwPGooAgAgB0EGdkH8B3FBsDRqKAIAIAhB/wFxQQJ0QbAsaigCACAEKAIEc3NzcyIBQQ52QfwHcUGwPGooAgAgBkEWdkH8B3FBsMQAaigCACAHQQ52QfwHcUGwPGooAgAgCEEGdkH8B3FBsDRqKAIAIAJB/wFxQQJ0QbAsaigCACAEKAIAc3NzcyIFQQZ2QfwHcUGwNGooAgAgB0EWdkH8B3FBsMQAaigCACAIQQ52QfwHcUGwPGooAgAgAkEGdkH8B3FBsDRqKAIAIAZB/wFxQQJ0QbAsaigCACAEKAIMc3NzcyICQf8BcUECdEGwLGooAgAgBCgCHHNzc3MhBiABQRZ2QfwHcUGwxABqKAIAIAVBDnZB/AdxQbA8aigCACACQQZ2QfwHcUGwNGooAgAgAEH/AXFBAnRBsCxqKAIAIAQoAhhzc3NzIQcgBUEWdkH8B3FBsMQAaigCACACQQ52QfwHcUGwPGooAgAgAEEGdkH8B3FBsDRqKAIAIAFB/wFxQQJ0QbAsaigCACAEKAIUc3NzcyEIIAJBFnZB/AdxQbDEAGooAgAgAEEOdkH8B3FBsDxqKAIAIAFBBnZB/AdxQbA0aigCACAFQf8BcUECdEGwLGooAgAgBCgCEHNzc3MhAiAEQSBqIQQgCUECSyEAIAlBAWshCSAADQALC0GwCCEFIAJBFnZB/AdxQbDEAGooAgAgBkEOdkH8B3FBsDxqKAIAIAdBBnZB/AdxQbA0aigCACAIQf8BcUECdEGwLGooAgAgBCgCBHNzc3MiCyEBIAhBFnZB/AdxQbDEAGooAgAgAkEOdkH8B3FBsDxqKAIAIAZBBnZB/AdxQbA0aigCACAHQf8BcUECdEGwLGooAgAgBCgCCHNzc3MiDSEKIAdBFnZB/AdxQbDEAGooAgAgCEEOdkH8B3FBsDxqKAIAIAJBBnZB/AdxQbA0aigCACAGQf8BcUECdEGwLGooAgAgBCgCDHNzc3MiACEMIAZBFnZB/AdxQbDEAGooAgAgB0EOdkH8B3FBsDxqKAIAIAhBBnZB/AdxQbA0aigCACACQf8BcUECdEGwLGooAgAgBCgCAHNzc3MiCQshAiAEKAIQIQYgBCgCFCEHIAQoAhghCCADIAQoAhwiBCAFIAxB/wFxai0AAHM6AAwgAyAIIAUgDUH/AXFqLQAAczoACCADIAcgBSABQf8BcWotAABzOgAEIAMgBiAFIAlB/wFxai0AAHM6AAAgAyAEIAUgCkEYdmotAABBGHRzQRh2OgAPIAMgCCAFIAtBGHZqLQAAQRh0c0EYdjoACyADIAcgBSACQRh2ai0AAEEYdHNBGHY6AAcgAyAGIAUgAEEYdmotAABBGHRzQRh2OgADIAMgBCAFIAFBEHZB/wFxai0AAEEQdHNBEHY6AA4gAyAEIAUgAkEIdkH/AXFqLQAAQQh0c0EIdjoADSADIAggBSAJQRB2Qf8BcWotAABBEHRzQRB2OgAKIAMgCCAFIABBCHZB/wFxai0AAEEIdHNBCHY6AAkgAyAHIAUgDEEQdkH/AXFqLQAAQRB0c0EQdjoABiADIAcgBSAKQQh2Qf8BcWotAABBCHRzQQh2OgAFIAMgBiAFIA1BEHZB/wFxai0AAEEQdHNBEHY6AAIgAyAGIAUgC0EIdkH/AXFqLQAAQQh0c0EIdjoAAQsDAAELpxYBBn8CQCAAAn9BCiACQYABRg0AGiACQYACRwRAIAJBwAFHDQJBDAwBC0EOCyIENgIAIAAgAEEIaiIDNgIEIAJBBXYhBUEAIQIDQCADIAJBAnQiBmogASAGaigAADYCACACQQFqIgIgBUcNAAsCQAJAAkAgBEEKaw4FAQMAAwIDCyAAIAAoAgggACgCHCIBQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHMiA0EBcyICNgIgIAAgAiAAKAIMcyICNgIkIAAgACgCECIGIAJzIgQ2AiggACAAKAIUIARzIgQ2AiwgACAAKAIYIgcgBHMiBTYCMCAAIAEgBXMiATYCNCAAIAMgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIghBA3MiBTYCOCAAQUBrIAUgBnMiAzYCACAAIAIgBXMiBTYCPCAAIAMgB3MiBjYCSCAAIAMgBHM2AkQgACABIAZzIgI2AkwgACAIIAJBCHZB/wFxQbAIai0AAHMgAkEQdkH/AXFBsAhqLQAAQQh0cyACQRh2QbAIai0AAEEQdHMgAkH/AXFBsAhqLQAAQRh0cyIIQQdzIgI2AlAgACACIAVzIgU2AlQgACAEIAVzIgQ2AlwgACADIAVzNgJYIAAgASAEcyICNgJkIAAgBCAGczYCYCAAIAggAkEIdkH/AXFBsAhqLQAAcyACQRB2Qf8BcUGwCGotAABBCHRzIAJBGHZBsAhqLQAAQRB0cyACQf8BcUGwCGotAABBGHRzIghBD3MiBjYCaCAAIAYgB3MiBzYCeCAAIAMgBnMiAzYCcCAAIAUgBnMiBTYCbCAAIAIgB3MiAjYCfCAAIAMgBHM2AnQgACAIIAJBCHZB/wFxQbAIai0AAHMgAkEQdkH/AXFBsAhqLQAAQQh0cyACQRh2QbAIai0AAEEQdHMgAkH/AXFBsAhqLQAAQRh0cyIGQR9zIgI2AoABIAAgAiAFcyICNgKEASAAIAEgAnMiATYClAEgACACIARzIgQ2AowBIAAgAiADcyIDNgKIASAAIAQgB3MiBTYCkAEgACAGIAFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0cyIGQT9zIgc2ApgBIAAgAiAHcyICNgKcASAAIAIgA3MiAzYCoAEgACADIARzIgQ2AqQBIAAgBCAFcyIFNgKoASAAIAEgBXMiATYCrAEgACAGIAFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0cyIGQf8AcyIHNgKwASAAIAIgB3MiAjYCtAEgACACIANzIgM2ArgBIAAgAyAEcyIENgK8ASAAIAQgBXMiBTYCwAEgACABIAVzIgE2AsQBIAAgBiABQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHNB/wFzIgY2AsgBIAAgAiAGcyICNgLMASAAIAIgA3MiAjYC0AEgACACIARzIgI2AtQBIAAgAiAFcyICNgLYASAAIAEgAnM2AtwBDwsgACAAKAIIIAAoAhQiAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBAXMiAjYCGCAAIAIgACgCDHMiAjYCHCAAIAAoAhAgAnMiAzYCICAAIAEgA3MiATYCJCAAIAQgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBA3MiBTYCKCAAIAIgBXMiAjYCLCAAIAIgA3MiAzYCMCAAIAEgA3MiATYCNCAAIAQgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBB3MiBTYCOCAAIAIgBXMiAjYCPCAAQUBrIAIgA3MiAzYCACAAIAEgA3MiATYCRCAAIAQgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBD3MiBTYCSCAAIAIgBXMiAjYCTCAAIAIgA3MiAzYCUCAAIAEgA3MiATYCVCAAIAQgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBH3MiBTYCWCAAIAIgBXMiAjYCXCAAIAIgA3MiAzYCYCAAIAEgA3MiATYCZCAAIAQgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRBP3MiBTYCaCAAIAIgBXMiAjYCbCAAIAIgA3MiAzYCcCAAIAEgA3MiATYCdCAAIAQgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRB/wBzIgU2AnggACACIAVzIgI2AnwgACACIANzIgM2AoABIAAgASADcyIBNgKEASAAIAQgAUEIdkH/AXFBsAhqLQAAcyABQRB2Qf8BcUGwCGotAABBCHRzIAFBGHZBsAhqLQAAQRB0cyABQf8BcUGwCGotAABBGHRzIgRB/wFzIgU2AogBIAAgAiAFcyICNgKMASAAIAIgA3MiAzYCkAEgACABIANzIgE2ApQBIAAgBCABQQh2Qf8BcUGwCGotAABzIAFBEHZB/wFxQbAIai0AAEEIdHMgAUEYdkGwCGotAABBEHRzIAFB/wFxQbAIai0AAEEYdHMiBEHkAXMiBTYCmAEgACACIAVzIgI2ApwBIAAgAiADcyIDNgKgASAAIAEgA3MiATYCpAEgACAEIAFBCHZB/wFxQbAIai0AAHMgAUEQdkH/AXFBsAhqLQAAQQh0cyABQRh2QbAIai0AAEEQdHMgAUH/AXFBsAhqLQAAQRh0c0HSAXMiBDYCqAEgACACIARzIgI2AqwBIAAgAiADcyICNgKwASAAIAEgAnM2ArQBDwsgAygCACEBQQAhBANAIAMgAygCHCIAQQh2Qf8BcUGwCGotAAAgBEECdEGACGooAgAgAXNzIABBEHZB/wFxQbAIai0AAEEIdHMgAEEYdkGwCGotAABBEHRzIABB/wFxQbAIai0AAEEYdHMiATYCICADIAEgAygCBHMiAjYCJCADIAMoAgggAnMiAjYCKCADIAMoAgwgAnMiAjYCLCADIAMoAhAgAkH/AXFBsAhqLQAAcyACQQh2Qf8BcUGwCGotAABBCHRzIAJBEHZB/wFxQbAIai0AAEEQdHMgAkEYdkGwCGotAABBGHRzIgI2AjAgAyACIAMoAhRzIgI2AjQgAyADKAIYIAJzIgI2AjggAyAAIAJzNgI8IANBIGohAyAEQQFqIgRBB0cNAAsLC8IGARJ/IwBBEGsiBSQAIAFBAEoEQCACQQFqIRYgAkECaiEIIAJBA2ohCSACQQRqIQogAkEFaiELIAJBBmohDCACQQdqIQ0gAkEIaiEOIAJBCWohDyACQQpqIRAgAkELaiERIAJBDGohEiACQQ1qIRMgAkEOaiEUIAJBD2ohFQNAIABBASACIAUQACAEIAUtAAAgAy0AAHM6AAAgBCAFLQABIAMtAAFzOgABIAQgBS0AAiADLQACczoAAiAEIAUtAAMgAy0AA3M6AAMgBCAFLQAEIAMtAARzOgAEIAQgBS0ABSADLQAFczoABSAEIAUtAAYgAy0ABnM6AAYgBCAFLQAHIAMtAAdzOgAHIAQgBS0ACCADLQAIczoACCAEIAUtAAkgAy0ACXM6AAkgBCAFLQAKIAMtAApzOgAKIAQgBS0ACyADLQALczoACyAEIAUtAAwgAy0ADHM6AAwgBCAFLQANIAMtAA1zOgANIAQgBS0ADiADLQAOczoADiAEIAUtAA8gAy0AD3M6AA8gFSEGAkACQCACLQAPIgdB/wFHDQAgFUEAOgAAIBQhBiAULQAAIgdB/wFHDQAgFEEAOgAAIBMhBiATLQAAIgdB/wFHDQAgE0EAOgAAIBIhBiASLQAAIgdB/wFHDQAgEkEAOgAAIBEhBiARLQAAIgdB/wFHDQAgEUEAOgAAIBAhBiAQLQAAIgdB/wFHDQAgEEEAOgAAIA8hBiAPLQAAIgdB/wFHDQAgD0EAOgAAIA4hBiAOLQAAIgdB/wFHDQAgDkEAOgAAIA0hBiANLQAAIgdB/wFHDQAgDUEAOgAAIAwhBiAMLQAAIgdB/wFHDQAgDEEAOgAAIAshBiALLQAAIgdB/wFHDQAgC0EAOgAAIAohBiAKLQAAIgdB/wFHDQAgCkEAOgAAIAkhBiAJLQAAIgdB/wFHDQAgCUEAOgAAIAghBiAILQAAIgdB/wFHDQAgCEEAOgAAIBYiBi0AACIHQf8BRw0AIAJBADoAASACIQYgAi0AACIHQf8BRw0AIAJBADoAAAwBCyAGIAdBAWo6AAALIARBEGohBCADQRBqIQMgAUEQSyEGIAFBEGshASAGDQALCyAFQRBqJAALxQUBAn8jAEEQayIGJAACQCABBEAgAkEATA0BA0AgBSADLQAAIAQtAABzOgAAIAUgAy0AASAELQABczoAASAFIAMtAAIgBC0AAnM6AAIgBSADLQADIAQtAANzOgADIAUgAy0ABCAELQAEczoABCAFIAMtAAUgBC0ABXM6AAUgBSADLQAGIAQtAAZzOgAGIAUgAy0AByAELQAHczoAByAFQQhqIAMtAAggBC0ACHM6AAAgBSADLQAJIAQtAAlzOgAJIAUgAy0ACiAELQAKczoACiAFIAMtAAsgBC0AC3M6AAsgBSADLQAMIAQtAAxzOgAMIAUgAy0ADSAELQANczoADSAFIAMtAA4gBC0ADnM6AA4gBSADLQAPIAQtAA9zOgAPIAAgASAFIAUQACADIAUpAAg3AAggAyAFKQAANwAAIAVBEGohBSAEQRBqIQQgAkEQSyEHIAJBEGshAiAHDQALDAELIAJBAEwNAANAIAYgBCkAADcDACAGIAQpAAg3AwggAEEAIAQgBRAAIAUgAy0AACAFLQAAczoAACAFIAMtAAEgBS0AAXM6AAEgBSADLQACIAUtAAJzOgACIAUgAy0AAyAFLQADczoAAyAFIAMtAAQgBS0ABHM6AAQgBSADLQAFIAUtAAVzOgAFIAUgAy0ABiAFLQAGczoABiAFIAMtAAcgBS0AB3M6AAcgBSADLQAIIAUtAAhzOgAIIAUgAy0ACSAFLQAJczoACSAFIAMtAAogBS0ACnM6AAogBSADLQALIAUtAAtzOgALIAUgAy0ADCAFLQAMczoADCAFIAMtAA0gBS0ADXM6AA0gBSADLQAOIAUtAA5zOgAOIAUgAy0ADyAFLQAPczoADyADIAYpAwg3AAggAyAGKQMANwAAIAVBEGohBSAEQRBqIQQgAkEQSyEBIAJBEGshAiABDQALCyAGQRBqJAALxAUBA38jAEGgAmsiBCQAAkAgAAJ/QQogAkGAAUYNABogAkGAAkcEQCACQcABRw0CQQwMAQtBDgs2AgAgACAAQQhqNgIEIARBCGogASACEAIgACAEKAIMIAQoAghBBHRqIgMoAgA2AgggACADKAIENgIMIAAgAygCCDYCECAAIAMoAgw2AhQgAEEYaiECIANBEGshASAAKAIAIgVBAkgEfyADQRBqBQNAIAIgASIAKAIAIgFBCHZB/wFxQbAIai0AAEECdEGwEmooAgAgAUH/AXFBsAhqLQAAQQJ0QbAKaigCAHMgAUEQdkH/AXFBsAhqLQAAQQJ0QbAaaigCAHMgAUEYdkGwCGotAABBAnRBsCJqKAIAczYCACACIAAoAgQiAUEIdkH/AXFBsAhqLQAAQQJ0QbASaigCACABQf8BcUGwCGotAABBAnRBsApqKAIAcyABQRB2Qf8BcUGwCGotAABBAnRBsBpqKAIAcyABQRh2QbAIai0AAEECdEGwImooAgBzNgIEIAIgACgCCCIBQQh2Qf8BcUGwCGotAABBAnRBsBJqKAIAIAFB/wFxQbAIai0AAEECdEGwCmooAgBzIAFBEHZB/wFxQbAIai0AAEECdEGwGmooAgBzIAFBGHZBsAhqLQAAQQJ0QbAiaigCAHM2AgggAiAAKAIMIgFBCHZB/wFxQbAIai0AAEECdEGwEmooAgAgAUH/AXFBsAhqLQAAQQJ0QbAKaigCAHMgAUEQdkH/AXFBsAhqLQAAQQJ0QbAaaigCAHMgAUEYdkGwCGotAABBAnRBsCJqKAIAczYCDCAAQRBrIQEgAkEQaiECIAVBAkshAyAFQQFrIQUgAw0ACyAAQRBqCyEAIAIgASgCADYCACACIABBHGsoAgA2AgQgAiAAQRhrKAIANgIIIAIgAEEUaygCADYCDAsgBEGgAmokAAsLs0QCAEGACAslAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAbAAAANgBBsAgLgERjfHd78mtvxTABZyv+16t2yoLJffpZR/Ct1KKvnKRywLf9kyY2P/fMNKXl8XHYMRUExyPDGJYFmgcSgOLrJ7J1CYMsGhtuWqBSO9azKeMvhFPRAO0g/LFbasu+OUpMWM/Q76r7Q00zhUX5An9QPJ+oUaNAj5KdOPW8ttohEP/z0s0ME+xfl0QXxKd+PWRdGXNggU/cIiqQiEbuuBTeXgvb4DI6CkkGJFzC06xikZXkeefIN22N1U6pbFb06mV6rgi6eCUuHKa0xujddB9LvYuKcD61ZkgD9g5hNVe5hsEdnuH4mBFp2Y6Umx6H6c5VKN+MoYkNv+ZCaEGZLQ+wVLsWUfSnUH5BZVMaF6TDOideljura8sfnUXxrPpYq0vjA5MgMPpVrXZt9ojMdpH1AkwlT+XX/MUqy9cmNUSAtWKjj96xWkkluhtnReoOmF3+wOHDL3UCgUzwEo1Gl6Nr0/nGA49f5xWSnJW/bXrrlVJZ2tS+gy1YdCHTSeBpKY7JyER1wolq9I55eJlYPmsnuXHdvuFPtvCIrRfJIKxmfc46tGPfShjlGjGCl1EzYGJTf0WxZHfgu2uuhP6BoBz5CCuUcEhoWI9F/RmU3myHUnv4t6tz0yNySwLi4x+PV2ZVqyqy6ygHL7XCA4bFe5rTNwilMCiH8iO/pbICA2q67RaCXIrPHCunebSS8wfy8E5p4qFl2vTNBgW+1dE0Yh/Epv6KNC5TnaLzVaAFiuEypPbrdQuD7DlAYO+qXnGfBr1uEFE+IYr5lt0GPd0+Ba5N5r1GkVSNtXHEXQUEBtRvYFAV/xmY+yTWvemXiUBDzGfZnnew6EK9B4mLiOcZWzh5yO7boXwKR3xCD+n4hB7JAAAAAAmAhoMyK+1IHhFwrGxack79Dv/7D4U4Vj2u1R42LTknCg/ZZGhcpiGbW1TRJDYuOgwKZ7GTV+cPtO6W0hubkZ6AwMVPYdwgolp3S2kcEhoW4pO6CsCgKuU8IuBDEhsXHQ4JDQvyi8etLbaouRQeqchX8RmFr3UHTO6Z3bujf2D99wEmn1xy9bxEZjvFW/t+NItDKXbLI8bctu38aLjk8WPXMdzKQmOFEBOXIkCExhEghUokfdK7Pfiu+TIRxymhbR2eL0vcsjDzDYZS7HfB49ArsxZsqXC5mRGUSPpH6WQiqPyMxKDwPxpWfSzYIjOQ74dJTsfZONHBjMqi/pjUCzam9YHPpXreKNq3jiY/rb+kLDqd5FB4kg1qX8ybVH5GYvaNE8KQ2LjoLjn3XoLDr/WfXYC+adCTfG/VLanPJRKzyKyZOxAYfafonGNu2zu7e80meAluWRj07Jq3AYNPmqjmlW5lqv/mfiG8zwjvFejmuueb2UpvNs7qnwnUKbB81jGksq8qPyMxxqWUMDWiZsB0Trw3/ILKpuCQ0LAzp9gV8QSYSkHs2vd/zVAOF5H2L3ZN1o1D77BNzKpNVOSWBN+e0bXjTGqIG8EsH7hGZVF/nV7qBAGMNV36h3Rz+wtBLrNnHVqS29JS6RBWM23WRxOa12GMN6EMeln4FI7rEzyJzqkn7rdhyTXhHOXtekexPJzS31lV8nM/GBTOeXPHN79T983qX/2qW989bxR4RNuGyq/zgbloxD44JDQswqNAXxYdw3K84iUMKDxJi/8NlUE5qAFxCAyz3ti05JxkVsGQe8uEYdUytnBIbFx00LhXQlBR9KdTfkFlwxoXpJY6J17LO6tr8R+dRaus+liTS+MDVSAw+vatdm2RiMx2JfUCTPxP5dfXxSrLgCY1RI+1YqNJ3rFaZyW6G5hF6g7hXf7AAsMvdRKBTPCjjUaXxmvT+ecDj1+VFZKc679tetqVUlkt1L6D01h0ISlJ4GlEjsnIanXCiXj0jnlrmVg+3Se5cba+4U8X8IitZskgrLR9zjoYY99KguUaMWCXUTNFYlN/4LFkd4S7a64c/oGglPkIK1hwSGgZj0X9h5TebLdSe/gjq3PT4nJLAlfjH48qZlWrB7LrKAMvtcKahsV7pdM3CPIwKIeyI7+lugIDalztFoIris8ckqd5tPDzB/KhTmnizWXa9NUGBb4f0TRiisSm/p00LlOgovNVMgWK4XWk9us5C4PsqkBg7wZecZ9RvW4Q+T4hij2W3Qau3T4FRk3mvbWRVI0FccRdbwQG1P9gUBUkGZj7l9a96cyJQEN3Z9mevbDoQogHiYs45xlb23nI7kehfArpfEIPyfiEHgAAAACDCYCGSDIr7aweEXBObFpy+/0O/1YPhTgePa7VJzYtOWQKD9khaFym0ZtbVDokNi6xDApnD5NX59K07paeG5uRT4DAxaJh3CBpWndLFhwSGgrik7rlwKAqQzwi4B0SGxcLDgkNrfKLx7kttqjIFB6phVfxGUyvdQe77pnd/aN/YJ/3ASa8XHL1xURmOzRb+352i0Mp3Msjxmi27fxjuOTxytcx3BBCY4VAE5ciIITGEX2FSiT40rs9Ea75Mm3HKaFLHZ4v89yyMOwNhlLQd8HjbCuzFpmpcLn6EZRIIkfpZMSo/IwaoPA/2FZ9LO8iM5DHh0lOwdk40f6MyqI2mNQLz6b1gSilet4m2reOpD+tv+QsOp0NUHiSm2pfzGJUfkbC9o0T6JDYuF4uOff1gsOvvp9dgHxp0JOpb9Uts88lEjvIrJmnEBh9buicY3vbO7sJzSZ49G5ZGAHsmreog0+aZeaVbn6q/+YIIbzP5u8V6Nm655vOSm821OqfCdYpsHyvMaSyMSo/IzDGpZTANaJmN3ROvKb8gsqw4JDQFTOn2ErxBJj3QezaDn/NUC8XkfaNdk3WTUPvsFTMqk3f5JYE457RtRtMaoi4wSwff0ZlUQSdXupdAYw1c/qHdC77C0Fas2cdUpLb0jPpEFYTbdZHjJrXYXo3oQyOWfgUiesTPO7OqSc1t2HJ7eEc5Tx6R7FZnNLfP1Xyc3kYFM6/c8c36lP3zVtf/aoU3z1vhnhE24HKr/M+uWjELDgkNF/Co0ByFh3DDLziJYsoPElB/w2VcTmoAd4IDLOc2LTkkGRWwWF7y4Rw1TK2dEhsXELQuFenUFH0ZVN+QaTDGhdeljona8s7q0XxH51Yq6z6A5NL4/pVIDBt9q12dpGIzEwl9QLX/E/ly9fFKkSAJjWjj7ViWknesRtnJboOmEXqwOFd/nUCwy/wEoFMl6ONRvnGa9Nf5wOPnJUVknrrv21Z2pVSgy3UviHTWHRpKUngyESOyYlqdcJ5ePSOPmuZWHHdJ7lPtr7hrRfwiKxmySA6tH3OShhj3zGC5RozYJdRf0ViU3fgsWSuhLtroBz+gSuU+QhoWHBI/RmPRWyHlN74t1J70yOrcwLickuPV+MfqypmVSgHsuvCAy+1e5qGxQil0zeH8jAopbIjv2q6AgOCXO0WHCuKz7SSp3ny8PMH4qFOafTNZdq+1QYFYh/RNP6KxKZTnTQuVaCi8+EyBYrrdaT27DkLg++qQGCfBl5xEFG9bor5PiEGPZbdBa7dPr1GTeaNtZFUXQVxxNRvBAYV/2BQ+yQZmOmX1r1DzIlAnndn2UK9sOiLiAeJWzjnGe7becgKR6F8D+l8Qh7J+IQAAAAAhoMJgO1IMitwrB4Rck5sWv/7/Q44Vg+F1R49rjknNi3ZZAoPpiFoXFTRm1suOiQ2Z7EMCucPk1eW0rTukZ4bm8VPgMAgomHcS2ladxoWHBK6CuKTKuXAoOBDPCIXHRIbDQsOCcet8ououS22qcgUHhmFV/EHTK913bvumWD9o38mn/cB9bxccjvFRGZ+NFv7KXaLQ8bcyyP8aLbt8WO45NzK1zGFEEJjIkATlxEghMYkfYVKPfjSuzIRrvmhbccpL0sdnjDz3LJS7A2G49B3wRZsK7O5malwSPoRlGQiR+mMxKj8Pxqg8CzYVn2Q7yIzTseHSdHB2Tii/ozKCzaY1IHPpvXeKKV6jibat7+kP62d5Cw6kg1QeMybal9GYlR+E8L2jbjokNj3Xi45r/WCw4C+n12TfGnQLalv1RKzzyWZO8isfacQGGNu6Jy7e9s7eAnNJhj0blm3AeyamqiDT25l5pXmfqr/zwghvOjm7xWb2brnNs5KbwnU6p981imwsq8xpCMxKj+UMMalZsA1orw3dE7KpvyC0LDgkNgVM6eYSvEE2vdB7FAOf832LxeR1o12TbBNQ+9NVMyqBN/klrXjntGIG0xqH7jBLFF/RmXqBJ1eNV0BjHRz+odBLvsLHVqzZ9JSkttWM+kQRxNt1mGMmtcMejehFI5Z+DyJ6xMn7s6pyTW3YeXt4RyxPHpH31mc0nM/VfLOeRgUN79zx83qU/eqW1/9bxTfPduGeETzgcqvxD65aDQsOCRAX8Kjw3IWHSUMvOJJiyg8lUH/DQFxOaiz3ggM5JzYtMGQZFaEYXvLtnDVMlx0SGxXQtC49KdQUUFlU34XpMMaJ16WOqtryzudRfEf+lirrOMDk0sw+lUgdm32rcx2kYgCTCX15df8TyrL18U1RIAmYqOPtbFaSd66G2cl6g6YRf7A4V0vdQLDTPASgUaXo43T+cZrj1/nA5KclRVteuu/Ulnalb6DLdR0IdNY4GkpScnIRI7CiWp1jnl49Fg+a5m5cd0n4U+2voitF/AgrGbJzjq0fd9KGGMaMYLlUTNgl1N/RWJkd+Cxa66Eu4GgHP4IK5T5SGhYcEX9GY/ebIeUe/i3UnPTI6tLAuJyH49X41WrKmbrKAeytcIDL8V7moY3CKXTKIfyML+lsiMDaroCFoJc7c8cK4p5tJKnB/Lw82nioU7a9M1lBb7VBjRiH9Gm/orELlOdNPNVoKKK4TIF9ut1pIPsOQtg76pAcZ8GXm4QUb0hivk+3QY9lj4Frt3mvUZNVI21kcRdBXEG1G8EUBX/YJj7JBm96ZfWQEPMidmed2foQr2wiYuIBxlbOOfI7tt5fApHoUIP6XyEHsn4AAAAAICGgwkr7UgyEXCsHlpyTmwO//v9hThWD67VHj0tOSc2D9lkClymIWhbVNGbNi46JApnsQxX5w+T7pbStJuRnhvAxU+A3CCiYXdLaVoSGhYck7oK4qAq5cAi4EM8GxcdEgkNCw6Lx63ytqi5LR6pyBTxGYVXdQdMr5ndu+5/YP2jASaf93L1vFxmO8VE+340W0MpdosjxtzL7fxotuTxY7gx3MrXY4UQQpciQBPGESCESiR9hbs9+NL5MhGuKaFtx54vSx2yMPPchlLsDcHj0HezFmwrcLmZqZRI+hHpZCJH/IzEqPA/GqB9LNhWM5DvIklOx4c40cHZyqL+jNQLNpj1gc+met4opbeOJtqtv6Q/Op3kLHiSDVBfzJtqfkZiVI0TwvbYuOiQOfdeLsOv9YJdgL6f0JN8adUtqW8lErPPrJk7yBh9pxCcY27oO7t72yZ4Cc1ZGPRumrcB7E+aqIOVbmXm/+Z+qrzPCCEV6Obv55vZum82zkqfCdTqsHzWKaSyrzE/IzEqpZQwxqJmwDVOvDd0gsqm/JDQsOCn2BUzBJhK8eza90HNUA5/kfYvF03WjXbvsE1Dqk1UzJYE3+TRteOeaogbTCwfuMFlUX9GXuoEnYw1XQGHdHP6C0Eu+2cdWrPb0lKSEFYz6dZHE23XYYyaoQx6N/gUjlkTPInrqSfuzmHJNbcc5e3hR7E8etLfWZzycz9VFM55GMc3v3P3zepT/apbXz1vFN9E24Z4r/OBymjEPrkkNCw4o0Bfwh3DchbiJQy8PEmLKA2VQf+oAXE5DLPeCLTknNhWwZBky4RhezK2cNVsXHRIuFdC0FIJatUwNqU4v0CjnoHz1/t84zmCmy//hzSOQ0TE3unLVHuUMqbCIz3uTJULQvrDTgguoWYo2SSydluiSW2L0SVy+PZkhmiYFtSkXMxdZbaSbHBIUP3tudpeFUZXp42dhJDYqwCMvNMK9+RYBbizRQbQLB6Pyj8PAsGvvQMBE4prOpERQU9n3OqX8s/O8LTmc5asdCLnrTWF4vk36Bx1325H8RpxHSnFiW+3Yg6qGL4b/FY+S8bSeSCa28D+eM1a9B/dqDOIB8cxsRIQWSeA7F9gUX+pGbVKDS3lep+TyZzvoOA7Ta4q9bDI67s8g1OZYRcrBH66d9Ym4WkUY1UhDH3GY2Ol+Hx8hO53d5n2e3uN//LyDdZra73eb2+xkcXFVGAwMFACAQEDzmdnqVYrK33n/v4ZtdfXYk2rq+bsdnaaj8rKRR+Cgp2JyclA+n19h+/6+hWyWVnrjkdHyfvw8AtBra3ss9TUZ1+iov1Fr6/qI5ycv1OkpPfkcnKWm8DAW3W3t8Lh/f0cPZOTrkwmJmpsNjZafj8/QfX39wKDzMxPaDQ0XFGlpfTR5eU0+fHxCOJxcZOr2NhzYjExUyoVFT8IBAQMlcfHUkYjI2Wdw8NeMBgYKDeWlqEKBQUPL5qatQ4HBwkkEhI2G4CAm9/i4j3N6+smTicnaX+yss3qdXWfEgkJGx2Dg55YLCx0NBoaLjYbGy3cbm6ytFpa7lugoPukUlL2djs7TbfW1mF9s7POUikpe93j4z5eLy9xE4SEl6ZTU/W50dFoAAAAAMHt7SxAICBg4/z8H3mxsci2W1vt1Gpqvo3Ly0Znvr7Zcjk5S5RKSt6YTEzUsFhY6IXPz0q70NBrxe/vKk+qquXt+/sWhkNDxZpNTddmMzNVEYWFlIpFRc/p+fkQBAICBv5/f4GgUFDweDw8RCWfn7pLqKjjolFR812jo/6AQEDABY+Pij+Skq0hnZ28cDg4SPH19QRjvLzfd7a2wa/a2nVCISFjIBAQMOX//xr98/MOv9LSbYHNzUwYDAwUJhMTNcPs7C++X1/hNZeXoohERMwuFxc5k8TEV1Wnp/L8fn6Cej09R8hkZKy6XV3nMhkZK+Zzc5XAYGCgGYGBmJ5PT9Gj3Nx/RCIiZlQqKn47kJCrC4iIg4xGRsrH7u4pa7i40ygUFDyn3t55vF5e4hYLCx2t29t22+DgO2QyMlZ0OjpOFAoKHpJJSdsMBgYKSCQkbLhcXOSfwsJdvdPTbkOsrO/EYmKmOZGRqDGVlaTT5OQ38nl5i9Xn5zKLyMhDbjc3WdptbbcBjY2MsdXVZJxOTtJJqang2GxstKxWVvrz9PQHz+rqJcplZa/0enqOR66u6RAICBhvurrV8Hh4iEolJW9cLi5yOBwcJFempvFztLTHl8bGUcvo6COh3d186HR0nD4fHyGWS0vdYb293A2Li4YPioqF4HBwkHw+PkJxtbXEzGZmqpBISNgGAwMF9/b2ARwODhLCYWGjajU1X65XV/lpubnQF4aGkZnBwVg6HR0nJ56eudnh4Tjr+PgTK5iYsyIRETPSaWm7qdnZcAeOjokzlJSnLZubtjweHiIVh4eSyenpIIfOzkmqVVX/UCgoeKXf33oDjIyPWaGh+AmJiYAaDQ0XZb+/2tfm5jGEQkLG0GhouIJBQcMpmZmwWi0tdx4PDxF7sLDLqFRU/G27u9YsFhY6pcZjY4T4fHyZ7nd3jfZ7ew3/8vK91mtrsd5vb1SRxcVQYDAwAwIBAanOZ2d9VisrGef+/mK119fmTaurmux2dkWPysqdH4KCQInJyYf6fX0V7/r667JZWcmOR0cL+/Dw7EGtrWez1NT9X6Ki6kWvr78jnJz3U6SkluRyclubwMDCdbe3HOH9/a49k5NqTCYmWmw2NkF+Pz8C9ff3T4PMzFxoNDT0UaWlNNHl5Qj58fGT4nFxc6vY2FNiMTE/KhUVDAgEBFKVx8dlRiMjXp3DwygwGBihN5aWDwoFBbUvmpoJDgcHNiQSEpsbgIA93+LiJs3r62lOJyfNf7Kyn+p1dRsSCQmeHYODdFgsLC40GhotNhsbstxubu60Wlr7W6Cg9qRSUk12Oztht9bWzn2zs3tSKSk+3ePjcV4vL5cThIT1plNTaLnR0QAAAAAswe3tYEAgIB/j/PzIebGx7bZbW77UampGjcvL2We+vktyOTnelEpK1JhMTOiwWFhKhc/Pa7vQ0CrF7+/lT6qqFu37+8WGQ0PXmk1NVWYzM5QRhYXPikVFEOn5+QYEAgKB/n9/8KBQUER4PDy6JZ+f40uoqPOiUVH+XaOjwIBAQIoFj4+tP5KSvCGdnUhwODgE8fX132O8vMF3trZ1r9raY0IhITAgEBAa5f//Dv3z822/0tJMgc3NFBgMDDUmExMvw+zs4b5fX6I1l5fMiEREOS4XF1eTxMTyVaengvx+fkd6PT2syGRk57pdXSsyGRmV5nNzoMBgYJgZgYHRnk9Pf6Pc3GZEIiJ+VCoqqzuQkIMLiIjKjEZGKcfu7tNruLg8KBQUeafe3uK8Xl4dFgsLdq3b2zvb4OBWZDIyTnQ6Oh4UCgrbkklJCgwGBmxIJCTkuFxcXZ/Cwm6909PvQ6yspsRiYqg5kZGkMZWVN9Pk5IvyeXky1efnQ4vIyFluNze32m1tjAGNjWSx1dXSnE5O4EmpqbTYbGz6rFZWB/P09CXP6uqvymVljvR6eulHrq4YEAgI1W+6uojweHhvSiUlclwuLiQ4HBzxV6amx3O0tFGXxsYjy+jofKHd3ZzodHQhPh8f3ZZLS9xhvb2GDYuLhQ+KipDgcHBCfD4+xHG1tarMZmbYkEhIBQYDAwH39vYSHA4Oo8JhYV9qNTX5rldX0Gm5uZEXhoZYmcHBJzodHbknnp442eHhE+v4+LMrmJgzIhERu9JpaXCp2dmJB46OpzOUlLYtm5siPB4ekhWHhyDJ6elJh87O/6pVVXhQKCh6pd/fjwOMjPhZoaGACYmJFxoNDdplv78x1+bmxoRCQrjQaGjDgkFBsCmZmXdaLS0RHg8Py3uwsPyoVFTWbbu7OiwWFmOlxmN8hPh8d5nud3uN9nvyDf/ya73Wa2+x3m/FVJHFMFBgMAEDAgFnqc5nK31WK/4Z5/7XYrXXq+ZNq3aa7HbKRY/Kgp0fgslAicl9h/p9+hXv+lnrsllHyY5H8Av78K3sQa3UZ7PUov1foq/qRa+cvyOcpPdTpHKW5HLAW5vAt8J1t/0c4f2Trj2TJmpMJjZabDY/QX4/9wL198xPg8w0XGg0pfRRpeU00eXxCPnxcZPicdhzq9gxU2IxFT8qFQQMCATHUpXHI2VGI8NencMYKDAYlqE3lgUPCgWatS+aBwkOBxI2JBKAmxuA4j3f4usmzesnaU4nss1/snWf6nUJGxIJg54dgyx0WCwaLjQaGy02G26y3G5a7rRaoPtboFL2pFI7TXY71mG31rPOfbMpe1Ip4z7d4y9xXi+ElxOEU/WmU9FoudEAAAAA7SzB7SBgQCD8H+P8sch5sVvttltqvtRqy0aNy77ZZ745S3I5St6USkzUmExY6LBYz0qFz9Bru9DvKsXvquVPqvsW7ftDxYZDTdeaTTNVZjOFlBGFRc+KRfkQ6fkCBgQCf4H+f1DwoFA8RHg8n7oln6jjS6hR86JRo/5do0DAgECPigWPkq0/kp28IZ04SHA49QTx9bzfY7y2wXe22nWv2iFjQiEQMCAQ/xrl//MO/fPSbb/SzUyBzQwUGAwTNSYT7C/D7F/hvl+XojWXRMyIRBc5LhfEV5PEp/JVp36C/H49R3o9ZKzIZF3nul0ZKzIZc5Xmc2CgwGCBmBmBT9GeT9x/o9wiZkQiKn5UKpCrO5CIgwuIRsqMRu4px+6402u4FDwoFN55p95e4rxeCx0WC9t2rdvgO9vgMlZkMjpOdDoKHhQKSduSSQYKDAYkbEgkXOS4XMJdn8LTbr3TrO9DrGKmxGKRqDmRlaQxleQ30+R5i/J55zLV58hDi8g3WW43bbfabY2MAY3VZLHVTtKcTqngSalstNhsVvqsVvQH8/TqJc/qZa/KZXqO9Hqu6UeuCBgQCLrVb7p4iPB4JW9KJS5yXC4cJDgcpvFXprTHc7TGUZfG6CPL6N18od10nOh0HyE+H0vdlku93GG9i4YNi4qFD4pwkOBwPkJ8PrXEcbVmqsxmSNiQSAMFBgP2Aff2DhIcDmGjwmE1X2o1V/muV7nQabmGkReGwViZwR0nOh2euSee4TjZ4fgT6/iYsyuYETMiEWm70mnZcKnZjokHjpSnM5Sbti2bHiI8HoeSFYfpIMnpzkmHzlX/qlUoeFAo33ql34yPA4yh+FmhiYAJiQ0XGg2/2mW/5jHX5kLGhEJouNBoQcOCQZmwKZktd1otDxEeD7DLe7BU/KhUu9ZtuxY6LBZjY6XGfHyE+Hd3me57e4328vIN/2trvdZvb7HexcVUkTAwUGABAQMCZ2epzisrfVb+/hnn19ditaur5k12dprsyspFj4KCnR/JyUCJfX2H+vr6Fe9ZWeuyR0fJjvDwC/utrexB1NRns6Ki/V+vr+pFnJy/I6Sk91NycpbkwMBbm7e3wnX9/Rzhk5OuPSYmakw2NlpsPz9Bfvf3AvXMzE+DNDRcaKWl9FHl5TTR8fEI+XFxk+LY2HOrMTFTYhUVPyoEBAwIx8dSlSMjZUbDw16dGBgoMJaWoTcFBQ8Kmpq1LwcHCQ4SEjYkgICbG+LiPd/r6ybNJydpTrKyzX91dZ/qCQkbEoODnh0sLHRYGhouNBsbLTZubrLcWlrutKCg+1tSUvakOztNdtbWYbezs859KSl7UuPjPt0vL3FehISXE1NT9abR0Wi5AAAAAO3tLMEgIGBA/Pwf47GxyHlbW+22amq+1MvLRo2+vtlnOTlLckpK3pRMTNSYWFjosM/PSoXQ0Gu77+8qxaqq5U/7+xbtQ0PFhk1N15ozM1VmhYWUEUVFz4r5+RDpAgIGBH9/gf5QUPCgPDxEeJ+fuiWoqONLUVHzoqOj/l1AQMCAj4+KBZKSrT+dnbwhODhIcPX1BPG8vN9jtrbBd9rada8hIWNCEBAwIP//GuXz8w790tJtv83NTIEMDBQYExM1JuzsL8NfX+G+l5eiNUREzIgXFzkuxMRXk6en8lV+foL8PT1HemRkrMhdXee6GRkrMnNzleZgYKDAgYGYGU9P0Z7c3H+jIiJmRCoqflSQkKs7iIiDC0ZGyozu7inHuLjTaxQUPCje3nmnXl7ivAsLHRbb23at4OA72zIyVmQ6Ok50CgoeFElJ25IGBgoMJCRsSFxc5LjCwl2f09Nuvays70NiYqbEkZGoOZWVpDHk5DfTeXmL8ufnMtXIyEOLNzdZbm1tt9qNjYwB1dVksU5O0pypqeBJbGy02FZW+qz09Afz6uolz2Vlr8p6eo70rq7pRwgIGBC6utVveHiI8CUlb0ouLnJcHBwkOKam8Ve0tMdzxsZRl+joI8vd3XyhdHSc6B8fIT5LS92Wvb3cYYuLhg2KioUPcHCQ4D4+Qny1tcRxZmaqzEhI2JADAwUG9vYB9w4OEhxhYaPCNTVfaldX+a65udBphoaRF8HBWJkdHSc6np65J+HhONn4+BPrmJizKxERMyJpabvS2dlwqY6OiQeUlKczm5u2LR4eIjyHh5IV6ekgyc7OSYdVVf+qKCh4UN/feqWMjI8DoaH4WYmJgAkNDRcav7/aZebmMddCQsaEaGi40EFBw4KZmbApLS13Wg8PER6wsMt7VFT8qLu71m0WFjos"),m).then((function(e){return e})).then(t,(function(e){l("[WACloudCrypto] failed to asynchronously prepare wasm: "+e),v(e)}))}if(_++,a.monitorRunDependencies&&a.monitorRunDependencies(_),a.instantiateWasm)try{return a.instantiateWasm(r,n)}catch(e){return l("[WACloudCrypto] Module.instantiateWasm callback failed with error: "+e),!1}s(o)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.b).apply(null,arguments)},a._aes_setkey_enc=function(){return(a._aes_setkey_enc=a.asm.c).apply(null,arguments)},a._aes_setkey_dec=function(){return(a._aes_setkey_dec=a.asm.d).apply(null,arguments)},a._aes_crypt_cbc=function(){return(a._aes_crypt_cbc=a.asm.e).apply(null,arguments)},a._aes_crypt_ctr=function(){return(a._aes_crypt_ctr=a.asm.f).apply(null,arguments)},g=function e(){A||S(),A||(g=e)},a.run=S,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return a}))}function ie(e){return parseInt(e)===e}function oe(e){if(!ie(e.length))return!1;for(var t=0;t<e.length;t++)if(!ie(e[t])||e[t]<0||e[t]>255)return!1;return!0}function ae(e,t){if(e.buffer&&ArrayBuffer.isView(e))return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!oe(e))throw new Error("[WACloudCrypto] Array contains invalid value: "+e);return new Uint8Array(e)}if(ie(e.length)&&oe(e))return new Uint8Array(e);throw new Error("[WACloudCrypto] unsupported array-like object")}function se(){var e=16384;return t=>(e+=t)-t}function le(e){return new Uint8Array(e)}function ue(e,t,r,n,i){(null!=n||null!=i)&&(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}function ce(e){var t=16-(e=ae(e,!0)).length%16,r=le(e.length+t);ue(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r}function de(e){if((e=ae(e,!0)).length<16)throw new Error("[WACloudCrypto] PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("[WACloudCrypto] PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("[WACloudCrypto] PKCS#7 invalid padding byte");var i=le(r);return ue(e,i,0,0,r),i}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=a()((function*(e){var t,r=yield ne(e),n=se(),i=r,o=new Uint8Array(i.memory.buffer),a=n(276),s=n(276),l=n(16),u=n(16),c=n(0);function d(e){var t=ae(e);o.set(t,c)}function p(e,r,n="CBC"){o.set(r,u),o.set(e,l),i._aes_setkey_enc(a,l,128),i._aes_setkey_dec(s,l,128),t=n}return{init:p,encrypt:(e,r,n)=>(p(r,n,"CBC"),d(e=ce(e)),"CBC"===t?i._aes_crypt_cbc(a,1,e.length,u,c,c):i._aes_crypt_ctr(a,e.length,u,c,c),o.subarray(c,c+e.length).slice()),decrypt:(e,r,n)=>(p(r,n,"CBC"),d(e),"CBC"===t?i._aes_crypt_cbc(s,0,e.length,u,c,c):i._aes_crypt_ctr(a,e.length,u,c,c),de(o.subarray(c,c+e.length).slice()))}}))).apply(this,arguments)}function he(e){if(!ee)return pe(e).then((e=>{ee=e})).catch((()=>{}))}function _e(){return ee}function ge(e,t){var r=_e();return{encrypted:r?r.encrypt(t,e,e):Z.encrypt(t,e,void 0,e)}}function ve(e){return be(e).buffer}function me(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function ye(e){return null==e}function be(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}function we(e){for(var t=e.length;t--;)e[t]=Math.floor(256*Math.random());return e}function Ae(e){var t=e.reduce(((e,t)=>e+t.length),0);if(!e.length)return null;var r=new Uint8Array(t),n=0;for(var i of e)r.set(i,n),n+=i.length;return r}function Ee(e){return Se(e)}m(),m(),m();var Se=function(){var e=new Array(128),t=String.fromCodePoint||String.fromCharCode,r=[];return function(n){var i,o,a=n.length;r.length=0;for(var s=0;s<a;)(o=n[s++])<=127?i=o:o<=223?i=(31&o)<<6|63&n[s++]:o<=239?i=(15&o)<<12|(63&n[s++])<<6|63&n[s++]:String.fromCodePoint?i=(7&o)<<18|(63&n[s++])<<12|(63&n[s++])<<6|63&n[s++]:(i=63,s+=3),r.push(e[i]||(e[i]=t(i)));return r.join("")}}(),Ie=v(w(),1);m();var Te=v(j(),1),Ce=Te.Reader,Oe=Te.Writer,Ne=Te.util,xe=Te.roots.default||(Te.roots.default={}),Re=xe.HTTPRequest=(()=>{function e(e){if(this.header=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.method="",e.prototype.header=Ne.emptyArray,e.prototype.body=Ne.newBuffer([]),e.prototype.callId="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oe.create()),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(10).string(e.method),null!=e.header&&e.header.length)for(var r=0;r<e.header.length;++r)xe.HTTPHeader.encode(e.header[r],t.uint32(18).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(26).bytes(e.body),null!=e.callId&&Object.hasOwnProperty.call(e,"callId")&&t.uint32(34).string(e.callId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ce||(e=Ce.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new xe.HTTPRequest;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.method=e.string();break;case 2:n.header&&n.header.length||(n.header=[]),n.header.push(xe.HTTPHeader.decode(e,e.uint32()));break;case 3:n.body=e.bytes();break;case 4:n.callId=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Ce||(e=new Ce(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.method&&e.hasOwnProperty("method")&&!Ne.isString(e.method))return"method: string expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var r=xe.HTTPHeader.verify(e.header[t]);if(r)return"header."+r}}return null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||Ne.isString(e.body))?"body: buffer expected":null!=e.callId&&e.hasOwnProperty("callId")&&!Ne.isString(e.callId)?"callId: string expected":null},e.fromObject=function(e){if(e instanceof xe.HTTPRequest)return e;var t=new xe.HTTPRequest;if(null!=e.method&&(t.method=String(e.method)),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPRequest.header: array expected");t.header=[];for(var r=0;r<e.header.length;++r){if("object"!=typeof e.header[r])throw TypeError(".HTTPRequest.header: object expected");t.header[r]=xe.HTTPHeader.fromObject(e.header[r])}}return null!=e.body&&("string"==typeof e.body?Ne.base64.decode(e.body,t.body=Ne.newBuffer(Ne.base64.length(e.body)),0):e.body.length>=0&&(t.body=e.body)),null!=e.callId&&(t.callId=String(e.callId)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.header=[]),t.defaults&&(r.method="",t.bytes===String?r.body="":(r.body=[],t.bytes!==Array&&(r.body=Ne.newBuffer(r.body))),r.callId=""),null!=e.method&&e.hasOwnProperty("method")&&(r.method=e.method),e.header&&e.header.length){r.header=[];for(var n=0;n<e.header.length;++n)r.header[n]=xe.HTTPHeader.toObject(e.header[n],t)}return null!=e.body&&e.hasOwnProperty("body")&&(r.body=t.bytes===String?Ne.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),null!=e.callId&&e.hasOwnProperty("callId")&&(r.callId=e.callId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Te.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPRequest"},e})(),Pe=xe.HTTPResponse=(()=>{function e(e){if(this.header=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.statusCode=0,e.prototype.header=Ne.emptyArray,e.prototype.bodyBuffer=Ne.newBuffer([]),e.prototype.bodyString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oe.create()),null!=e.statusCode&&Object.hasOwnProperty.call(e,"statusCode")&&t.uint32(8).uint32(e.statusCode),null!=e.header&&e.header.length)for(var r=0;r<e.header.length;++r)xe.HTTPHeader.encode(e.header[r],t.uint32(18).fork()).ldelim();return null!=e.bodyBuffer&&Object.hasOwnProperty.call(e,"bodyBuffer")&&t.uint32(26).bytes(e.bodyBuffer),null!=e.bodyString&&Object.hasOwnProperty.call(e,"bodyString")&&t.uint32(34).string(e.bodyString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ce||(e=Ce.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new xe.HTTPResponse;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.statusCode=e.uint32();break;case 2:n.header&&n.header.length||(n.header=[]),n.header.push(xe.HTTPHeader.decode(e,e.uint32()));break;case 3:n.bodyBuffer=e.bytes();break;case 4:n.bodyString=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Ce||(e=new Ce(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.statusCode&&e.hasOwnProperty("statusCode")&&!Ne.isInteger(e.statusCode))return"statusCode: integer expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var r=xe.HTTPHeader.verify(e.header[t]);if(r)return"header."+r}}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&!(e.bodyBuffer&&"number"==typeof e.bodyBuffer.length||Ne.isString(e.bodyBuffer))?"bodyBuffer: buffer expected":null!=e.bodyString&&e.hasOwnProperty("bodyString")&&!Ne.isString(e.bodyString)?"bodyString: string expected":null},e.fromObject=function(e){if(e instanceof xe.HTTPResponse)return e;var t=new xe.HTTPResponse;if(null!=e.statusCode&&(t.statusCode=e.statusCode>>>0),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPResponse.header: array expected");t.header=[];for(var r=0;r<e.header.length;++r){if("object"!=typeof e.header[r])throw TypeError(".HTTPResponse.header: object expected");t.header[r]=xe.HTTPHeader.fromObject(e.header[r])}}return null!=e.bodyBuffer&&("string"==typeof e.bodyBuffer?Ne.base64.decode(e.bodyBuffer,t.bodyBuffer=Ne.newBuffer(Ne.base64.length(e.bodyBuffer)),0):e.bodyBuffer.length>=0&&(t.bodyBuffer=e.bodyBuffer)),null!=e.bodyString&&(t.bodyString=String(e.bodyString)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.header=[]),t.defaults&&(r.statusCode=0,t.bytes===String?r.bodyBuffer="":(r.bodyBuffer=[],t.bytes!==Array&&(r.bodyBuffer=Ne.newBuffer(r.bodyBuffer))),r.bodyString=""),null!=e.statusCode&&e.hasOwnProperty("statusCode")&&(r.statusCode=e.statusCode),e.header&&e.header.length){r.header=[];for(var n=0;n<e.header.length;++n)r.header[n]=xe.HTTPHeader.toObject(e.header[n],t)}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&(r.bodyBuffer=t.bytes===String?Ne.base64.encode(e.bodyBuffer,0,e.bodyBuffer.length):t.bytes===Array?Array.prototype.slice.call(e.bodyBuffer):e.bodyBuffer),null!=e.bodyString&&e.hasOwnProperty("bodyString")&&(r.bodyString=e.bodyString),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Te.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPResponse"},e})(),De=xe.HTTPHeader=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ce||(e=Ce.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new xe.HTTPHeader;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Ce||(e=new Ce(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!Ne.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!Ne.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof xe.HTTPHeader)return e;var t=new xe.HTTPHeader;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",r.value=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Te.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/HTTPHeader"},e})(),Le=xe.QBaseApiData=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.qbaseApiName="",e.prototype.qbaseMeta=null,e.prototype.qbaseOptions=null,e.prototype.qbaseReq="",e.prototype.cliReqId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.qbaseApiName&&Object.hasOwnProperty.call(e,"qbaseApiName")&&t.uint32(10).string(e.qbaseApiName),null!=e.qbaseMeta&&Object.hasOwnProperty.call(e,"qbaseMeta")&&xe.QBaseApiData.QBaseMeta.encode(e.qbaseMeta,t.uint32(18).fork()).ldelim(),null!=e.qbaseOptions&&Object.hasOwnProperty.call(e,"qbaseOptions")&&xe.QBaseApiData.QBaseOptions.encode(e.qbaseOptions,t.uint32(26).fork()).ldelim(),null!=e.qbaseReq&&Object.hasOwnProperty.call(e,"qbaseReq")&&t.uint32(34).string(e.qbaseReq),null!=e.cliReqId&&Object.hasOwnProperty.call(e,"cliReqId")&&t.uint32(42).string(e.cliReqId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ce||(e=Ce.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new xe.QBaseApiData;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.qbaseApiName=e.string();break;case 2:n.qbaseMeta=xe.QBaseApiData.QBaseMeta.decode(e,e.uint32());break;case 3:n.qbaseOptions=xe.QBaseApiData.QBaseOptions.decode(e,e.uint32());break;case 4:n.qbaseReq=e.string();break;case 5:n.cliReqId=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Ce||(e=new Ce(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.qbaseApiName&&e.hasOwnProperty("qbaseApiName")&&!Ne.isString(e.qbaseApiName))return"qbaseApiName: string expected";if(null!=e.qbaseMeta&&e.hasOwnProperty("qbaseMeta")){var t=xe.QBaseApiData.QBaseMeta.verify(e.qbaseMeta);if(t)return"qbaseMeta."+t}if(null!=e.qbaseOptions&&e.hasOwnProperty("qbaseOptions")){var r=xe.QBaseApiData.QBaseOptions.verify(e.qbaseOptions);if(r)return"qbaseOptions."+r}return null!=e.qbaseReq&&e.hasOwnProperty("qbaseReq")&&!Ne.isString(e.qbaseReq)?"qbaseReq: string expected":null!=e.cliReqId&&e.hasOwnProperty("cliReqId")&&!Ne.isString(e.cliReqId)?"cliReqId: string expected":null},e.fromObject=function(e){if(e instanceof xe.QBaseApiData)return e;var t=new xe.QBaseApiData;if(null!=e.qbaseApiName&&(t.qbaseApiName=String(e.qbaseApiName)),null!=e.qbaseMeta){if("object"!=typeof e.qbaseMeta)throw TypeError(".QBaseApiData.qbaseMeta: object expected");t.qbaseMeta=xe.QBaseApiData.QBaseMeta.fromObject(e.qbaseMeta)}if(null!=e.qbaseOptions){if("object"!=typeof e.qbaseOptions)throw TypeError(".QBaseApiData.qbaseOptions: object expected");t.qbaseOptions=xe.QBaseApiData.QBaseOptions.fromObject(e.qbaseOptions)}return null!=e.qbaseReq&&(t.qbaseReq=String(e.qbaseReq)),null!=e.cliReqId&&(t.cliReqId=String(e.cliReqId)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.qbaseApiName="",r.qbaseMeta=null,r.qbaseOptions=null,r.qbaseReq="",r.cliReqId=""),null!=e.qbaseApiName&&e.hasOwnProperty("qbaseApiName")&&(r.qbaseApiName=e.qbaseApiName),null!=e.qbaseMeta&&e.hasOwnProperty("qbaseMeta")&&(r.qbaseMeta=xe.QBaseApiData.QBaseMeta.toObject(e.qbaseMeta,t)),null!=e.qbaseOptions&&e.hasOwnProperty("qbaseOptions")&&(r.qbaseOptions=xe.QBaseApiData.QBaseOptions.toObject(e.qbaseOptions,t)),null!=e.qbaseReq&&e.hasOwnProperty("qbaseReq")&&(r.qbaseReq=e.qbaseReq),null!=e.cliReqId&&e.hasOwnProperty("cliReqId")&&(r.cliReqId=e.cliReqId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Te.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData"},e.QBaseMeta=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.firstLaunch=!1,e.prototype.sessionId="",e.prototype.sdkVersion="",e.prototype.filterUserInfo=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.firstLaunch&&Object.hasOwnProperty.call(e,"firstLaunch")&&t.uint32(8).bool(e.firstLaunch),null!=e.sessionId&&Object.hasOwnProperty.call(e,"sessionId")&&t.uint32(18).string(e.sessionId),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(26).string(e.sdkVersion),null!=e.filterUserInfo&&Object.hasOwnProperty.call(e,"filterUserInfo")&&t.uint32(32).bool(e.filterUserInfo),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ce||(e=Ce.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new xe.QBaseApiData.QBaseMeta;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.firstLaunch=e.bool();break;case 2:n.sessionId=e.string();break;case 3:n.sdkVersion=e.string();break;case 4:n.filterUserInfo=e.bool();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Ce||(e=new Ce(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.firstLaunch&&e.hasOwnProperty("firstLaunch")&&"boolean"!=typeof e.firstLaunch?"firstLaunch: boolean expected":null!=e.sessionId&&e.hasOwnProperty("sessionId")&&!Ne.isString(e.sessionId)?"sessionId: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!Ne.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.filterUserInfo&&e.hasOwnProperty("filterUserInfo")&&"boolean"!=typeof e.filterUserInfo?"filterUserInfo: boolean expected":null},e.fromObject=function(e){if(e instanceof xe.QBaseApiData.QBaseMeta)return e;var t=new xe.QBaseApiData.QBaseMeta;return null!=e.firstLaunch&&(t.firstLaunch=Boolean(e.firstLaunch)),null!=e.sessionId&&(t.sessionId=String(e.sessionId)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.filterUserInfo&&(t.filterUserInfo=Boolean(e.filterUserInfo)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.firstLaunch=!1,r.sessionId="",r.sdkVersion="",r.filterUserInfo=!1),null!=e.firstLaunch&&e.hasOwnProperty("firstLaunch")&&(r.firstLaunch=e.firstLaunch),null!=e.sessionId&&e.hasOwnProperty("sessionId")&&(r.sessionId=e.sessionId),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.filterUserInfo&&e.hasOwnProperty("filterUserInfo")&&(r.filterUserInfo=e.filterUserInfo),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Te.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData.QBaseMeta"},e}(),e.QBaseOptions=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.env="",e.prototype.appid="",e.prototype.region="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.env&&Object.hasOwnProperty.call(e,"env")&&t.uint32(10).string(e.env),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(18).string(e.appid),null!=e.region&&Object.hasOwnProperty.call(e,"region")&&t.uint32(26).string(e.region),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ce||(e=Ce.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new xe.QBaseApiData.QBaseOptions;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.env=e.string();break;case 2:n.appid=e.string();break;case 3:n.region=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Ce||(e=new Ce(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.env&&e.hasOwnProperty("env")&&!Ne.isString(e.env)?"env: string expected":null!=e.appid&&e.hasOwnProperty("appid")&&!Ne.isString(e.appid)?"appid: string expected":null!=e.region&&e.hasOwnProperty("region")&&!Ne.isString(e.region)?"region: string expected":null},e.fromObject=function(e){if(e instanceof xe.QBaseApiData.QBaseOptions)return e;var t=new xe.QBaseApiData.QBaseOptions;return null!=e.env&&(t.env=String(e.env)),null!=e.appid&&(t.appid=String(e.appid)),null!=e.region&&(t.region=String(e.region)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.env="",r.appid="",r.region=""),null!=e.env&&e.hasOwnProperty("env")&&(r.env=e.env),null!=e.appid&&e.hasOwnProperty("appid")&&(r.appid=e.appid),null!=e.region&&e.hasOwnProperty("region")&&(r.region=e.region),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Te.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/QBaseApiData.QBaseOptions"},e}(),e})(),Be=xe.V3Header=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.encryptionTimestamp=Ne.Long?Ne.Long.fromBits(0,0,!0):0,e.prototype.compression="",e.prototype.userTimeout=Ne.Long?Ne.Long.fromBits(0,0,!0):0,e.prototype.libBuildTs=Ne.Long?Ne.Long.fromBits(0,0,!0):0,e.prototype.appProtocol="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oe.create()),null!=e.encryptionTimestamp&&Object.hasOwnProperty.call(e,"encryptionTimestamp")&&t.uint32(8).uint64(e.encryptionTimestamp),null!=e.compression&&Object.hasOwnProperty.call(e,"compression")&&t.uint32(18).string(e.compression),null!=e.userTimeout&&Object.hasOwnProperty.call(e,"userTimeout")&&t.uint32(24).uint64(e.userTimeout),null!=e.libBuildTs&&Object.hasOwnProperty.call(e,"libBuildTs")&&t.uint32(32).uint64(e.libBuildTs),null!=e.appProtocol&&Object.hasOwnProperty.call(e,"appProtocol")&&t.uint32(42).string(e.appProtocol),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ce||(e=Ce.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new xe.V3Header;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.encryptionTimestamp=e.uint64();break;case 2:n.compression=e.string();break;case 3:n.userTimeout=e.uint64();break;case 4:n.libBuildTs=e.uint64();break;case 5:n.appProtocol=e.string();break;default:e.skipType(7&i)}}return n},e.decodeDelimited=function(e){return e instanceof Ce||(e=new Ce(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null==e.encryptionTimestamp||!e.hasOwnProperty("encryptionTimestamp")||Ne.isInteger(e.encryptionTimestamp)||e.encryptionTimestamp&&Ne.isInteger(e.encryptionTimestamp.low)&&Ne.isInteger(e.encryptionTimestamp.high)?null!=e.compression&&e.hasOwnProperty("compression")&&!Ne.isString(e.compression)?"compression: string expected":null==e.userTimeout||!e.hasOwnProperty("userTimeout")||Ne.isInteger(e.userTimeout)||e.userTimeout&&Ne.isInteger(e.userTimeout.low)&&Ne.isInteger(e.userTimeout.high)?null==e.libBuildTs||!e.hasOwnProperty("libBuildTs")||Ne.isInteger(e.libBuildTs)||e.libBuildTs&&Ne.isInteger(e.libBuildTs.low)&&Ne.isInteger(e.libBuildTs.high)?null!=e.appProtocol&&e.hasOwnProperty("appProtocol")&&!Ne.isString(e.appProtocol)?"appProtocol: string expected":null:"libBuildTs: integer|Long expected":"userTimeout: integer|Long expected":"encryptionTimestamp: integer|Long expected"},e.fromObject=function(e){if(e instanceof xe.V3Header)return e;var t=new xe.V3Header;return null!=e.encryptionTimestamp&&(Ne.Long?(t.encryptionTimestamp=Ne.Long.fromValue(e.encryptionTimestamp)).unsigned=!0:"string"==typeof e.encryptionTimestamp?t.encryptionTimestamp=parseInt(e.encryptionTimestamp,10):"number"==typeof e.encryptionTimestamp?t.encryptionTimestamp=e.encryptionTimestamp:"object"==typeof e.encryptionTimestamp&&(t.encryptionTimestamp=new Ne.LongBits(e.encryptionTimestamp.low>>>0,e.encryptionTimestamp.high>>>0).toNumber(!0))),null!=e.compression&&(t.compression=String(e.compression)),null!=e.userTimeout&&(Ne.Long?(t.userTimeout=Ne.Long.fromValue(e.userTimeout)).unsigned=!0:"string"==typeof e.userTimeout?t.userTimeout=parseInt(e.userTimeout,10):"number"==typeof e.userTimeout?t.userTimeout=e.userTimeout:"object"==typeof e.userTimeout&&(t.userTimeout=new Ne.LongBits(e.userTimeout.low>>>0,e.userTimeout.high>>>0).toNumber(!0))),null!=e.libBuildTs&&(Ne.Long?(t.libBuildTs=Ne.Long.fromValue(e.libBuildTs)).unsigned=!0:"string"==typeof e.libBuildTs?t.libBuildTs=parseInt(e.libBuildTs,10):"number"==typeof e.libBuildTs?t.libBuildTs=e.libBuildTs:"object"==typeof e.libBuildTs&&(t.libBuildTs=new Ne.LongBits(e.libBuildTs.low>>>0,e.libBuildTs.high>>>0).toNumber(!0))),null!=e.appProtocol&&(t.appProtocol=String(e.appProtocol)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(Ne.Long){var n=new Ne.Long(0,0,!0);r.encryptionTimestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.encryptionTimestamp=t.longs===String?"0":0;if(r.compression="",Ne.Long){var i=new Ne.Long(0,0,!0);r.userTimeout=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.userTimeout=t.longs===String?"0":0;if(Ne.Long){var o=new Ne.Long(0,0,!0);r.libBuildTs=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else r.libBuildTs=t.longs===String?"0":0;r.appProtocol=""}return null!=e.encryptionTimestamp&&e.hasOwnProperty("encryptionTimestamp")&&("number"==typeof e.encryptionTimestamp?r.encryptionTimestamp=t.longs===String?String(e.encryptionTimestamp):e.encryptionTimestamp:r.encryptionTimestamp=t.longs===String?Ne.Long.prototype.toString.call(e.encryptionTimestamp):t.longs===Number?new Ne.LongBits(e.encryptionTimestamp.low>>>0,e.encryptionTimestamp.high>>>0).toNumber(!0):e.encryptionTimestamp),null!=e.compression&&e.hasOwnProperty("compression")&&(r.compression=e.compression),null!=e.userTimeout&&e.hasOwnProperty("userTimeout")&&("number"==typeof e.userTimeout?r.userTimeout=t.longs===String?String(e.userTimeout):e.userTimeout:r.userTimeout=t.longs===String?Ne.Long.prototype.toString.call(e.userTimeout):t.longs===Number?new Ne.LongBits(e.userTimeout.low>>>0,e.userTimeout.high>>>0).toNumber(!0):e.userTimeout),null!=e.libBuildTs&&e.hasOwnProperty("libBuildTs")&&("number"==typeof e.libBuildTs?r.libBuildTs=t.longs===String?String(e.libBuildTs):e.libBuildTs:r.libBuildTs=t.longs===String?Ne.Long.prototype.toString.call(e.libBuildTs):t.longs===Number?new Ne.LongBits(e.libBuildTs.low>>>0,e.libBuildTs.high>>>0).toNumber(!0):e.libBuildTs),null!=e.appProtocol&&e.hasOwnProperty("appProtocol")&&(r.appProtocol=e.appProtocol),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Te.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/V3Header"},e})();function ke(e,t){return{data:ge(e,Ie.default.compress(t)).encrypted}}function Me(e,t,r,n){var o,a=`${Math.random()}_${Date.now()}`,s=Object.entries(t).filter((([e,t])=>!ye(e)&&!ye(t))).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),l=me(n);return o="arraybuffer"===l?Re.encode({body:new Uint8Array(n),callId:a,header:s}).finish():"object"===l?new Uint8Array(ve(JSON.stringify({method:r,header:s,body:JSON.stringify(n)}))):new Uint8Array(ve(JSON.stringify({method:r,header:s,body:n}))),i()(i()({},ke(e,o)),{},{contentEncoding:"arraybuffer"===l?"PB":"JSON"})}function Fe(e,t,r,n){var o,a=n instanceof ArrayBuffer,s=Object.entries(t).filter((([e,t])=>e&&t)).map((([e,t])=>({key:e.toLowerCase(),value:t})));return o=a?Pe.encode({bodyBuffer:new Uint8Array(n),statusCode:r,header:s}).finish():Pe.encode({bodyString:JSON.stringify(n),statusCode:r,header:s}).finish(),i()(i()({},ke(e,o)),{},{contentEncoding:a?"PB":"JSON"})}function je(e,t){var r=Le.encode(t).finish();return i()({},ke(e,r))}function Ue(e,t){var r=_e();return r?r.decrypt(t,e,e):Z.decrypt(t,e,void 0,e)}m(),m();var $e=v(w(),1);function We(e,t,r){var n=Ue(e,t);return{data:r?$e.default.uncompress(n):n}}function qe(e,t,r,n){var i,{data:o}=We(e,t,r);if("PB"===n)i=Re.decode(o);else{var a=Ee(o);i=JSON.parse(a)}return i}function He(e,t,r,n){var i,{data:o}=We(e,t,r);if("PB"===n)i=Pe.decode(o);else{var a=Ee(o);i=JSON.parse(a)}return{statusCode:i.statusCode,body:i.bodyString||i.bodyBuffer,header:i.header.reduce(((e,t)=>(t.key&&t.value&&(e[t.key]=t.value),e)),{})}}function Ge(e,t,r){var{data:n}=We(e,t,r),i=Ee(n);return{data:JSON.parse(i)}}var Qe={};function ze(e,t){var r=_e(),n=new Uint8Array(16);return we(n),{iv:n,encrypted:r?r.encrypt(t,e,n):Z.encrypt(t,e,void 0,n)}}_(Qe,{decode:()=>ot,decodeRequest:()=>at,decodeResponse:()=>st,encode:()=>Ze,encodeRequest:()=>et,encodeResponse:()=>tt}),m(),m(),m(),m();var Ke="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ve=(e=21)=>{for(var t="",r=e;r--;)t+=Ke[64*Math.random()|0];return t},Je=v(w(),1);function Xe(e,t,r){var n=Date.now();return(...i)=>{var o=t(...i),a=Date.now();return e[r]=a-n,o}}function Ye(e,t,r){return t=+t,e[r>>>=0]=t>>>8,e[r+1]=255&t,r+2}function Ze(e,t,r="JSON",n={}){var i={appProtocol:`1/${r}`,compression:"snappy",encryptionTimestamp:Date.now(),libBuildTs:1667464900224},o=ze(e,Be.encode(i).finish()),a=o.iv.length+o.encrypted.length,s=new Uint8Array(2);Ye(s,a,0);var l=Xe(n,Je.default.compress,"compress")(t),u=Xe(n,ze,"encrypt")(e,l);return{data:Ae([s,o.iv,o.encrypted,u.iv,u.encrypted]),__v3__header:i}}function et(e,t,r,n,o={}){var a,s=me(n),l=Object.entries(t).filter((([e,t])=>!ye(e)&&!ye(t))).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()}))),u=`${Date.now()}-${Ve(8)}`;return a="arraybuffer"===s?Xe(o,Re.encode,"encodePb")({body:new Uint8Array(n),callId:u,header:l,method:r}).finish():"object"===s?new Uint8Array(Xe(o,ve,"stringToBuffer")(JSON.stringify({body:JSON.stringify(n),call_id:u,header:l,method:r}))):new Uint8Array(Xe(o,ve,"stringToBuffer")(JSON.stringify({body:n,call_id:u,header:l,method:r}))),i()(i()({},Ze(e,a,"arraybuffer"===s?"PB":"JSON",o)),{},{callId:u,stats:o})}function tt(e,t,r,n){var i=me(n),o=Object.entries(t).filter((([e,t])=>e&&t)).map((([e,t])=>({key:e.toString().toLowerCase(),value:t.toString()})));return Ze(e,"arraybuffer"===i?Pe.encode({bodyBuffer:new Uint8Array(n),statusCode:r,header:o}).finish():"object"===i?Pe.encode({bodyString:JSON.stringify(n),statusCode:r,header:o}).finish():Pe.encode({bodyString:n,statusCode:r,header:o}).finish(),"PB")}function rt(e,t){var r=_e(),n=t.subarray(0,16),i=t.subarray(16);return r?r.decrypt(i,e,n):Z.decrypt(i,e,void 0,n)}m(),m(),m();var nt=v(w(),1);function it(e,t){return e[t>>>=0]<<8|e[t+1]}function ot(e,t,r={}){var n=it(t,0),i=rt(e,t.slice(2,n+2)),o=Be.decode(i),a="snappy"===o.compression,s=Xe(r,rt,"decrypt")(e,t.slice(n+2));return{data:a?Xe(r,nt.default.uncompress,"uncompress")(s):s,__v3__header:o}}function at(e,t,r={}){var n,{data:o,__v3__header:a}=ot(e,t,r),s=!1,l=a.appProtocol.split("/")[1];return l&&(s="PB"===l),n=s?Re.decode(o):Xe(r,(e=>JSON.parse(Ee(e))),"decodeJson")(o),i()(i()({},n),{},{__v3__header:a,stats:r})}function st(e,t,r={}){var n,{data:i,__v3__header:o}=ot(e,t,r),a=!1,s=o.appProtocol.split("/")[1];return s&&(a="PB"===s),{statusCode:(n=a?Xe(r,Pe.decode,"decodePb")(i):Xe(r,(e=>JSON.parse(Ee(e))),"decodeJson")(i)).statusCode,body:n.bodyString||n.bodyBuffer,header:n.header.reduce(((e,t)=>(t.key&&t.value&&(e[t.key]=t.value),e)),{}),__v3__header:o}}},865:(e,t,r)=>{var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a=!1;function s(){a=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)n[t]=e[t],i[e.charCodeAt(t)]=t;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63}function l(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}function u(e){var t;a||s();for(var r=e.length,i=r%3,o="",u=[],c=16383,d=0,p=r-i;d<p;d+=c)u.push(l(e,d,d+c>p?p:d+c));return 1===i?(t=e[r-1],o+=n[t>>2],o+=n[t<<4&63],o+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],o+=n[t>>10],o+=n[t>>4&63],o+=n[t<<2&63],o+="="),u.push(o),u.join("")}function c(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?i-1:0,p=r?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+d],d+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=u}return(f?-1:1)*a*Math.pow(2,o-n)}function d(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,h=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+f]=255&a,f+=h,a/=256,u-=8);e[r+f-h]|=128*_}var p={}.toString,f=Array.isArray||function(e){return"[object Array]"==p.call(e)};v.TYPED_ARRAY_SUPPORT=void 0===r.g.TYPED_ARRAY_SUPPORT||r.g.TYPED_ARRAY_SUPPORT;var h=_();function _(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function g(e,t){if(_()<t)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=v.prototype:(null===e&&(e=new v(t)),e.length=t),e}function v(e,t,r){if(!(v.TYPED_ARRAY_SUPPORT||this instanceof v))return new v(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return b(this,e)}return m(this,e,t,r)}function m(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);v.TYPED_ARRAY_SUPPORT?(e=t).__proto__=v.prototype:e=w(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!v.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|S(t,r),i=(e=g(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(E(t)){var r=0|A(t.length);return 0===(e=g(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?g(e,0):w(e,t);if("Buffer"===t.type&&f(t.data))return w(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function y(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function b(e,t){if(y(t),e=g(e,t<0?0:0|A(t)),!v.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function w(e,t){var r=t.length<0?0:0|A(t.length);e=g(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function A(e){if(e>=_())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_().toString(16)+" bytes");return 0|e}function E(e){return!(null==e||!e._isBuffer)}function S(e,t){if(E(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(n)return X(e).length;t=(""+t).toLowerCase(),n=!0}}function I(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return F(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return B(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function T(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function C(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=v.from(t,n)),E(t))return 0===t.length?-1:O(e,t,r,n,i);if("number"==typeof t)return t&=255,v.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):O(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function O(e,t,r,n,i){var o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var d=!0,p=0;p<l;p++)if(u(e,o+p)!==u(t,p)){d=!1;break}if(d)return o}return-1}function N(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function x(e,t,r,n){return Z(X(t,e.length-r),e,r,n)}function R(e,t,r,n){return Z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function P(e,t,r,n){return R(e,t,r,n)}function D(e,t,r,n){return Z(Y(t),e,r,n)}function L(e,t,r,n){return Z(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function B(e,t,r){return 0===t&&r===e.length?u(e):u(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=d}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=M));return r}(n)}v.poolSize=8192,v._augment=function(e){return e.__proto__=v.prototype,e},v.from=function(e,t,r){return m(null,e,t,r)},v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array),v.alloc=function(e,t,r){return function(e,t,r,n){return y(t),t<=0?g(e,t):void 0!==r?"string"==typeof n?g(e,t).fill(r,n):g(e,t).fill(r):g(e,t)}(null,e,t,r)},v.allocUnsafe=function(e){return b(null,e)},v.allocUnsafeSlow=function(e){return b(null,e)},v.isBuffer=ee,v.compare=function(e,t){if(!E(e)||!E(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},v.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(e,t){if(!f(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return v.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=v.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!E(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},v.byteLength=S,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)T(this,t,t+1);return this},v.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},v.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},v.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):I.apply(this,arguments)},v.prototype.equals=function(e){if(!E(e))throw new TypeError("Argument must be a Buffer");return this===e||0===v.compare(this,e)},v.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},v.prototype.compare=function(e,t,r,n,i){if(!E(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(n,i),u=e.slice(t,r),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},v.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},v.prototype.indexOf=function(e,t,r){return C(this,e,t,r,!0)},v.prototype.lastIndexOf=function(e,t,r){return C(this,e,t,r,!1)},v.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return N(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return R(this,e,t,r);case"latin1":case"binary":return P(this,e,t,r);case"base64":return D(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function F(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function U(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=J(e[o]);return i}function $(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function W(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function q(e,t,r,n,i,o){if(!E(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function H(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function G(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function Q(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,i){return i||Q(e,0,r,4),d(e,t,r,n,23,4),r+4}function K(e,t,r,n,i){return i||Q(e,0,r,8),d(e,t,r,n,52,8),r+8}v.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),v.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=v.prototype;else{var i=t-e;r=new v(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},v.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},v.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},v.prototype.readUInt8=function(e,t){return t||W(e,1,this.length),this[e]},v.prototype.readUInt16LE=function(e,t){return t||W(e,2,this.length),this[e]|this[e+1]<<8},v.prototype.readUInt16BE=function(e,t){return t||W(e,2,this.length),this[e]<<8|this[e+1]},v.prototype.readUInt32LE=function(e,t){return t||W(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},v.prototype.readUInt32BE=function(e,t){return t||W(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},v.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},v.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||W(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},v.prototype.readInt8=function(e,t){return t||W(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},v.prototype.readInt16LE=function(e,t){t||W(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},v.prototype.readInt16BE=function(e,t){t||W(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},v.prototype.readInt32LE=function(e,t){return t||W(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},v.prototype.readInt32BE=function(e,t){return t||W(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},v.prototype.readFloatLE=function(e,t){return t||W(e,4,this.length),c(this,e,!0,23,4)},v.prototype.readFloatBE=function(e,t){return t||W(e,4,this.length),c(this,e,!1,23,4)},v.prototype.readDoubleLE=function(e,t){return t||W(e,8,this.length),c(this,e,!0,52,8)},v.prototype.readDoubleBE=function(e,t){return t||W(e,8,this.length),c(this,e,!1,52,8)},v.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||q(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},v.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||q(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},v.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,255,0),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},v.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},v.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},v.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},v.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},v.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);q(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},v.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);q(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},v.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,1,127,-128),v.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},v.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},v.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},v.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},v.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),v.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},v.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},v.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},v.prototype.writeDoubleLE=function(e,t,r){return K(this,e,t,!0,r)},v.prototype.writeDoubleBE=function(e,t,r){return K(this,e,t,!1,r)},v.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!v.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},v.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!v.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=E(e)?e:X(new v(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function X(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){return function(e){var t,r,n,l,u,c;a||s();var d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u="="===e[d-2]?2:"="===e[d-1]?1:0,c=new o(3*d/4-u),n=u>0?d-4:d;var p=0;for(t=0,r=0;t<n;t+=4,r+=3)l=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],c[p++]=l>>16&255,c[p++]=l>>8&255,c[p++]=255&l;return 2===u?(l=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,c[p++]=255&l):1===u&&(l=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,c[p++]=l>>8&255,c[p++]=255&l),c}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function ee(e){return null!=e&&(!!e._isBuffer||te(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&te(e.slice(0,0))}(e))}function te(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var re=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:h,Buffer:v,SlowBuffer:function(e){return+e!=e&&(e=0),v.alloc(+e)},isBuffer:ee});Map;var ne=function(){function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0}),e.isLong=t;var r={},n={};function i(e,t){var i,o,s;return t?(s=0<=(e>>>=0)&&e<256)&&(o=n[e])?o:(i=a(e,(0|e)<0?-1:0,!0),s&&(n[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(o=r[e])?o:(i=a(e,e<0?-1:0,!1),s&&(r[e]=i),i)}function o(e,t){if(isNaN(e))return t?_:h;if(t){if(e<0)return _;if(e>=d)return b}else{if(e<=-p)return w;if(e+1>=p)return y}return e<0?o(-e,t).neg():a(e%c|0,e/c|0,t)}function a(t,r,n){return new e(t,r,n)}e.fromInt=i,e.fromNumber=o,e.fromBits=a;var s=Math.pow;function l(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return h;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return l(e.substring(1),t,r).neg();for(var i=o(s(r,8)),a=h,u=0;u<e.length;u+=8){var c=Math.min(8,e.length-u),d=parseInt(e.substring(u,u+c),r);if(c<8){var p=o(s(r,c));a=a.mul(p).add(o(d))}else a=(a=a.mul(i)).add(o(d))}return a.unsigned=t,a}function u(e,t){return"number"==typeof e?o(e,t):"string"==typeof e?l(e,t):a(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}e.fromString=l,e.fromValue=u;var c=4294967296,d=c*c,p=d/2,f=i(1<<24),h=i(0);e.ZERO=h;var _=i(0,!0);e.UZERO=_;var g=i(1);e.ONE=g;var v=i(1,!0);e.UONE=v;var m=i(-1);e.NEG_ONE=m;var y=a(-1,2147483647,!1);e.MAX_VALUE=y;var b=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=b;var w=a(0,-2147483648,!1);e.MIN_VALUE=w;var A=e.prototype;return A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=o(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=o(s(e,6),this.unsigned),a=this,l="";;){var u=a.div(i),c=(a.sub(u.mul(i)).toInt()>>>0).toString(e);if((a=u).isZero())return c+l;for(;c.length<6;)c="0"+c;l=""+c+l}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return this.comp(e)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return this.comp(e)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(g)},A.neg=A.negate,A.add=function(e){t(e)||(e=u(e));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,l=65535&e.high,c=e.low>>>16,d=0,p=0,f=0,h=0;return f+=(h+=o+(65535&e.low))>>>16,p+=(f+=i+c)>>>16,d+=(p+=n+l)>>>16,d+=r+s,a((f&=65535)<<16|(h&=65535),(d&=65535)<<16|(p&=65535),this.unsigned)},A.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return h;if(t(e)||(e=u(e)),e.isZero())return h;if(this.eq(w))return e.isOdd()?w:h;if(e.eq(w))return this.isOdd()?w:h;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return o(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,_=0,g=0,v=0,m=0;return v+=(m+=s*p)>>>16,g+=(v+=i*p)>>>16,v&=65535,g+=(v+=s*d)>>>16,_+=(g+=n*p)>>>16,g&=65535,_+=(g+=i*d)>>>16,g&=65535,_+=(g+=s*c)>>>16,_+=r*p+n*d+i*c+s*l,a((v&=65535)<<16|(m&=65535),(_&=65535)<<16|(g&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");var r,n,i;if(this.isZero())return this.unsigned?_:h;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return v;i=_}else{if(this.eq(w))return e.eq(g)||e.eq(m)?w:e.eq(w)?g:(r=this.shr(1).div(e).shl(1)).eq(h)?e.isNegative()?g:m:(n=this.sub(e.mul(r)),i=r.add(n.div(e)));if(e.eq(w))return this.unsigned?_:h;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=h}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:s(2,a-48),c=o(r),d=c.mul(e);d.isNegative()||d.gt(n);)d=(c=o(r-=l,this.unsigned)).mul(e);c.isZero()&&(c=g),i=i.add(c),n=n.sub(d)}return i},A.div=A.divide,A.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return a(~this.low,~this.high,this.unsigned)},A.and=function(e){return t(e)||(e=u(e)),a(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return t(e)||(e=u(e)),a(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return t(e)||(e=u(e)),a(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):a(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):a(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var r=this.high;return e<32?a(this.low>>>e|r<<32-e,r>>>e,this.unsigned):a(32===e?r:r>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},Object.defineProperty(e.prototype,"_bsontype",{value:"Long"}),e}();function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t,r){return t&&oe(e.prototype,t),r&&oe(e,r),e}var se=function(){function e(t){ie(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,r){return r&&r.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Double"}),e}();function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ue(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function de(e,t){return de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},de(e,t)}var pe=function(e){function t(e,r){var n;return ie(this,t),n=ne.isLong(e)?ue(this,ce(t).call(this,e.low,e.high,!0)):ue(this,ce(t).call(this,e,r,!0)),ue(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),ae(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(ne.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(ne.fromNumber(e,!0))}},{key:"fromBits",value:function(e,r){return new t(e,r)}},{key:"fromString",value:function(e,r){return new t(ne.fromString(e,r,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),Object.defineProperty(t.prototype,"_bsontype",{value:"Timestamp"}),t.MAX_VALUE=t.MAX_UNSIGNED_VALUE,t}(ne),fe={};function he(e){for(var t=new Uint8Array(e),r=0;r<e;++r)t[r]=Math.floor(256*Math.random());return t}var _e={normalizedFunctionString:function(e){return e.toString().replace("function(","function (")},randomBytes:function(){var e=he;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)e=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{e=fe.randomBytes}catch(e){}null==e&&(e=he)}return e}()};new Date;var ge=function(){function e(e,t){var r={seen:[],stylize:me};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Ee(t)?r.showHidden=t:t&&Le(r,t),Ce(r.showHidden)&&(r.showHidden=!1),Ce(r.depth)&&(r.depth=2),Ce(r.colors)&&(r.colors=!1),Ce(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=ve),ye(r,e,r.depth)}return e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e}();function ve(e,t){var r=ge.styles[t];return r?"["+ge.colors[r][0]+"m"+e+"["+ge.colors[r][1]+"m":e}function me(e,t){return e}function ye(e,t,r){if(e.customInspect&&t&&Pe(t.inspect)&&t.inspect!==ge&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Te(n)||(n=ye(e,n,r)),n}var i=function(e,t){if(Ce(t))return e.stylize("undefined","undefined");if(Te(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Ie(t))return e.stylize(""+t,"number");if(Ee(t))return e.stylize(""+t,"boolean");if(Se(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Re(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return be(t);if(0===o.length){if(Pe(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(Oe(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(xe(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Re(t))return be(t)}var l,u="",c=!1,d=["{","}"];(Ae(t)&&(c=!0,d=["[","]"]),Pe(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return Oe(t)&&(u=" "+RegExp.prototype.toString.call(t)),xe(t)&&(u=" "+Date.prototype.toUTCString.call(t)),Re(t)&&(u=" "+be(t)),0!==o.length||c&&0!=t.length?r<0?Oe(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=c?function(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)Be(t,String(a))?o.push(we(e,t,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(we(e,t,r,n,i,!0))})),o}(e,t,r,a,o):o.map((function(n){return we(e,t,r,a,n,c)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,u,d)):d[0]+u+d[1]}function be(e){return"["+Error.prototype.toString.call(e)+"]"}function we(e,t,r,n,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),Be(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=Se(r)?ye(e,l.value,null):ye(e,l.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),Ce(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function Ae(e){return Array.isArray(e)}function Ee(e){return"boolean"==typeof e}function Se(e){return null===e}function Ie(e){return"number"==typeof e}function Te(e){return"string"==typeof e}function Ce(e){return void 0===e}function Oe(e){return Ne(e)&&"[object RegExp]"===De(e)}function Ne(e){return"object"===le(e)&&null!==e}function xe(e){return Ne(e)&&"[object Date]"===De(e)}function Re(e){return Ne(e)&&("[object Error]"===De(e)||e instanceof Error)}function Pe(e){return"function"==typeof e}function De(e){return Object.prototype.toString.call(e)}function Le(e,t){if(!t||!Ne(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ke=ge,Me=function e(t,n){if(Ce(r.g.process))return function(){return e(t,n).apply(this,arguments)};var i=!1;return function(){return i||(console.error(n),i=!0),t.apply(this,arguments)}},Fe=(()=>re.Buffer)(),je=Me,Ue=(0,_e.randomBytes)(5),$e=new RegExp("^[0-9a-fA-F]{24}$"),We=function(){var e=!1;try{Fe&&Fe.from&&(e=!0)}catch(t){e=!1}return e}(),qe=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<=15?"0":"")+t.toString(16);return e}(),He=function(){for(var e=[],t=0;t<10;)e[48+t]=t++;for(;t<16;)e[55+t]=e[87+t]=t++;return e}(),Ge=Fe;var Qe=function(){function e(t){if(ie(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var r=e.isValid(t);if(!r&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r&&"string"==typeof t&&24===t.length&&We)return new e(Fe.from(t,"hex"));if(r&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return ae(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t,r,n,i="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof Ge)return i=this.id.toString("hex"),e.cacheHexString&&(this.__id=i),i;for(var o=0;o<this.id.length;o++){var a=qe[this.id.charCodeAt(o)];if("string"!=typeof a)throw t=this.id,n=void 0,n=t[r=o],new TypeError('ObjectId string "'.concat(t,'" contains invalid character "').concat(n,'" with character code (').concat(t.charCodeAt(r),"). All character codes for a non-hex string must be less than 256."));i+=a}return e.cacheHexString&&(this.__id=i),i}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof Ge?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var r=e.getInc(),n=Fe.alloc(12);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,n[4]=Ue[0],n[5]=Ue[1],n[6]=Ue[2],n[7]=Ue[3],n[8]=Ue[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var r=Fe.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,new e(r)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(We)return new e(Fe.from(t,"hex"));for(var r=new Ge(12),n=0,i=0;i<24;)r[n++]=He[t.charCodeAt(i++)]<<4|He[t.charCodeAt(i++)];return new e(r)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&$e.test(t):t instanceof e||(t instanceof Ge&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&$e.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e.get_inc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.get_inc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.getInc=je((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.generate=je((function(t){return e.generate(t)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(e.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.prototype[ke.custom||"inspect"]=e.prototype.toString,e.index=~~(16777215*Math.random()),Object.defineProperty(e.prototype,"_bsontype",{value:"ObjectID"}),e}(),ze=Qe;var Ke=function(){function e(t,r){ie(this,e),this.pattern=t||"",this.options=r?r.split("").sort().join(""):"";for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new Error("The regular expression option [".concat(this.options[n],"] is not supported"))}return ae(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"BSONRegExp"}),e}(),Ve=function(){function e(t){ie(this,e),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Symbol"}),e}(),Je=function(){function e(t){ie(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return ae(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Int32"}),e}(),Xe=function(){function e(t,r){ie(this,e),this.code=t,this.scope=r}return ae(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Code"}),e}(),Ye=Xe,Ze=(()=>re.Buffer)(),et=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,tt=/^(\+|-)?(Infinity|inf)$/i,rt=/^(\+|-)?NaN$/i,nt=6111,it=-6176,ot=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),at=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),st=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),lt=/^([-+])?(\d+)?$/;function ut(e){return!isNaN(parseInt(e,10))}function ct(e){var t=ne.fromNumber(1e9),r=ne.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new ne(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function dt(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var pt=function(){function e(e){this.bytes=e}e.fromString=function(t){var r,n=!1,i=!1,o=!1,a=0,s=0,l=0,u=0,c=0,d=[0],p=0,f=0,h=0,_=0,g=0,v=0,m=[0,0],y=[0,0],b=0;if(t.length>=7e3)throw new TypeError(t+" not a valid Decimal128 string");var w=t.match(et),A=t.match(tt),E=t.match(rt);if(!w&&!A&&!E||0===t.length)throw new TypeError(t+" not a valid Decimal128 string");if(w){var S=w[2],I=w[4],T=w[5],C=w[6];I&&void 0===C&&dt(t,"missing exponent power"),I&&void 0===S&&dt(t,"missing exponent base"),void 0===I&&(T||C)&&dt(t,"missing e before exponent")}if("+"!==t[b]&&"-"!==t[b]||(n="-"===t[b++]),!ut(t[b])&&"."!==t[b]){if("i"===t[b]||"I"===t[b])return new e(Ze.from(n?at:st));if("N"===t[b])return new e(Ze.from(ot))}for(;ut(t[b])||"."===t[b];)"."!==t[b]?(p<34&&("0"!==t[b]||o)&&(o||(c=s),o=!0,d[f++]=parseInt(t[b],10),p+=1),o&&(l+=1),i&&(u+=1),s+=1,b+=1):(i&&dt(t,"contains multiple periods"),i=!0,b+=1);if(i&&!s)throw new TypeError(t+" not a valid Decimal128 string");if("e"===t[b]||"E"===t[b]){var O=t.substr(++b).match(lt);if(!O||!O[2])return new e(Ze.from(ot));g=parseInt(O[0],10),b+=O[0].length}if(t[b])return new e(Ze.from(ot));if(h=0,p){if(_=p-1,1!==(a=l))for(;"0"===t[c+a-1];)a-=1}else h=0,_=0,d[0]=0,l=1,p=1,a=0;for(g<=u&&u-g>16384?g=it:g-=u;g>nt;){if((_+=1)-h>34){if(d.join("").match(/^0+$/)){g=nt;break}dt(t,"overflow")}g-=1}for(;g<it||p<l;){if(0===_&&a<p){g=it,a=0;break}if(p<l?l-=1:_-=1,g<nt)g+=1;else{if(d.join("").match(/^0+$/)){g=nt;break}dt(t,"overflow")}}if(_-h+1<a){var N=s;i&&(c+=1,N+=1),n&&(c+=1,N+=1);var x=parseInt(t[c+_+1],10),R=0;if(x>=5&&(R=1,5===x))for(R=d[_]%2==1,v=c+_+2;v<N;v++)if(parseInt(t[v],10)){R=1;break}if(R)for(var P=_;P>=0;P--)if(++d[P]>9&&(d[P]=0,0===P)){if(!(g<nt))return new e(Ze.from(n?at:st));g+=1,d[P]=1}}if(m=ne.fromNumber(0),y=ne.fromNumber(0),0===a)m=ne.fromNumber(0),y=ne.fromNumber(0);else if(_-h<17){var D=h;for(y=ne.fromNumber(d[D++]),m=new ne(0,0);D<=_;D++)y=(y=y.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[D]))}else{var L=h;for(m=ne.fromNumber(d[L++]);L<=_-17;L++)m=(m=m.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[L]));for(y=ne.fromNumber(d[L++]);L<=_;L++)y=(y=y.multiply(ne.fromNumber(10))).add(ne.fromNumber(d[L]))}var B,k,M,F,j=function(e,t){if(!e&&!t)return{high:ne.fromNumber(0),low:ne.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new ne(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new ne(t.getLowBits(),0),a=r.multiply(i),s=r.multiply(o),l=n.multiply(i),u=n.multiply(o);return a=a.add(s.shiftRightUnsigned(32)),s=new ne(s.getLowBits(),0).add(l).add(u.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:u=s.shiftLeft(32).add(new ne(u.getLowBits(),0))}}(m,ne.fromString("100000000000000000"));j.low=j.low.add(y),B=j.low,k=y,M=B.high>>>0,F=k.high>>>0,(M<F||M===F&&B.low>>>0<k.low>>>0)&&(j.high=j.high.add(ne.fromNumber(1))),r=g+6176;var U={low:ne.fromNumber(0),high:ne.fromNumber(0)};j.high.shiftRightUnsigned(49).and(ne.fromNumber(1)).equals(ne.fromNumber(1))?(U.high=U.high.or(ne.fromNumber(3).shiftLeft(61)),U.high=U.high.or(ne.fromNumber(r).and(ne.fromNumber(16383).shiftLeft(47))),U.high=U.high.or(j.high.and(ne.fromNumber(0x7fffffffffff)))):(U.high=U.high.or(ne.fromNumber(16383&r).shiftLeft(49)),U.high=U.high.or(j.high.and(ne.fromNumber(562949953421311)))),U.low=j.low,n&&(U.high=U.high.or(ne.fromString("9223372036854775808")));var $=Ze.alloc(16);return b=0,$[b++]=255&U.low.low,$[b++]=U.low.low>>8&255,$[b++]=U.low.low>>16&255,$[b++]=U.low.low>>24&255,$[b++]=255&U.low.high,$[b++]=U.low.high>>8&255,$[b++]=U.low.high>>16&255,$[b++]=U.low.high>>24&255,$[b++]=255&U.high.low,$[b++]=U.high.low>>8&255,$[b++]=U.high.low>>16&255,$[b++]=U.high.low>>24&255,$[b++]=255&U.high.high,$[b++]=U.high.high>>8&255,$[b++]=U.high.high>>16&255,$[b++]=U.high.high>>24&255,new e($)};return e.prototype.toString=function(){for(var e,t,r,n,i,o,a=0,s=new Array(36),l=0;l<s.length;l++)s[l]=0;var u,c,d,p,f,h=0,_=!1,g={parts:new Array(4)},v=[];h=0;var m=this.bytes;if(n=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,r=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,t=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,e=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,h=0,{low:new ne(n,r),high:new ne(t,e)}.high.lessThan(ne.ZERO)&&v.push("-"),(i=e>>26&31)>>3==3){if(30===i)return v.join("")+"Infinity";if(31===i)return"NaN";o=e>>15&16383,d=8+(e>>14&1)}else d=e>>14&7,o=e>>17&16383;if(u=o-6176,g.parts[0]=(16383&e)+((15&d)<<14),g.parts[1]=t,g.parts[2]=r,g.parts[3]=n,0===g.parts[0]&&0===g.parts[1]&&0===g.parts[2]&&0===g.parts[3])_=!0;else for(f=3;f>=0;f--){var y=0,b=ct(g);if(g=b.quotient,y=b.rem.low)for(p=8;p>=0;p--)s[9*f+p]=y%10,y=Math.floor(y/10)}if(_)a=1,s[h]=0;else for(a=36;!s[h];)a-=1,h+=1;if((c=a-1+u)>=34||c<=-7||u>0){if(a>34)return v.push(0),u>0?v.push("E+"+u):u<0&&v.push("E"+u),v.join("");v.push(s[h++]),(a-=1)&&v.push(".");for(var w=0;w<a;w++)v.push(s[h++]);v.push("E"),c>0?v.push("+"+c):v.push(c)}else if(u>=0)for(var A=0;A<a;A++)v.push(s[h++]);else{var E=a+u;if(E>0)for(var S=0;S<E;S++)v.push(s[h++]);else v.push("0");for(v.push(".");E++<0;)v.push("0");for(var I=0;I<a-Math.max(E-1,0);I++)v.push(s[h++])}return v.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},Object.defineProperty(e.prototype,"_bsontype",{value:"Decimal128"}),e}(),ft=pt,ht=function(){function e(){ie(this,e)}return ae(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MinKey"}),e}(),_t=function(){function e(){ie(this,e)}return ae(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MaxKey"}),e}(),gt=function(){function e(t,r,n,i){ie(this,e);var o=t.split(".");2===o.length&&(n=o.shift(),t=o.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=i||{}}return ae(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var r=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete r[e]})),new e(t.$ref,t.$id,t.$db,r)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1}),e}(),vt=(()=>re.Buffer)(),mt=function(){function e(r,n){if(ie(this,e),!(null==r||"string"==typeof r||vt.isBuffer(r)||r instanceof Uint8Array||Array.isArray(r)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?t:n,this.position=0,null==r||r instanceof Number)void 0!==vt?this.buffer=vt.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof r)if(void 0!==vt)this.buffer=vt.from(r);else{if("undefined"==typeof Uint8Array&&!Array.isArray(r))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=function(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(r)}else this.buffer=r;this.position=r.length}}ae(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==vt&&vt.isBuffer(this.buffer)){var i=vt.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(i,0,0,this.buffer.length),this.buffer=i,this.buffer[this.position++]=n}else{var o=null;o=r(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var a=0;a<this.buffer.length;a++)o[a]=this.buffer[a];this.buffer=o,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==vt&&vt.isBuffer(this.buffer))n=vt.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(r(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var i=0;i<this.position;i++)n[i]=this.buffer[i]}this.buffer=n}if(void 0!==vt&&vt.isBuffer(e)&&vt.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==vt&&"string"==typeof e&&vt.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(r(e)||Array.isArray(e)&&"string"!=typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e[o];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e.charCodeAt(a);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var r="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),n=0;n<t;n++)r[n]=this.buffer[e++];return r}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==vt&&vt.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==vt&&vt.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=r(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return function(e,t,r){for(var n="",i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=vt.isBuffer(this.buffer)?this.buffer.toString("base64"):vt.from(this.buffer).toString("base64"),r=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===r.length?"0"+r:r}:{$binary:{base64:t,subType:1===r.length?"0"+r:r}}}}],[{key:"fromExtendedJSON",value:function(t,r){var n,i;return(r=r||{}).legacy?(i=t.$type?parseInt(t.$type,16):0,n=vt.from(t.$binary,"base64")):(i=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=vt.from(t.$binary.base64,"base64")),new e(n,i)}}]);var t=0;function r(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}return e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_USER_DEFINED=128,Object.defineProperty(e.prototype,"_bsontype",{value:"Binary"}),e}(),yt=mt,bt=(Math.pow(2,63),Math.pow(2,63),{$oid:ze,$binary:yt,$symbol:Ve,$numberInt:Je,$numberDecimal:ft,$numberDouble:se,$numberLong:ne,$minKey:ht,$maxKey:_t,$regex:Ke,$regularExpression:Ke,$timestamp:pe});function wt(e,t,r,n){if("number"==typeof r){if(n.relaxed||n.legacy)return r;if(Math.floor(r)===r){if(r>=St&&r<=Et)return new Je(r);if(r>=Tt&&r<=It)return new ne.fromNumber(r)}return new se(r)}if(null==r||"object"!==le(r))return r;if(r.$undefined)return null;for(var i=Object.keys(r).filter((function(e){return e.startsWith("$")&&null!=r[e]})),o=0;o<i.length;o++){var a=bt[i[o]];if(a)return a.fromExtendedJSON(r,n)}if(null!=r.$date){var s=r.$date,l=new Date;return n.legacy?"number"==typeof s?l.setTime(s):"string"==typeof s&&l.setTime(Date.parse(s)):"string"==typeof s?l.setTime(Date.parse(s)):ne.isLong(s)?l.setTime(s.toNumber()):"number"==typeof s&&n.relaxed&&l.setTime(s),l}if(null!=r.$code){var u=Object.assign({},r);return r.$scope&&(u.$scope=wt(e,null,r.$scope)),Ye.fromExtendedJSON(r)}if(null!=r.$ref||null!=r.$dbPointer){var c=r.$ref?r:r.$dbPointer;if(c instanceof gt)return c;var d=Object.keys(c).filter((function(e){return e.startsWith("$")})),p=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(p=!1)})),p)return gt.fromExtendedJSON(c)}return r}function At(e,t){var r=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,n){return wt(r,0,n,t)}))}var Et=2147483647,St=-2147483648,It=0x8000000000000000,Tt=-0x8000000000000000;function Ct(e,t,r,n){null!=r&&"object"===le(r)&&(n=r,r=0),null==t||"object"!==le(t)||Array.isArray(t)||(n=t,t=null,r=0),n=Object.assign({},{relaxed:!0,legacy:!1},n);var i=Array.isArray(e)?Ot(e,n):Pt(e,n);return JSON.stringify(i,t,r)}function Ot(e,t){return e.map((function(e){return xt(e,t)}))}function Nt(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function xt(e,t){if(Array.isArray(e))return Ot(e,t);if(void 0===e)return null;if(e instanceof Date){var r=e.getTime(),n=r>-1&&r<2534023188e5;return t.legacy?t.relaxed&&n?{$date:e.getTime()}:{$date:Nt(e)}:t.relaxed&&n?{$date:Nt(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var i=e>=Tt&&e<=It;if(e>=St&&e<=Et)return{$numberInt:e.toString()};if(i)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var o=e.flags;return void 0===o&&(o=e.toString().match(/[gimuy]*$/)[0]),new Ke(e.source,o).toExtendedJSON(t)}return null!=e&&"object"===le(e)?Pt(e,t):e}var Rt={Binary:function(e){return new yt(e.value(),e.subtype)},Code:function(e){return new Ye(e.code,e.scope)},DBRef:function(e){return new gt(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new ft(e.bytes)},Double:function(e){return new se(e.value)},Int32:function(e){return new Je(e.value)},Long:function(e){return ne.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new _t},MinKey:function(){return new ht},ObjectID:function(e){return new ze(e)},ObjectId:function(e){return new ze(e)},BSONRegExp:function(e){return new Ke(e.pattern,e.options)},Symbol:function(e){return new Ve(e.value)},Timestamp:function(e){return pe.fromBits(e.low,e.high)}};function Pt(e,t){if(null==e||"object"!==le(e))throw new Error("not an object instance");var r=e._bsontype;if(void 0===r){var n={};for(var i in e)n[i]=xt(e[i],t);return n}if("string"==typeof r){var o=e;if("function"!=typeof o.toExtendedJSON){var a=Rt[r];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+r);o=a(o)}return"Code"===r&&o.scope?o=new Ye(o.code,xt(o.scope,t)):"DBRef"===r&&o.oid&&(o=new gt(o.collection,xt(o.oid,t),o.db,o.fields)),o.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+le(r))}var Dt={parse:At,deserialize:function(e,t){return t=t||{},At(JSON.stringify(e),t)},serialize:function(e,t){return t=t||{},JSON.parse(Ct(e,t))},stringify:Ct};t.EJSON=Dt}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{DefaultCloud:()=>rl,InstanceCloud:()=>nl,getCloudAPI:()=>tl,getCloudInstance:()=>el,getSDK:()=>ne,getServiceMarketAPI:()=>Nl,patchDefaultSDK:()=>ae,setDefaultSDK:()=>oe,setSDK:()=>ie});var e={};r.r(e),r.d(e,{GeoLineString:()=>Wi,GeoMultiLineString:()=>Hi,GeoMultiPoint:()=>Ui,GeoMultiPolygon:()=>Ki,GeoPoint:()=>Fi,GeoPolygon:()=>Qi,LineString:()=>$i,MultiLineString:()=>qi,MultiPoint:()=>ji,MultiPolygon:()=>zi,Point:()=>Mi,Polygon:()=>Gi,__safe_props__:()=>Xi});var t={};r.r(t),r.d(t,{AggregateOperatorMap:()=>ts,AggregateSerializer:()=>ls,Decoder:()=>ws,OperatorMap:()=>es,ProjectionSerializer:()=>bs,QuerySerializer:()=>cs,UpdateSerializer:()=>gs,aggregateOperatorToString:()=>ss,decodeInternalDataType:()=>So,encode:()=>ds,encodeInternalDataType:()=>Eo,extractQueryOptions:()=>Io,flattenObject:()=>bo,flattenQueryObject:()=>yo,getProjectionDefinition:()=>Co,isConversionRequired:()=>Ao,mergeConditionAfterEncode:()=>wo,operatorToString:()=>as});var a=r(29),s=r.n(a),l=r(644),c=r.n(l);function d(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var p=function e(t,r){if(t===r)return t;for(var n of Object.keys(r)){var i=d(r,n),o=d(t,n),a=void 0;"object"==typeof i?e(a=o||{},i):a=i,t[n]=a}return t},f=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),h=e=>"object"===f(e),_=e=>"string"===f(e),g=e=>"number"===f(e),v=e=>"function"==typeof e,m=e=>Array.isArray(e),A=e=>"date"===f(e),E=e=>"regexp"===f(e),S=e=>e&&"symbol"===f(e._internalType),I={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002};class T extends Error{constructor(e){super(e.errMsg),this.errCode=-1,this.errMsg=void 0,this.requestID=void 0,Object.defineProperties(this,{message:{get(){return`errCode: ${this.errCode} ${I[this.errCode]||""} | errMsg: `+this.errMsg},set(e){this.errMsg=e}}}),this.errCode=e.errCode||-1,this.errMsg=e.errMsg}get message(){return`errCode: ${this.errCode} | errMsg: `+this.errMsg}set message(e){this.errMsg=e}}function C(e){return e&&e instanceof Error&&_(e.errMsg)}function O(e,t){return N(e,t)}function N(e,t){if(e){if(C(e))return e;var r,n=`${t}:fail `;if(e instanceof Error)e.message=`${n}${e.message}`,e.stack=e.stack?e.stack.slice(0,7)+n+e.stack.slice(7):e.stack,(r=e).errCode=-1;else if("string"==typeof e)(r=new Error(`${n}${e}`)).errCode=-1;else{var i=e.errMsg||"";(r=new Error(`${t}:fail ${e.errCode} ${I[e.errCode]||""}. ${i}`)).errCode=e.errCode||-1}return r.errMsg=r.message+"",r}var o=new Error(`${t}:fail`);return o.errCode=-1,o.errMsg=o.message+"",o}class R extends Error{constructor(e,t){super(e),this.type="timeout",this.payload=void 0,this.generic=!0,this.payload=t}}var P=e=>"timeout"===e.type;class D extends Error{constructor(e,t){super(e),this.type="cancelled",this.payload=void 0,this.generic=!0,this.payload=t}}var L,B=e=>"cancelled"===e.type,k={fake:!0,surroundThirdByTryCatch:(e,t)=>function(...r){return $((()=>{try{return e.apply(e,r)}catch(r){throw console.error(JSON.stringify(r)+`; ${t}\n`+r.stack),console.error(e.toString()),r}}),t)},reportIDKey:(...e)=>{},reportIDKeyDirectly:(...e)=>{},reportKeyValue:(...e)=>{}},M=!1,F=10;function j(){try{return M?o:F<=0?L:(F--,o.surroundThirdByTryCatch,M=!0,L=o)}catch(e){return L=k}}var U={surroundThirdByTryCatch:(e,t)=>j().surroundThirdByTryCatch(e,t),reportIDKey:e=>j().reportIDKey(e),reportIDKeyDirectly:e=>j().reportIDKeyDirectly(e),reportKeyValue:e=>j().reportKeyValue(e)};function $(e,t=""){try{return e()}catch(e){if(C(e))return e.errMsg+=t,e;var r=(e?e.toString():"")+t;return new T({errMsg:r})}}function W(e,t=""){return function(...r){return $((()=>e.apply(e,r)),t)}}function q(e){var t=e.param;t&&(t.success&&v(t.success)&&(t.success=U.surroundThirdByTryCatch(t.success,`at api ${e.apiName} success callback function`)),t.fail&&v(t.fail)&&(t.fail=U.surroundThirdByTryCatch(t.fail,`at api ${e.apiName} fail callback function`)),t.complete&&v(t.complete)&&(t.complete=U.surroundThirdByTryCatch(t.complete,`at api ${e.apiName} complete callback function`)))}function H(e,t,r){t.complete&&v(t.complete)&&W(t.complete,`at api ${e} complete callback function;`)(r)}function G(e,t,r){!function(e,t,r){t.success&&v(t.success)&&W(t.success,`at api ${e} success callback function;`)(r)}(e,t,r),H(e,t,r)}function Q(e,t,r){!function(e,t,r){t.fail&&v(t.fail)&&W(t.fail,`at api ${e} fail callback function;`)(r)}(e,t,r),H(e,t,r)}function z(e){return e&&(e.success||e.fail||e.complete)}function K(e,t,r="parameter",n=T){var i=function(e,t,r="parameter"){var n=function e(t,r,n){var i=f(t),o=f(r);if("string"===o)return i!==r?`${n} should be ${r} instead of ${i};`:"";if(i!==o)return`${n} should be ${o} instead of ${i}; `;var a="";switch(i){case"object":for(var s in r)a+=e(t[s],r[s],`${n}.${s}`);break;case"array":for(var l=0;l<r.length;l++)a+=e(t[l],r[l],`${n}[${l}]`)}return a}(e,t,r);return{passed:!n,reason:n}}(e,t,r);if(!i.passed)throw new n({errCode:I.SDK_API_PARAMETER_TYPE_ERROR,errMsg:i.reason})}function V(e,t,r,n=T){if(null==e)throw new n({errCode:I.SDK_API_PARAMETER_ERROR,errMsg:`parameter ${t} of function ${r} must be provided`})}function J({name:e,input:t,max:r,maxWording:n="",ErrorClass:i=T}){if(t.length>r)throw new i({errCode:I.SDK_API_PARAMETER_ERROR,errMsg:`${e} size must be less than ${n||r}`})}function X({target:e,name:t,ErrorClass:r=T}){if(0===Object.keys(e).length)throw new r({errCode:I.SDK_API_PARAMETER_ERROR,errMsg:`${t} must not be empty`})}function Y(e,t=!1){if(t)return function(e){switch(f(e)){case"object":return s()({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if((e=>{if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t})(e))return s()({},e);switch(f(e)){case"object":default:return e;case"array":return e.slice()}}var Z,ee=new WeakMap,te=[];function re(){var e,t=null!==(e=Z)&&void 0!==e?e:void 0!==u?u:void 0;return t?te.reduce(((e,t)=>t(e)),t):t}var ne=e=>{if(!e)return re();var t=ee.get(e);return t&&t||re()},ie=(e,t)=>{ee.set(e,t)},oe=e=>{Z=e},ae=e=>{te.push((t=>Object.assign({},t,e)))},se=(e,t)=>{var r=null,n=!1,i=()=>{r?n=!0:(e(),r=setTimeout((()=>{clearTimeout(r),r=null,n&&(n=!1,i())}),t))};return i};function le(e){if(void 0===e||!e.timestamp||!e.expires_in)return 0;var t=Date.now()-e.timestamp,r=.8*e.expires_in,n=Math.min(e.timestamp,Date.now())+1e3*r;return t>1e3*r?Date.now()+1e3*r:n}var ue,ce=void 0!==w?w:void 0,de=(e=0)=>new Promise((t=>setTimeout(t,e))),pe=!1,fe=[],he=()=>new Promise(((e,t)=>{if(ue)e(ue);else{0;try{ne().wx.getNetworkType({success:t=>{ue={networkType:t.networkType,isConnected:"none"!==t.networkType},e(ue),pe||(ne().wx.onNetworkStatusChange((e=>{if(ue.networkType=e.networkType,ue.isConnected=e.isConnected,e.isConnected&&fe.length)for(;fe.length;)try{fe.shift()()}catch(e){}})),pe=!0)},fail:t})}catch(e){t(e)}}}));var _e,ge=!1,ve=new Set;function me(e){try{ne().wx.onAppShow&&(ge||(!function(){var e=ne().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((()=>{for(var e of("visible",ve))try{e("show")}catch(e){0}})),e.onAppHide((()=>{for(var e of("hidden",ve))try{e("hide")}catch(e){0}})))}(),ge=!0),ve.size>50&&ve.clear(),ve.add(e))}catch(e){}}function ye(e){ve.delete(e)}function be(){if(_e)return _e;var e=ne().wx;return _e=e.getSystemInfoSync()}var we,Ae=!1,Ee=void 0;function Se(e=500,t={}){if(ne().private_getBackgroundFetchData&&!t.pluginId){if(Ee)return Ee;if(we)return we.then((()=>Ee));if(!Ae){Ae=!0;var r=Date.now(),n=Gt();return we=Promise.race([de(e).then((()=>({error:"bg fetch timeout"}))),new Promise(((e,t)=>{ne().private_getBackgroundFetchData({fetchType:0,success:t=>{try{t||e({error:"empty"}),(Ee=JSON.parse(t.fetchedData)).expiresTs=le(Ee),e(Ee),zt({apiName:"private_getBackgroundFetchData",apiStartTime:r,apiEndTime:Date.now(),warmStartTime:n})}catch(t){e({error:t})}},fail:t=>{e({error:t})}})}))]),Ee?(null==ce||ce.log("private_getBackgroundFetchData (cloud) (sync)",JSON.stringify(Ee)),Ee):we.then((e=>(we=void 0,null==ce||ce.log("private_getBackgroundFetchData (cloud)",JSON.stringify(e)),e.error?void 0:e)))}}}function Ie(e){try{return JSON.parse(e)}catch(t){return e}}function Te(e){return encodeURIComponent(function(e){try{return decodeURIComponent(e)}catch(t){return e}}(e))}var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Oe(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return function(e){for(var t,r,n=String(e),i="",o=0,a=Ce;n.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&t>>8-o%1*8)){if((r=n.charCodeAt(o+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|r}return i}(t)}function Ne(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),r="";if(t.length%4==1)throw new Error('"atob" failed');for(var n,i,o=0,a=0;i=t.charAt(a++);~i&&(n=o%4?64*n+i:i,o++%4)?r+=String.fromCharCode(255&n>>(-2*o&6)):0)i=Ce.indexOf(i);return r}(e),r=t.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n.buffer}function xe(e){return Be(new Uint8Array(e))}function Re(e){return function(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(t)}(e).buffer}var Pe,De,Le,Be=(Pe=new Array(128),De=String.fromCodePoint||String.fromCharCode,Le=[],function(e){var t,r,n=e.length;Le.length=0;for(var i=0;i<n;)(r=e[i++])<=127?t=r:r<=223?t=(31&r)<<6|63&e[i++]:r<=239?t=(15&r)<<12|(63&e[i++])<<6|63&e[i++]:String.fromCodePoint?t=(7&r)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++]:(t=63,i+=3),Le.push(Pe[t]||(Pe[t]=De(t)));return Le.join("")}),ke=r(359),Me=ce,Fe=new Set(["tcbapi_init","tcbapi_get_service_info"]);var je=new class{constructor(){this._running=0,this._onIdleCallbacks=[],this._idleTriggerTimer=void 0}get running(){return this._running}incrementRunning(e=1){this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)}decrementRunning(e=1){this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((()=>{if(this._idleTriggerTimer=null,this._onIdleCallbacks.length){var e=this._onIdleCallbacks.shift();e&&e()}}),50))}onceIdle(e){this._running>0?this._onIdleCallbacks.push(e):e()}};function Ue(e,t={}){if(t.fireOnIdle&&je.running>0)return new Promise(((r,n)=>{je.onceIdle(c()((function*(){try{var i=yield Ue(e,t);r(i)}catch(e){n(e)}})))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise(((r,n)=>{var i,o,a,l,u,c,d,p;(je.incrementRunning(),null!==(i=e.cloud)&&void 0!==i&&i.plugins)&&(p=`${e.cloud.plugins.reduce(((e,t)=>t.getMetadata(e)),{}).host||"https://servicewechat.com"}/wxa-qbase/jsoperatewxdata`,e=e.cloud.plugins.reduce(((t,r)=>r.beforeTunnelRequest(e)),e)||e);ne((e.cloud||t.cloud||{}).identifiers).invokeOperateWXData({appid:(null===(o=e.cloud)||void 0===o||null===(a=o.instanceOptions)||void 0===a?void 0:a.resourceAppid)||(null===(l=e.cloud)||void 0===l?void 0:l.config.appid),accessToken:null===(u=e.cloud)||void 0===u||null===(c=u.authStorage)||void 0===c?void 0:c.getItem("access_token"),webRequest:null===(d=e.cloud)||void 0===d?void 0:d.webRequest,url:p,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:i=>{var o;i=(null===(o=e.cloud)||void 0===o?void 0:o.plugins.reduce(((e,t)=>t.afterTunnelRequest(e)),i))||i;var a=s()(s()({},i),{},{data:i.data});if(i.data)try{var l=i.data;if(l.baseresponse&&0!==l.baseresponse.errcode){var u=new T({errCode:l.baseresponse.errcode,errMsg:l.baseresponse.errmsg});return void n(u)}a=s()(s()({},i),{},{data:l})}catch(e){var c=new T({errMsg:e&&e.toString()});return void n(c)}else if(t&&t.requireDataNotEmpty){var d=new T({errCode:i.errCode,errMsg:`error empty internal server response, ${i.errMsg}`});return void n(d)}r(a)},fail:e=>{if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){var t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{var r=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(r)).errMsg=r,e.operateWXDataFail=!0}n(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),je.decrementRunning()}})}))}function $e(e){var{cloud:t}=e;return function(){var e=c()((function*(e){var r=t.isInstance?s()(s()({},t.instanceOptions),{},{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}):{identityless:"sdk"===t.runtimeInfo.platform?t.config.identityless:void 0,appid:t.config.appid,env:e.env||t.config.env},n={qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:r,qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`};if(e.stdpriv&&!Fe.has(e.apiName)){var i=yield function(e,t){return We.apply(this,arguments)}(t,n).catch((e=>{if(e&&(-9999===e.errCode||-9998===e.errCode))return Ue({apiName:"qbase_commapi",data:n,cloud:t}).then((t=>s()(s()({},t),{},{channelType:-9998===e.errCode?0:2})));throw e}));return i}return Ue({apiName:"qbase_commapi",data:n,cloud:t})}));return function(t){return e.apply(this,arguments)}}()}function We(){return We=c()((function*(e,t){var r=e.serviceEndpoint.getEndpointSync("container");if(null==r||!r.cloudServiceUrl)throw{errCode:-9998,errMsg:"cloudServiceUrl not found"};null==Me||Me.info("cloud stdpriv begin",t);var n=ne(e.identifiers),i={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":r.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-LIB-BUILD-TS":1702437414874,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"JSON","Content-Type":"application/octet-stream","X-WX-REQUEST-CONTENT-ENCODING":"PB"},o=new Uint8Array(Ne(r.key)),{data:a}=ke.V1.encodeStdPrivRequest(o,{cliReqId:t.cli_req_id,qbaseApiName:t.qbase_api_name,qbaseMeta:{filterUserInfo:t.qbase_meta.filter_user_info,sdkVersion:t.qbase_meta.sdk_version,sessionId:t.qbase_meta.session_id},qbaseOptions:{env:t.qbase_options.env},qbaseReq:t.qbase_req}),l=Ct({rdm:e.getConfig().rdm});return new Promise(((e,t)=>{n._requestSkipCheckDomain({url:l,method:"POST",header:i,data:a.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,success:r=>{try{for(var n in null==Me||Me.info("res",r),r.header)if("x-nws-log-uuid"===n.toLowerCase()&&(null==Me||Me.log(`[cloud.callContainer] x-nws-log-uuid ${r.header[n]}`)),"x-wx-system-error"===n.toLowerCase()){var i=Number(r.header[n]);return 85104===i&&Tt.invalidateService("container"),void t(new Error(`wx system error. code: ${i}`))}if(200===r.statusCode){var a=r.data,s=!1;for(var l in r.header)"x-wx-compression"===l.toLowerCase()&&"snappy"===r.header[l]&&(s=!0);var u=ke.V1.decodeStdPrivResponse(o,new Uint8Array(a),s);e({errCode:0,errMsg:"",data:u,profile:r.profile,channelType:1})}else t({errCode:-9999,errMsg:"system conn status not 200"})}catch(e){t(new Error(`error while processing internal response ${e}`))}},fail:e=>{t(s()(s()({},e),{},{errCode:-9999,errMsg:e.errMsg}))}})}))})),We.apply(this,arguments)}var qe=Ue;var He=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Ge="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,Qe="object"==typeof self&&self&&self.Object===Object&&self,ze=Ge||Qe||i("return this")(),Ke=function(){return ze.Date.now()},Ve=/\s/;var Je=function(e){for(var t=e.length;t--&&Ve.test(e.charAt(t)););return t},Xe=/^\s+/;var Ye=function(e){return e?e.slice(0,Je(e)+1).replace(Xe,""):e},Ze=ze.Symbol,et=Object.prototype,tt=et.hasOwnProperty,rt=et.toString,nt=Ze?Ze.toStringTag:void 0;var it=function(e){var t=tt.call(e,nt),r=e[nt];try{e[nt]=void 0;var n=!0}catch(e){}var i=rt.call(e);return n&&(t?e[nt]=r:delete e[nt]),i},ot=Object.prototype.toString;var at=function(e){return ot.call(e)},st=Ze?Ze.toStringTag:void 0;var lt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":st&&st in Object(e)?it(e):at(e)};var ut=function(e){return null!=e&&"object"==typeof e};var ct=function(e){return"symbol"==typeof e||ut(e)&&"[object Symbol]"==lt(e)},dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,ft=/^0o[0-7]+$/i,ht=parseInt;var _t=function(e){if("number"==typeof e)return e;if(ct(e))return NaN;if(He(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=He(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ye(e);var r=pt.test(e);return r||ft.test(e)?ht(e.slice(2),r?2:8):dt.test(e)?NaN:+e},gt=Math.max,vt=Math.min;var mt=function(e,t,r){var n,i,o,a,s,l,u=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,o=i;return n=i=void 0,u=t,a=e.apply(o,r)}function h(e){return u=e,s=setTimeout(g,t),c?f(e):a}function _(e){var r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=o}function g(){var e=Ke();if(_(e))return v(e);s=setTimeout(g,function(e){var r=t-(e-l);return d?vt(r,o-(e-u)):r}(e))}function v(e){return s=void 0,p&&n?f(e):(n=i=void 0,a)}function m(){var e=Ke(),r=_(e);if(n=arguments,i=this,l=e,r){if(void 0===s)return h(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=_t(t)||0,He(r)&&(c=!!r.leading,o=(d="maxWait"in r)?gt(_t(r.maxWait)||0,t):o,p="trailing"in r?!!r.trailing:p),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=i=s=void 0},m.flush=function(){return void 0===s?a:v(Ke())},m},yt=/https:\/\/servicewechat\.com/,bt={},wt={},At={},Et="servicewechat.com",St=!1,It=`${Math.random()}_${Date.now()}`;void 0!==b&&b.onLoad((()=>{It=`${Math.random()}_${Date.now()}`}));class Tt{constructor(e){this.identifiers=e,this._tunnelRequest=void 0,this._meta=void 0}setMetaData(e){this._meta=e}setTunnelRequest(e){this._tunnelRequest=e}getEndpointSync(e){var t=bt[e];if("container"===e){if(null!=t&&t.url&&null!=t&&t.expiresTs&&Date.now()<t.expiresTs)return t;this.getEndpoint(e)}}getEndpoint(e){var t=this;return c()((function*(){var r=bt[e];return"container"===e?null!=r&&r.url&&null!=r&&r.expiresTs&&Date.now()<r.expiresTs?r:t.refreshContainerServiceEndpoint():null}))()}processServiceEndpoint(e){var t=this;return c()((function*(){var r,n=le(e);Vt(e.token,"1"),Et=(null==bt||null===(r=bt.container)||void 0===r?void 0:r.domain)||"servicewechat.com",function(){Rt.apply(this,arguments)}(),clearTimeout(At.container),At.container=setTimeout((()=>{t.refreshContainerServiceEndpoint()}),n-Date.now())}))()}refreshContainerServiceEndpoint(){var e=this;return c()((function*(){return wt.container||(bt.container&&Tt.invalidateService("container"),clearTimeout(At.container),wt.container=new Promise(function(){var t=c()((function*(t,r){if(ne().private_getBackgroundFetchData&&!St){St=!0;var n,i,o=Se(500,e.identifiers);if(o&&!o.url_info&&(o=yield o),o&&o.expiresTs>Date.now()&&o.url_info)return bt.container={url:null!==(n=o.url_info)&&void 0!==n&&n.cloudrun_url?`${o.url_info.cloudrun_url}?token=${o.token}`:`https://${o.domain}/wxa-qbase/container_service?token=${o.token}`,cloudServiceUrl:null!==(i=o.url_info)&&void 0!==i&&i.cloudbase_url?`${o.url_info.cloudbase_url}?token=${o.token}`:void 0,domain:o.domain||"servicewechat.com",token:o.token,http:!0,key:o.key,timestamp:o.timestamp,expiresTs:o.expiresTs},e.processServiceEndpoint(o),t(bt.container),void delete wt.container}for(var a=[],s=0;s<3;s++)try{var l,u,c=Date.now(),d=be(),p=(e._tunnelRequest?yield e._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({client_random:It,system:d.system,wx_app_version:d.version})}):yield qe({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:JSON.stringify({client_random:It,system:d.system,wx_app_version:d.version}),qbase_options:{},qbase_meta:e._meta,cli_req_id:`${+new Date}_${Math.random()}`}})).data;if(Date.now()-c>1e3*p.expires_in){a.push(`result already expired (startTs ${c} resultTs ${Date.now()})`);continue}var f=le(p),h=p.domain||"servicewechat.com";return bt.container={url:null!==(l=p.url_info)&&void 0!==l&&l.cloudrun_url?`${p.url_info.cloudrun_url}?token=${p.token}`:`https://${h}/wxa-qbase/container_service?token=${p.token}`,cloudServiceUrl:null!==(u=p.url_info)&&void 0!==u&&u.cloudbase_url?`${p.url_info.cloudbase_url}?token=${p.token}`:void 0,domain:h,token:p.token,http:p.http,key:p.key,timestamp:p.timestamp,ip:p.ip,vip:p.vip,expiresTs:f},e.processServiceEndpoint(p),t(bt.container),void delete wt.container}catch(e){a.push(e+"")}r(`get container service endpoints errors: ${a.join("\n")}`),delete wt.container}));return function(e,r){return t.apply(this,arguments)}}())),wt.container}))()}static invalidateService(e){delete bt[e]}}function Ct(e){var t=bt.container;if(t&&t.cloudServiceUrl)return e.rdm?t.cloudServiceUrl.replace(yt,"https://wxardm.weixin.qq.com"):t.cloudServiceUrl}var Ot=!1,Nt=!1,xt=0;function Rt(){return(Rt=c()((function*(){if(!Ot){Ot=!0;var e=()=>{Ot&&setTimeout(c()((function*(){yield Pt(),e()})),2e4)};if(e(),!Nt){var t;Nt=!0;var r=ne();null!==(t=r.wx)&&void 0!==t&&t.onAppHide&&r.wx.onAppHide((()=>{Ot=!1}))}return Pt()}}))).apply(this,arguments)}var Pt=mt((()=>new Promise((e=>{var t=Date.now(),r=!/^\d+/.test(Et);ne()._requestSkipCheckDomain({url:`${r?"https":"http"}://${Et}/wxa-qbase/keepalive`,header:r?{}:{host:"servicewechat.com"},method:"GET",dataType:"text",enableHttp2:r,success:()=>{e(),xt++%4==0&&Xt(22990,1,["privateHttpKeepAlive",Et,t,Date.now(),Date.now()-t].join(","))},fail:()=>{e()}})}))),2e4),Dt=y;var Lt=Dt,Bt=()=>"devtools"===Dt.platform,kt=!1,Mt=[],Ft=Date.now(),jt=Date.now(),Ut="unknown";Lt.onReady((()=>{Ft=Date.now(),jt=Date.now()}));var $t,Wt,qt,Ht,Gt=()=>jt,Qt=()=>{for(var e of Mt)try{e()}catch(e){0}Mt=[]},zt=e=>{setTimeout((()=>{try{var t;if(!(e=>!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime)))(e))return;if(!kt&&Mt.length<100)return void Mt.push(zt.bind(null,e));var r=e.apiEndTime-e.apiStartTime,n=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,i=[0,e.apiName,r,n,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,Ut,e.tunnelTimeNoCSNetCost?r-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?n-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0,null!==(t=e.channelType)&&void 0!==t?t:0,e.funcName||"",e.apiStartTime-Ft,void 0!==e.warmStartTime?e.apiStartTime-e.warmStartTime:0];U.fake?Xt(16588,6,i.join(",")):U.reportKeyValue({key:"CloudReport",value:i.join(","),force:!0})}catch(e){}}))},Kt=(e,t,r,n)=>{U.reportIDKeyDirectly({id:e,key:t,force:r,immediately:n})},Vt=(e,t)=>($t=e,Wt=t),Jt=[],Xt=(e,t,r)=>{Jt.push({log_id:e,version:t,user_log_list:r}),$t&&Yt()},Yt=se((()=>{ne()._requestSkipCheckDomain({url:`https://servicewechat.com/wxa-qbase/report?token=${$t}&v=${Wt}`,method:"POST",header:{},enableHttp2:!0,dataType:"json",data:JSON.stringify({report_info_list:Jt}),success:e=>{for(var t in e.header)"x-wx-system-error"===t.toLocaleLowerCase()&&"85104"===e.header[t]&&Tt.invalidateService("container")}}),Jt=[],Pt()}),3e4),Zt=(e,t)=>{var r=v(e);function n(...n){if(t.samplePicker&&!t.samplePicker.next())return r?e.apply(this,n):e;var o=Date.now(),a=!0;try{var s,l;if(null!==(s=t.condition)&&void 0!==s&&s.emptyKey&&t.timing[t.startKey])return r?e.apply(this,n):e;if(r){var u=e.apply(this,n);if("promise"!==f(u))return a=!1,u;l=u}else l=e;return l.then((()=>i(o))).catch((()=>i(o))),l}catch(e){throw a=!1,e}finally{a||i(o)}}function i(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&zt(s()(s()({},t.timing),{},{apiName:t.autoReport}))}return r?n:n()},er=(qt=10,Ht=!0,function*(){for(var e=()=>parseInt(Math.round(2*Math.random()*qt),10),t=Ht?0:e();;)t>0?(t--,yield!1):(t=e(),yield!0)})();function tr(e){if(e&&!isNaN(e))return e>6e4?6e4:e<0?0:e}function rr(e,t,r){t.stats.apiEndTime=Date.now(),zt(s()(s()({},t.context),{},{apiEndTime:t.stats.apiEndTime,apiName:e}));var n=Boolean(t.stats.profile),i=t.stats.profile||{},o=t.stats.serverEndTs-t.stats.serverStartTs,a=t.stats.httpRequest?t.stats.httpRequest<=6e4?t.stats.httpRequest:6e4:void 0,l=t.stats.apiEndTime,u=l-t.context.apiStartTime;u>9e4&&(u=9e4);var c=t.path||"";c=c.split("?")[0].replace(/\/\d+\//g,"/*/").replace(/\/\d+$/g,"/*"),Xt(22601,13,[t.stats.callid,t.context.apiStartTime,l,t.stats.serverStartTs,t.stats.serverEndTs,t.stats.requestBodyBytes,t.stats.responseBodyBytes,t.stats.getServiceEndpoint,t.stats.queryDNS,t.stats.compress,t.stats.loadAsmcrypto,t.stats.encrypt,a,t.stats.decrypt,t.stats.uncompress,t.stats.decodePb,t.stats.decodeBody,t.stats.ip,i.redirectStart,n?i.redirectEnd-i.redirectStart:void 0,i.fetchStart,i.domainLookupStart,n?i.domainLookUpEnd-i.domainLookUpStart:void 0,i.connectStart,n?i.connectEnd-i.connectStart:void 0,i.SSLconnectionStart,n?i.SSLconnectionEnd-i.SSLconnectionStart:void 0,i.requestStart,n?i.requestEnd-i.requestStart:void 0,i.responseStart,n?i.responseEnd-i.responseStart:void 0,i.rtt,i.estimate_nettype,tr(i.httpRttEstimate),tr(i.transportRttEstimate),tr(i.downstreamThroughputKbpsEstimate),i.throughputKbps,i.peerIP,i.port,n?i.socketReused?1:0:void 0,i.sendBytesCount,i.receivedBytedCount,i.protocol,be().system,u,o>0?o:0,a?u-a:void 0,c,be().platform,t.stats.requestStartTs,1702437414874,t.stats.ecdnId,t.stats.ecdnEdgeTiming,t.stats.domain,t.stats.stringToBuffer,t.stats.encodePb,t.stats.tsBeforeCallContainerImpl,t.stats.tsCallContainerImplStart,t.stats.decodeJson,`SDK:${r}`,n?i.requestStart-t.stats.requestStartTs:void 0,n?t.stats.requestSuccessTs-i.requestEnd:void 0,t.stats.responseProcessEndTs?l-t.stats.responseProcessEndTs:void 0,t.stats.upstreamCost].join(","))}function nr(e){return`${e}:ok`}function ir(e,t){return JSON.stringify(e,((e,r)=>t&&t.has(r)?t.get(r):"arraybuffer"===f(r)?{type:"Buffer",data:[...new Uint8Array(r)]}:r))}function or(e){return ar(JSON.parse(e))}function ar(e){switch(f(e)){case"object":return sr(e);case"array":return e.map(ar);default:return e}}function sr(e){var t=e,r=lr(t);if(t!==r)return r;for(var n in t){var i=t[n];switch(f(i)){case"object":var o=lr(i);t[n]=o!==i?o:sr(t[n]);break;case"array":var a=ar(i);a!==i&&(t[n]=a);break;default:continue}}return t}function lr(e){for(var t in e)if("type"===t)if("Buffer"===e.type)if(m(e.data)&&g(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}return e}var ur=Symbol.for("CLOUD_ID"),cr=Symbol("CDN");function dr(e){var t=[];for(var r in e)h(e[r])&&e[r]._internalType===ur&&t.push({key:r,cloudID:e[r].cloudID});return t}var pr=2e4,fr=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},hr=e=>e.join("->");function _r(e){return function(){var t=c()((function*(t){var r=s()({},t.data),n=dr(r).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(n.length)for(var i of n)delete r[i.key_name];var o=ir(r,yield t.cdnMapPromise);J({input:o,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var a=`${+new Date}-${Math.random()}`;t.context.tunnelStartTime=+new Date;var{result:l,requestID:u}=yield function(e,t,r,n){return d.apply(this,arguments)}(t,o,n,a);return t.context.tunnelEndTime=+new Date,{errMsg:nr(Sr),result:l,requestID:u};function d(){return d=c()((function*(t,r,n,i){return new Promise(((o,a)=>{var s=[fr("start")],{resolve:l,reject:u}=h(s,o,a);p({param:t,functionName:t.name,data:r,cloudIDList:n,callID:i,action:mr.CALL,scene:yr.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:l,reject:u})}))})),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=c()((function*(r){var{functionName:i,data:o,callID:a,action:l,scene:u,tryCount:d,trace:f,systemErrorRetry:h,timeoutErrorRetry:_,resolve:g,reject:v}=r,m=l===mr.CALL&&Bt()?t.localDebugNoTimeout:void 0,y=ir({function_name:i,data:l===mr.CALL?o:void 0,action:l,scene:u,call_id:a,cloudid_list:l===mr.CALL?n:[],local_debug_no_timeout:m}),b=!1,w=!1,A=()=>{clearTimeout(S),w=!0},E=+new Date,S=m?void 0:setTimeout(c()((function*(){var t=e.appConfig.clientPollTimeout||pr;if(!(+new Date-E>t&&(yield de(),w))){if(!Bt()&&+new Date-E>e.appConfig.maxStartRetryGap)return f.push(fr("timeout, exceed max retry gap")),v(N({errCode:I.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${a}) (trace: ${hr(f)})`},Sr));b=!0,r.timeoutErrorRetry>0?(f.push(fr("timeout, retry")),p(s()(s()({},r),{},{scene:yr.TIMEOUT_RETRY,tryCount:d-1,timeoutErrorRetry:_-1}))):(f.push(fr("timeout, abort")),v(N({errCode:I.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${hr(f)})`},Sr)))}})),e.appConfig.clientPollTimeout||pr);e.request(s()(s()({},t.config),{},{apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:y,env:t.config&&t.config.env||e.env,stdpriv:!0})).then((function(e){try{if(b)return;A(),(e=>{var r,n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&(n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time),n.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=n.baseresponse.stat.func_exec_cost_time)),t.context.channelType=null!==(r=e.channelType)&&void 0!==r?r:0,e.profile&&(null==ce||ce.log("callFunction profile",e.profile))})(e);var n=e.data;if(!n)return f.push(fr("empty resp")),v(N({errCode:I.SDK_FUNCTIONS_EMPTY_CALL_RESULT},Sr));if(!n.baseresponse||0!==n.baseresponse.errcode)return n.baseresponse?0!==n.baseresponse.errcode?v(N({errCode:I.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${n.baseresponse.errcode} errmsg ${n.baseresponse.errmsg} (callId: ${a})`},Sr)):v(N({errCode:I.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(n.baseresponse)} (callId: ${a})`},Sr)):v(N({errCode:I.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},Sr));if(0!==n.status){if(1===n.status){if(0!==n.service_errcode){if(n.service_errcode===I.TCB_FUNCTIONS_EXEC_FAIL){var i=n.service_errmsg||"";try{for(var o=i.split("\n"),l=[],u=0;u<o.length;u++)o[u].startsWith("Error: ")&&l.push([o[u],u]);if(l.length%2==1){var c=l[Math.floor(l.length/2)][1];i=o.slice(c).join("\n")}}catch(e){}var h=N({errCode:I.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`云函数执行错误\n云端堆栈信息(error stack)(${n.func_request_id?`requestId ${n.func_request_id}, `:""}callid ${a}):\n${i}`},Sr);return h.stack=`Error: ${h.message}`,h.requestID=n.func_request_id,v(h)}var _=N({errCode:I.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`\n云函数调用失败(${n.func_request_id?`requestId ${n.func_request_id}, `:""}callid ${a}):\n${n.service_errcode} ${n.service_errmsg}`},Sr);return _.stack=`Error: ${_.message}`,_.requestID=n.func_request_id,v(_)}var m=n.data;try{m=or(m)}catch(e){try{m=JSON.parse(m)}catch(e){}}return g({result:m,requestID:n.func_request_id})}return f.push(fr("poll result expired")),v(N({errCode:I.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${a}) (trace: ${hr(f)})`},Sr))}if(!(d>=0))return f.push(fr("too many polls, abort")),v(N({errCode:I.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${a}) (trace: ${hr(f)})`},Sr));f.push(fr("normal poll")),p(s()(s()({},r),{},{action:mr.POLL,scene:yr.NORMAL_POLL_RETRY,tryCount:d-1}))}catch(e){v(N({errCode:I.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${a})`},Sr))}})).catch((e=>{b||(A(),e&&e.operateWXDataFail&&h>0?(f.push(fr(`system error (${e}), retry`)),p(s()(s()({},r),{},{scene:yr.SYSTEM_ERROR_RETRY,tryCount:d-1,systemErrorRetry:h-1}))):(f.push(fr(`system error (${e}), abort`)),v(N(`${e} (callId: ${a}) (trace: ${hr(f)})`,Sr))))}))})),f.apply(this,arguments)}function h(e,t,r){var n=t=>{e.push(fr(`app ${t}`))};me(n);return{resolve:e=>{ye(n),t(e)},reject:e=>{ye(n),r(e)}}}}));return function(e){return t.apply(this,arguments)}}()}function gr(e){var t=new WeakMap,r=[];if(e&&(JSON.stringify(e,((e,n)=>n&&n._internalType===cr?void r.push(new Promise(((e,r)=>{var i={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},o=n;if("object"===f(o.target)){if(!o.target.filePath)throw new Error("filePath must be provided");i.filePath=o.target.filePath}else i.fileData=o.target;e(vr(i).then((e=>{t.set(n,e.fileUrl)})))}))):n)),r.length))return Promise.all(r).then((()=>t))}function vr(e){return new Promise(((t,r)=>{var n=s()(s()({},e),{},{appType:e.appType||301,fileType:e.fileType||20303,fileKey:e.fileKey||`file_${Math.random()}`});ne().uploadToCommonCDN(s()(s()({},n),{},{success:t,fail:r}))}))}var mr,yr,br,wr=e=>s()(s()({},e),{},{errMsg:void 0}),Ar=e=>{try{Bt()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(s()(s()({},e),{},{domain:"cloud",method:"POST",realMethod:e.method,timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},Er=(e,t)=>{try{if(Bt()&&"undefined"!=typeof __global&&__global.networkLog){var r=t(),n=`${Math.random()}-${+new Date}`,i=r.console||!1,o=r.resultGetter||wr;Ar({reqId:n,type:"requestWillBeSent",url:r.url,headers:r.headers||{},body:r.reqBody,console:i,callFramesIgnoreLength:2,timestampMs:r.timestampMs,method:r.method}),e.then(function(){var e=c()((function*(e){try{yield((e=0)=>new Promise((t=>setTimeout(t,e))))(),Ar({reqId:n,type:"loadingFinished",body:JSON.stringify(o(e),null,2),console:i,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{try{Ar({reqId:n,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:h(e)?e.errMsg||JSON.stringify(e):e.toString(),console:i,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(mr||(mr={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}(yr||(yr={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(br||(br={}));var Sr="cloud.callFunction",Ir="cloud.callFunction_real_v2";function Tr(e){var t,r,n;function i(){return t||(t=function(e){return function(){var t=c()((function*(t){var r=s()({},t.data),n=dr(r).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(n.length)for(var i of n)delete r[i.key_name];var o=ir(r,yield t.cdnMapPromise);J({input:o,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var a=ir({function_name:t.name,data:o,cloudid_list:n});t.context.tunnelStartTime=+new Date;var l=yield e.request(s()(s()({},t.config),{},{apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:a,env:t.config&&t.config.env||e.env}));t.context.tunnelEndTime=+new Date;var u=l.data;if(!u)throw O({errCode:I.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:I[I.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},Sr);if(u.event_id,!u.poll_url)throw O({errCode:I.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:I[I.SDK_FUNCTIONS_EMPTY_POLL_URL]},Sr);u.poll_url.indexOf("?")>-1?u.poll_url+="&devtools_ignore=true&skip_domain_check=true":u.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date;var{result:d,requestID:p}=yield function(e){return f.apply(this,arguments)}(u.poll_url);return t.context.pollEndTime=+new Date,{errMsg:nr(Sr),result:d,requestID:p};function f(){return(f=c()((function*(t){return new Promise(((r,n)=>{h(t,e.appConfig.maxPollRetry||50,r,n)}))}))).apply(this,arguments)}function h(e,t,r,n){return _.apply(this,arguments)}function _(){return _=c()((function*(t,r,n,i){ne(e.identifiers)._requestSkipCheckDomain({url:t,success:e=>{try{if(200!==e.statusCode)return i(O({errCode:I.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:`polling status code ${e.statusCode}`},Sr));var o=e.data;if(!o)return i(O({errCode:I.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:I[I.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},Sr));if(o.base_resp&&0===o.base_resp.ret){if(0!==o.status){if(1===o.status){if(0!==o.service_errcode){var a=O({errCode:I.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`requestID ${o.func_req_id}, cloud function service error code ${o.service_errcode||"unknown"}, error message ${o.service_errmsg||"unknown"}`},Sr);return a.requestID=o.func_req_id,i(a)}var s=o.content;try{s=or(s)}catch(e){try{s=JSON.parse(s)}catch(e){}}return n({result:s,requestID:o.func_req_id})}return i(O({errCode:I.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},Sr))}if(!(r>=0))return i(O({errCode:I.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:I[I.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},Sr));h(t,r-1,n,i)}else{if(!o.base_resp)return i(O({errCode:I.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:I[I.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},Sr));if(0!==o.base_resp.ret)return i(O({errCode:I.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.ret ${o.base_resp.ret}`},Sr))}}catch(e){i(O({errCode:I.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e}`},Sr))}},fail:e=>{i(O(e,Sr))}})})),_.apply(this,arguments)}}));return function(e){return t.apply(this,arguments)}}()}(e)),t}function o(){return r||(r=_r(e)),r}function a(){return n||(n=function(e){return function(){var t=c()((function*(t){var r,n={function_name:t.name,data:ir(t.data),cloudid_list:[]},i=ir(n),o=yield e.serviceEndpoint.getEndpoint("container"),a=new Uint8Array(u.wx.base64ToArrayBuffer(o.key)),s={"X-WX-EV":3,"Content-Type":"application/octet-stream"},l=ke.V3.encodeRequest(a,{"X-WX-CALLID":`${+new Date}-${Math.random()}`,"X-WX-CLOUDFUNCTION-NAME":t.name,"X-WX-CLOUDFUNCTION-ENV":(null===(r=t.config)||void 0===r?void 0:r.env)||e.env||""},"POST",i),c=yield new Promise(((e,t)=>ne()._requestSkipCheckDomain({url:o.cloudServiceUrl,method:"POST",header:s,data:l.data.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,success:e,fail:t}))),d=ke.V3.decodeResponse(a,new Uint8Array(c.data)).body;if(d)try{d=JSON.parse(d)}catch(e){}return{errMsg:nr(Sr),result:d}}));return function(e){return t.apply(this,arguments)}}()}(e)),n}return function(e){var t=+new Date;K(e,"object");var r=Y(e);return r.data||(r.data={}),r.context={tunnelTimeNoCSNetCost:0,funcName:e.name,apiStartTime:t,warmStartTime:Gt()},z(r)?function(e){q({apiName:Sr,param:e}),d(e).then((t=>{G(Sr,e,t)})).catch((t=>{Q(Sr,e,t)}))}(r):d(r)};function l(e){K(e,{name:"string"}),e.data&&K(e.data,"object"),e.config&&e.config.env&&K(e.config.env,"string")}function d(e){return p.apply(this,arguments)}function p(){return(p=c()((function*(t){try{var r;if(l(t),t.cdnMapPromise=gr(t.data),r="sdk"===e.runtime.platform&&e.plugins.length?a()(t):u()?i()(t):o()(t),Bt()){var n=Date.now();Er(r,(()=>{var r;return{url:`wx.cloud.callFunction.${t.name}`,headers:{Env:e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env},reqBody:ir(t.data),timestampMs:n,console:e.debug}}))}return yield r}catch(e){throw O(e,Sr)}finally{zt(s()(s()({},t.context),{},{apiEndTime:+new Date,apiName:u()?Sr:Ir}))}function u(){return 1===t.version}}))).apply(this,arguments)}}function Cr(e){return{callFunction:Tr(e)}}var Or="functions";function Nr(e){e.registerService(function(e){var t={name:Or,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,runtime:e.runtimeInfo,plugins:e.plugins,get debug(){return e.debug},get env(){return e.getEnvForService(Or)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:Or,context:t,getAPIs:Cr.bind(null,t)}}(e))}var xr,Rr,Pr,Dr,Lr="cloud.callContainer";function Br(e){return function(){var r=c()((function*(r){var n=e.serviceEndpoint.getEndpointSync("container"),i=new WeakMap;if(r.cdnMapPromise||!n){var o=yield Promise.all([r.cdnMapPromise,kr(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]);o[0]&&(i=o[0]),n=o[1]}else r.stats.getServiceEndpoint=0;if(r.shouldSerialize&&(r.data=ir(r.data,i)),n.http){var a=function(t,r){return new Promise(((n,i)=>{var o,a;r.stats.tsCallContainerImplStart=Date.now();var l=ne(e.identifiers),u={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":t.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-USER-TIMEOUT":r.timeout||"","X-WX-LIB-BUILD-TS":1702437414874,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"PB, JSON","Content-Type":"application/octet-stream"},c=`${Math.random()}_${Date.now()}`,d=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(o=r.config)||void 0===o?void 0:o.env)||e.env,"X-WX-CALL-ID":c});e.appid&&(d["X-WX-RESOURCE-APPID"]=e.appid),r.service&&(d["X-WX-SERVICE"]=r.service);var p=r.stats;p.callid=c;var f=Date.now();if("GET"===(null===(a=r.method)||void 0===a?void 0:a.toUpperCase())&&r.data&&h(r.data)){var _=[];for(var g in r.data)_.push(`${g}=${r.data[g]}`);r.path+=`${r.path.includes("?")?r.path.endsWith("&")?"":"&":"?"}${_.join("&")}`,r.data=void 0}d["X-WX-CONTAINER-PATH"]=r.path;var v=new Uint8Array(Ne(t.key)),{data:m,contentEncoding:y}=ke.V1.encodeRequest(v,d,r.method||"GET",r.data);u["X-WX-REQUEST-CONTENT-ENCODING"]=y,p.encrypt=Date.now()-f,f=Date.now();var b=!0,w=b?t.url:`http://${t.vip}/wxa-qbase/container_service?token=${t.token}`;r.rdm?w=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:r.ecdn&&(w=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),r.verbose&&console.log(`[cloud.callContainer] url ${w}`),b&&t.domain&&(r.stats.domain=t.domain),p.requestBodyBytes=m.byteLength,p.requestStartTs=Date.now(),r._fallback?i({errCode:-9999,errMsg:`${Lr}:fail emulated fallback`}):l._requestSkipCheckDomain({url:w,method:"POST",header:u,data:m.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:r.timeout,enableHttp2:b,success:e=>{try{for(var t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(r.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),r.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(r.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){var o=Number(e.header[t]);return 85104===o&&Tt.invalidateService("container"),void i({errCode:o,errMsg:`${Lr}:fail system error. code: ${o}`})}if(r.verbose&&console.warn("res",e),p.profile=e.profile,p.httpRequest=Date.now()-f,200===e.statusCode){var a=e.data;p.responseBodyBytes=a.byteLength,f=Date.now();var s=!1,l=ke.m.pb;for(var u in e.header)if("x-wx-compression"===u.toLowerCase()&&"snappy"===e.header[u]&&(f=Date.now(),s=!0),"x-wx-response-content-encoding"===u.toLowerCase()&&"json"===e.header[u].toLowerCase()&&(l=ke.m.json),"x-wx-server-timing"===u.toLowerCase()){var d=(e.header[u]||"").split(",");d.length>=2&&(p.serverStartTs=Number(d[0]),p.serverEndTs=Number(d[1]))}var h,_=ke.V1.decodeResponse(v,new Uint8Array(a),s,l);f=Date.now();var g=_.body;if(302!==_.statusCode)if("json"===r.dataType){var m="string"==typeof g?g:xe(g.buffer);try{h=JSON.parse(m)}catch(e){return void i({errCode:-1,errMsg:`${Lr}:fail parse response body as JSON failed: ${e}. input: ${m}`})}}else h="text"===r.responseType?"string"==typeof g?g:xe(g.buffer):"arraybuffer"===r.responseType?"string"==typeof g?Re(g):g.buffer:g;p.decodeBody=Date.now()-f,p.responseProcessEndTs=Date.now(),n({statusCode:_.statusCode,header:_.header,data:h,stats:p,callID:c,errMsg:`${Lr}:ok`})}else i({errCode:-9999,errMsg:`${Lr}:fail [call_id ${c}] system conn status not 200`})}catch(e){i({errCode:-1,errMsg:`${Lr}:fail [call_id ${c}] error while processing internal response ${e}`})}},fail:e=>{i(s()(s()({},e),{},{errCode:-9999,errMsg:e.errMsg.replace(/^request/,Lr)}))}})}))}(n,r);return a.then(Pt).catch(Pt),a}return function(e,r){return t.apply(this,arguments)}(n.url,r)}));return function(e){return r.apply(this,arguments)}}();function t(){return t=c()((function*(t,r){return new Promise(((n,i)=>{var o,a=ne(e.identifiers),l=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(o=r.config)||void 0===o?void 0:o.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":r.timeout});e.appid&&(l["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:t,method:r.method,header:l,data:r.data,dataType:r.dataType,responseType:r.responseType,timeout:r.timeout,success:e=>{n(s()(s()({},e),{},{errMsg:`${Lr}:ok`}))},fail:e=>{i(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,Lr)}))}})}))})),t.apply(this,arguments)}}function kr(e,t,r){var n=Date.now();return e.then((()=>t[r]=Date.now()-n)).catch((()=>t[r]=Date.now()-n)),e}!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(xr||(xr={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(Rr||(Rr={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}(Pr||(Pr={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(Dr||(Dr={}));var Mr=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Fr=e=>e.join("->"),jr=2e4,Ur=1e5,$r="cloud.callContainer";function Wr(e){return function(){var t=c()((function*(t){var r,n;if(t.shouldSerialize){var i=yield t.cdnMapPromise;t.data=ir(t.data,i)}var o=Pr.RAW,a=(null===(r=t.method)||void 0===r?void 0:r.toUpperCase())||"GET";if(t.data&&/^(POST|PUT|PATCH|DELETE)$/.test(a)){var l=f(t.data);if("object"===l)t.data=JSON.stringify(t.data);else{if("arraybuffer"!==l&&"string"!==l)throw new Error(`input data type is not supported: ${l}`);var u=!1;if("string"===l)u=t.data.length>Ur;else if(t.data.byteLength>Ur)u=!0;else{var d=Oe(t.data);d.length>Ur?u=!0:(t.data=d,o=Pr.BASE64)}if(u)throw new Error("input data size too large (> 100KB)")}}else if("GET"===a&&t.data&&h(t.data)){var p=[];for(var _ in t.data)p.push(`${_}=${t.data[_]}`);t.path+=`${t.path.includes("?")?t.path.endsWith("&")?"":"&":"?"}${p.join("&")}`,t.data=void 0}else t.data=void 0;var g=`${+new Date}-${Math.random()}`;for(var v in t.header=s()(s()({},t.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(n=t.config)||void 0===n?void 0:n.env)||e.env,"X-WX-CONTAINER-PATH":t.path}),t.service&&(t.header["X-WX-SERVICE"]=t.service),t.header)null!==t.header[v]&&void 0!==t.header[v]&&(t.header[v]+="");t.context.tunnelStartTime=+new Date;var{result:m}=yield function(e,t,r,n){return y.apply(this,arguments)}(t,t.data,o,g);return t.context.tunnelEndTime=+new Date,s()(s()({},m),{},{errMsg:nr($r),callID:g});function y(){return y=c()((function*(t,r,n,i){var o,a=!1;t.hasOwnProperty("timeout")&&(o=new Promise(((e,r)=>{setTimeout((()=>{a=!0,r(`timeout (options.timeout == ${t.timeout})`)}),t.timeout)})));var s=new Promise(((s,l)=>{var u=[Mr("start")],{resolve:c,reject:d}=A(u,s,l);b({param:t,data:r,dataType:n,callID:i,action:xr.CALL,retryType:Rr.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!o&&a}},trace:u,resolve:c,reject:d})}));return o?Promise.race([s,o]):s})),y.apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return w=c()((function*(r){var{data:n,dataType:i,callID:o,action:a,retryType:l,tryCount:u,trace:d,systemErrorRetry:p,timeoutErrorRetry:f,userTimeout:h,resolve:_,reject:g}=r,v=[];for(var m in t.header)v.push({k:m,v:t.header[m]});var y=ir(a===xr.CALL?{method:t.method||"GET",headers:v,data:a===xr.CALL?n:void 0,data_type:i,action:a,retryType:l,call_id:o,user_timeout:t.timeout}:{call_id:o,action:a,retryType:l}),w=!1,A=!1,E=()=>{clearTimeout(T),A=!0},S=+new Date,T=setTimeout(c()((function*(){var t=e.appConfig.clientPollTimeout||jr;if(!(+new Date-S>t&&(yield de(),A)||h.reached)){if(!Bt()&&+new Date-S>e.appConfig.maxStartRetryGap)return d.push(Mr("timeout, exceed max retry gap")),g(N({errCode:I.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${o}) (trace: ${Fr(d)})`},$r));w=!0,r.timeoutErrorRetry>0?(d.push(Mr("timeout, retry")),b(s()(s()({},r),{},{retryType:Rr.Timeout,tryCount:u-1,timeoutErrorRetry:f-1}))):(d.push(Mr("timeout, abort")),g(N({errCode:I.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${o}) (trace: ${Fr(d)})`},$r)))}})),e.appConfig.clientPollTimeout||jr),C=e=>{var r=e.data;r&&r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=r.baseresponse.stat.qbase_cost_time)};function O(){return O=c()((function*(n){try{if(w||h.reached)return;E(),C(n);var i=n.data;if(!i)return d.push(Mr("empty resp")),g(N({errCode:I.SDK_CONTAINER_EMPTY_CALL_RESULT},$r));if(!i.baseresponse||0!==i.baseresponse.errcode)return i.baseresponse?0!==i.baseresponse.errcode?g(N({errCode:I.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${i.baseresponse.errcode} errmsg ${i.baseresponse.errmsg} (callId: ${o})`},$r)):g(N({errCode:I.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(i.baseresponse)} (callId: ${o})`},$r)):g(N({errCode:I.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},$r));if(0!==i.status){if(1===i.status){var a;if(i.data_type===Pr.BASE64)a=Ne(i.data),"json"===t.dataType?a=Ie(xe(a)):"arraybuffer"!==t.responseType&&(a=xe(a));else if(i.data_type===Pr.CDN_URL)try{var l=ne(e.identifiers),c=yield new Promise(((e,r)=>{l._requestSkipCheckDomain({url:i.data,dataType:t.dataType,responseType:t.responseType,success:t=>{200!==t.statusCode?r(`download response status code ${t.statusCode}`):e(t)},fail:e=>{r(e)}})}));a=c.data}catch(e){return g(N({errCode:I.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:`error: ${e} \n (callId: ${o}) (trace: ${Fr(d)})`},$r))}else a=i.data,"arraybuffer"===t.responseType?a=Re(a):"json"===t.dataType&&(a=Ie(a));return _({result:{data:a,statusCode:i.http_code,header:i.headers.reduce(((e,t)=>(e[t.k]=t.v,e)),{})}})}return d.push(Mr("poll result expired")),g(N({errCode:I.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${o}) (trace: ${Fr(d)})`},$r))}if(!(u>=0))return d.push(Mr("too many polls, abort")),g(N({errCode:I.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${o}) (trace: ${Fr(d)})`},$r));d.push(Mr("normal poll")),b(s()(s()({},r),{},{action:xr.POLL,retryType:Rr.None,tryCount:u-1}))}catch(e){g(N({errCode:I.SDK_CONTAINER_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${o})`},$r))}})),O.apply(this,arguments)}h.reached||e.request(s()(s()({},t.config),{},{apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:y,env:t.config&&t.config.env||e.env})).then((function(e){return O.apply(this,arguments)})).catch((e=>{w||h.reached||(E(),e&&e.operateWXDataFail&&p>0?(d.push(Mr(`system error (${e}), retry`)),b(s()(s()({},r),{},{retryType:Rr.Error,tryCount:u-1,systemErrorRetry:p-1}))):(d.push(Mr(`system error (${e}), abort`)),g(N(`${e} (callId: ${o}) (trace: ${Fr(d)})`,$r))))}))})),w.apply(this,arguments)}function A(e,t,r){var n=t=>{e.push(Mr(`app ${t}`))};me(n);return{resolve:e=>{ye(n),t(e)},reject:e=>{ye(n),r(e)}}}}));return function(e){return t.apply(this,arguments)}}()}var qr,Hr="cloud.callContainer";function Gr(e){return function(){var r=c()((function*(r){var n=e.serviceEndpoint.getEndpointSync("container"),i=new WeakMap;if(r.cdnMapPromise||!n){var o=yield Promise.all([r.cdnMapPromise,Qr(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]);o[0]&&(i=o[0]),n=o[1]}else r.stats.getServiceEndpoint=0;return r.shouldSerialize&&(r.data=ir(r.data,i)),n.http?function(t,r){return new Promise(((n,i)=>{var o;r.stats.tsCallContainerImplStart=Date.now();var a=ne(e.identifiers),l={"X-WX-EV":3,"Content-Type":"application/octet-stream"},u=`${Math.random()}_${Date.now()}`,c=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(o=r.config)||void 0===o?void 0:o.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":u});e.appid&&(c["X-WX-RESOURCE-APPID"]=e.appid);var d=r.stats;d.callid=u;var p=Date.now(),f=new Uint8Array(a.wx.base64ToArrayBuffer(t.key)),{data:h}=ke.V3.encodeRequest(f,c,r.method||"GET",r.data);console.log("v3, encReq",h),d.encrypt=Date.now()-p,p=Date.now();var _=!0,g=t.url;r.rdm?g=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:r.ecdn&&(g=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),r.verbose&&console.log(`[cloud.callContainer] url ${g}`),_&&t.domain&&(r.stats.domain=t.domain),d.requestBodyBytes=h.byteLength,d.requestStartTs=Date.now(),a._requestSkipCheckDomain({url:g,method:"POST",header:l,data:h.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:r.timeout,enableHttp2:_,success:e=>{try{for(var t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(r.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),r.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(r.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){var o=Number(e.header[t]);return void i({errCode:o,errMsg:`${Hr}:fail system error. code: ${o}`})}if(d.profile=e.profile,d.httpRequest=Date.now()-p,200===e.statusCode){var a=e.data;d.responseBodyBytes=a.byteLength,p=Date.now();var s,l=ke.V3.decodeResponse(f,new Uint8Array(a));for(var c in d.decrypt=Date.now()-p,e.header)if("x-wx-server-timing"===c.toLowerCase()){var h=(e.header[c]||"").split(",");h.length>=2&&(d.serverStartTs=Number(h[0]),d.serverEndTs=Number(h[1]))}p=Date.now();var _=l.body;if("json"===r.dataType){var g="string"==typeof _?_:xe(_.buffer);try{s=JSON.parse(g)}catch(e){return void i({errCode:-1,errMsg:`${Hr}:fail parse response body as JSON failed: ${e}. input: ${g}`})}}else s="text"===r.responseType?"string"==typeof _?_:xe(_.buffer):"arraybuffer"===r.responseType?"string"==typeof _?Re(_):_.buffer:_;d.decodeBody=Date.now()-p,d.responseProcessEndTs=Date.now(),n({statusCode:l.statusCode,header:l.header,data:s,stats:d,callID:u,errMsg:`${Hr}:ok`})}else{var v=-1;for(var m in e.header)"x-wx-system-error"===m.toLowerCase()&&(v=Number(e.header[m]));i({errCode:v,errMsg:`${Hr}:fail system error, status ${e.statusCode}. code: ${v}`})}}catch(e){i({errCode:-1,errMsg:`${Hr}:fail error while processing internal response ${e}`})}},fail:e=>{i(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,Hr)}))}})}))}(n,r):function(e,r){return t.apply(this,arguments)}(n.url,r)}));return function(e){return r.apply(this,arguments)}}();function t(){return t=c()((function*(t,r){return new Promise(((n,i)=>{var o,a=ne(e.identifiers),l=s()(s()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(o=r.config)||void 0===o?void 0:o.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":r.timeout});e.appid&&(l["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:t,method:r.method,header:l,data:r.data,dataType:r.dataType,responseType:r.responseType,timeout:r.timeout,success:e=>{n(s()(s()({},e),{},{errMsg:`${Hr}:ok`}))},fail:e=>{i(s()(s()({},e),{},{errMsg:e.errMsg.replace(/^request/,Hr)}))}})}))})),t.apply(this,arguments)}}function Qr(e,t,r){var n=Date.now();return e.then((()=>t[r]=Date.now()-n)).catch((()=>t[r]=Date.now()-n)),e}function zr(){qr||ne().private_getUserAgent((e=>{qr=e}));return qr}function Kr(e){e.path||(e.path=""),e.method||(e.method="GET"),e.header||(e.header={}),e.dataType||(e.dataType="json"),e.responseType||(e.responseType="text");var t="";for(var r in e.header)"content-type"===r.toLowerCase()&&e.header&&(t=e.header[r]);if(t||(t="application/json",e.header["content-type"]="application/json"),e.header["User-Agent"]=zr()||"",/get/i.test(e.method||"")&&e.data&&h(e.data)){var n="";for(var i in e.data)n+=`${n.length?"&":""}${Te(i)}=${Te(e.data[i])}`;e.path.includes("?")?e.path+=`${e.path.endsWith("&")?"":n?"&":""}${n}`:e.path+=`${e.path.endsWith("?")?"":n?"?":""}${n}`,e.data=void 0}else if(/post|put|patch|delete/i.test(e.method||"")&&e.data)if(t.includes("application/json")){var o=f(e.data);e.shouldSerialize="string"!==o}else if(t.includes("application/x-www-form-urlencoded")&&h(e.data)){var a="";for(var s in e.data)a+=`${a.length?"&":""}${encodeURIComponent(s)}=${encodeURIComponent(e.data[s])}`;e.data=a}}Error;var Vr="cloud.callContainer",Jr=0,Xr=1,Yr=2,Zr=!0,en=0,tn=new WeakMap;function rn(e){var t=[void 0,Br(e),Wr(e),Gr(e)];function r(e){return t[e]}return function(e){var t=+new Date;K(e,"object");var r=Y(e);return r.data||(r.data={}),r.dataType||(r.dataType="json"),r.context={tunnelTimeNoCSNetCost:0,apiStartTime:t,warmStartTime:Gt()},r.stats={apiStartTime:t},z(r)?function(e){q({apiName:Vr,param:e}),i(e).then((t=>{G(Vr,e,t)})).catch((t=>{Q(Vr,e,t)}))}(r):i(r)};function n(t){var r;if(t.service,e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null!==(r=t.config)&&void 0!==r&&r.env)K(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}function i(e){return o.apply(this,arguments)}function o(){return o=c()((function*(t){var r=!1;try{en++,n(t),Kr(t),t.cdnMapPromise=t.shouldSerialize?gr(t.data):void 0;var i=Date.now();r=Zr?(Zr=!1,yield a(t)):u(t),t.stats.tsBeforeCallContainerImpl=Date.now();var o,l=Y(t),c=t.data,_=d(t,r),g=t.service||t.header["X-WX-SERVICE"];o=g?`wx.cloud.callContainer.${g}${t.path}`:`wx.cloud.callContainer${t.path}`,Er(_,(()=>{var r;return{url:o,method:t.method,headers:s()({Env:e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env},t.header),reqBody:ir(c),timestampMs:i,console:e.debug}}));var v=f(l,h(l,_)),m=yield v;return p(t,r),m}catch(e){throw O(e,Vr)}finally{0===--en&&(0,ke.j)(ne()._WebAssembly)}})),o.apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=c()((function*(t){if(!Boolean(e.serviceEndpoint.getEndpointSync("container"))){var r=new Promise((e=>setTimeout(e,50))),n=e.serviceEndpoint.getEndpoint("container");yield Promise.race([r,n])}return u(t)}))).apply(this,arguments)}function u(t){return"windows"!==be().platform&&(1===t.apiVersion||2!==t.apiVersion&&Boolean(e.serviceEndpoint.getEndpointSync("container")))}function d(e,t){var n,i;if(t=null!==(n=t)&&void 0!==n?n:u(e)){var o=s()(s()({},e),{},{stats:s()({},e.stats)});i=r(1)(e).catch((e=>{if(-9999===(null==e?void 0:e.errCode))return r(2)(o);throw e}))}else i=r(2)(e);return i}function p(e,t){rr(Vr,e,t?"v1":"im")}function f(t,r){var n;if(e.identifiers.pluginId)return r;var i=ne(e.identifiers);if(!i.isUsedCache())return r;var o,a,s,l=(o=r,a={abort:()=>{},promise:Promise.resolve()},s=new Promise(((e,t)=>{a.abort=t})),a.promise=Promise.race([o,s]),a),u=i.reportCallContainer,c=i.privateCacheManager,d=i.cacheManager,p=Date.now(),{data:f,method:h}=t,_=`https://wx.cloud.callContainer/${(null===(n=t.config)||void 0===n?void 0:n.env)||e.env}`,g=t.service;if(!g)for(var v in t.header)"X-WX-SERVICE"===v.toUpperCase()&&(g=t.header[v]);_+=g?`/${g}${t.path}`:t.path;var m=(e,t,n)=>{var i=c.emit("request",{url:_,data:f,method:h,request:()=>new Promise(((e,t)=>{r.then(e).catch(t)}))});if(i.length){var o=i.find((e=>e&&"function"==typeof e.then));o&&o.then(e).catch(t).finally((()=>{l.abort()}))}else n&&t(n)};return new Promise(((e,t)=>{var n=t=>{u({isSuccess:!0,costTime:Date.now()-p,extra1:_}),e(t)},i=e=>{u({isSuccess:!1,costTime:Date.now()-p,extra1:_}),t(e)},o=e=>{c.checkNeedStore(_,f,h,e),n(e)};d.state===Yr?r.then((e=>{o(e)})).catch((e=>{m(n,i,e)})):d.state===Xr?m(n,i):d.state===Jr&&r.then((e=>{o(e)})).catch((e=>{i(e)}))}))}function h(t,r){var n;if(!(null===(n=t.followRedirect)||void 0===n||n))return r;return function t(n,i){return new Promise(((o,a)=>{i.then((i=>{var l;if(302===i.statusCode){var u=null!==(l=tn.get(r))&&void 0!==l?l:0;if(u>=6)a("reach the max redirect count");else{tn.set(r,u+1);var c="";for(var p in i.header)"location"===p.toLowerCase()&&(c=i.header[p]);if(c)if(c.startsWith("/")){var f=Y(n);n.path=c,t(f,d(n)).then(o).catch(a)}else{ne(e.identifiers).request({url:c,method:n.method,header:n.header,data:n.data,dataType:n.dataType,responseType:n.responseType,timeout:n.timeout,success:e=>{o(s()(s()({},e),{},{errMsg:"cloud.callContainer:ok"}))},fail:e=>{a(e.errMsg.replace(/^request/,Vr))}})}else o(i)}}else o(i)})).catch(a)}))}(t,r)}}var nn=r(393),on=r.n(nn),an=["success","complete"],sn="cloud.connectContainer";function ln(e){return function(e){var t=Y(e);return t.timing={apiStartTime:+new Date},z(t)?function(e){r(e).then((t=>{G(sn,e,t)})).catch((t=>{Q(sn,e,t)}))}(t):r(t)};function t(e){e.config&&e.config.env&&K(e.config.env,"string")}function r(e){return n.apply(this,arguments)}function n(){return(n=c()((function*(e){try{return t(e),yield i(e)}catch(e){throw e}finally{zt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:sn}))}}))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=c()((function*(t){var r={service_name:t.service},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var i=yield e.request(s()(s()({},t.config),{},{apiName:"tcbapi_get_websocket_info",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env}));t.timing.tunnelEndTime=+new Date;var o=i.data,{success:a,complete:l}=t,u=on()(t,an),c=ne(e.identifiers)._socketSkipCheckDomainFactory().connectSocket(s()(s()({},u),{},{url:`wss://${o.host}${t.path||""}`,header:s()(s()({},u.header),{},{"content-type":"application/json","x-wx-token":o.token}),perMessageDeflate:!0}));return{errMsg:nr(sn),socketTask:c}}))).apply(this,arguments)}}function un(e){return{callContainer:rn(e),connectContainer:ln(e)}}var cn="container";function dn(e){e.registerService(function(e){var t={name:cn,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(cn)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:cn,context:t,getAPIs:un.bind(null,t)}}(e))}var pn={},fn={env:"",platform:""},hn=()=>fn;if(void 0!==y)fn.env="miniprogram",fn.platform=y.platform,y.host&&"SAAASDK"===y.host.env&&(fn.platform="sdk");else if(fn.env="web",window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)fn.platform="miniprogram";else{var _n=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(_n)&&(fn.platform="wxweb")}var gn="cloud.uploadFile";function vn(e){return function(e){if(z(e=Y(e)))return function(e){var r={aborted:!1},n=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(r),i={apiStartTime:+new Date};return t(s()(s()({},e),{},{context:r,timing:i,uploadTaskAgent:n})).then((t=>{G(gn,e,t)})).catch((t=>{Q(gn,e,t)})),n}(e);var r={apiStartTime:+new Date};return t(s()(s()({},e),{},{timing:r}))};function t(e){return new Promise(function(){var t=c()((function*(t,n){try{if(function(e){K(e,{cloudPath:"string"}),"miniprogram"===hn().env?K(e,{filePath:"string"}):V(e,"file","uploadFile")}(e),e.context&&(e.context.abort=function(){n(O({errMsg:"abort"},gn))},e.context.aborted))return n(O({errMsg:"abort"},gn));var i=yield function(e){return r.apply(this,arguments)}(e);t(i)}catch(e){n(O(e,gn))}finally{zt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"}))}}));return function(e,r){return t.apply(this,arguments)}}())}function r(){return r=c()((function*(t){var r=ne(e.identifiers),i=yield n(t);return new Promise(((e,n)=>{if(t.context&&t.context.aborted)return n(O({errMsg:"abort"},gn));var o,a;if("web"===hn().env){var l=new FormData;l.append("key",t.cloudPath),l.append("signature",i.authorization),l.append("x-cos-security-token",i.token),l.append("x-cos-meta-fileid",i.cos_file_id),l.append("file",t.file),o={url:i.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:l}}else o={url:i.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:i.authorization,"x-cos-security-token":i.token,"x-cos-meta-fileid":i.cos_file_id}};(a=r._uploadFileSkipCheckDomain(s()(s()({},o),{},{success:t=>{try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:nr(gn),fileID:i.file_id,statusCode:t.statusCode});else{var r=new T({errMsg:`status ${t.statusCode}, error: ${t.data};`});n(r)}}catch(r){var o=new T({errMsg:`Error : ${t.data};`});n(o)}},fail:e=>{n(e)}})))&&(a.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&v(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(r._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=a.abort.bind(a)))}))})),r.apply(this,arguments)}function n(e){return i.apply(this,arguments)}function i(){return(i=c()((function*(t){var r=JSON.stringify({path:t.cloudPath}),n=+new Date,i=(yield e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=n,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time),!i.url)throw new T({errCode:I.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:I[I.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return i}))).apply(this,arguments)}}var mn="cloud.downloadFile";function yn(e){return function(e){if(z(e=Y(e)))return function(e){var r={aborted:!1},n=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(r),i={apiStartTime:+new Date};return t(s()(s()({},e),{},{context:r,timing:i,downloadTaskAgent:n})).then((t=>{G(mn,e,t)})).catch((t=>{Q(mn,e,t)})),n}(e);var r={apiStartTime:+new Date};return t(s()(s()({},e),{},{timing:r}))};function t(e){return r.apply(this,arguments)}function r(){return r=c()((function*(e){return new Promise(function(){var t=c()((function*(t,r){try{if(n(e),e.context&&(e.context.abort=function(){r(O({errMsg:"abort"},mn))},e.context.aborted))return r(O({errMsg:"abort"},mn));t(yield i(e))}catch(e){r(O(e,mn))}finally{zt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:mn}))}}));return function(e,r){return t.apply(this,arguments)}}())})),r.apply(this,arguments)}function n(e){K(e,{fileID:"string"}),e.config&&e.config.env&&K(e.config.env,"string")}function i(e){return o.apply(this,arguments)}function o(){return o=c()((function*(t){var r=ne(e.identifiers),n=yield a(t);return new Promise(((e,i)=>{if(t.context&&t.context.aborted)return i(O({errMsg:"abort"},mn));var o=r._downloadFileSkipCheckDomain({url:n,header:t.header,timeout:t.timeout,success:t=>{e(t)},fail:e=>{i(e)}});o&&(o.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&v(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(r._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=o.abort.bind(o)))}))})),o.apply(this,arguments)}function a(e){return l.apply(this,arguments)}function l(){return(l=c()((function*(t){var r=JSON.stringify({fileid:t.fileID}),n=+new Date,i=(yield e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=n,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=i.baseresponse.stat.qbase_cost_time),!i.download_url)throw new T({errCode:I.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:I[I.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return i.download_url.indexOf("?")>-1?i.download_url+="&skip_domain_check=true":i.download_url+="?skip_domain_check=true",i.download_url}))).apply(this,arguments)}}var bn="cloud.getTempFileURL";function wn(e){return function(e){var t=Y(e);return t.timing={apiStartTime:+new Date},z(t)?function(e){r(e).then((t=>{G(bn,e,t)})).catch((t=>{Q(bn,e,t)}))}(t):r(t)};function t(t){if(K(t,{fileList:"array"}),t.config&&t.config.env&&K(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new T({errCode:I.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function r(e){return n.apply(this,arguments)}function n(){return(n=c()((function*(e){try{return t(e),e.fileList.length?yield i(e):{errMsg:nr(bn),fileList:[]}}catch(e){throw O(e,bn)}finally{zt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:bn}))}}))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=c()((function*(t){var r={file_list:t.fileList.map((e=>_(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}))},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var i=yield e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var o=i.data;return t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time,{errMsg:nr(bn),fileList:o.download_list.map((e=>({fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}var An="cloud.deleteFile";function En(e){return function(e){var t=Y(e);return t.timing={apiStartTime:+new Date},z(t)?function(e){r(e).then((t=>{G(An,e,t)})).catch((t=>{Q(An,e,t)}))}(t):r(t)};function t(t){K(t,{fileList:"array"}),t.config&&t.config.env&&K(t.config.env,"string");for(var r=0,n=t.fileList.length;r<n;r++)K(t.fileList[r],"string",`parameter.fileList[${r}]`);if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new T({errCode:I.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function r(e){return n.apply(this,arguments)}function n(){return(n=c()((function*(e){try{return t(e),e.fileList.length?yield i(e):{errMsg:nr(An),fileList:[]}}catch(e){throw O(e,An)}finally{zt(s()(s()({},e.timing),{},{apiEndTime:+new Date,apiName:An}))}}))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=c()((function*(t){var r={fileid_list:t.fileList},n=JSON.stringify(r);t.timing.tunnelStartTime=+new Date;var i=yield e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var o=i.data;return t.timing.tunnelTimeNoCSNetCost=o.baseresponse.stat.qbase_cost_time,{errMsg:nr(An),fileList:o.delete_list.map((e=>({fileID:e.fileid,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}function Sn(e){return{uploadFile:vn(e),downloadFile:yn(e),getTempFileURL:wn(e),deleteFile:En(e)}}var In="storage";function Tn(e){e.registerService(function(e){var t={name:In,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(In)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:In,context:t,getAPIs:Sn.bind(null,t)}}(e))}var Cn,On=Symbol.for("UNSET_FIELD_NAME"),Nn=Symbol.for("AGGREGATE"),xn=Symbol.for("AGGREGATE_PIPELINE"),Rn=Symbol.for("AGGREGATE_PIPELINE_STAGE"),Pn=Symbol.for("UPDATE_COMMAND"),Dn=Symbol.for("QUERY_COMMAND"),Ln=Symbol.for("LOGIC_COMMAND"),Bn=Symbol.for("AGGREGATE_COMMAND"),kn=Symbol.for("PROJECT_COMMAND"),Mn=Symbol.for("GEO_POINT"),Fn=Symbol.for("GEO_LINESTRING"),jn=Symbol.for("GEO_POLYGON"),Un=Symbol.for("GEO_MULTIPOINT"),$n=Symbol.for("GEO_MULTILINESTRING"),Wn=Symbol.for("GEO_MULTIPOLYGON"),qn=Symbol.for("SERVER_DATE"),Hn=Symbol.for("REGEXP");!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(Cn||(Cn={}));var Gn=[Cn.AND,Cn.OR,Cn.NOT,Cn.NOR],Qn=new Set(Gn);class zn{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Ln,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||On}_setFieldName(e){var t=this.operands.map((t=>t===Cn.AND||t===Cn.OR?t._setFieldName(e):t));return new zn(this.operator,t,e)}and(...e){V(arguments[0],"expressions","and");var t=m(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Cn.AND,[this,...t],this.fieldName)}or(...e){V(arguments[0],"expressions","or");var t=m(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Cn.OR,[this,...t],this.fieldName)}nor(...e){V(arguments[0],"expressions","nor");var t=m(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Cn.NOR,[this,...t],this.fieldName)}not(e){return V(e,"expression","not"),new zn(Cn.NOT,[e],this.fieldName)}toJSON(){}}function Kn(e){return e&&e instanceof zn&&e._internalType===Ln}var Vn;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(Vn||(Vn={}));var Jn=[Vn.EQ,Vn.NEQ,Vn.GT,Vn.GTE,Vn.LT,Vn.LTE,Vn.IN,Vn.NIN,Vn.GEO_NEAR,Vn.GEO_WITHIN,Vn.GEO_INTERSECTS,Vn.EXISTS,Vn.MOD,Vn.ALL,Vn.ELEM_MATCH,Vn.SIZE],Xn=new Set(Jn);new Set([...Xn,...Qn]);class Yn extends zn{constructor(e,t,r){super(e,t,r),this.operator=void 0,this.__safe_props__=void 0,this.operator=e,this._internalType=Dn}_setFieldName(e){return new Yn(this.operator,this.operands,e)}eq(e){var t=new Yn(Vn.EQ,[e],this.fieldName);return this.and(t)}neq(e){var t=new Yn(Vn.NEQ,[e],this.fieldName);return this.and(t)}gt(e){var t=new Yn(Vn.GT,[e],this.fieldName);return this.and(t)}gte(e){var t=new Yn(Vn.GTE,[e],this.fieldName);return this.and(t)}lt(e){var t=new Yn(Vn.LT,[e],this.fieldName);return this.and(t)}lte(e){var t=new Yn(Vn.LTE,[e],this.fieldName);return this.and(t)}in(e){K(e,"array");var t=new Yn(Vn.IN,e,this.fieldName);return this.and(t)}nin(e){K(e,"array");var t=new Yn(Vn.NIN,e,this.fieldName);return this.and(t)}geoNear(e){var t=new Yn(Vn.GEO_NEAR,[e],this.fieldName);return this.and(t)}geoWithin(e){var t=new Yn(Vn.GEO_WITHIN,[e],this.fieldName);return this.and(t)}geoIntersects(e){var t=new Yn(Vn.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}exists(e){var t=new Yn(Vn.EXISTS,[e],this.fieldName);return this.and(t)}mod(e,t){var r=new Yn(Vn.MOD,[e,t],this.fieldName);return this.and(r)}all(e){var t=new Yn(Vn.ALL,e,this.fieldName);return this.and(t)}elemMatch(e){var t=new Yn(Vn.ELEM_MATCH,[e],this.fieldName);return this.and(t)}size(e){var t=new Yn(Vn.SIZE,[e],this.fieldName);return this.and(t)}}function Zn(e){return e&&e instanceof Yn&&e._internalType===Dn}var ei;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(ei||(ei={}));new Set([ei.SET,ei.REMOVE,ei.INC,ei.MUL,ei.MIN,ei.MAX,ei.RENAME,ei.BIT,ei.PUSH,ei.POP,ei.SHIFT,ei.UNSHIFT,ei.ADD_TO_SET,ei.PULL,ei.PULL_ALL]);class ti{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Pn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||On}_setFieldName(e){return new ti(this.operator,this.operands,e)}toJSON(){}}function ri(e){return e&&e instanceof ti&&e._internalType===Pn}var ni;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(ni||(ni={}));ni.ABS,ni.ADD,ni.ADDTOSET,ni.ALLELEMENTSTRUE,ni.AND,ni.ANYELEMENTTRUE,ni.ARRAYELEMAT,ni.ARRAYTOOBJECT,ni.AVG,ni.CEIL,ni.CMP,ni.CONCAT,ni.CONCATARRAYS,ni.COND,ni.CONVERT,ni.DATEFROMPARTS,ni.DATETOPARTS,ni.DATEFROMSTRING,ni.DATETOSTRING,ni.DAYOFMONTH,ni.DAYOFWEEK,ni.DAYOFYEAR,ni.DIVIDE,ni.EQ,ni.EXP,ni.FILTER,ni.FIRST,ni.FLOOR,ni.GT,ni.GTE,ni.HOUR,ni.IFNULL,ni.IN,ni.INDEXOFARRAY,ni.INDEXOFBYTES,ni.INDEXOFCP,ni.ISARRAY,ni.ISODAYOFWEEK,ni.ISOWEEK,ni.ISOWEEKYEAR,ni.LAST,ni.LET,ni.LITERAL,ni.LN,ni.LOG,ni.LOG10,ni.LT,ni.LTE,ni.LTRIM,ni.MAP,ni.MAX,ni.MERGEOBJECTS,ni.META,ni.MIN,ni.MILLISECOND,ni.MINUTE,ni.MOD,ni.MONTH,ni.MULTIPLY,ni.NEQ,ni.NOT,ni.OBJECTTOARRAY,ni.OR,ni.POW,ni.PUSH,ni.RANGE,ni.REDUCE,ni.REVERSEARRAY,ni.RTRIM,ni.SECOND,ni.SETDIFFERENCE,ni.SETEQUALS,ni.SETINTERSECTION,ni.SETISSUBSET,ni.SETUNION,ni.SIZE,ni.SLICE,ni.SPLIT,ni.SQRT,ni.STDDEVPOP,ni.STDDEVSAMP,ni.STRCASECMP,ni.STRLENBYTES,ni.STRLENCP,ni.SUBSTR,ni.SUBSTRBYTES,ni.SUBSTRCP,ni.SUBTRACT,ni.SUM,ni.SWITCH,ni.TOBOOL,ni.TODATE,ni.TODECIMAL,ni.TODOUBLE,ni.TOINT,ni.TOLONG,ni.TOOBJECTID,ni.TOSTRING,ni.TOLOWER,ni.TOUPPER,ni.TRIM,ni.TRUNC,ni.TYPE,ni.WEEK,ni.YEAR,ni.ZIP;class ii{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Bn,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=r||On}_setFieldName(e){return new ii(this.operator,this.operands,e)}}function oi(e){return e&&e instanceof ii&&e._internalType===Bn}var ai;!function(e){e.SLICE="slice"}(ai||(ai={}));new Set([ai.SLICE]);class si{constructor(e,t,r){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this.__safe_props__=void 0,this._internalType=kn,this.operator=e,this.operands=t,this.fieldName=r||On}_setFieldName(e){return new si(this.operator,this.operands,e)}}function li(e){return e&&e instanceof si&&e._internalType===kn}var ui,ci,di;function pi(e){return fi.apply(this,arguments)}function fi(){return(fi=c()((function*(e){var{env:t,collectionName:r,data:n,instanceContext:i,timing:o}=e,a=JSON.stringify(n);J({input:a,max:i.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(i.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var s={collection_name:r,data:a},l=JSON.stringify(s);o.tunnelStartTime=+new Date;var u=yield i.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:i.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||i.serviceContext.env});o.tunnelEndTime=+new Date;var c=u.data;return o.tunnelTimeNoCSNetCost=c.baseresponse.stat.qbase_cost_time,{_id:c._id_type===ci.NUMBER?c._id_number:c._id}}))).apply(this,arguments)}function hi(e){return _i.apply(this,arguments)}function _i(){return _i=c()((function*(e){var{collectionName:t,query:n,options:i,instanceContext:o,timing:a,env:s}=e,l=Bt()?e.explain:void 0,u=i&&i.multi,c=JSON.stringify({collection_name:t,query:JSON.stringify(n),multi:u,query_type:u?ui.WHERE:ui.DOC,explain:l});a.tunnelStartTime=+new Date;var d=yield o.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:o.serviceContext.name,serializedReqData:c,requireDataNotEmpty:!0,env:s||o.serviceContext.env});if(a.tunnelEndTime=+new Date,l){var{EJSON:p}=r(865);return p.deserialize(d.data)}var f=d.data;return a.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,{removed:f.deleted}})),_i.apply(this,arguments)}function gi(e){return vi.apply(this,arguments)}function vi(){return vi=c()((function*(e){var{env:t,collectionName:n,query:i,options:o={},instanceContext:a,timing:s,queryType:l}=e,u=Bt()?e.explain:void 0,c={collection_name:n,query:JSON.stringify(i),query_type:l,explain:u};o.offset&&(c.offset=o.offset),o.limit&&(c.limit=o.limit),o.order&&(c.order=o.order),o.projection&&(c.projection=JSON.stringify(o.projection));var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var p=yield a.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});if(s.tunnelEndTime=+new Date,u){var{EJSON:f}=r(865);return f.deserialize(p.data)}var h=p.data;s.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time;var _=h.data_list?JSON.parse(h.data_list):[];return{list:_=a.engine.Decoder.decode(_),offset:h.offset,limit:h.limit,total:h.total}})),vi.apply(this,arguments)}function mi(e){return yi.apply(this,arguments)}function yi(){return yi=c()((function*(e){var{env:t,collectionName:n,query:i,data:o,options:a={},instanceContext:s,timing:l,queryType:u}=e,c=Bt()?e.explain:void 0,d=JSON.stringify(o);J({input:d,max:s.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:`${(s.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var p={collection_name:n,query:JSON.stringify(i),data:d,query_type:u,explain:c};p.multi=!1!==a.multi,p.merge=!1!==a.merge,a.upsert&&(p.upsert=a.upsert);var f=JSON.stringify(p);l.tunnelStartTime=+new Date;var h=yield s.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:s.serviceContext.name,serializedReqData:f,requireDataNotEmpty:!0,env:t||s.serviceContext.env});if(l.tunnelEndTime=+new Date,c){var{EJSON:_}=r(865);return _.deserialize(h.data)}var g=h.data;return l.tunnelTimeNoCSNetCost=g.baseresponse.stat.qbase_cost_time,{updated:g.updated}})),yi.apply(this,arguments)}function bi(e){return wi.apply(this,arguments)}function wi(){return(wi=c()((function*(e){var{env:t,collectionName:r,_id:n,data:i,options:o={},instanceContext:a,timing:s}=e,l=JSON.stringify(i);J({input:l,max:a.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(a.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var u=g(n),c={collection_name:r,_id_type:u?ci.NUMBER:ci.STRING,data:l};u?c._id_number=n:c._id=n;var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var p=yield a.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||a.serviceContext.env});s.tunnelEndTime=+new Date;var f=p.data;return s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,{_id:f._id_type===ci.NUMBER?f._id_number:f._id,updated:f._id?0:1,created:f._id?1:0}}))).apply(this,arguments)}function Ai(e){return Ei.apply(this,arguments)}function Ei(){return Ei=c()((function*(e){var{env:t,collectionName:n,query:i,instanceContext:o,timing:a}=e,s=Bt()?e.explain:void 0,l={collection_name:n,query:JSON.stringify(i),query_type:ui.WHERE,explain:s},u=JSON.stringify(l);a.tunnelStartTime=+new Date;var c=yield o.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:o.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||o.serviceContext.env});if(a.tunnelEndTime=+new Date,s){var{EJSON:d}=r(865);return d.deserialize(c.data)}var p=c.data;return a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,{total:p.total}})),Ei.apply(this,arguments)}function Si(e){return Ii.apply(this,arguments)}function Ii(){return(Ii=c()((function*(e){var{env:t,collectionName:n,stages:i,instanceContext:o,timing:a}=e,s=Bt()?e.explain:void 0,l={collection_name:n,stages:i.map((e=>{for(var t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error(`empty encoded stage (${JSON.stringify(e)})`)})),explain:s},u=JSON.stringify(l);a.tunnelStartTime=+new Date;var c=yield o.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:o.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||o.serviceContext.env});if(a.tunnelEndTime=+new Date,s){var{EJSON:d}=r(865);return d.deserialize(c.data)}var p=c.data;a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time;var{EJSON:f}=r(865);return{list:JSON.parse(p.list).map((e=>f.parse(e)))}}))).apply(this,arguments)}function Ti(){return(Ti=c()((function*(e,t){var r=(yield e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})).data;return{envId:r.env_id,secretVersion:r.secret_version,signStr:r.sign_str,wsUrl:r.ws_url}}))).apply(this,arguments)}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(ui||(ui={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(ci||(ci={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(di||(di={}));var Ci=e=>{class t extends Ni{constructor(e,t){super(t),this.collection=void 0,this._internalType=Nn,this.collection=e}pushStage(e,r){return new t(this.collection,[...this._stages,new Oi(e,r)])}end(t={}){var r="collection.aggregate",n={apiStartTime:+new Date},i=()=>Si({env:e.database.config.env,collectionName:this.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(this._stages),instanceContext:e,timing:n,explain:t.explain});var o=z(t),a=new Promise(function(){var e=c()((function*(e,o){try{var a=yield i();if(t.explain&&Bt())return e(a);e({list:a.list,errMsg:nr(r)})}catch(e){o(O(e,r))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}}return t};class Oi{constructor(e,t){this.stage=void 0,this.val=void 0,this._internalType=Rn,this.stage=e,this.val=t}}class Ni{constructor(e){this._stages=void 0,this._internalType=xn,this.__safe_props__=void 0,this._stages=e}pushStage(e,t){return new Ni([...this._stages,new Oi(e,t)])}addFields(e){return this.pushStage("addFields",e)}bucket(e){return this.pushStage("bucket",e)}bucketAuto(e){return this.pushStage("bucketAuto",e)}collStats(e){return this.pushStage("collStats",e)}count(e){return this.pushStage("count",e)}facet(e){return this.pushStage("facet",e)}geoNear(e){return this.pushStage("geoNear",e)}graphLookup(e){return this.pushStage("graphLookup",e)}group(e){return this.pushStage("group",e)}indexStats(){return this.pushStage("indexStats",{})}limit(e){return this.pushStage("limit",e)}lookup(e){return this.pushStage("lookup",e)}match(e){return this.pushStage("match",e)}out(e){return this.pushStage("out",e)}project(e){return this.pushStage("project",e)}redact(e){return this.pushStage("redact",e)}replaceRoot(e){return this.pushStage("replaceRoot",e)}sample(e){return this.pushStage("sample",e)}skip(e){return this.pushStage("skip",e)}sort(e){return this.pushStage("sort",e)}sortByCount(e){return this.pushStage("sortByCount",e)}unwind(e){return this.pushStage("unwind",e)}end(){}}class xi extends Ni{constructor(e,t=!1){super(e),this._sealed=void 0,this._sealed=t}pushStage(e,t){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new xi([...this._stages,new Oi(e,t)])}done(){return new xi(this._stages,!0)}}var Ri=e=>e&&e._internalType===xn,Pi=e=>e&&e._internalType===Rn,Di=new Set(["each","position","slice","sort"]),Li={eq:e=>new Yn(Vn.EQ,[e]),neq:e=>new Yn(Vn.NEQ,[e]),lt:e=>new Yn(Vn.LT,[e]),lte:e=>new Yn(Vn.LTE,[e]),gt:e=>new Yn(Vn.GT,[e]),gte:e=>new Yn(Vn.GTE,[e]),in:e=>new Yn(Vn.IN,e),nin:e=>new Yn(Vn.NIN,e),geoNear:e=>new Yn(Vn.GEO_NEAR,[e]),geoWithin:e=>new Yn(Vn.GEO_WITHIN,[e]),geoIntersects:e=>new Yn(Vn.GEO_INTERSECTS,[e]),and(...e){var t=m(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Cn.AND,t)},or(...e){var t=m(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Cn.OR,t)},nor(...e){var t=m(arguments[0])?arguments[0]:Array.from(arguments);return new zn(Cn.NOR,t)},not:e=>new zn(Cn.NOT,[e]),exists:e=>new Yn(Vn.EXISTS,[e]),mod:(e,t)=>new Yn(Vn.MOD,[e,t]),all:e=>new Yn(Vn.ALL,e),elemMatch:e=>new Yn(Vn.ELEM_MATCH,[e]),size:e=>new Yn(Vn.SIZE,[e]),expr:e=>new Yn(Vn.EXPR,[e]),set:e=>new ti(ei.SET,[e]),remove:()=>new ti(ei.REMOVE,[]),inc:e=>new ti(ei.INC,[e]),mul:e=>new ti(ei.MUL,[e]),min:e=>new ti(ei.MIN,[e]),max:e=>new ti(ei.MAX,[e]),rename:e=>new ti(ei.RENAME,[e]),bit:e=>new ti(ei.BIT,[e]),push(e){var t={};if(m(e))t.each=e;else if(h(e)&&m(e.each)){var r=Object.keys(e);if(1===r.length)t=e;else{var n=!1;for(var i of r)if(!Di.has(i)){n=!0;break}t=n?[e]:e}}else t.each=[e];return new ti(ei.PUSH,[t])},pop:()=>new ti(ei.POP,[]),shift:()=>new ti(ei.SHIFT,[]),unshift(...e){var t=m(arguments[0])?arguments[0]:Array.from(arguments);return new ti(ei.UNSHIFT,t)},addToSet:e=>new ti(ei.ADD_TO_SET,[e]),pull:e=>new ti(ei.PULL,[e]),pullAll:e=>new ti(ei.PULL_ALL,[e]),project:{slice:e=>new si(ai.SLICE,[e])},aggregate:{pipeline:()=>new xi([]),abs:e=>new ii(ni.ABS,[e]),add:e=>new ii(ni.ADD,[e]),addToSet:e=>new ii(ni.ADDTOSET,[e]),allElementsTrue:e=>new ii(ni.ALLELEMENTSTRUE,[e]),and:e=>new ii(ni.AND,[e]),anyElementTrue:e=>new ii(ni.ANYELEMENTTRUE,[e]),arrayElemAt:e=>new ii(ni.ARRAYELEMAT,[e]),arrayToObject:e=>new ii(ni.ARRAYTOOBJECT,[e]),avg:e=>new ii(ni.AVG,[e]),ceil:e=>new ii(ni.CEIL,[e]),cmp:e=>new ii(ni.CMP,[e]),concat:e=>new ii(ni.CONCAT,[e]),concatArrays:e=>new ii(ni.CONCATARRAYS,[e]),cond:e=>new ii(ni.COND,[e]),convert:e=>new ii(ni.CONVERT,[e]),dateFromParts:e=>new ii(ni.DATEFROMPARTS,[e]),dateToParts:e=>new ii(ni.DATETOPARTS,[e]),dateFromString:e=>new ii(ni.DATEFROMSTRING,[e]),dateToString:e=>new ii(ni.DATETOSTRING,[e]),dayOfMonth:e=>new ii(ni.DAYOFMONTH,[e]),dayOfWeek:e=>new ii(ni.DAYOFWEEK,[e]),dayOfYear:e=>new ii(ni.DAYOFYEAR,[e]),divide:e=>new ii(ni.DIVIDE,[e]),eq:e=>new ii(ni.EQ,[e]),exp:e=>new ii(ni.EXP,[e]),filter:e=>new ii(ni.FILTER,[e]),first:e=>new ii(ni.FIRST,[e]),floor:e=>new ii(ni.FLOOR,[e]),gt:e=>new ii(ni.GT,[e]),gte:e=>new ii(ni.GTE,[e]),hour:e=>new ii(ni.HOUR,[e]),ifNull:e=>new ii(ni.IFNULL,[e]),in:e=>new ii(ni.IN,[e]),indexOfArray:e=>new ii(ni.INDEXOFARRAY,[e]),indexOfBytes:e=>new ii(ni.INDEXOFBYTES,[e]),indexOfCP:e=>new ii(ni.INDEXOFCP,[e]),isArray:e=>new ii(ni.ISARRAY,[e]),isoDayOfWeek:e=>new ii(ni.ISODAYOFWEEK,[e]),isoWeek:e=>new ii(ni.ISOWEEK,[e]),isoWeekYear:e=>new ii(ni.ISOWEEKYEAR,[e]),last:e=>new ii(ni.LAST,[e]),let:e=>new ii(ni.LET,[e]),literal:e=>new ii(ni.LITERAL,[e]),ln:e=>new ii(ni.LN,[e]),log:e=>new ii(ni.LOG,[e]),log10:e=>new ii(ni.LOG10,[e]),lt:e=>new ii(ni.LT,[e]),lte:e=>new ii(ni.LTE,[e]),ltrim:e=>new ii(ni.LTRIM,[e]),map:e=>new ii(ni.MAP,[e]),max:e=>new ii(ni.MAX,[e]),mergeObjects:e=>new ii(ni.MERGEOBJECTS,[e]),meta:e=>new ii(ni.META,[e]),min:e=>new ii(ni.MIN,[e]),millisecond:e=>new ii(ni.MILLISECOND,[e]),minute:e=>new ii(ni.MINUTE,[e]),mod:e=>new ii(ni.MOD,[e]),month:e=>new ii(ni.MONTH,[e]),multiply:e=>new ii(ni.MULTIPLY,[e]),neq:e=>new ii(ni.NEQ,[e]),not:e=>new ii(ni.NOT,[e]),objectToArray:e=>new ii(ni.OBJECTTOARRAY,[e]),or:e=>new ii(ni.OR,[e]),pow:e=>new ii(ni.POW,[e]),push:e=>new ii(ni.PUSH,[e]),range:e=>new ii(ni.RANGE,[e]),reduce:e=>new ii(ni.REDUCE,[e]),reverseArray:e=>new ii(ni.REVERSEARRAY,[e]),rtrim:e=>new ii(ni.RTRIM,[e]),second:e=>new ii(ni.SECOND,[e]),setDifference:e=>new ii(ni.SETDIFFERENCE,[e]),setEquals:e=>new ii(ni.SETEQUALS,[e]),setIntersection:e=>new ii(ni.SETINTERSECTION,[e]),setIsSubset:e=>new ii(ni.SETISSUBSET,[e]),setUnion:e=>new ii(ni.SETUNION,[e]),size:e=>new ii(ni.SIZE,[e]),slice:e=>new ii(ni.SLICE,[e]),split:e=>new ii(ni.SPLIT,[e]),sqrt:e=>new ii(ni.SQRT,[e]),stdDevPop:e=>new ii(ni.STDDEVPOP,[e]),stdDevSamp:e=>new ii(ni.STDDEVSAMP,[e]),strcasecmp:e=>new ii(ni.STRCASECMP,[e]),strLenBytes:e=>new ii(ni.STRLENBYTES,[e]),strLenCP:e=>new ii(ni.STRLENCP,[e]),substr:e=>new ii(ni.SUBSTR,[e]),substrBytes:e=>new ii(ni.SUBSTRBYTES,[e]),substrCP:e=>new ii(ni.SUBSTRCP,[e]),subtract:e=>new ii(ni.SUBTRACT,[e]),sum:e=>new ii(ni.SUM,[e]),switch:e=>new ii(ni.SWITCH,[e]),toBool:e=>new ii(ni.TOBOOL,[e]),toDate:e=>new ii(ni.TODATE,[e]),toDecimal:e=>new ii(ni.TODECIMAL,[e]),toDouble:e=>new ii(ni.TODOUBLE,[e]),toInt:e=>new ii(ni.TOINT,[e]),toLong:e=>new ii(ni.TOLONG,[e]),toObjectId:e=>new ii(ni.TOOBJECTID,[e]),toString:e=>new ii(ni.TOSTRING,[e]),toLower:e=>new ii(ni.TOLOWER,[e]),toUpper:e=>new ii(ni.TOUPPER,[e]),trim:e=>new ii(ni.TRIM,[e]),trunc:e=>new ii(ni.TRUNC,[e]),type:e=>new ii(ni.TYPE,[e]),week:e=>new ii(ni.WEEK,[e]),year:e=>new ii(ni.YEAR,[e]),zip:e=>new ii(ni.ZIP,[e])}};function Bi(e){return new ki(e)}class ki{constructor(e={offset:0}){this.options=void 0,K(e,"object","serverDate.options"),this.options=e}get _internalType(){return qn}toJSON(){return{$date:this.options}}}function Mi(e,t){return io(e)?Yi(e):new Fi(e,t)}class Fi{constructor(e,t){this.longitude=void 0,this.latitude=void 0,this._internalType=Mn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});var r=e,n=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:()=>r,set(e){if(K(e,"number","longitude"),e>180||e<-180)throw new T({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:()=>n,set(e){if(K(e,"number","latitude"),e>90||e<-90)throw new T({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=r,this.latitude=n}toJSON(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e}toString(){return JSON.stringify(this.toJSON())}}function ji(e){return oo(e)?Zi(e):new Ui(e)}class Ui{constructor(e){this.points=void 0,this._internalType=Un,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"MultiPoint",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function $i(e){return ao(e)?eo(e):new Wi(e)}class Wi{constructor(e){this.points=void 0,this._internalType=Fn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"LineString",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function qi(e){return so(e)?to(e):new Hi(e)}class Hi{constructor(e){this.lines=void 0,this._internalType=$n,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"MultiLineString",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function Gi(e){return lo(e)?ro(e):new Qi(e)}class Qi{constructor(e){this.lines=void 0,this._internalType=jn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"Polygon",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function zi(e){return uo(e)?no(e):new Ki(e)}class Ki{constructor(e){this.polygons=void 0,this._internalType=Wn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}toJSON(){return{type:"MultiPolygon",coordinates:this.polygons.map((e=>e.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))))}}toString(){return JSON.stringify(this.toJSON())}}var Vi,Ji,Xi=undefined;function Yi(e){return Mi(e.coordinates[0],e.coordinates[1])}function Zi(e){return ji(e.coordinates.map((e=>Mi(e[0],e[1]))))}function eo(e){return $i(e.coordinates.map((e=>Mi(e[0],e[1]))))}function to(e){return qi(e.coordinates.map((e=>$i(e.map((e=>Mi(e[0],e[1])))))))}function ro(e){return Gi(e.coordinates.map((e=>$i(e.map((e=>Mi(e[0],e[1])))))))}function no(e){return zi(e.coordinates.map((e=>Gi(e.map((e=>$i(e.map((e=>Mi(e[0],e[1]))))))))))}function io(e){return h(e)&&co(e.coordinates)}function oo(e){return h(e)&&po(e.coordinates)}function ao(e){return h(e)&&fo(e.coordinates)}function so(e){return h(e)&&ho(e.coordinates)}function lo(e){return h(e)&&_o(e.coordinates)}function uo(e){return h(e)&&(t=e.coordinates,m(t)&&t.every(_o));var t}function co(e){return m(e)&&g(e[0])&&g(e[1])}function po(e){return m(e)&&e.every(co)}function fo(e){return po(e)}function ho(e){return m(e)&&e.every(fo)}function _o(e){return ho(e)}function go(e){return vo(e,[e])}function vo(e,t){if(!S(e)){if(A(e))return{$date:+e};if(E(e))return{$regex:e.source,$options:e.flags};if(m(e))return e.map((e=>{if(t.indexOf(e)>-1)throw new T({errCode:I.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return vo(e,[...t,e])}));if(h(e)){var r=s()({},e);for(var n in r){if(t.indexOf(r[n])>-1)throw new T({errCode:I.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});r[n]=vo(r[n],[...t,r[n]])}return r}return e}switch(e._internalType){case Mn:case Un:case Fn:case $n:case jn:case Wn:return e.toJSON();case qn:return{$date:e.options};case Hn:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function mo(e,t,r,n){var i=s()({},e);for(var o in e)if(!/^\$/.test(o)){var a=e[o];if(a&&h(a)&&!t(a)){if(n.indexOf(a)>-1)throw new T({errCode:I.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});var l=mo(a,t,[...r,o],[...n,a]);i[o]=l;var u=!1;for(var c in l)/^\$/.test(c)?u=!0:(i[`${o}.${c}`]=l[c],delete i[o][c]);u||delete i[o]}}return i}function yo(e){return mo(e,Ao,[],[e])}function bo(e){return mo(e,(e=>!1),[],[e])}function wo(e,t,r){for(var n in t[r]||delete e[r],t)e[n]?m(e[n])?e[n].push(t[n]):h(e[n])?h(t[n])?Object.assign(e[n],t[n]):(console.warn(`unmergable condition, query is object but condition is ${f(t)}, can only overwrite`,t,r),e[n]=t[n]):(console.warn(`to-merge query is of type ${f(e)}, can only overwrite`,e,t,r),e[n]=t[n]):e[n]=t[n]}function Ao(e){return S(e)||A(e)||E(e)}function Eo(e){return go(e)}function So(e){return function(e){var t=s()({},e);for(var r in t)switch(r){case"$date":switch(f(t[r])){case"number":return new Date(t[r]);case"object":return Bi(t[r])}break;case"type":switch(t.coordinates,t.type){case"Point":if(io(t))return Yi(t);break;case"MultiPoint":if(oo(t))return Zi(t);break;case"LineString":if(ao(t))return eo(t);break;case"MultiLineString":if(so(t))return to(t);break;case"Polygon":if(lo(t))return ro(t);break;case"MultiPolygon":if(uo(t))return no(t)}}return e}(e)}function Io(e,t){return{limit:e._query.limit,offset:e._query.offset,order:To(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function To(e){return e.map((e=>({field:e.fieldPath,direction:e.order===Ua.DESC?di.DESC:di.ASC})))}function Co(e){var t=bo(e);for(var r in t)!0===t[r]||1===t[r]?t[r]=1:!1===t[r]||0===t[r]?t[r]=0:delete t[r];return t}!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(Vi||(Vi={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}(Ji||(Ji={}));var Oo={[Vi.DISCONNECTED]:{transitions:[{accept:Ji.CONNECTION_START,to:Vi.CONNECTING}]},[Vi.CONNECTING]:{transitions:[{accept:Ji.CONNECTION_SUCCESS,to:Vi.CONNECTED},{accept:Ji.CONNECTION_FAIL,to:Vi.DISCONNECTED},{accept:Ji.DISCONNECT,to:Vi.DISCONNECTED}]},[Vi.CONNECTED]:{transitions:[{accept:Ji.DISCONNECT,to:Vi.DISCONNECTED},{accept:Ji.CONNECTION_FAIL,to:Vi.DISCONNECTED}]}};var No,xo,Ro,Po,Do=(No=e=>e.replace(/\[(\d+)\]/g,".[$1]").split(".").map((e=>/^\[(\d+)\]$/.test(e)?parseInt(e.substring(1,e.length-1)):e)),xo=new Map,function(e){return xo.has(e)||xo.set(e,No(e)),xo.get(e)});function Lo(e,t,r){if(e){if(!Object.prototype.hasOwnProperty.call(e,t)){for(var n=Do(t),i=e,o=0;o<n.length-1;++o){var a=n[o];i[a]||(i[a]="string"==typeof n[o+1]?{}:[]),i=i[a]}return i[n[n.length-1]]=r,e}e[t]=r}}function Bo(e,t){if(e){if(!Object.prototype.hasOwnProperty.call(e,t)){for(var r=Do(t),n=e,i=0;i<r.length-1;++i){var o=r[i];if(!n[o])return;n=n[o]}return delete n[r[r.length-1]],e}delete e[t]}}!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(Ro||(Ro={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(Po||(Po={}));var ko={accept:Po.CLOSE,to:Ro.CLOSED},Mo={accept:Po.WS_DISCONNECTED,to:Ro.CLOSED},Fo={accept:Po.WS_DISCONNECTED,to:Ro.PAUSED},jo={[Ro.UNINIT]:{transitions:[{accept:Po.LOGIN_START,to:Ro.INIT_LOGGING_IN},Mo,ko]},[Ro.CLOSED]:{transitions:[ko]},[Ro.INIT_LOGGING_IN]:{transitions:[{accept:Po.LOGIN_FAIL,to:Ro.INIT_LOGIN_FAIL},{accept:Po.LOGIN_SUCCESS,to:Ro.INIT_LOGGED_IN},Mo,ko]},[Ro.INIT_LOGIN_FAIL]:{transitions:[{accept:Po.LOGIN_START,to:Ro.INIT_LOGGING_IN},Mo,ko]},[Ro.INIT_LOGGED_IN]:{transitions:[{accept:Po.INIT_WATCH_START,to:Ro.INIT_WATCH_PENDING},Mo,ko]},[Ro.INIT_WATCH_PENDING]:{transitions:[{accept:Po.INIT_WATCH_FAIL,to:Ro.INIT_WATCH_FAIL},{accept:Po.INIT_WATCH_SUCCESS,to:Ro.INIT_WATCH_SUCCESS},Mo,ko]},[Ro.INIT_WATCH_FAIL]:{transitions:[{accept:Po.LOGIN_START,to:Ro.INIT_LOGGING_IN},Mo,ko]},[Ro.INIT_WATCH_SUCCESS]:{transitions:[{accept:Po.WS_DISCONNECTED,to:Ro.PAUSED},{accept:Po.NEED_REBUILD_WATCH,to:Ro.ABNORMAL_WATCH_STATUS},Fo,ko]},[Ro.PAUSED]:{transitions:[{accept:Po.LOGIN_START,to:Ro.REBUILD_LOGGING_IN},Fo,ko]},[Ro.ABNORMAL_WATCH_STATUS]:{transitions:[{accept:Po.LOGIN_START,to:Ro.REBUILD_LOGGING_IN},Fo,ko]},[Ro.REBUILD_LOGGING_IN]:{transitions:[{accept:Po.LOGIN_FAIL,to:Ro.REBUILD_LOGIN_FAIL},{accept:Po.LOGIN_SUCCESS,to:Ro.REBUILD_LOGGED_IN},Fo,ko]},[Ro.REBUILD_LOGIN_FAIL]:{transitions:[{accept:Po.LOGIN_START,to:Ro.REBUILD_LOGGING_IN},Fo,ko]},[Ro.REBUILD_LOGGED_IN]:{transitions:[{accept:Po.REBUILD_WATCH_START,to:Ro.REBUILD_WATCH_PENDING},Fo,ko]},[Ro.REBUILD_WATCH_PENDING]:{transitions:[{accept:Po.REBUILD_WATCH_FAIL,to:Ro.REBUILD_WATCH_FAIL},{accept:Po.REBUILD_WATCH_SUCCESS,to:Ro.REBUILD_WATCH_SUCCESS},Fo,ko]},[Ro.REBUILD_WATCH_FAIL]:{transitions:[{accept:Po.LOGIN_START,to:Ro.REBUILD_LOGGING_IN},Fo,ko]},[Ro.REBUILD_WATCH_SUCCESS]:{transitions:[{accept:Po.NEED_REBUILD_WATCH,to:Ro.ABNORMAL_WATCH_STATUS},Fo,ko]}};class Uo{constructor(e){for(var t in this.currentState=void 0,this.states=void 0,this.listeners=new Set,this.history=void 0,this.currentState=e.initialState,this.states=new Map,e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((({accept:e,to:t})=>[e,t])))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}transition(e,t){if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new $o(`current state (${this.currentState}) != expected from state (${t instanceof Set?JSON.stringify([...t]):t})`,"unexpectedFromState");var r="string"==typeof e?{type:e}:e,n=this.states.get(this.currentState),i=n.transitions.get(r.type);if(!i)throw new $o(`current state (${this.currentState}) does not accept "${r.type}"`,"unexpectedInput");this.currentState=i,this.history.options.enable&&(this.history.transitions.push({event:r.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((e=>{try{e({event:r,from:n.name,to:this.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))}canAccept(e){return this.states.get(this.currentState).transitions.has(e)}subscribe(e){this.listeners.add(e)}unsubscribe(e){this.listeners.delete(e)}getHistoryRepresentation(e){return this.history.options.enable?`states: ${(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((({state:e,event:t})=>`${t?`-(${t})->`:""}${e}`)).join("")}`:""}}class $o extends Error{constructor(e,t,r){super(e),this.type="transition",this.subtype=void 0,this.payload=void 0,this.generic=!0,this.subtype=t,this.payload=r}}function Wo(e=""){return`${e?`${e}_`:""}${+new Date}_${Math.random()}`}var qo=1128,Ho=1,Go=2,Qo=3,zo=4,Ko=5,Vo=6,Jo=7,Xo=8,Yo=9,Zo=10,ea=11,ta=12,ra=13,na=14,ia=15,oa=16,aa=17,sa=18,la=30,ua=31,ca=32,da=33,pa=34,fa=35,ha=36,_a=37,ga=38,va=39,ma=40,ya=50,ba=51,wa=52,Aa=53,Ea=54,Sa=55,Ia=56,Ta=57,Ca=58,Oa=59,Na=60;class xa{constructor(e){this.close=void 0,this.onChange=void 0,this.onError=void 0,this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:()=>e.virtualClient})}}class Ra{constructor(e){this.id=void 0,this.docChanges=void 0,this.docs=void 0,this.type=void 0,this.EJSON=void 0,this.requestId=void 0,this.watchId=void 0;var{id:t,docChanges:r,docs:n,type:i,EJSON:o,requestId:a,watchId:s}=e;Object.defineProperties(this,{id:{value:t,writable:!1,enumerable:!0},docChanges:{value:r,writable:!1,enumerable:!0},docs:{value:n,writable:!1,enumerable:!0},type:{value:i,writable:!1,enumerable:!0}}),this.requestId=a,this.watchId=s}}class Pa extends Error{constructor(e){super(`Watch Error ${JSON.stringify(e.msgData)} (requestid: ${e.requestId})`),this.isRealtimeErrorMessageError=!0,this.payload=void 0,this.payload=e}}var Da=e=>e&&e.isRealtimeErrorMessageError,La=new Set([Ro.REBUILD_LOGGING_IN,Ro.INIT_LOGGING_IN]),Ba=e=>{0};class ka{constructor(e){var t=this;this.watchId=void 0,this._parentFSM=void 0,this._fsm=void 0,this.envId=void 0,this.collectionName=void 0,this.query=void 0,this.limit=void 0,this.orderBy=void 0,this.queryType=void 0,this.send=void 0,this.login=void 0,this.isWSConnected=void 0,this.getWaitExpectedTimeoutLength=void 0,this.getEJSON=void 0,this.getServiceContext=void 0,this.onWatchStart=void 0,this.onWatchClose=void 0,this.timing=void 0,this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this.debug=void 0,this.wsclient=void 0,this.listener=void 0,this._availableRetries=void 0,this._ackTimeoutId=void 0,this._loginInvalidated=!1,this._errors=[],this._parentFSMListener=void 0,this._FSMListener=void 0,this._wsDisconnectionTS=void 0,this.sessionInfo=void 0,this._waitExpectedTimeoutId=void 0,this._snapshotHistory=[],this._login=function(){var e=c()((function*(e){t._fsm.transition(Po.LOGIN_START);try{var r=yield t.login(t.envId,e||t._loginInvalidated,t.timing);t.envId||(t.envId=r.envId),t._fsm.transition(Po.LOGIN_SUCCESS,La),t._loginInvalidated=!1}catch(e){t._errors.push(e),t._loginInvalidated=!0;try{t._fsm.transition(Po.LOGIN_FAIL,La)}catch(e){console.warn("[realtime]",e)}}}));return function(t){return e.apply(this,arguments)}}(),this.initWatch=c()((function*(){var e=Date.now(),r=Wo();try{t._fsm.transition(Po.INIT_WATCH_START,Ro.INIT_LOGGED_IN);var n=t.envId,i={watchId:t.watchId,requestId:r,msgType:"INIT_WATCH",msgData:{envId:n,collName:t.collectionName,query:t.query,limit:t.limit,orderBy:t.orderBy,queryType:t.queryType}},o=yield t.send({msg:i,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus();var{events:a,currEvent:s}=o.msgData;if(t.sessionInfo={queryID:o.msgData.queryID,currentEventId:s-1,currentDocs:[],currentEventTS:Date.now()},a.length>0){for(var l of a)l.ID=s;t.handleServerEvents(o)}else{t.sessionInfo.currentEventId=s;var u=new Ra({id:s,docChanges:[],docs:[],type:"init",EJSON:t.getEJSON(),requestId:o.requestId,watchId:t.watchId});U.surroundThirdByTryCatch((()=>t.listener.onChange(u)))(),t.scheduleSendACK(),t.debug&&t._snapshotHistory.push(u)}t.onWatchStart(t,t.sessionInfo.queryID),t._availableRetries.INIT_WATCH=2,t._wsDisconnectionTS=void 0,Kt(qo,Ko,!0),zt({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Po.INIT_WATCH_SUCCESS)}catch(n){zt({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(n,{operationName:"INIT_WATCH",requestId:r})}})),this.rebuildWatch=c()((function*(){var e=Date.now(),r=Wo();try{t._fsm.transition(Po.REBUILD_WATCH_START,Ro.REBUILD_LOGGED_IN);var n=t.envId;if(!t.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(t._wsDisconnectionTS&&Date.now()-t._wsDisconnectionTS>.9*t.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new R("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});var i={watchId:t.watchId,requestId:r,msgType:"REBUILD_WATCH",msgData:{envId:n,collName:t.collectionName,queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}},o=yield t.send({msg:i,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus(),yield t.handleServerEvents(o),t._availableRetries.REBUILD_WATCH=2,t._wsDisconnectionTS=void 0,Kt(qo,Jo,!0),zt({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(Po.REBUILD_WATCH_SUCCESS)}catch(n){zt({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(n,{operationName:"REBUILD_WATCH",requestId:r})}})),this.handleWatchEstablishmentError=function(){var e=c()((function*(e,r){var n="INIT_WATCH"===r.operationName,i=i=>{var o=`${i||e} (${n?"initWatch":"rebuildWatch"} requestId ${r.requestId})`;if(t.closeWithError(new T({errCode:n?I.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:I.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:o})),Kt(qo,n?Vo:Xo,!0),!Da(e)){if(P(e)){switch(e.payload.subtype){case"totalConnectionTimeout":Kt(qo,n?Ea:Sa,!0);break;case"queryEventCacheClientTimeout":n||Kt(qo,Ia,!0)}return}return B(e)?void Kt(qo,n?Ta:Ca,!0):void Kt(qo,n?Oa:Na,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":Kt(qo,n?ya:ba,!0);break;default:Kt(qo,n?wa:Aa,!0)}};t._errors.push(e),t.handleCommonError(e,{onSignError:()=>{t._loginInvalidated=!0,t._fsm.transition(t.initialized?Po.REBUILD_WATCH_FAIL:Po.INIT_WATCH_FAIL)},onTimeoutError:e=>{e.payload&&!e.payload.retryable?i(e):t._fsm.transition(t.initialized?Po.REBUILD_WATCH_FAIL:Po.INIT_WATCH_FAIL)},onNotRetryableError:i,onCancelledError:e=>{t._fsm.transition(t.initialized?Po.REBUILD_WATCH_FAIL:Po.INIT_WATCH_FAIL)},onUnknownError:()=>{t._fsm.transition(t.initialized?Po.REBUILD_WATCH_FAIL:Po.INIT_WATCH_FAIL)}})}));return function(t,r){return e.apply(this,arguments)}}(),this.closeWatch=c()((function*(){t.closeWatchInvoked=!0;var e=t.sessionInfo?t.sessionInfo.queryID:"";if(t._fsm.currentState!==Ro.CLOSED)try{t._fsm.transition(Po.CLOSE),yield t.sendCloseWatch()}catch(e){console.warn(`[realtime] non-fatal error while closing watch: ${e}`)}finally{t.sessionInfo=void 0,t.onWatchClose(t,e),t._cleanup()}})),this.sendCloseWatch=c()((function*(){var e={watchId:t.watchId,requestId:Wo(),msgType:"CLOSE_WATCH",msgData:null};yield t.send({msg:e})})),this.scheduleSendACK=()=>{this.clearACKSchedule(),this._ackTimeoutId=setTimeout((()=>{this._waitExpectedTimeoutId?this.scheduleSendACK():this.sendACK()}),1e4)},this.clearACKSchedule=()=>{this._ackTimeoutId&&clearTimeout(this._ackTimeoutId)},this.sendACK=c()((function*(){try{if(t._fsm.currentState!==Ro.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Ro.REBUILD_WATCH_SUCCESS)return void t.scheduleSendACK();if(!t.sessionInfo)return void console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)");var e={watchId:t.watchId,requestId:Wo(),msgType:"CHECK_LAST",msgData:{queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}};yield t.send({msg:e}),t.scheduleSendACK()}catch(e){if(Da(e)){var r=e.payload;switch(r.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return t._loginInvalidated=!0,void(t._fsm.currentState!==Ro.INIT_WATCH_SUCCESS&&t._fsm.currentState!==Ro.REBUILD_WATCH_SUCCESS||t._fsm.transition(Po.NEED_REBUILD_WATCH));case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:r.msgData.code}))}}t._availableRetries.CHECK_LAST&&t._availableRetries.CHECK_LAST>0?(t._availableRetries.CHECK_LAST--,t.scheduleSendACK()):t.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e}))}})),this.handleCommonError=(e,t)=>{if(Da(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);default:return void t.onNotRetryableError(e)}}else{if(P(e))return void t.onTimeoutError(e);if(B(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId=`watchid_${+new Date}_${Math.random()}`,this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new Uo({initialState:Ro.UNINIT,states:jo,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new xa({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===Vi.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}get initialized(){return Boolean(this.sessionInfo)}_cleanup(){this._parentFSM.unsubscribe(this._parentFSMListener)}_subscribeParentFSMEvents(){this._parentFSMListener=e=>{var{event:t,from:r,to:n}=e;if(this._fsm.currentState!==Ro.CLOSED)if(t.type===Ji.DISCONNECT||t.type===Ji.CONNECTION_FAIL)switch(this._fsm.currentState){case Ro.UNINIT:case Ro.INIT_LOGGING_IN:case Ro.INIT_LOGIN_FAIL:case Ro.INIT_LOGGED_IN:case Ro.INIT_WATCH_PENDING:case Ro.INIT_WATCH_FAIL:this.closeWithError(t.error||new Error("websocket connection fail"),!1);break;default:t.type===Ji.DISCONNECT?(this._wsDisconnectionTS||(this._wsDisconnectionTS=Date.now()),this._fsm.transition(Po.WS_DISCONNECTED)):this.closeWithError(t.error||new Error("websocket connection fail"),!1)}else if(t.type===Ji.CONNECTION_SUCCESS)switch(this._fsm.currentState){case Ro.UNINIT:case Ro.PAUSED:this._login();break;case Ro.CLOSED:break;default:console.warn(`[realtime] current state should not be ${this._fsm.currentState} (parent event ${t})`)}},this._parentFSM.subscribe(this._parentFSMListener)}_subscribeFSMEvents(){this._FSMListener=e=>{var{event:t,from:r,to:n}=e;switch(t.type){case Po.WS_CONNECTED:this._login().catch(Ba);break;case Po.LOGIN_SUCCESS:r===Ro.INIT_LOGGING_IN?this.initWatch().catch(Ba):r===Ro.REBUILD_LOGGING_IN?this.rebuildWatch().catch(Ba):this.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${r}`}));break;case Po.LOGIN_FAIL:r===Ro.INIT_LOGGING_IN?this.useRetryTicket("INIT_WATCH")?this._login().catch(Ba):this.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):r===Ro.REBUILD_LOGGING_IN?this.useRetryTicket("REBUILD_WATCH")?this._login().catch(Ba):this.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):this.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${r}`}));break;case Po.INIT_WATCH_SUCCESS:this._availableRetries.INIT_WATCH=2,this._errors=[];break;case Po.INIT_WATCH_FAIL:this.useRetryTicket("INIT_WATCH")?this._login().catch(Ba):this.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Po.REBUILD_WATCH_SUCCESS:this._availableRetries.REBUILD_WATCH=2,this._errors=[];break;case Po.REBUILD_WATCH_FAIL:this.useRetryTicket("REBUILD_WATCH")?this._login().catch(Ba):this.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case Po.NEED_REBUILD_WATCH:this._login().catch(Ba)}},this._fsm.subscribe(this._FSMListener)}useRetryTicket(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)}assertAsyncTaskStatus(){if(this.closeWatchInvoked)throw new D("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case Ro.PAUSED:throw new D("pause",{subtype:"pause"});case Ro.CLOSED:throw new D("close",{subtype:"close"})}}handleServerEvents(e){var t=this;return c()((function*(){try{t.scheduleSendACK(),yield t._handleServerEvents(e),t._postHandleServerEventsValidityCheck(e)}catch(e){throw Kt(qo,da,!0),e}}))()}_handleServerEvents(e){var t=this;return c()((function*(){var{requestId:r}=e,{events:n}=e.msgData;if(n.length&&t.sessionInfo){var i,o=t.sessionInfo;try{i=n.map(Ma)}catch(e){return void t.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e}))}for(var a=[...o.currentDocs],s=!1,l=function(n,l){var u=i[n];if(o.currentEventId>=u.id)return!i[n-1]||u.id>i[n-1].id?Kt(qo,pa,!0):(console.error(`[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ${r})`),Kt(qo,fa,!0)),"continue";if(o.currentEventId===u.id-1){switch(u.dataType){case"update":if(!u.doc)switch(u.queueType){case"update":case"dequeue":var c=a.find((e=>e._id===u.docId));if(c){var d=JSON.parse(JSON.stringify(c));if(u.updatedFields)for(var p in u.updatedFields)Lo(d,p,u.updatedFields[p]);if(u.removedFields)for(var f of u.removedFields)Bo(d,f);u.doc=d}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),Kt(qo,ha,!0);break;case"enqueue":var h=new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId ${e.requestId})`});throw t.closeWithError(h),h}break;case"limit":if(!u.doc&&"dequeue"===u.queueType){var _=a.find((e=>e._id===u.docId));_?u.doc=_:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.")}break;case"replace":if(!u.doc){var g=new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="replace" (requestId ${e.requestId})`});throw t.closeWithError(g),g}break;case"remove":var v=a.find((e=>e._id===u.docId));v?u.doc=v:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),Kt(qo,_a,!0))}switch(u.queueType){case"init":s?a.push(u.doc):(s=!0,a=[u.doc]);break;case"enqueue":a.push(u.doc);break;case"dequeue":var m=a.findIndex((e=>e._id===u.docId));m>-1?a.splice(m,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),Kt(qo,ga,!0));break;case"update":var y=a.findIndex((e=>e._id===u.docId));y>-1?a[y]=u.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),Kt(qo,va,!0))}if(n===l-1||i[n+1]&&i[n+1].id!==u.id){var b=[...a],w=i.slice(0,n+1).filter((e=>e.id===u.id));t.sessionInfo.currentEventId=u.id,t.sessionInfo.currentDocs=a,t.sessionInfo.currentEventTS=Date.now();var A=new Ra({id:u.id,type:"init"===w[0].queueType?"init":void 0,docChanges:t.getEJSON().deserialize(w),docs:t.getEJSON().deserialize(b),EJSON:t.getEJSON(),requestId:r,watchId:t.watchId});U.surroundThirdByTryCatch((()=>t.listener.onChange(A)))(),t.debug&&t._snapshotHistory.push(A)}}else Kt(qo,ma,!0),t._fsm.transition(Po.NEED_REBUILD_WATCH)},u=0,c=i.length;u<c;u++)l(u,c)}}))()}_postHandleServerEventsValidityCheck(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn(`[realtime listener] internal non-fatal error: client eventId ${this.sessionInfo.currentEventId} does not match with server event id after server event handling ${e.msgData.currEvent} (requestId ${e.requestId})`)):console.error(`[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId ${e.requestId})`)}clearWaitExpectedEvent(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}onMessage(e){switch(this._fsm.currentState){case Ro.INIT_WATCH_SUCCESS:case Ro.REBUILD_WATCH_SUCCESS:break;case Ro.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn(`[realtime listener] internal non-fatal error: unexpected message received while state is ${this._fsm.currentState}`)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((()=>{this._fsm.transition(Po.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:`${e.msgData.code} - ${e.msgData.message}`}))}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}closeWithError(e,t=!0){if(this._fsm.currentState!==Ro.CLOSED&&this._fsm.transition(Po.CLOSE),!this.userOnErrorInvoked){var r=this._fsm.getHistoryRepresentation({limit:20});C(e)?(e.errMsg+=`\nhistory ${r}`,e.history=r):e&&((e=new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`${e} \nhistory ${r}`})).history=r),this.clearACKSchedule(),U.surroundThirdByTryCatch((()=>this.listener.onError(e)))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch(Ba),this.sessionInfo=void 0}}}function Ma(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}var Fa,ja={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(Fa||(Fa={}));var Ua,$a=(e,t)=>{var r=ja[e],n=r?`${r.name}, code ${e}, reason ${t||r.description}`:`code ${e}`;return new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:n})},Wa=1;class qa{constructor(e){var t=this;this._fsm=void 0,this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._totalConnectionTimeoutId=void 0,this._serviceContext=void 0,this._ws=void 0,this._lastPingSendTS=void 0,this._pingFailed=0,this._pongMissed=0,this._pingTimeoutId=void 0,this._pongTimeoutId=void 0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this._EJSON=void 0,this._defaultEnvId=void 0,this._connectionEnvId=void 0,this._retryLock=!1,this.initWebSocketConnection=function(){var e=c()((function*(e,r=t._maxReconnect){var n;if(t._EJSON||(n=function(){return Ha.apply(this,arguments)}().then((e=>t._EJSON=e))),t._fsm.currentState===Vi.DISCONNECTED){t._fsm.transition(Ji.CONNECTION_START),t._logins=new Map,t._wsResponseWait=new Map;var i=!1,o=[],a=!1;if(!t._totalConnectionTimeoutId&&t._totalConnectionTimeout&&t._totalConnectionTimeout!==1/0){var s=t._totalConnectionTimeout;t._totalConnectionTimeoutId=setTimeout((()=>{a=!0,e&&t._retryLock&&(t._retryLock=!1),t._totalConnectionTimeoutId=void 0;var r=new R(`reconnect timeout (reach totalConnectionTimeout ${s}s)`,{subtype:"totalConnectionTimeout",retryable:!1});Kt(qo,aa,!0),t._fsm.transition({type:Ji.CONNECTION_FAIL,error:r})}),1e3*s)}if(e){if(t._retryLock)return void 0;0,t._retryLock=!0}for(var l=t._maxReconnect;l>=0;l--)try{var u=yield*function*(){if(!(yield he()).isConnected){if(!e)return t._fsm.transition({type:Ji.CONNECTION_FAIL,error:new Error("network offline")}),{v:void 0};if(yield new Promise((e=>{ue&&ue.isConnected?e():fe.push(e)})),0===t._virtualWSClient.size)return t.clearTotalReconnectTimeout(),{v:void 0};Bt()&&(yield de(100))}if(a)return{v:void 0};var r=yield t.getSignature(t._connectionEnvId);if(a)return{v:void 0};var o=Date.now();return yield new Promise(((e,n)=>{t._ws=ne(t._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:r.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:n})})),a?{v:void 0}:(zt({apiName:"_realtime.connectSocket",apiStartTime:o,apiEndTime:Date.now()}),yield t.initWebSocketEvent(),a||n&&(yield n,a)?{v:void 0}:(i=!0,"break"))}();if("break"===u)break;if("object"==typeof u)return u.v}catch(e){if(o.unshift(e),e.errCode===I.TCB_PERMISSION_DENIED)break;var{isConnected:c}=yield he();if(a)return;if(c&&(yield de(t._reconnectInterval),a))return;if(Bt()&&(yield de(0),a))return}if(e&&t._retryLock&&(t._retryLock=!1),i)return t.clearTotalReconnectTimeout(),Kt(qo,e?Qo:Ho,!0),void t._fsm.transition(Ji.CONNECTION_SUCCESS);t.clearTotalReconnectTimeout(),Kt(qo,e?zo:Go,!0),e?t._fsm.transition({type:Ji.CONNECTION_FAIL,error:new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(o.map((e=>e+"")))}`})}):t._fsm.transition({type:Ji.CONNECTION_FAIL,error:new T({errCode:I.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(o.map((e=>e+"")))}`})})}}));return function(t){return e.apply(this,arguments)}}(),this.initWebSocketEvent=()=>new Promise(((e,t)=>{if(!this._ws)throw new Error("can not initWebSocketEvent, ws not exists");var r=!1;this._ws.onOpen((t=>{this._context.debug&&console.warn("[realtime] ws event: open",t),r=!0,e()}));var n=null;this._ws.onError((e=>{n=e,this._logins=new Map,r?(this._context.debug&&console.error("[realtime] ws event: error",e),this.clearHeartbeat(),Kt(qo,Zo,!0)):(this._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),t(e),Kt(qo,Yo,!0))})),this._ws.onClose((e=>{this._logins=new Map,this.clearHeartbeat();var t=n||$a(e.code);switch(e.code){case Fa.ReconnectOnServerUpgrade:case Fa.ReconnectWebSocket:case Fa.NoRealtimeListeners:this._fsm.transition({type:Ji.DISCONNECT,error:t});break;case Fa.HeartbeatPingError:case Fa.HeartbeatPongTimeoutError:case Fa.NormalClosure:case Fa.AbnormalClosure:this._maxReconnect>0?(this._fsm.transition({type:Ji.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:Ji.CONNECTION_FAIL,error:t}),e.code===Fa.HeartbeatPingError?Kt(qo,ta,!0):e.code===Fa.HeartbeatPongTimeoutError?Kt(qo,ra,!0):Kt(qo,na,!0);break;case Fa.UnauthenticatedIdleConnection:this._fsm.transition({type:Ji.CONNECTION_FAIL,error:$a(e.code,e.reason)}),Kt(qo,ia,!0);break;case Fa.ServerUpgrade:this._fsm.transition({type:Ji.DISCONNECT,error:t}),this.initWebSocketConnection(!0),Kt(qo,sa,!0);break;default:this._maxReconnect>0?(this._fsm.transition({type:Ji.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:Ji.CONNECTION_FAIL,error:$a(e.code,e.reason)}),Kt(qo,oa,!0)}Kt(qo,ea,!0)}));var i={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:er,autoReport:"_realtime.onSocketMessage"};this._ws.onMessage(Zt(this.onSocketMessage,i)),this.heartbeat()})),this.isWSConnected=()=>Boolean(this._ws&&this._ws.readyState===Wa),this.onSocketMessage=e=>{var t,r=e.data;this.heartbeat();try{t=JSON.parse(r)}catch(e){throw new Error(`[realtime] onMessage parse res.data error: ${e}`)}this._context.debug&&console.log(`[realtime] onMessage ${t.msgType} (${(new Date).toLocaleString()})`,t);var n=this._wsResponseWait.get(t.requestId);if(n){try{"ERROR"===t.msgType?n.reject(new Pa(t)):n.resolve(t)}catch(e){this._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{this._wsResponseWait.delete(t.requestId)}if(n.skipOnMessage)return}if("PONG"!==t.msgType){var i=t.watchId&&this._watchIdClientMap.get(t.watchId);if(i)i.onMessage(t);else switch(t.watchId?this._closedWatches.has(t.watchId)?Kt(qo,la,!0):Kt(qo,ua,!0):Kt(qo,ca,!0),t.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":(i=this._queryIdClientMap.get(t.msgData.queryID))&&i.onMessage(t)}}else if(this._lastPingSendTS){var o=Date.now()-this._lastPingSendTS;if(o>1e4)return void(this._context.debug&&console.warn(`[realtime] untrusted rtt observed: ${o}`));this._rttObserved.length>=3&&this._rttObserved.splice(0,this._rttObserved.length-3+1),this._rttObserved.push(o)}},this.login=function(){var e=c()((function*(e,r,n){if(e=e||t._context.env||t._defaultEnvId,!r)if(e){var i=t._logins.get(e);if(i){if(i.loggedIn&&i.loginResult)return i.loginResult;if(i.loggingInPromise)return i.loggingInPromise}}else{var o=t._logins.get("");if(o&&o.loggingInPromise)return o.loggingInPromise}var a=new Promise(function(){var i=c()((function*(i,o){try{var a=yield n?Zt(t.getSignature(e,r),{timing:n,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):t.getSignature(e,r),s=(()=>{var e,t,r=ne().wx;if(r&&r.version){e=r.version.version,t=r.version.updateTime;var n=r.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return{version:e,updateTime:t,updateDateInDashes:n?`${n[1]}-${n[2]}-${n[3]}`:"unknown"}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}})(),l={watchId:void 0,requestId:Wo(),msgType:"LOGIN",msgData:{envId:a.envId,signStr:a.signStr,secretVersion:a.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},u=yield t.send({msg:l,waitResponse:!0,skipOnMessage:!0,timeout:5e3});u.msgData.code?o(new Error(`${u.msgData.code} ${u.msgData.message}`)):i({envId:a.envId})}catch(e){o(e)}}));return function(e,t){return i.apply(this,arguments)}}()),s=e&&t._logins.get(e),l=Date.now();s?(s.loggedIn=!1,s.loggingInPromise=a,s.loginStartTS=l):(s={loggedIn:!1,loggingInPromise:a,loginStartTS:l},t._logins.set(e||"",s));try{var u=yield a,d=t._logins.get(e||"");if(d&&d===s&&d.loginStartTS===l)return s.loggedIn=!0,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=u,u;if(d){if(d.loggedIn&&d.loginResult)return d.loginResult;if(d.loggingInPromise)return d.loggingInPromise;throw new Error("ws unexpected login info")}throw new Error("ws login info reset")}catch(e){throw s.loggedIn=!1,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=void 0,e}}));return function(t,r,n){return e.apply(this,arguments)}}(),this.getSignature=function(){var e=c()((function*(e,r){if(e=e||t._context.env||t._defaultEnvId,!r&&e&&t._signatures.has(e)){var n=t._signatures.get(e);if(Date.now()<n.expireTS)return n}else 0;var i=Date.now()+6e4,o=yield function(e,t){return Ti.apply(this,arguments)}(t._context,e);if(Date.now()-i>6e4)return t.getSignature(e,r);var a=s()(s()({},o),{},{expireTS:i});return t._signatures.set(a.envId,a),e||(t._defaultEnvId=a.envId),a}));return function(t,r){return e.apply(this,arguments)}}(),this.getWaitExpectedTimeoutLength=()=>this._rttObserved.length?this._rttObserved.reduce(((e,t)=>e+t))/this._rttObserved.length*1.5:5e3,this.ping=c()((function*(){var e={watchId:void 0,requestId:Wo(),msgType:"PING",msgData:null};yield t.send({msg:e}),t._context.debug&&console.log("ping sent")})),this.send=e=>new Promise(function(){var r=c()((function*(r,n){if(t._fsm.currentState!==Vi.CONNECTED)return n(new Error("websocket not connected"));var i,o=!1,a=!1,s=e=>{o=!0,i&&clearTimeout(i),r(e)},l=e=>{a=!0,i&&clearTimeout(i),n(e)};e.timeout&&(i=setTimeout(c()((function*(){o&&a||(yield de(0),o&&a||l(new R("wsclient.send timedout")))})),e.timeout));try{if(t._context.debug&&console.log(`[realtime] ws send ${e.msg.msgType} (${(new Date).toLocaleString()}): `,e),!t._ws)return void l(new Error("invalid state: ws connection not exists, can not send message"));if(t._ws.readyState!==Wa)return void l(new Error(`ws readyState invalid: ${t._ws.readyState}, can not send message`));e.waitResponse&&t._wsResponseWait.set(e.msg.requestId,{resolve:s,reject:l,skipOnMessage:e.skipOnMessage}),t._ws.send({data:JSON.stringify(e.msg),success:t=>{e.waitResponse||s(t)},fail:r=>{l(r),e.waitResponse&&t._wsResponseWait.delete(e.msg.requestId)}})}catch(e){l(e)}}));return function(e,t){return r.apply(this,arguments)}}()),this.onWatchStart=(e,t)=>{this._queryIdClientMap.set(t,e)},this.onWatchClose=(e,t)=>{t&&this._queryIdClientMap.delete(t),this._watchIdClientMap.delete(e.watchId),this._virtualWSClient.delete(e),this._closedWatches.add(e.watchId),this._virtualWSClient.size||this.close(Fa.NoRealtimeListeners)},this.getEJSON=()=>this._EJSON,this._fsm=new Uo({initialState:Vi.DISCONNECTED,states:Oo}),this._serviceContext=e.serviceContext}get _context(){return this._serviceContext}get _maxReconnect(){return this._context.appConfig.realtimeMaxReconnect}get _reconnectInterval(){return this._context.appConfig.realtimeReconnectInterval}get _totalConnectionTimeout(){return this._context.appConfig.realtimeTotalConnectionTimeout}heartbeat(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(c()((function*(){try{if(!t._ws||t._ws.readyState!==Wa)return;t._lastPingSendTS=Date.now(),yield t.ping(),t._pingFailed=0,t._pongTimeoutId=setTimeout((()=>{t._context.debug&&console.error("pong timed out"),t._pongMissed<2?(t._pongMissed++,t.heartbeat(!0)):t.close(Fa.HeartbeatPongTimeoutError)}),t._context.appConfig.realtimePongWaitTimeout)}catch(e){t._pingFailed<2?(t._pingFailed++,t.heartbeat()):t.close(Fa.HeartbeatPingError)}})),e?0:this._context.appConfig.realtimePingInterval)}clearHeartbeat(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}clearTotalReconnectTimeout(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)}close(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:ja[e].name}),this._ws=void 0)}watch(e){var t={apiStartTime:Date.now()},r=!1,n=()=>{zt(s()(s()({},t),{},{apiName:e.reportAPIName}))},i=e.onChange,o=e.onError;this._fsm.currentState===Vi.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));var a=new ka(s()(s()({},e),{},{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:()=>this._context,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:t,debug:this._context.debug,wsclient:this,onChange:u,onError:c}));this._virtualWSClient.add(a),this._watchIdClientMap.set(a.watchId,a);var l=a.listener;return l;function u(...e){r||(r=!0,t.apiEndTime=Date.now(),n()),d(),U.surroundThirdByTryCatch((()=>l.onChange.apply(this,e)))()}function c(...e){r||(r=!0,t.apiEndTime=Date.now(),n()),d(),U.surroundThirdByTryCatch((()=>l.onError.apply(this,e)))()}function d(){l.onChange===u&&(l.onChange=i),l.onError===c&&(l.onError=o)}}}function Ha(){return(Ha=c()((function*(){var e=Date.now(),t=r(865);return zt({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),t.EJSON}))).apply(this,arguments)}!function(e){e.ASC="asc",e.DESC="desc"}(Ua||(Ua={}));var Ga=e=>{class t{constructor(t,n){if(this.collectionName=void 0,this._query=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(K(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new qa({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(s()(s()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(this._query.where||{})),limit:this._query.limit,orderBy:this._query.order?this._query.order.reduce(((e,t)=>(e[t.fieldPath]=t.order,e)),{}):void 0,queryType:ui.WHERE,reportAPIName:"cloud.db.collection.watch"}))),!t)throw new T({errCode:I.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new r(n),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=n&&n.field||{}}field(e){return V(e,"object","field"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{field:e}))}where(e){return V(e,"condition","where"),this._query.where?new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{where:Li.and(this._query.where,e)})):new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{where:e}))}orderBy(e,r){return V(e,"fieldPath","orderBy"),V(r,"order","orderBy"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{order:[...this._query.order||[],{fieldPath:e,order:r}]}))}limit(e){return V(e,"max","limit"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{limit:e}))}skip(e){return V(e,"offset","skip"),new t(this.collectionName,s()(s()({},this._query.getProperties()),{},{offset:e}))}get(t){var r="collection.get",n={apiStartTime:+new Date},i=()=>gi({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:ui.WHERE,options:Io(this,e),instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var o=z(t),a=new Promise(function(){var e=c()((function*(e,o){try{var a=yield i();if(null!=t&&t.explain&&Bt())return void e(a);e({data:a.list,errMsg:nr(r)})}catch(e){o(O(e,r))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}update(t){var r="collection.update",n={apiStartTime:+new Date},i=()=>{if(V(t,"options","update"),K(t,{data:"object"}),!this._query.where)throw new T({errCode:-1,errMsg:"query condition must be provided"})},o=()=>mi({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:ui.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:n,explain:t.explain});var a=z(t),l=new Promise(function(){var e=c()((function*(e,a){try{i();var l=yield o();if(null!=t&&t.explain&&Bt())return e(l);e({stats:{updated:l.updated},errMsg:nr(r)})}catch(e){a(O(e,r))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!a)return l;l.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}remove(t){var r="collection.remove",n={apiStartTime:+new Date},i=()=>{if(!this._query.where||0===Object.keys(this._query.where).length)throw new T({errCode:-1,errMsg:"query condition must be provided and not be empty"})},o=()=>hi({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:ui.WHERE,options:{multi:!0},instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var a=z(t),l=new Promise(function(){var e=c()((function*(e,a){try{i();var l=yield o();if(null!=t&&t.explain&&Bt())return e(l);e({stats:{removed:l.removed||0},errMsg:nr(r)})}catch(e){a(O(e,r))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!a)return l;l.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}count(t){var r="collection.count",n={apiStartTime:+new Date},i=()=>Ai({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:ui.WHERE,instanceContext:e,timing:n,explain:null==t?void 0:t.explain});var o=z(t),a=new Promise(function(){var e=c()((function*(e,o){try{var a=yield i();if(null!=t&&t.explain&&Bt())return e(a);e({total:a.total,errMsg:nr(r)})}catch(e){o(O(e,r))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}toJSON(){}}class r{constructor(e){this.where=void 0,this.offset=void 0,this.limit=void 0,this.order=void 0,this.field=void 0,this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}getProperties(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}}}return t},Qa="document.get",za="document.update",Ka="document.set",Va="document.remove",Ja=e=>class{constructor(t,r){if(this._id=void 0,this.collection=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(K(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new qa({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(s()(s()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collection.collectionName,query:JSON.stringify({_id:this._id}),queryType:ui.DOC,reportAPIName:"cloud.db.document.watch"}))),this.collection=t,this._id=r,null==r)throw new T({errCode:I.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}field(e){return V(e,"object","field"),K(e,"object","field"),this._field=e,this}get(t){var r=this,n={apiStartTime:+new Date},i=()=>gi({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),options:{projection:e.engine.ProjectionSerializer.encode(this._field)},queryType:ui.DOC,instanceContext:e,timing:n});var o=z(t),a=new Promise(function(){var e=c()((function*(e,t){try{var o=r._id,a=yield i();if(!a.list||!a.list.length)throw new Error(`cannot find document with _id ${o}, please make sure that the document exists and you have the corresponding access permission`);e({data:a.list[0],errMsg:nr(Qa)})}catch(e){t(O(e,Qa))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:"cloud.db.document.get"}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return a;a.then((e=>{G(Qa,t,e)})).catch((e=>{Q(Qa,t,e)}))}set(t){var r={apiStartTime:+new Date},n=()=>bi({env:e.database.config.env,collectionName:this.collection.collectionName,_id:this._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:r});var i=z(t),o=new Promise(function(){var e=c()((function*(e,i){try{K(t,{data:"object"}),X({name:"options.data",target:t.data});var o=yield n();e({_id:o._id,errMsg:nr(Ka),stats:{updated:o.updated,created:o.created}})}catch(e){i(O(e,Ka))}finally{zt(s()(s()({},r),{},{apiEndTime:+new Date,apiName:"cloud.db.document.set"}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return o;o.then((e=>{G(Ka,t,e)})).catch((e=>{Q(Ka,t,e)}))}update(t){var r={apiStartTime:+new Date},n=()=>mi({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:ui.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:r});var i=z(t),o=new Promise(function(){var e=c()((function*(e,i){try{K(t,{data:"object"}),X({name:"options.data",target:t.data}),e({stats:{updated:(yield n()).updated},errMsg:nr(za)})}catch(e){i(O(e,za))}finally{zt(s()(s()({},r),{},{apiEndTime:+new Date,apiName:"cloud.db.document.update"}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!i)return o;o.then((e=>{G(za,t,e)})).catch((e=>{Q(za,t,e)}))}remove(t){var r=this,n={apiStartTime:+new Date},i=()=>hi({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),queryType:ui.DOC,options:{},instanceContext:e,timing:n});var o=z(t),a=new Promise(function(){var e=c()((function*(e,t){try{var o=r._id,a=yield i();if(0===a.removed)throw new Error(`cannot remove document with _id ${o}, please make sure that the document exists and you have the corresponding Write permission`);e({stats:{removed:a.removed||0},errMsg:nr(Va)})}catch(e){t(O(e,Va))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:"cloud.db.document.remove"}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return a;a.then((e=>{G(Va,t,e)})).catch((e=>{Q(Va,t,e)}))}toJSON(){}},Xa=e=>{var t=Ga(e),r=Ja(e),n=Ci(e);return class extends t{constructor(e){super(e),this.collectionName=void 0,this.__safe_props__=void 0,this.collectionName=e}doc(e){if(null==e)throw O({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new r(this,e)}add(t){var r="collection.add",n={apiStartTime:+new Date},i=()=>pi({env:e.database.config.env,collectionName:this.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:n});var o=z(t),a=new Promise(function(){var e=c()((function*(e,o){try{K(t,{data:"object"}),e({_id:(yield i())._id,errMsg:nr(r)})}catch(e){o(O(e,r))}finally{zt(s()(s()({},n),{},{apiEndTime:+new Date,apiName:`cloud.db.${r}`}))}}));return function(t,r){return e.apply(this,arguments)}}());if(!o)return a;a.then((e=>{G(r,t,e)})).catch((e=>{Q(r,t,e)}))}aggregate(){return new n(this,[])}}},Ya=function(e){return new Za(e)};class Za{constructor(e){this.regexp=void 0,this.options=void 0,K(e,{regexp:"string"},"RegExp options"),e.options&&K(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}get _internalType(){return Hn}toJSON(){return{$regex:this.regexp,$options:this.options}}}var es={},ts={};for(var rs in Vn)es[Vn[rs]]=`$${Vn[rs]}`;for(var ns in Cn)es[Cn[ns]]=`$${Cn[ns]}`;for(var is in ei)es[ei[is]]=`$${ei[is]}`;for(var os in ni)"undefined"!=typeof IS_SDK_PACKAGE&&"toString"===ni[os]||(ts[ni[os]]=`$${ni[os]}`);function as(e){return es[e]||`$${e.toLowerCase()}`}function ss(e){return ts[e]||`$${e.toLowerCase()}`}es[Vn.NEQ]="$ne",es[ei.REMOVE]="$unset",es[ei.SHIFT]="$pop",es[ei.UNSHIFT]="$push",es[Vn.GEO_NEAR]="$nearSphere",es[Vn.GEO_WITHIN]="$geoWithin",es[Vn.GEO_INTERSECTS]="$geoIntersects";class ls{static encodeStages(e){return(new us).encodeStages(e)}static encode(e){return(new us).encodeAny(e)}}class us{encodeStages(e){return e.map((e=>this.encodePipelineStage(e)))}encodeAny(e){return Ao(e)?Ri(e)?this.encodePipeline(e):Pi(e)?this.encodePipelineStage(e):oi(e)?this.encodeAggregateCommand(e):Eo(e):h(e)?this.encodeObject(e):m(e)?e.map((e=>this.encodeAny(e))):e}encodeObject(e){var t={};for(var r in e)t[r]=this.encodeAny(e[r]);return t}encodePipeline(e){return e._stages.map((e=>this.encodeAny(e)))}encodePipelineStage(e){var t=`$${e.stage}`;return"match"===e.stage?{[t]:cs.encode(e.val)}:{[t]:this.encodeAny(e.val)}}encodeAggregateCommand(e){return{[ss(e.operator)]:this.encodeAny(e.operands[0])}}}class cs{constructor(){}static encode(e){return ds(e)}}var ds=e=>Kn(e)?fs(e):Zn(e)?hs(e):Ri(e)||oi(e)||Pi(e)?ls.encode(e):h(e)?ps(e):Eo(e),ps=e=>{var t=yo(e),r=[],n={[Cn.OR]:0,[Cn.NOR]:0,[Cn.AND]:0,[Cn.NOT]:0},i=function(e){var i=t[e];if(Kn(i))switch(i.operator){case Cn.OR:case Cn.NOR:case Cn.AND:n[i.operator]++,r.push({[as(i.operator)]:i.operands.map((t=>ds({[e]:t})))});break;case Cn.NOT:var o=i.operands[0];if(Kn(o))switch(o.operator){case Cn.AND:n[Cn.OR]++,r.push(fs(new zn(Cn.OR,o.operands.map((t=>({[e]:new zn(Cn.NOT,[t])}))))));break;case Cn.OR:n[Cn.NOR]++,r.push(fs(new zn(Cn.NOR,o.operands.map((t=>({[e]:t}))))));break;case Cn.NOR:n[Cn.OR]++,r.push(fs(new zn(Cn.OR,o.operands.map((t=>({[e]:t}))))));break;case Cn.NOT:r.push(ds({[e]:o.operands[0]}))}else r.push({[e]:fs(i)})}else Zn(i)?r.push({[e]:hs(i)}):r.push({[e]:Eo(i)})};for(var o in t)i(o);return _s(r)},fs=e=>{switch(e.operator){case Cn.AND:if(e.operands.every((e=>Zn(e)))){var t={};for(var r of e.operands)Object.assign(t,hs(r));return t}return{[as(e.operator)]:e.operands.map(ds)};case Cn.OR:case Cn.NOR:return{[as(e.operator)]:e.operands.map(ds)};case Cn.NOT:var n=as(e.operator),i=e.operands[0];return{[n]:ds(i)};default:return{[as(e.operator)]:e.operands.map(ds)}}},hs=e=>{var t=as(e.operator);switch(e.operator){case Vn.EQ:case Vn.NEQ:case Vn.LT:case Vn.LTE:case Vn.GT:case Vn.GTE:case Vn.EXISTS:case Vn.SIZE:return{[t]:Eo(e.operands[0])};case Vn.IN:case Vn.NIN:case Vn.MOD:return{[t]:Eo(e.operands)};case Vn.ALL:return{[t]:e.operands.map(ds)};case Vn.ELEM_MATCH:case Vn.EXPR:return{[t]:ds(e.operands[0])};case Vn.GEO_NEAR:return{[t]:{$geometry:Eo(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance}};case Vn.GEO_WITHIN:var r={};return e.operands[0].geometry&&(r.$geometry=Eo(e.operands[0].geometry)),e.operands[0].centerSphere&&(r.$centerSphere=Eo(e.operands[0].centerSphere)),{[t]:r};case Vn.GEO_INTERSECTS:return{[t]:{$geometry:Eo(e.operands[0].geometry)}};default:return{[t]:e.operands.length>1?e.operands.map(ds):ds(e.operands[0])}}},_s=e=>{var t={$and:0,$or:0,$nor:0};for(var r of e)r.$and&&t.$and++,r.$or&&t.$or++,r.$nor&&t.$nor++;var n=t.$and>1||t.$or>1||t.$nor>1,i=!1,o={};for(var a of e)for(var s in a){var l=a[s];n?i?o.$and.push(a):"$and"===s||"$or"===s||"$nor"===s?(i=!0,o.$and=[a]):o[s]=l:o[s]=l}return o};class gs{constructor(){}static encode(e){return ms(e)}}var vs,ms=e=>ys(e),ys=e=>{var t=yo(e),r={};for(var n in t){var i=t[n];if(ri(i)){var o=as(i.operator);switch(r[o]||(r[o]={}),i.operator){case ei.SET:case ei.INC:case ei.MUL:case ei.MIN:case ei.MAX:case ei.RENAME:case ei.BIT:r[o][n]=Eo(i.operands[0]);break;case ei.REMOVE:r[o][n]="";break;case ei.PUSH:var a=void 0;a=1===i.operands.length&&h(i.operands[0])?{$each:i.operands[0].each.map(Eo),$position:i.operands[0].position,$slice:i.operands[0].slice,$sort:i.operands[0].sort}:{$each:i.operands.map(Eo)},r[o][n]=a;break;case ei.UNSHIFT:var s={$each:i.operands.map(Eo),$position:0};r[o][n]=s;break;case ei.POP:r[o][n]=1;break;case ei.SHIFT:r[o][n]=-1;break;case ei.ADD_TO_SET:r[o][n]=h(i.operands[0])&&i.operands[0].each?{$each:i.operands[0].each}:i.operands[0];break;case ei.PULL:r[o][n]=cs.encode(i.operands[0]);break;case ei.PULL_ALL:default:r[o][n]=Eo(i.operands[0])}}else r.$set||(r.$set={}),r.$set[n]=Eo(i)}return r};class bs{constructor(){}static encode(e){return(new bs).encodeProjection(e)}encodeProjection(e){return li(e)?this.encodeProjectionCommand(e):"object"===f(e)?this.encodeProjectionObject(e):e}encodeProjectionCommand(e){var t=as(e.operator);return e.operator,ai.SLICE,{[t]:e.operands[0]}}encodeProjectionObject(e){var t=yo(e);for(var r in t)!0===t[r]||1===t[r]?t[r]=1:!1===t[r]||0===t[r]?t[r]=0:li(t[r])?t[r]=this.encodeProjectionCommand(t[r]):delete t[r];return t}}class ws{constructor(){}static decode(e){return(new ws).decodeData(e)}decodeData(e){switch(f(e)){case"object":return this.decodeObject(e);case"array":return e.map((e=>{if(h(e)){var t=So(e);return t!==e?t:this.decodeObject(e)}return e}));default:return e}}decodeObject(e){var t=s()({},e);for(var r in t){var n=t[r];switch(f(n)){case"object":var i=So(n);t[r]=i!==n?i:this.decodeObject(t[r]);break;case"array":var o=this.decodeData(n);o!==n&&(t[r]=o);break;default:continue}}return t}}!function(e){e[e.DEFAULT=0]="DEFAULT"}(vs||(vs={}));var As=function(e,t){return new(Ss(e.identifiers||{}))({context:e,config:t})};function Es(e){return e.debug}var Ss=r=>{var n,i;return class{constructor(o){this.identifiers=void 0,this.config=void 0,this.command=void 0,this.Geo=void 0,this.serverDate=void 0,this.RegExp=void 0,this.__safe_props__=void 0;var{config:a,context:s}=o;this.identifiers=r,this.config=a||{},i=Xa(n={database:this,serviceContext:s,engine:t}),a&&a.env&&K(a.env,"string"),this.command=Li,this.Geo=e,this.serverDate=Bi,this.RegExp=Ya,a&&a.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get(){return Es((e=n).database)?e.engine.QuerySerializer:void 0;var e},set(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get(){return Es((e=n).database)?e.engine.UpdateSerializer:void 0;var e},set(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get(){return Es((e=n).database)?e.engine.ProjectionSerializer:void 0;var e},set(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get(){return Es((e=n).database)?e.engine.AggregateSerializer:void 0;var e},set(){}},Decoder:{enumerable:!1,configurable:!1,get(){return Es((e=n).database)?e.engine.Decoder:void 0;var e},set(){}}})}collection(e){return new i(e)}toJSON(){}}};function Is(e){return{database:As.bind(null,e)}}var Ts="database";function Cs(e){e.registerService(function(e){var t={name:Ts,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(Ts)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:Ts,context:t,getAPIs:Is.bind(null,t)}}(e))}function Os(e){class t{constructor(e){this.cloudID=void 0,this._internalType=ur,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toJSON(){return this.cloudID}toString(){return this.cloudID}}return function(e){return new t(e)}}function Ns(e){class t{constructor(e){this.target=void 0,this._internalType=cr,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toString(){return JSON.stringify({target:this.target})}}return function(e){return new t(e)}}function xs(e){return{CloudID:Os(),CDN:Ns()}}var Rs="utils";function Ps(e){e.registerService(function(e){var t={name:Rs,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:Rs,context:t,getAPIs:xs.bind(null,t)}}(e))}var Ds="gateway:call";class Ls extends Error{constructor(e,t){super(e),this.code=void 0,this.code=t}}function Bs(e){return t=>{var r=new Ms(t),n={name:"gateway-plugin",getMetadata:e=>s()(s()({},e),{},{host:`https://${t.appid}.preview.wxcloudrun.com`}),beforeRequest:e=>e,afterRequest:e=>e,beforeTunnelRequest:e=>e,afterTunnelRequest:e=>e,context:e,refreshTunnelInfo:"miniprogram"===hn().env?c()((function*(){var t=be(),r=(yield e.request({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({system:t.system,wx_app_version:t.version,scene:3})})).data;return Vt(r.token,"3"),r})):void 0};return Ws.set(r,n),r.exportAPI}}var ks=new Map;class Ms extends class{constructor(){}}{constructor(e){super(),this.options=e,this.session=void 0,this.gatewayAuthorization=void 0,this.exportAPI=void 0,setInterval((()=>{this.refresh(this.session)}),3e5),this.refresh(this.session),this.exportAPI={refresh:this.refresh.bind(this),call:this.call.bind(this)}}refresh(e,t){var r=this;return c()((function*(){var n=`${e}-${t}`;if(ks.has(n))return ks.get(n);r.gatewayAuthorization=void 0,r.session=e;var i=new Promise(((t,i)=>{var o=new Promise((t=>"string"==typeof e?t(e):e?e.then(t):t(e)));o.then((e=>{var o=Ws.get(r);o.refreshTunnelInfo?o.refreshTunnelInfo().then((e=>{t(e)})):ne()._requestSkipCheckDomain({url:`https://${r.options.appid}.preview.wxcloudrun.com/__wx__/auth`,method:"post",header:{"x-wx-accept-encryption":3,"x-wx-encryption-timestamp":Date.now(),"x-wx-lib-build-ts":11516239022},data:JSON.stringify({session:e,fingerprint:"",timestamp:Date.now(),nonce:Math.random()}),success:({data:e})=>t(e),fail:e=>{i(e),setTimeout((()=>{ks.delete(n)}),500)}})}))}));ks.set(n,i);try{var o=yield i;return r.gatewayAuthorization=o,o}catch(e){throw console.log("refresh gateway authorization error: ",e),e}}))()}call(e){var t=this;return c()((function*(){var r,n,i=Date.now();e.stats={apiStartTime:i},e.context={apiStartTime:i};var o=t.gatewayAuthorization?t.gatewayAuthorization:yield t.refresh(t.session);1e3*o.exp<Date.now()&&(o=yield t.refresh(t.session,o.token)),e.stats.getServiceEndpoint=Date.now()-i;var a=new Uint8Array(null===(r=(n=u.wx).base64ToArrayBuffer)||void 0===r?void 0:r.call(n,o.key));Kr(e);var l=`${t.options.appid}.preview.wxcloudrun.com`;e.stats.domain=l;var c=ke.V3.encodeRequest(a,s()(s()({},e.header),{},{"X-WX-TARGET-SERVICE":"HTTP","X-WX-HTTP-HOST":l,"X-WX-HTTP-PATH":e.path}),e.method||"GET",e.data,e.stats);e.stats.requestStartTs=Date.now(),e.stats.callid=c.callId;var d=yield new Promise(((t,r)=>ne()._requestSkipCheckDomain({url:`https://${l}/__wx__/call?token=${o.token}`,method:"POST",header:{"X-WX-EV":3,"Content-Type":"application/octet-stream"},data:c.data.buffer,dataType:"arraybuffer",responseType:"arraybuffer",enableHttp2:!0,enableQuic:!0,success:r=>{e.stats.requestSuccessTs=Date.now(),t(r)},fail:r})));e.stats.profile=d.profile,e.stats.httpRequest=Date.now()-e.stats.requestStartTs,Fs(e,d.header,d.data);var{header:p,body:f,statusCode:h}=ke.V3.decodeResponse(a,new Uint8Array(d.data),e.stats);Fs(e,p,f);var _=function(e,t,r,n){var i,o;if("json"!==t.dataType&&t.dataType||(o=n)>=300&&o<=399)i="text"===t.responseType?"string"==typeof r?r:xe(r.buffer):"arraybuffer"===t.responseType?"string"==typeof r?Re(r):r.buffer:r;else{var a="string"==typeof r?r:xe(r.buffer);try{i=JSON.parse(a)}catch(t){throw N({errCode:-1,errMsg:`fail to parse response body as JSON failed: ${t}. input: ${a}`},e)}}return i}(Ds,e,f,h);return rr(Ds,e,"v3"),{errMsg:"gateway:call:ok",statusCode:h,header:p,data:_,callId:c.callId,stats:e.stats}}))()}}function Fs(e,t,r){if(t["x-wx-system-error"])throw new Ls(`gateway:call: fail wx system error ${r}`,+t["x-wx-system-error"]);if(t["x-wx-server-timing"]){var n=(t["x-wx-server-timing"]||"").split(",");n.length>=2&&(e.stats.serverStartTs=Number(n[0]),e.stats.serverEndTs=Number(n[1]))}if(t["x-envoy-upstream-service-time"]){var i=+t["x-envoy-upstream-service-time"];isNaN(i)||(e.stats.upstreamCost=i)}}function js(e){return{Gateway:{initRequired:!1,fn:Bs(e)}}}var Us,$s="services",Ws=new WeakMap;function qs(e){e.registerService(function(e){var t={name:$s,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get appid(){return e.instanceOptions.appid},appConfig:{}};return{name:$s,context:t,getAPIs:js.bind(null,t)}}(e),"services")}var Hs=e=>{Us||(Us=function(){var e=ne(),{operateSaaADataFactory:t}=e;return t("","qbase_commapi",(e=>e.reqData),(e=>({data:e,rawData:JSON.stringify(e)})),(e=>e.errMsg?(e.errMsg=e.errMsg.replace("sendSaaADataPipe:fail","operateWXData:fail"),{errMsg:`${e.errMsg}.errCode: ${e.errCode||-1}`}):e))}());try{Us(e)}catch(n){r=n,(t=e).fail&&t.fail(r),t.complete&&t.complete(r),t.fail=void 0,t.complete=void 0}var t,r},Gs={_operateWXData:Hs,invokeOperateWXData:Hs};var Qs,zs={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0},Ks={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4,call_container_max_req_data_size:5242880,call_container_use_private_http:0},Vs=null;!function(e){e[e.AutoRecording=1]="AutoRecording",e[e.SdkRecording=2]="SdkRecording"}(Qs||(Qs={}));class Js{constructor(e){var t,r,n,i;this.isWhitelistMaskMode=void 0,this.attrs={},this.start=()=>{ne().startRecordingUserBehavior(),console.log("[wxobs appservice] obs is started")},this.stop=()=>{ne().stopRecordingUserBehavior(),console.log("[wxobs appservice] obs is stopped")},this.setAttrs=e=>{if(e){for(var t of Object.keys(e)){var r=e[t];"string"==typeof t&&"string"==typeof r?this.attrs[t]=r:console.warn("[wxobs appservice]the type of attributes must be string")}this.uploadAttrs()}},this.uploadAttrs=()=>{Object.keys(this.attrs).length>0&&ne().emitCustomAttrEvent(s()({},this.attrs))};var{autoStart:o,isWhitelistMaskMode:a,attrs:l}=Object.assign({autoStart:!0,isWhitelistMaskMode:!0},e);this.isWhitelistMaskMode=a,ne().setupUserBehaviorAnalytics({projectId:null!==(t=null===(r=Lt.accountInfo)||void 0===r?void 0:r.appId)&&void 0!==t?t:"undefined_app_id",isWhitelistMaskMode:this.isWhitelistMaskMode,autoStart:o,url:null!==(n=null===(i=Ys())||void 0===i?void 0:i.url)&&void 0!==n?n:"https://servicewechat.com/ob/wxob"}),this.setAttrs(l),console.log("[wxobs appservice] obs is setup")}}try{var Xs;null===(Xs=x)||void 0===Xs||Xs.onInitReady((()=>{try{Lt.onReady((()=>{if((null==Lt||null===(e=Lt.appContactInfo)||void 0===e||null===(t=e.wxob_meta_data)||void 0===t?void 0:t.wxob_mode)===Qs.AutoRecording||(null==Lt||null===(r=Lt.appContactInfo)||void 0===r||null===(n=r.stablePassThroughInfo)||void 0===n||null===(i=n.wxob_meta_data)||void 0===i?void 0:i.wxob_mode)===Qs.AutoRecording){var e,t,r,n,i,o=Ys();if(console.log("[wxobs appservice]auto recording mode",o),void 0!==o)if(Vs)console.warn("[wxobs appservice]already setup");else try{var{proportion:a,isWhitelistMaskMode:s}=o;a>=100*Math.random()&&(Vs=new Js({isWhitelistMaskMode:s}))}catch(e){console.error("[wxobs appservice]setup failed: ",e)}else console.warn("[wxobs appservice]can not access recording param")}}))}catch(e){null==ce||ce.warn(e)}}))}catch(e){}function Ys(){var e,t,r;return void 0!==(null==Lt||null===(e=Lt.appContactInfo)||void 0===e?void 0:e.wxob_meta_data)?{isWhitelistMaskMode:Lt.appContactInfo.wxob_meta_data.is_whitelist_mask_mode,proportion:Lt.appContactInfo.wxob_meta_data.proportion,url:Lt.appContactInfo.wxob_meta_data.url}:null!=Lt&&null!==(t=Lt.appContactInfo)&&void 0!==t&&null!==(r=t.stablePassThroughInfo)&&void 0!==r&&r.wxob_meta_data?{isWhitelistMaskMode:Lt.appContactInfo.stablePassThroughInfo.wxob_meta_data.is_whitelist_mask_mode,proportion:Lt.appContactInfo.stablePassThroughInfo.wxob_meta_data.proportion,url:Lt.appContactInfo.stablePassThroughInfo.wxob_meta_data.url}:void 0}var Zs={setup:function(e){var t,r,n,i,o,a,l,u,c;if((null==Lt||null===(t=Lt.appContactInfo)||void 0===t||null===(r=t.wxob_meta_data)||void 0===r?void 0:r.wxob_mode)===Qs.SdkRecording||(null==Lt||null===(n=Lt.appContactInfo)||void 0===n||null===(i=n.stablePassThroughInfo)||void 0===i||null===(o=i.wxob_meta_data)||void 0===o?void 0:o.wxob_mode)===Qs.SdkRecording||void 0!==(null===(a=Lt.appContactInfo)||void 0===a||null===(l=a.passThroughInfo)||void 0===l||null===(u=l.wxa_mgr)||void 0===u||null===(c=u.mgr_list)||void 0===c?void 0:c.find((e=>929===e.id&&1===e.value))))if(Vs)console.warn("[wxobs appservice] already setup");else try{Vs=new Js(s()({},e))}catch(e){console.error("[wxobs appservice] setup failed: ",e)}else console.warn("[wxobs appservice]sdk recording mode is not supported")},start:function(){Vs?Vs.start():console.warn("[wxobs appservice] not setup")},stop:function(){Vs?Vs.stop():console.warn("[wxobs appservice] not setup")},setAttrs:function(e){Vs?Vs.setAttrs(e):console.warn("[wxobs appservice] not setup")}},el=(e={})=>{var{sdk:t}=e,r=e.identifiers||{};return t&&ie(r,t),new rl(r,!1)},tl=(e={})=>el(e).exportAPI;class rl{constructor(e,t){var r=this;this.inited=!1,this.isInstance=void 0,this.services={},this.apiServiceMap={},this.plugins=[],this.meta=void 0,this.config=void 0,this.identifiers=void 0,this.debug=!1,this.request=void 0,this.exportAPI=void 0,this.appConfig=void 0,this.apiPermissions=void 0,this.runtimeInfo=void 0,this.serviceEndpoint=void 0,this.authStorage=void 0,this.testSpeed=c()((function*(){var e,t,n,i=+new Date,o=i;return Ue((t=(e={cloud:r,apiName:"tcbapi_testspeed",serializedReqData:""}).cloud,n=t.isInstance?s()(s()({},t.instanceOptions),{},{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}):{identityless:"sdk"===t.runtimeInfo.platform?t.config.identityless:void 0,appid:t.config.appid,env:e.env||t.config.env},{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:n,qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t}),{fireOnIdle:!0,onFire:()=>{i=+new Date,o=i}}).then((e=>{zt({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:i,tunnelEndTime:+new Date,tunnelStartTime:o,tunnelTimeNoCSNetCost:e.data.baseresponse.stat.qbase_cost_time})})).catch((e=>{0}))})),this.identifiers=e,this.isInstance=t,this.runtimeInfo=hn(),this.serviceEndpoint=new Tt(e),this.request=$e({cloud:this});var n,i=this;this.exportAPI={init:this.init.bind(this),obs:Zs},this.isInstance||(this.exportAPI.Cloud=function(t){return new nl(e,i,t).exportAPI}),Nr(n=this),Tn(n),Cs(n),Ps(n),dn(n),qs(n),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:il()},this.appConfig=s()({},Ks),this.apiPermissions={};try{Lt.onReady((()=>{setTimeout((()=>{(()=>{if(!kt)try{var e=ne();e.wx.onAppShow&&e.wx.onAppShow((()=>{jt=Date.now()})),e.wx.getNetworkType({success:e=>{Ut=e.networkType},complete:()=>{kt=!0,Qt()}}),e.wx.onNetworkStatusChange((e=>{kt||(kt=!0,Qt()),Ut=e.networkType}))}catch(e){}})()}),2e3),zr()}))}catch(e){}}getMetaData(){var e;if(!this.meta.sdk_version){var t=ne(this.identifiers);if(t){var r=t.wx;r&&r.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version=`wx-miniprogram-sdk/${r.version.version} (${Date.parse(`${r.version.updateTime} GMT+0800`)} platform/${this.runtimeInfo.platform}})`:this.meta.sdk_version="wx-app-sdk/2.19.2 (20220822.0)")}Lt.onReady((()=>{var e;this.meta.filter_user_info="singlePage"===(null===(e=Lt.appLaunchInfo)||void 0===e?void 0:e.mode)}))}return this.meta.filter_user_info="singlePage"===(null===(e=Lt.appLaunchInfo)||void 0===e?void 0:e.mode),this.meta}getConfig(){return this.config}getEnvForService(e){if(this.isInstance)return this.instanceOptions.resourceEnv;var t=this.config;if(t.env)switch(f(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}}checkAPIPermission(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]}init(e={}){this.inited=!0,this.initConfig(e);try{Se(500,this.identifiers)}catch(e){null==ce||ce.log("privateGetBackgroundFetchData error",e)}return Promise.all([this.sendInitRequest().then((()=>{this.testSpeed()}))]).then((()=>{}))}initConfig(e){this.config=JSON.parse(JSON.stringify(e)),this.plugins=(e.plugins||[]).map((e=>Ws.get(e))).filter((e=>!!e)),this.config.database?this.config.database=p(this.config.database,il()):this.config.database=il(),"sdk"===this.runtimeInfo.platform&&(ae(Gs),e.appid||console.warn("多端模式下使用云开发，wx.cloud.init 需要传入 appid, 具体可参考文档 https://dev.weixin.qq.com/docs/framework/dev/cloud "))}sendInitRequest(){var e="string"==typeof this.config.env?this.config.env:void 0,t=JSON.stringify({trace_user:!1!==this.config.traceUser,env:e,region:this.config.region}),r=+new Date,n=r;return this.request(s()(s()({},this.config),{},{apiName:"tcbapi_init",serializedReqData:t,env:e})).then((e=>{var t=+new Date,i=e.data;this.appConfig=s()(s()({},this.appConfig),i.config);for(var o=i.tcb_api_list||[],a=0,l=o.length;a<l;a++)this.apiPermissions[o[a].apiname]=o[a].status;zt({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:r,tunnelEndTime:t,tunnelStartTime:n,tunnelTimeNoCSNetCost:i.baseresponse.stat.qbase_cost_time})})).catch((e=>{console.error("cloud init error: ",e)}))}registerService(e,t){this.services[e.name]=e;var r=e.getAPIs();for(var n in r)if(this.apiServiceMap[n]=e.name,"function"==typeof r[n])this.registerFunction(n,!0,r[n],t);else{var{initRequired:i,fn:o}=r[n];this.registerFunction(n,i,o,t)}}registerFunction(e,t,r,n){var i=this,o=this.exportAPI;n&&(this.exportAPI[n]={},o=this.exportAPI[n]),o[e]=t?function(){if(!i.inited)throw new T({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!i.checkAPIPermission(e))throw new T({errCode:I.SDK_API_PERMISSION_DENIED,errMsg:I[I.SDK_API_PERMISSION_DENIED]});return r.apply(i,arguments)}:r}toJSON(){}}class nl extends rl{constructor(e,t,r){if(super(e,!0),this.defaultInstance=void 0,this.instanceOptions=void 0,this.webRequest=void 0,this._webCurrentRefreshTokenPromise=void 0,"web"===this.runtimeInfo.env){if(!r.identityless&&!r.appid)throw new Error("appid must be provided");if(!r.resourceAppid)throw new Error("resourceAppid must be provided")}if(!r.resourceEnv)throw new Error("resourceEnv must be provided");if(r.config||(r.config={}),this.defaultInstance=t,this.instanceOptions=JSON.parse(JSON.stringify(r)),this.meta=t.meta,this.apiPermissions=t.apiPermissions,this.instanceOptions.config.database=p(il(),this.instanceOptions.config.database||{}),"web"===this.runtimeInfo.env){if(this.exportAPI.init=this.webInit.bind(this),this.webRequest=(0,pn.getBoundAuthRequest)(this),this.registerService((0,pn.createWebService)(this)),!this.instanceOptions.identityless&&(this.authStorage=this.defaultInstance.authStorage,!this.authStorage))throw new Error("authStorage not found")}else this.exportAPI.init=this.miniprogramInit.bind(this);this.instanceOptions.resourceAppid&&(this.exportAPI.refreshAuth=this.refreshAuth.bind(this))}miniprogramInit(){var e=()=>super.init,t=this;return c()((function*(){if(!t.inited){if(t.instanceOptions.resourceAppid){var r=(yield t.refreshAuth()).data.env_auth_info;return 0===r.errCode?(e().call(t),{errCode:r.errCode,errMsg:r.errMsg,expireTime:1e3*r.expire_time}):{errCode:r.errCode,errMsg:r.errMsg}}e().call(t)}}))()}webInit(){var e=()=>super.init,t=this;return c()((function*(){if(!t.inited){if(!t.instanceOptions.identityless){var r=(yield t.refreshAuth()).data.env_auth_info;return 0===r.errCode?(t.sendInitRequest().then((()=>{t.testSpeed()})),e().call(t),{errCode:r.errCode,errMsg:r.errMsg,expireTime:1e3*r.expire_time}):{errCode:r.errCode,errMsg:r.errMsg}}t.inited=!0}}))()}webRefreshToken(){var e=this;return c()((function*(){return e._webCurrentRefreshTokenPromise||(e._webCurrentRefreshTokenPromise=new Promise(function(){var t=c()((function*(t,r){try{var n=(yield e.webRequest({url:"/refresh_token",method:"POST",json:{appid:e.instanceOptions.appid,refresh_token:e.authStorage.getItem("refreshToken")}})).data;e.authStorage.setItem("appid",n.access_token),t()}catch(e){r(e)}finally{e._webCurrentRefreshTokenPromise=void 0}}));return function(e,r){return t.apply(this,arguments)}}())),e._webCurrentRefreshTokenPromise}))()}refreshAuth(){var e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,r=t,n=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return n.then((e=>{var n=+new Date;zt({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:n,tunnelStartTime:r})})),n}}function il(){return{realtime:{maxReconnect:zs.REALTIME_DB_MAX_RECONNECT,reconnectInterval:zs.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:zs.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}var ol=Symbol("CDN");class al{constructor(e){this.symbol=ol,this.options=void 0,this.options=e}}function sl(e,t){return new Promise(((r,n)=>{(t||ne()).uploadToCommonCDN(s()(s()({},e),{},{success:r,fail:n}))}))}function ll(e,t){return new Promise(((r,n)=>{(t||ne()).invokeOperateWXData(s()(s()({},e),{},{success:r,fail:n}))}))}var ul,cl,dl,pl=function(){var e=c()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,r=[];e.data&&JSON.stringify(e.data,((n,i)=>i&&i.symbol===ol?void r.push(new Promise(((r,n)=>{var o,a={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=i;if("Object"===(o=s.options,Object.prototype.toString.call(o).slice(8,-1))){if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath}else a.fileData=s.options;r(sl(a,e.sdk).then((e=>{t.set(i,e.fileUrl)})))}))):i)),yield Promise.all(r);var n,i,o,a=JSON.stringify(e.data,((e,r)=>r&&r.symbol===ol&&t.has(r)?t.get(r):r)),{data:s}=yield ll({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:a,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:1}},e.sdk);try{var l=s;if(n=l.request_id,0===l.errcode)i=JSON.parse(l.data);else{var u=`invokeService:fail ${l.errcode} ${l.errmsg} (requestId: ${n})`;(o=new Error(u)).errCode=l.errcode,o.errMsg=u,o.requestId=n}}catch(p){var c=`invokeService:fail inner protocol parse failed (requestId: ${n||"empty"})`;(o=new Error(c)).errCode=-1,o.errMsg=c,o.requestId=n}if(o)throw o;return{errMsg:"invokeService:ok",data:i,requestId:n}}catch(e){var d="invokeService:fail ";if(e&&e.errMsg&&e.err_code){d+=e.errMsg;var p=new Error(d+`(err_code ${e.err_code})`);throw p.errCode=e.err_code,p}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}}));return function(t){return e.apply(this,arguments)}}();!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(ul||(ul={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(cl||(cl={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}(dl||(dl={}));var fl,hl={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},_l="exceed max timeout retry",gl="empty call result",vl="exceed max poll retry",ml="invokeService",yl=2e4;!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(fl||(fl={}));var bl=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},wl=e=>e.join("->"),Al=function(){var e=c()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,r=[];e.data&&JSON.stringify(e.data,((n,i)=>i&&i.symbol===ol?void r.push(new Promise(((r,n)=>{var o,a={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=i;if("Object"===(o=s.options,Object.prototype.toString.call(o).slice(8,-1))){if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath}else a.fileData=s.options;r(sl(a,e.sdk).then((e=>{t.set(i,e.fileUrl)})))}))):i)),yield Promise.all(r);var n=JSON.stringify(e.data,((e,r)=>r&&r.symbol===ol&&t.has(r)?t.get(r):r)),i=`${Math.random()}_${Date.now()}`;if(e.async){var o={service_id:e.service,api_name:e.api,data:n,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:i,scene:ul.CALL,retry_reason:cl.None,req_type:dl.LongAsync},a=(yield ll({apiName:"webapi_servicemarket_jsapi_comm",reqData:o},e.sdk)).data;if(a.scene===ul.FinalResp&&0===a.errcode)return{errMsg:"invokeService:ok",requestId:a.request_id};var l=O({errCode:hl.SM_SYSTEM_ERROR,errMsg:`requestID ${a.request_id}, error message ${a.errmsg||"unknown"} (callid ${i})`},ml);throw l.requestID=a.request_id,l}var{result:u,requestID:d}=yield function(e,t,r){return h.apply(this,arguments)}(e,n,i);return{errMsg:"invokeService:ok",data:u,requestId:d}}catch(e){var p="invokeService:fail ";if(e&&e.errMsg&&e.err_code){p+=e.errMsg;var f=new Error(p+`(err_code ${e.err_code})`);throw f.errCode=e.err_code,f}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}function h(){return h=c()((function*(e,t,r){return new Promise(((n,i)=>{var o=[bl("start")],{resolve:a,reject:s}=v(o,n,i);_({param:e,data:t,callID:r,scene:ul.CALL,retryReason:cl.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:o,resolve:a,reject:s})}))})),h.apply(this,arguments)}function _(e){return g.apply(this,arguments)}function g(){return g=c()((function*(t){var{param:r,data:n,callID:i,scene:o,retryReason:a,tryCount:l,trace:u,systemErrorRetry:d,timeoutErrorRetry:p,resolve:f,reject:h}=t,g={service_id:r.service,api_name:r.api,data:o===ul.CALL?n:void 0,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:i,scene:o,retry_reason:a},v=!1,m=!1,y=()=>{clearTimeout(w),m=!0},b=+new Date,w=setTimeout(c()((function*(){if(!(+new Date-b>2e4&&(yield de(),m))){if(!Bt()&&+new Date-b>60)return u.push(bl("timeout, exceed max retry gap")),h(O({errCode:hl.SM_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${i}) (trace: ${wl(u)})`},ml));v=!0,t.timeoutErrorRetry>0?(u.push(bl("timeout, retry")),_(s()(s()({},t),{},{scene:o,retryReason:cl.Timeout,tryCount:l-1,timeoutErrorRetry:p-1}))):(u.push(bl("timeout, abort")),h(O({errCode:hl.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`${_l} (callId: ${i}) (trace: ${wl(u)})`},ml)))}})),yl);try{var A=yield ll({apiName:"webapi_servicemarket_jsapi_comm",reqData:g},e.sdk);try{if(v)return;y();var E=A.data;if(!E&&A.rawData)try{E=JSON.parse(A.rawData)}catch(e){}if(!E)return u.push(bl("empty resp")),h(O({errCode:hl.SM_EMPTY_CALL_RESULT,errMsg:gl},ml));if(E.scene!==ul.PreResp){if(E.scene===ul.FinalResp){if(0!==E.errcode){var S=O({errCode:hl.SM_PROVIDER_EXECUTION_ERROR,errMsg:`requestID ${E.request_id}, error message ${E.provider_errmsg||"unknown"} (callid ${i})`},ml);return S.requestID=E.request_id,h(S)}var I=E.data;try{I=JSON.parse(I)}catch(e){}return f({result:I,requestID:E.request_id})}return u.push(bl("unexpected scene")),h(O({errCode:hl.SM_UNKNOWN_SCENE,errMsg:`unknown scene ${E.scene} (callId: ${i}) (trace: ${wl(u)})`},ml))}if(!(l>=0))return u.push(bl("too many polls, abort")),h(O({errCode:hl.SM_EXCEED_MAX_POLL_RETRY,errMsg:`${vl} (callId: ${i}) (trace: ${wl(u)})`},ml));u.push(bl("normal poll")),_(s()(s()({},t),{},{scene:ul.POLL,retryReason:cl.None,tryCount:l-1}))}catch(e){h(O({errCode:hl.SM_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${i})`},ml))}}catch(e){if(v)return;y();var T=e instanceof Error?e:JSON.stringify(e);e&&e.operateWXDataFail&&d>0?(u.push(bl(`system error (${T}), retry`)),_(s()(s()({},t),{},{scene:o,retryReason:cl.SysErr,tryCount:l-1,systemErrorRetry:d-1}))):(u.push(bl(`system error (${T}), abort`)),h(O(`${T} (callId: ${i}) (trace: ${wl(u)})`,ml)))}})),g.apply(this,arguments)}function v(e,t,r){var n=t=>{e.push(bl(`app ${t}`))};me(n);return{resolve:e=>{ye(n),t(e)},reject:e=>{ye(n),r(e)}}}}));return function(t){return e.apply(this,arguments)}}();function El(e){return Sl.apply(this,arguments)}function Sl(){return(Sl=c()((function*(e){var t=(yield ll({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}},e.sdk)).data;if(0===t.errcode)return t.provider_errmsg?{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:t.status,providerErrMsg:t.provider_errmsg,requestId:t.request_id}:{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(t.data),status:t.status,requestId:t.request_id};var r=new Error(`getAsyncResult:fail requestID ${t.request_id}, error message ${t.errmsg||"unknown"}`);throw r.errCode=t.errcode,r.errMsg=t.errmsg,r}))).apply(this,arguments)}var Il="invokeService",Tl="getAsyncResult",Cl=e=>{(Bt()&&!e.async?pl(e):Al(e)).then((t=>{G(Il,e,t)})).catch((t=>{Q(Il,e,t)}))},Ol=e=>{El(e).then((t=>{G(Tl,e,t)})).catch((t=>{Q(Tl,e,t)}))};function Nl(e={}){var{sdk:t}=e;return{invokeService:e=>(e=>z(e)?Cl(e):Bt()&&!e.async?pl(e):Al(e))(s()(s()({},e),{},{sdk:t})),getAsyncResult:e=>(e=>z(e)?Ol(e):El(e))(s()(s()({},e),{},{sdk:t})),CDN:al}}})(),P=n})();var D=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){var n=r(1),i=r(3),o=r(5),a=r(6),s=r(7),l=r(9),u=r(10),c=r(16),d=r(13),p=r(18),f=r(19),h=r(20),_=r(17),g=r(11),v=r(21),m=r(15),y=r(4),b=r(14),w=r(22);t.FreeTmpl=w,t.precompileTemplate=w.precompiler?w.precompiler.compile:null,t.precompiler=w.precompiler?w.precompiler:null,t.HtmlLLParser=w.htmlParser?w.htmlParser:null,t.LLParser=n,t.dataPath=s,t.dataUtils=o,t.Event=a,t.Element=u,t.TextNode=d,t.NativeNode=p,t.VirtualNode=f,t.ShadowRoot=h,t.Behavior=l,t.Component=c,t.Observer=g,t.DataGroup=_,t.ElementIterator=v,t.FakeDomElement=m,t.registerBehavior=l.create,t.registerElement=c.register,t.createElement=c.create,t.createTextNode=d.create,t.createVirtualNode=f.create,t.appendChild=u.appendChild,t.insertBefore=u.insertBefore,t.removeChild=u.removeChild,t.replaceChild=u.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.safeCallback=i.safeCallback,t.addGlobalErrorListener=i.addGlobalErrorListener,t.removeGlobalErrorListener=i.removeGlobalErrorListener,t.addGlobalWarningListener=i.addGlobalWarningListener,t.removeGlobalWarningListener=i.removeGlobalWarningListener,t.globalOptions=y,t.globalState=b,c._setDefaultTemplateEngine(w),(t.updateDefaultComponent=function(){delete c._list[""],c.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})})();var A=function(e){var t="";if(e instanceof D.Element&&(e.id&&(t+=' id="'+e.id+'"'),e.slot&&(t+=' slot="'+e.slot+'"'),e.__slotName&&(t+=' name="'+e.__slotName+'"'),e.classList&&(t+=' class="'+e.class+'"'),e.$$&&e.$$.getAttribute("style")&&(t+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof D.VirtualNode)return t;if(e instanceof D.Component)return c.listPublicProperties(e).forEach((function(r){t+=" "+r+"="+JSON.stringify(e[r])})),t;for(var r=e.attributes,n=0;n<r.length;n++)t+=" "+r[n].name+'="'+r[n].value+'"';return t},E=t.dumpElementToString=function(e,t,r){var n=null;y.hasDOMBackend&&(n=window);var i=0,o="";for(i=r=r||0;i;i--)o+="  ";var a="";if(e instanceof D.Element)a+=o+"<"+(e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+A(e)+">",e instanceof D.VirtualNode?a+=" [Exp-Virtual]":e instanceof D.NativeNode?a+=" [Exp-Native]":a+=" [Exp-Component]",a+="\n"+E(t?e.__wxSlotChildren:e.childNodes,t,r+1);else if(e instanceof D.TextNode)a+=o+e.textContent+" [Exp-Text]\n";else if(n&&n.HTMLElement&&e instanceof n.HTMLElement)a+=o+"<"+e.tagName.toLowerCase()+A(e)+"> [DOM-Element]",a+="\n"+E(t&&e.__wxSlotChildren||e.childNodes,t,r+1);else if(n&&n.Text&&e instanceof n.Text)a+=o+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(i=0;i<e.length;i++)a+=E(e[i],t,r);else a=o+"[unknown node]\n";return a};t.dumpElement=function(e,t){console.log(E(e,t))}},function(e,t,r){var n=null,i=function(){},o=i.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return n.llparser_create_descriptor(e,1)},s=function(e,t){var r=n.llparser_create_descriptor(e,0),i=!1;"^"===t[0]&&(i=!0);for(var o=i?1:0;o<t.length;o++){var a=t.charCodeAt(o);if("-"===t[o+1]){var s=t.charCodeAt(o+2);a<=s?(n.llparser_descriptor_add_range(r,a,s),o+=2):n.llparser_descriptor_add_char(r,a)}else n.llparser_descriptor_add_char(r,a)}return i&&n.llparser_descriptor_revert(r),r};i.create=function(e,t,o){n||(n=r(2));var l=new i;o=o||16384;var u=l._llp=n.llparser_create(o,128,128),c={},d={},p="";for(p in c.ALL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_all(c.ALL),c.NULL=n.llparser_create_descriptor(u,0),n.llparser_descriptor_set_nil(c.NULL),e)c[p]=a(u);for(p in e)for(var f=e[p],h=c[p],_=0;_<f.length;_++){for(var g=f[_].id,v=f[_].states,m=[],y=0;y<v.length;y++){var b=v[y];c[b]||(c[b]=s(u,b)),m.push(c[b])}var w=0;"_raw"===g?w=1:"_jump"===g?w=65536:"_blank"===g&&(w=65537);var A=n.llparser_add_rule(u,w,h,m.length,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]);0===w&&(d[A]=t[g])}return n.llparser_prepare(u),l._inputPtr=n.llparser_get_input_buffer(u),l._resultPtr=n.llparser_get_result(u),l._stateIdMap=c,l._ruleCbMap=d,l._charCountLimit=o,l};i.prototype.parse=function(e,t){var r=Date.now();!function(e,t,r,n){for(var i=n>e.length?e.length:n,o=0;o<i;o++)t[r+o]=e.charCodeAt(o);t[r+i]=0}(t,new Uint16Array(n.memory.buffer),this._inputPtr>>1,this._charCountLimit),o.copyIn=o.copyIn+Date.now()-r,r=Date.now();var i=n.llparser_parse(this._llp,this._stateIdMap[e]);if(o.parse=o.parse+Date.now()-r,r=Date.now(),i)throw new Error("Parsing failed at character position "+(i-1)+' near "'+t.slice(i-20,i)+'"');var a=function(e,t,r,n,i){for(var o=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,l=i.pos,u=!1,c=!1,d=!1;;){var p=t[l],f=t[l+1];if(f<0?(c=!0,f=-f-1):c=!1,p>=0){d=!0;var h=r.slice(p,f);s.c.push(h),u=c}else{if(-1===p&&0===f)break;d=!1;var _=-p,g=f,v={i:s.c.length-(u?1:0),r:_,n:c,cc:g,c:[]};if(u){var m=s.c.length-1,y=s.c[m];v.c.push(y),s.c[m]=v}else s.c.push(v);o.push(s),s=v,u=!1}if(!d||!u)for(;s.c.length===s.cc;){u=s.n;var b=o.pop();if(b.c[s.i]=n[s.r].call(e,s.c),s=b,u)break}l+=2}return a.c[0]}(this,new Int32Array(n.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return o.constructOut=o.constructOut+Date.now()-r,a},i.prototype.destroy=function(){n.llparser_destroy(this._llp)},e.exports=i},function(e,t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r){return v.llparser_create(e,t,r)}function i(e){v.llparser_destroy(e)}function o(e,t){return v.llparser_create_descriptor(e,t)}function a(e){v.llparser_descriptor_set_all(e)}function s(e){v.llparser_descriptor_set_nil(e)}function l(e,t){v.llparser_descriptor_add_char(e,t)}function u(e,t,r){v.llparser_descriptor_add_range(e,t,r)}function c(e){v.llparser_descriptor_revert(e)}function d(e,t,r,n,i,o,a,s,l,u,c,d){return v.llparser_add_rule(e,t,r,n,i,o,a,s,l,u,c,d)}function p(e){v.llparser_prepare(e)}function f(e,t){return v.llparser_parse(e,t)}function h(e){return v.llparser_get_input_buffer(e)}function _(e){return v.llparser_get_result(e)}function g(){v.wasm_main()}r.r(t),r.d(t,"llparser_create",(function(){return n})),r.d(t,"llparser_destroy",(function(){return i})),r.d(t,"llparser_create_descriptor",(function(){return o})),r.d(t,"llparser_descriptor_set_all",(function(){return a})),r.d(t,"llparser_descriptor_set_nil",(function(){return s})),r.d(t,"llparser_descriptor_add_char",(function(){return l})),r.d(t,"llparser_descriptor_add_range",(function(){return u})),r.d(t,"llparser_descriptor_revert",(function(){return c})),r.d(t,"llparser_add_rule",(function(){return d})),r.d(t,"llparser_prepare",(function(){return p})),r.d(t,"llparser_parse",(function(){return f})),r.d(t,"llparser_get_input_buffer",(function(){return h})),r.d(t,"llparser_get_result",(function(){return _})),r.d(t,"wasm_main",(function(){return g})),r.d(t,"memory",(function(){return m}));var v=r(1),m=v.memory;v.__wbindgen_start()},function(e,t,r){"use strict";r.r(t),r.d(t,"memory",(function(){return o})),r.d(t,"rust_calloc",(function(){return a})),r.d(t,"rust_free",(function(){return s})),r.d(t,"llparser_create",(function(){return l})),r.d(t,"llparser_destroy",(function(){return u})),r.d(t,"llparser_create_descriptor",(function(){return c})),r.d(t,"llparser_descriptor_set_all",(function(){return d})),r.d(t,"llparser_descriptor_set_nil",(function(){return p})),r.d(t,"llparser_descriptor_add_char",(function(){return f})),r.d(t,"llparser_descriptor_add_range",(function(){return h})),r.d(t,"llparser_descriptor_revert",(function(){return _})),r.d(t,"llparser_add_rule",(function(){return g})),r.d(t,"llparser_prepare",(function(){return v})),r.d(t,"llparser_parse",(function(){return m})),r.d(t,"llparser_get_input_buffer",(function(){return y})),r.d(t,"llparser_get_result",(function(){return b})),r.d(t,"wasm_main",(function(){return w})),r.d(t,"__wbindgen_start",(function(){return A}));var n=new ArrayBuffer(1114112),i=function(e,t,r){var n=new e.Int8Array(r),i=(new e.Int16Array(r),new e.Int32Array(r)),o=new e.Uint8Array(r),a=new e.Uint16Array(r),s=new e.Uint32Array(r),l=(new e.Float32Array(r),new e.Float64Array(r),e.Math.imul),u=(e.Math.fround,e.Math.abs,e.Math.clz32),c=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);function d(e){var t=0,r=0,n=0,o=0,a=0,s=0,l=0;r=(t=e+-8|0)+(e=-8&(o=i[e+-4>>2]))|0;e:{t:{r:{n:{i:if(!(1&o)){if(!(3&o))break n;if(e=(o=i[t>>2])+e|0,(0|(t=t-o|0))==i[262246]){if(3!=(3&i[r+4>>2]))break i;return i[262244]=e,i[r+4>>2]=-2&i[r+4>>2],i[t+4>>2]=1|e,void(i[e+t>>2]=e)}o>>>0>=256?g(t):(0|(n=i[t+8>>2]))==(0|(a=i[t+12>>2]))?(s=1048576,l=i[262144]&b(o>>>3),i[s>>2]=l):(i[n+12>>2]=a,i[a+8>>2]=n)}if(2&(o=i[r+4>>2]))i[r+4>>2]=-2&o,i[t+4>>2]=1|e,i[e+t>>2]=e;else{i:{if(i[262247]!=(0|r)){if((0|r)!=i[262246])break i;return i[262246]=t,e=i[262244]+e|0,i[262244]=e,i[t+4>>2]=1|e,void(i[e+t>>2]=e)}if(i[262247]=t,e=i[262245]+e|0,i[262245]=e,i[t+4>>2]=1|e,(0|t)==i[262246]&&(i[262244]=0,i[262246]=0),(r=i[262254])>>>0>=e>>>0)break n;if(!(e=i[262247]))break n;o:if(!((o=i[262245])>>>0<41))for(t=1049e3;;){if((n=i[t>>2])+i[t+4>>2]>>>0>e>>>0&&n>>>0<=e>>>0)break o;if(!(t=i[t+8>>2]))break}if(n=4095,e=i[262252]){for(t=0;t=t+1|0,e=i[e+8>>2];);n=t>>>0>4095?t:4095}if(i[262256]=n,o>>>0<=r>>>0)break n;return void(i[262254]=-1)}if(e=(n=-8&o)+e|0,n>>>0>=256?g(r):(0|(n=i[r+12>>2]))==(0|(r=i[r+8>>2]))?(s=1048576,l=i[262144]&b(o>>>3),i[s>>2]=l):(i[r+12>>2]=n,i[n+8>>2]=r),i[t+4>>2]=1|e,i[e+t>>2]=e,i[262246]==(0|t)){i[262244]=e;break n}}if(e>>>0<256)break r;if(_(t,e),e=i[262256]+-1|0,i[262256]=e,!e){if(e=i[262252])break t;e=4095;break e}}return}return e=1048584+((r=e>>>3)<<3)|0,o=i[262144],r=1<<(31&r),n=i[e+8>>2],o&r||(i[262144]=r|o,n=e),r=n,i[e+8>>2]=t,i[r+12>>2]=t,i[t+12>>2]=e,void(i[t+8>>2]=r)}for(t=0;t=t+1|0,e=i[e+8>>2];);e=t>>>0>4095?t:4095}i[262256]=e}function p(e,t,r,n,o,a,s,u,d,p,f,h){var _;return c=_=c+-64|0,i[_+60>>2]=e,i[_+56>>2]=t,i[_+52>>2]=r,i[_+48>>2]=n,i[_+44>>2]=o,i[_+40>>2]=a,i[_+36>>2]=s,i[_+32>>2]=u,i[_+28>>2]=d,i[_+24>>2]=p,i[_+20>>2]=f,i[_+16>>2]=h,t=i[i[_+60>>2]+28>>2],r=i[_+60>>2],e=i[r>>2],i[r>>2]=e+1,i[_+12>>2]=t+l(e,44),i[i[_+12>>2]>>2]=i[_+52>>2],i[i[_+12>>2]+4>>2]=i[_+48>>2],i[_+48>>2]>0&&(i[i[_+12>>2]+8>>2]=i[_+44>>2]),i[_+48>>2]>1&&(i[i[_+12>>2]+12>>2]=i[_+40>>2]),i[_+48>>2]>2&&(i[i[_+12>>2]+16>>2]=i[_+36>>2]),i[_+48>>2]>3&&(i[i[_+12>>2]+20>>2]=i[_+32>>2]),i[_+48>>2]>4&&(i[i[_+12>>2]+24>>2]=i[_+28>>2]),i[_+48>>2]>5&&(i[i[_+12>>2]+28>>2]=i[_+24>>2]),i[_+48>>2]>6&&(i[i[_+12>>2]+32>>2]=i[_+20>>2]),i[_+48>>2]>7&&(i[i[_+12>>2]+36>>2]=i[_+16>>2]),i[i[_+12>>2]+40>>2]=i[_+56>>2],i[_+48>>2]>0&&function(e,t,r){var n;i[28+(n=c-32|0)>>2]=e,i[n+24>>2]=t,i[n+20>>2]=r,i[n+16>>2]=(i[n+20>>2]-i[i[n+28>>2]+24>>2]|0)/140,1==i[i[n+20>>2]+4>>2]&&(t=i[i[n+28>>2]+40>>2],r=i[n+28>>2],e=i[r+8>>2],i[r+8>>2]=e+1,i[n+12>>2]=t+(e<<3),i[i[n+12>>2]>>2]=i[n+24>>2],i[i[n+12>>2]+4>>2]=i[i[n+20>>2]+136>>2],i[i[n+20>>2]+136>>2]=i[n+12>>2])}(i[_+60>>2],i[_+12>>2],i[_+52>>2]),c=_- -64|0,i[_+12>>2]}function f(e,t,r,n,a){var l;if(c=l=c-48|0,i[l+44>>2]=e,i[l+40>>2]=t,i[l+36>>2]=r,i[l+32>>2]=n,i[l+28>>2]=a,i[i[l+40>>2]>>2]!=i[l+36>>2])for(i[i[l+40>>2]>>2]=i[l+36>>2],i[l+24>>2]=i[i[l+40>>2]+136>>2],i[l+20>>2]=1&(0!=i[l+28>>2]^-1^-1);i[l+24>>2];){for(i[l+20>>2]||(i[l+28>>2]=i[l+24>>2]),i[l+16>>2]=i[i[i[l+24>>2]>>2]+8>>2],1==i[i[l+16>>2]+4>>2]&&f(i[l+44>>2],i[l+16>>2],i[l+36>>2],i[l+32>>2],i[l+28>>2]),i[l+12>>2]=0;!(i[l+12>>2]>=128);)o[i[l+12>>2]+(i[l+16>>2]+8|0)|0]&&(s[i[l+28>>2]>>2]>=s[i[l+32>>2]+(i[l+12>>2]<<2)>>2]&&i[i[l+32>>2]+(i[l+12>>2]<<2)>>2]||(i[i[l+32>>2]+(i[l+12>>2]<<2)>>2]=i[i[l+28>>2]>>2])),i[l+12>>2]=i[l+12>>2]+1;i[l+24>>2]=i[i[l+24>>2]+4>>2]}c=l+48|0}function h(e,t,r,n){var a;for(i[44+(a=c-48|0)>>2]=e,i[a+40>>2]=t,i[a+36>>2]=r,i[a+32>>2]=n,i[a+28>>2]=i[i[a+40>>2]+136>>2];i[a+28>>2];){if(i[a+24>>2]=i[i[i[a+28>>2]>>2]+8>>2],i[a+24>>2]==i[a+40>>2])for(i[a+20>>2]=i[i[i[a+28>>2]>>2]+12>>2],i[a+16>>2]=0;!(i[a+16>>2]>=128);){e:{if(1!=i[i[a+20>>2]+4>>2]){if(!o[i[a+16>>2]+(i[a+20>>2]+8|0)|0])break e}else if(i[a+12>>2]=i[i[a+44>>2]+32>>2]+((i[a+20>>2]-i[i[a+44>>2]+24>>2]|0)/140<<9),!i[i[a+12>>2]+(i[a+16>>2]<<2)>>2])break e;s[i[a+28>>2]>>2]>=s[i[a+32>>2]+(i[a+16>>2]<<2)>>2]&&i[i[a+32>>2]+(i[a+16>>2]<<2)>>2]||(i[i[a+32>>2]+(i[a+16>>2]<<2)>>2]=i[i[a+28>>2]>>2])}i[a+16>>2]=i[a+16>>2]+1}i[a+28>>2]=i[i[a+28>>2]+4>>2]}}function _(e,t){var r=0,n=0,o=0,a=0;i[e+16>>2]=0,i[e+20>>2]=0,o=e,r=0,(n=t>>>8)&&(r=31,t>>>0>16777215||(r=62+((t>>>(6-(n=u(n))&31)&1)-(n<<1)|0)|0)),i[o+28>>2]=r,o=1048848+(r<<2)|0;e:{t:{r:{n:{if((a=i[262145])&(n=1<<(31&r))){if(n=i[o>>2],(-8&i[n+4>>2])!=(0|t))break n;r=n;break r}i[262145]=n|a,i[o>>2]=e,i[e+24>>2]=o;break e}for(o=t<<(31==(0|r)?0:25-(r>>>1)&31);;){if(!(r=i[(a=16+((o>>>29&4)+n|0)|0)>>2]))break t;if(o<<=1,n=r,(-8&i[r+4>>2])==(0|t))break}}return t=i[r+8>>2],i[t+12>>2]=e,i[r+8>>2]=e,i[e+24>>2]=0,i[e+12>>2]=r,void(i[e+8>>2]=t)}i[a>>2]=e,i[e+24>>2]=n}i[e+12>>2]=e,i[e+8>>2]=e}function g(e){var t,r=0,n=0,o=0,a=0,s=0,l=0;t=i[e+24>>2];e:{t:{if((0|e)==(0|(r=i[e+12>>2]))){if(o=i[(r=e+20|0)>>2],n=i[(o?20:16)+e>>2])break t;r=0;break e}n=i[e+8>>2],i[n+12>>2]=r,i[r+8>>2]=n;break e}for(o=o?r:e+16|0;a=o,(n=i[(o=(r=n)+20|0)>>2])||(o=r+16|0,n=i[r+16>>2]),n;);i[a>>2]=0}e:if(t){n=1048848+(i[e+28>>2]<<2)|0;t:{if((0|e)==i[n>>2]){if(i[n>>2]=r,r)break t;return s=1048580,l=i[262145]&b(i[e+28>>2]),void(i[s>>2]=l)}if(i[(i[t+16>>2]==(0|e)?16:20)+t>>2]=r,!r)break e}i[r+24>>2]=t,(n=i[e+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),(e=i[e+20>>2])&&(i[r+20>>2]=e,i[e+24>>2]=r)}}function v(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,r=0,n=0,o=0,a=0,l=0,c=0,d=0,p=0,f=0,h=0;e:{t:{r:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(d=i[262145]))break r;r=0-o|0,c=0,(e>>>=8)&&(c=31,o>>>0>16777215||(c=62+((o>>>(6-(e=u(e))&31)&1)-(e<<1)|0)|0));n:{i:{if(e=i[1048848+(c<<2)>>2]){for(a=o<<(31==(0|c)?0:25-(c>>>1)&31);;){if(!((l=-8&i[e+4>>2])>>>0<o>>>0||(l=l-o|0)>>>0>=r>>>0||(n=e,r=l))){r=0;break i}if(l=i[e+20>>2],e=i[16+((a>>>29&4)+e|0)>>2],t=l&&(0|l)!=(0|e)?l:t,a<<=1,!e)break}if(t){e=t;break i}if(n)break n}if(n=0,!(e=(0-(e=2<<(31&c))|e)&d))break r;if(!(e=i[1048848+(y(e&0-e)<<2)>>2]))break r}for(;n=(l=(a=(t=-8&i[e+4>>2])-o|0)>>>0<r>>>0&t>>>0>=o>>>0)?e:n,r=l?a:r,e=(t=i[e+16>>2])||i[e+20>>2];);if(!n)break r}if(r>>>0>=(e=i[262244])-o>>>0&&e>>>0>=o>>>0)break r;g(n);n:if(r>>>0>=16){if(i[n+4>>2]=3|o,i[4+(t=n+o|0)>>2]=1|r,i[t+r>>2]=r,r>>>0>=256){_(t,r);break n}e=1048584+((r>>>=3)<<3)|0,a=i[262144],r=1<<(31&r),c=i[e+8>>2],a&r||(i[262144]=r|a,c=e),r=c,i[e+8>>2]=t,i[r+12>>2]=t,i[t+12>>2]=e,i[t+8>>2]=r}else e=r+o|0,i[n+4>>2]=3|e,i[4+(e=e+n|0)>>2]=1|i[e+4>>2];return n+8|0}n:{i:{if(!(3&(e=(t=i[262144])>>>(n=31&(r=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=s[262244])break r;if(e)break i;if(!(e=i[262145]))break r;for(t=i[1048848+(y(e&0-e)<<2)>>2],r=(-8&i[t+4>>2])-o|0,a=t;;){if(!(e=i[t+16>>2])&&!(e=i[t+20>>2]))break n;r=(t=(n=(-8&i[e+4>>2])-o|0)>>>0<r>>>0)?n:r,a=t?e:a,t=e}}r=(e=i[1048592+(l=(n=r+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(a=i[e+8>>2]))==(0|(l=l+1048584|0))?(f=1048576,h=b(n)&t,i[f>>2]=h):(i[a+12>>2]=l,i[l+8>>2]=a),t=n<<3,i[e+4>>2]=3|t,i[4+(e=e+t|0)>>2]=1|i[e+4>>2];break t}return n=y(0-(e=(r=e<<n)&(0-(e=2<<n)|e))&e),e=i[1048592+(a=n<<3)>>2],(0|(r=i[e+8>>2]))==(0|(a=a+1048584|0))?(f=1048576,h=b(n)&t,i[f>>2]=h):(i[r+12>>2]=a,i[a+8>>2]=r),a=e+8|0,i[e+4>>2]=3|o,r=(t=n<<3)-o|0,i[4+(l=e+o|0)>>2]=1|r,i[e+t>>2]=r,(e=i[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=i[262246],o=i[262144],n=1<<(31&n),c=i[e+8>>2],o&n||(i[262144]=n|o,c=e),n=c,i[e+8>>2]=t,i[n+12>>2]=t,i[t+12>>2]=e,i[t+8>>2]=n),i[262246]=l,i[262244]=r,a}return g(a),r>>>0>=16?(i[a+4>>2]=3|o,i[4+(l=o+a|0)>>2]=1|r,i[r+l>>2]=r,(e=i[262244])&&(e=1048584+((n=e>>>3)<<3)|0,t=i[262246],o=i[262144],n=1<<(31&n),c=i[e+8>>2],o&n||(i[262144]=n|o,c=e),n=c,i[e+8>>2]=t,i[n+12>>2]=t,i[t+12>>2]=e,i[t+8>>2]=n),i[262246]=l,i[262244]=r):(e=r+o|0,i[a+4>>2]=3|e,i[4+(e=e+a|0)>>2]=1|i[e+4>>2]),a+8|0}r:{n:{i:{o:{if((t=i[262244])>>>0<o>>>0){if((e=i[262245])>>>0>o>>>0)break e;if(r=0,-1==(0|(t=w((e=o+65583|0)>>>16))))break t;if(!(n=t<<16))break t;if(e=(a=-65536&e)+i[262248]|0,i[262248]=e,t=i[262249],i[262249]=t>>>0>e>>>0?t:e,!(r=i[262247]))break o;for(e=1049e3;;){if((0|n)==((t=i[e>>2])+(l=i[e+4>>2])|0))break i;if(!(e=i[e+8>>2]))break}break n}return e=i[262246],(n=t-o|0)>>>0<=15?(i[262246]=0,i[262244]=0,i[e+4>>2]=3|t,o=4+(t=e+t|0)|0,r=1|i[t+4>>2]):(i[262244]=n,r=e+o|0,i[262246]=r,i[r+4>>2]=1|n,i[e+t>>2]=n,r=3|o,o=e+4|0),i[o>>2]=r,e+8|0}for((e=i[262255])>>>0<=n>>>0&&e||(i[262255]=n),e=0,i[262256]=4095,i[262251]=a,i[262250]=n,i[262253]=0;t=e+1048584|0,i[e+1048592>>2]=t,i[e+1048596>>2]=t,256!=(0|(e=e+8|0)););i[262247]=n,e=a+-40|0,i[262245]=e,i[n+4>>2]=1|e,i[4+(e+n|0)>>2]=40,i[262254]=2097152;break r}if(!(i[e+12>>2]|n>>>0<=r>>>0|t>>>0>r>>>0)){i[e+4>>2]=a+l,t=(e=i[262247])+15&-8,i[262247]=t+-8,r=8+((n=a+i[262245]|0)+(e-t|0)|0)|0,i[262245]=r,i[t+-4>>2]=1|r,i[4+(e+n|0)>>2]=40,i[262254]=2097152;break r}}e=i[262255],i[262255]=e>>>0<n>>>0?e:n,t=n+a|0,e=1049e3;n:{for(;;){if((0|t)!=i[e>>2]){if(e=i[e+8>>2])continue;break n}break}if(!i[e+12>>2]){i[e>>2]=n,i[e+4>>2]=a+i[e+4>>2],i[n+4>>2]=3|o,a=n+o|0,o=(t-n|0)-o|0;i:{o:{if((0|t)!=i[262247]){if(i[262246]==(0|t))break o;if(1==(3&(e=i[t+4>>2]))&&((r=-8&e)>>>0>=256?g(t):(0|(l=i[t+12>>2]))==(0|(c=i[t+8>>2]))?(f=1048576,h=i[262144]&b(e>>>3),i[f>>2]=h):(i[c+12>>2]=l,i[l+8>>2]=c),o=r+o|0,t=t+r|0),i[t+4>>2]=-2&i[t+4>>2],i[a+4>>2]=1|o,i[o+a>>2]=o,o>>>0>=256){_(a,o);break i}e=1048584+((t=o>>>3)<<3)|0,r=i[262144],t=1<<(31&t),c=i[e+8>>2],r&t||(i[262144]=t|r,c=e),r=c,i[e+8>>2]=a,i[r+12>>2]=a,i[a+12>>2]=e,i[a+8>>2]=r;break i}i[262247]=a,e=i[262245]+o|0,i[262245]=e,i[a+4>>2]=1|e;break i}i[262246]=a,e=i[262244]+o|0,i[262244]=e,i[a+4>>2]=1|e,i[e+a>>2]=e}return n+8|0}}for(e=1049e3;!((t=i[e>>2])>>>0<=r>>>0&&(l=t+i[e+4>>2]|0)>>>0>r>>>0);)e=i[e+8>>2];for(i[262247]=n,e=a+-40|0,i[262245]=e,i[n+4>>2]=1|e,i[4+(e+n|0)>>2]=40,i[262254]=2097152,i[(t=(e=(l+-32&-8)-8|0)>>>0<r+16>>>0?r:e)+4>>2]=27,e=i[262250],c=i[262251],p=i[262253],i[(d=t+16|0)>>2]=i[262252],i[d+4>>2]=p,i[t+8>>2]=e,i[t+12>>2]=c,i[262251]=a,i[262250]=n,i[262252]=t+8,i[262253]=0,e=t+28|0;i[e>>2]=7,l>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|r)&&(i[t+4>>2]=-2&i[t+4>>2],e=t-r|0,i[r+4>>2]=1|e,i[t>>2]=e,e>>>0>=256?_(r,e):(e=1048584+((t=e>>>3)<<3)|0,n=i[262144],t=1<<(31&t),c=i[e+8>>2],n&t||(i[262144]=t|n,c=e),t=c,i[e+8>>2]=r,i[t+12>>2]=r,i[r+12>>2]=e,i[r+8>>2]=t))}if(r=0,!((e=i[262245])>>>0<=o>>>0))break e}return r}return t=e-o|0,i[262245]=t,n=(e=i[262247])+o|0,i[262247]=n,i[n+4>>2]=1|t,i[e+4>>2]=3|o,e+8|0}(e))|!(3&o[t+-4|0])||function(e,t){if(t)for(;n[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(l(e|=0,t|=0))}function m(){}function y(e){return e?31-u(e+-1^e)|0:32}function b(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function w(t){t|=0;var u=0|r.byteLength/65536,c=u+t|0;if(u<c&&c<65536){var d=new ArrayBuffer(l(c,65536)),p=new e.Int8Array(d);p.set(n),n=p,n=new e.Int8Array(d),new e.Int16Array(d),i=new e.Int32Array(d),o=new e.Uint8Array(d),a=new e.Uint16Array(d),s=new e.Uint32Array(d),new e.Float32Array(d),new e.Float64Array(d),r=d}return u}return{memory:Object.create(Object.prototype,{grow:{value:w},buffer:{get:function(){return r}}}),rust_calloc:v,rust_free:function(e){d(e|=0)},llparser_create:function(e,t,r){return 0|function(e,t,r){var n,o,a;return c=n=c-32|0,i[n+28>>2]=e,i[n+24>>2]=t,i[n+20>>2]=r,e=n,t=i[n+28>>2]?i[n+28>>2]:256,i[e+28>>2]=t,e=n,t=i[n+24>>2]?i[n+24>>2]:256,i[e+24>>2]=t,e=n,t=i[n+20>>2]?i[n+20>>2]:256,i[e+20>>2]=t,o=n,a=v(((((((l(i[n+24>>2],140)+52|0)+l(i[n+20>>2],44)|0)+(i[n+24>>2]<<9)|0)+(i[n+24>>2]<<9)|0)+l(i[n+20>>2],i[n+24>>2]<<3)|0)+(i[n+28>>2]<<1)|0)+(i[n+28>>2]<<3)|0,1),i[o+16>>2]=a,i[i[n+16>>2]+12>>2]=i[n+28>>2],i[i[n+16>>2]+16>>2]=i[n+24>>2],i[i[n+16>>2]+20>>2]=i[n+20>>2],i[i[n+16>>2]+4>>2]=0,i[i[n+16>>2]>>2]=0,i[i[n+16>>2]+8>>2]=0,i[n+12>>2]=i[n+16>>2]+52,i[i[n+16>>2]+24>>2]=i[n+12>>2],i[n+12>>2]=i[n+12>>2]+l(i[n+24>>2],140),i[i[n+16>>2]+28>>2]=i[n+12>>2],i[n+12>>2]=i[n+12>>2]+l(i[n+20>>2],44),i[i[n+16>>2]+32>>2]=i[n+12>>2],i[n+12>>2]=i[n+12>>2]+(i[n+24>>2]<<9),i[i[n+16>>2]+36>>2]=i[n+12>>2],i[n+12>>2]=i[n+12>>2]+(i[n+24>>2]<<9),i[i[n+16>>2]+40>>2]=i[n+12>>2],i[n+12>>2]=i[n+12>>2]+l(i[n+20>>2],i[n+24>>2]<<3),i[i[n+16>>2]+44>>2]=i[n+12>>2],i[n+12>>2]=i[n+12>>2]+(i[n+28>>2]<<1),i[i[n+16>>2]+48>>2]=i[n+12>>2],c=n+32|0,i[n+16>>2]}(e|=0,t|=0,r|=0)},llparser_destroy:function(e){!function(e){var t;c=t=c-16|0,i[t+12>>2]=e,d(i[t+12>>2]),c=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var r,n;return i[12+(r=c-16|0)>>2]=e,i[r+8>>2]=t,t=i[i[r+12>>2]+24>>2],n=i[r+12>>2],e=i[n+4>>2],i[n+4>>2]=e+1,i[r+4>>2]=t+l(e,140),i[i[r+4>>2]+4>>2]=i[r+8>>2]?1:0,i[r+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,i[12+(t=c-16|0)>>2]=e,i[i[t+12>>2]+4>>2]=-1,n[i[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,i[12+(t=c-16|0)>>2]=e,i[i[t+12>>2]+4>>2]=-2,n[i[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var r;i[12+(r=c-16|0)>>2]=e,i[r+8>>2]=t,n[i[r+8>>2]+(i[r+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,r){!function(e,t,r){var o;for(i[12+(o=c-16|0)>>2]=e,i[o+8>>2]=t,i[o+4>>2]=r,i[o>>2]=i[o+8>>2];!(i[o>>2]>i[o+4>>2]);)n[i[o>>2]+(i[o+12>>2]+8|0)|0]=1,i[o>>2]=i[o>>2]+1}(e|=0,t|=0,r|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(i[12+(t=c-16|0)>>2]=e,i[t+8>>2]=1;!(i[t+8>>2]>=127);)n[i[t+8>>2]+(i[t+12>>2]+8|0)|0]=1&(0!=o[i[t+8>>2]+(i[t+12>>2]+8|0)|0]^-1),i[t+8>>2]=i[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,r,n,i,o,a,s,l,u,c,d){return 0|p(e|=0,t|=0,r|=0,n|=0,i|=0,o|=0,a|=0,s|=0,l|=0,u|=0,c|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(c=t=c-32|0,i[t+28>>2]=e,i[t+24>>2]=0;!(i[t+24>>2]>=i[i[t+28>>2]+4>>2]);)i[t+20>>2]=i[i[t+28>>2]+24>>2]+l(i[t+24>>2],140),1==i[i[t+20>>2]+4>>2]&&f(i[t+28>>2],i[t+20>>2],i[t+20>>2],i[i[t+28>>2]+32>>2]+(i[t+24>>2]<<9)|0,0),i[t+24>>2]=i[t+24>>2]+1;for(i[t+16>>2]=0;!(i[t+16>>2]>=i[i[t+28>>2]+4>>2]);)i[t+12>>2]=i[i[t+28>>2]+24>>2]+l(i[t+16>>2],140),1==i[i[t+12>>2]+4>>2]&&(i[i[t+12>>2]>>2]=0,h(i[t+28>>2],i[t+12>>2],i[t+12>>2],i[i[t+28>>2]+36>>2]+(i[t+16>>2]<<9)|0)),i[t+16>>2]=i[t+16>>2]+1;c=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var r,n,l;return c=r=c-32|0,i[r+24>>2]=e,i[r+20>>2]=t,i[r+16>>2]=0,i[r+12>>2]=0,n=r,l=function e(t,r,n,l,u,d,p){var f,h=0,_=0;c=f=c-96|0,i[f+88>>2]=t,i[f+84>>2]=r,i[f+80>>2]=n,i[f+76>>2]=l,i[f+72>>2]=u,i[f+68>>2]=d,i[f+64>>2]=p,i[f+60>>2]=a[i[f+80>>2]+(i[i[f+76>>2]>>2]<<1)>>1],s[f+60>>2]>=128&&(i[f+60>>2]=1);e:if(i[i[f+72>>2]>>2]>(i[f+64>>2]-4|0))i[f+92>>2]=-1;else if(1==i[i[f+84>>2]+4>>2])if(i[f+56>>2]=i[i[f+76>>2]>>2],i[f+52>>2]=i[i[f+72>>2]>>2],i[f+48>>2]=0,i[f+44>>2]=0,i[f+40>>2]=i[i[f+88>>2]+32>>2]+((i[f+84>>2]-i[i[f+88>>2]+24>>2]|0)/140<<9),i[f+36>>2]=0,!i[i[f+40>>2]+(i[f+60>>2]<<2)>>2]|s[f+60>>2]<=0|s[f+60>>2]>=127?!i[f+60>>2]|!i[i[f+40>>2]+508>>2]?i[i[f+40>>2]>>2]&&(i[f+36>>2]=i[i[f+40>>2]>>2]):i[f+36>>2]=i[i[f+40>>2]+508>>2]:i[f+36>>2]=i[i[f+40>>2]+(i[f+60>>2]<<2)>>2],i[f+36>>2]){for(i[f+68>>2]||i[i[f+36>>2]+40>>2]||(i[f+48>>2]=i[i[f+72>>2]>>2],t=i[f+72>>2],i[t>>2]=i[t>>2]+2),i[f+32>>2]=0;i[f+32>>2]<i[i[f+36>>2]+4>>2];){if(i[f+28>>2]=i[f+68>>2],i[f+68>>2]||!i[i[f+36>>2]+40>>2]|i[i[f+36>>2]+40>>2]==(i[f+32>>2]+65536|0)||(i[f+28>>2]=1),h=f,_=e(i[f+88>>2],i[(i[f+36>>2]+8|0)+(i[f+32>>2]<<2)>>2],i[f+80>>2],i[f+76>>2],i[f+72>>2],i[f+28>>2],i[f+64>>2]),i[h+24>>2]=_,i[f+24>>2]<0){i[f+92>>2]=-1;break e}i[f+68>>2]|i[i[f+36>>2]+40>>2]!=(i[f+32>>2]+65536|0)||(i[f+44>>2]=i[f+24>>2]),i[f+32>>2]=i[f+32>>2]+1}for(i[f+68>>2]||(i[i[f+36>>2]+40>>2]?1==i[i[f+36>>2]+40>>2]&&(r=i[f+56>>2],n=i[i[f+88>>2]+48>>2],l=i[f+72>>2],t=i[l>>2],i[l>>2]=t+1,i[n+(t<<2)>>2]=r,i[f+44>>2]=i[i[f+72>>2]>>2],r=i[i[f+76>>2]>>2],n=i[i[f+88>>2]+48>>2],l=i[f+72>>2],t=i[l>>2],i[l>>2]=t+1,i[n+(t<<2)>>2]=r):(i[i[i[f+88>>2]+48>>2]+(i[f+48>>2]<<2)>>2]=0-i[f+36>>2],i[i[i[f+88>>2]+48>>2]+(i[f+48>>2]+1<<2)>>2]=i[i[f+36>>2]+4>>2],i[f+44>>2]=i[f+48>>2]+1));;){if(i[i[f+72>>2]>>2]>(i[f+64>>2]-4|0)){i[f+92>>2]=-1;break e}if(i[f+20>>2]=i[i[f+88>>2]+36>>2]+((i[f+84>>2]-i[i[f+88>>2]+24>>2]|0)/140<<9),i[f+16>>2]=0,i[f+60>>2]=a[i[f+80>>2]+(i[i[f+76>>2]>>2]<<1)>>1],s[f+60>>2]>=128&&(i[f+60>>2]=1),!i[i[f+20>>2]+(i[f+60>>2]<<2)>>2]|s[f+60>>2]<=0|s[f+60>>2]>=127?!i[f+60>>2]|!i[i[f+20>>2]+508>>2]||(i[f+16>>2]=i[i[f+20>>2]+508>>2]):i[f+16>>2]=i[i[f+20>>2]+(i[f+60>>2]<<2)>>2],!i[f+16>>2])break;for(i[f+68>>2]||(i[i[f+16>>2]+40>>2]?65536!=i[i[f+16>>2]+40>>2]&&(i[i[f+72>>2]>>2]=i[f+52>>2]):(i[i[i[f+88>>2]+48>>2]+(i[f+44>>2]<<2)>>2]=(0-i[i[i[f+88>>2]+48>>2]+(i[f+44>>2]<<2)>>2]|0)-1,i[f+48>>2]=i[i[f+72>>2]>>2],t=i[f+72>>2],i[t>>2]=i[t>>2]+2)),i[f+12>>2]=1;i[f+12>>2]<i[i[f+16>>2]+4>>2];){if(i[f+8>>2]=i[f+68>>2],i[f+68>>2]||!i[i[f+16>>2]+40>>2]|i[i[f+16>>2]+40>>2]==(i[f+12>>2]+65536|0)||(i[f+8>>2]=1),h=f,_=e(i[f+88>>2],i[(i[f+16>>2]+8|0)+(i[f+12>>2]<<2)>>2],i[f+80>>2],i[f+76>>2],i[f+72>>2],i[f+8>>2],i[f+64>>2]),i[h+4>>2]=_,i[f+4>>2]<0){i[f+92>>2]=-1;break e}i[f+68>>2]|i[i[f+16>>2]+40>>2]!=(i[f+12>>2]+65536|0)||(i[f+44>>2]=i[f+4>>2]),i[f+12>>2]=i[f+12>>2]+1}i[f+68>>2]||(i[i[f+16>>2]+40>>2]?1==i[i[f+16>>2]+40>>2]&&(r=i[f+56>>2],n=i[i[f+88>>2]+48>>2],l=i[f+72>>2],t=i[l>>2],i[l>>2]=t+1,i[n+(t<<2)>>2]=r,i[f+44>>2]=i[i[f+72>>2]>>2],r=i[i[f+76>>2]>>2],n=i[i[f+88>>2]+48>>2],l=i[f+72>>2],t=i[l>>2],i[l>>2]=t+1,i[n+(t<<2)>>2]=r):(i[i[i[f+88>>2]+48>>2]+(i[f+48>>2]<<2)>>2]=0-i[f+16>>2],i[i[i[f+88>>2]+48>>2]+(i[f+48>>2]+1<<2)>>2]=i[i[f+16>>2]+4>>2],i[f+44>>2]=i[f+48>>2]+1))}i[f+92>>2]=i[f+44>>2]}else i[f+92>>2]=-1;else{if(i[f+60>>2]&&(-1==i[i[f+84>>2]+4>>2]&&(t=i[f+76>>2],i[t>>2]=i[t>>2]+1),!i[i[f+84>>2]+4>>2])){if(!o[i[f+60>>2]+(i[f+84>>2]+8|0)|0]){i[f+92>>2]=-1;break e}t=i[f+76>>2],i[t>>2]=i[t>>2]+1}i[f+68>>2]||(r=i[i[f+76>>2]>>2],n=i[i[f+84>>2]+4>>2],l=i[i[f+88>>2]+48>>2],u=i[f+72>>2],t=i[u>>2],i[u>>2]=t+1,i[l+(t<<2)>>2]=r-(-2==(0|n)?0:1),r=i[i[f+76>>2]>>2],n=i[i[f+88>>2]+48>>2],l=i[f+72>>2],t=i[l>>2],i[l>>2]=t+1,i[n+(t<<2)>>2]=r),i[f+92>>2]=i[i[f+72>>2]>>2]-1}return c=f+96|0,i[f+92>>2]}(i[r+24>>2],i[r+20>>2],i[i[r+24>>2]+44>>2],r+12|0,r+16|0,0,i[i[r+24>>2]+12>>2]<<1),i[n+8>>2]=l,e=i[i[r+24>>2]+48>>2],t=i[r+16>>2],i[r+16>>2]=t+1,i[e+(t<<2)>>2]=-1,e=i[i[r+24>>2]+48>>2],t=i[r+16>>2],i[r+16>>2]=t+1,i[e+(t<<2)>>2]=0,a[i[i[r+24>>2]+44>>2]+(i[r+12>>2]<<1)>>1]|i[r+8>>2]<0?i[r+28>>2]=i[r+12>>2]+1:i[r+28>>2]=0,c=r+32|0,i[r+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,i[12+(t=c-16|0)>>2]=e,i[i[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,i[12+(t=c-16|0)>>2]=e,i[i[t+12>>2]+48>>2]},wasm_main:m,__wbindgen_start:m}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,n),o=i.memory,a=i.rust_calloc,s=i.rust_free,l=i.llparser_create,u=i.llparser_destroy,c=i.llparser_create_descriptor,d=i.llparser_descriptor_set_all,p=i.llparser_descriptor_set_nil,f=i.llparser_descriptor_add_char,h=i.llparser_descriptor_add_range,_=i.llparser_descriptor_revert,g=i.llparser_add_rule,v=i.llparser_prepare,m=i.llparser_parse,y=i.llparser_get_input_buffer,b=i.llparser_get_result,w=i.wasm_main,A=i.__wbindgen_start}])},function(e,t,r){var n=r(4),i=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};i.create=function(e){return new i(e)},i.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},i.prototype.remove=function(e){var t=this._arr,r=0;if("function"==typeof e)for(r=0;r<t.length;r++){var n=t[r].func;if(n===e)return t.splice(r,1),this.empty=!t.length,n}else for(r=0;r<t.length;r++)if(t[r].id===e){var i=t[r].func;return t.splice(r,1),this.empty=!t.length,i}return null},i.prototype.call=function(e,t,r){for(var n=this._arr,i=!1,a=0;a<n.length;a++){!1===o(this._type,n[a].func,e,t,r)&&(i=!0)}if(i)return!1};var o=i.safeCallback=function(e,t,r,i,o){try{return t.apply(r,i)}catch(l){var s="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";r&&r.is&&(s+=r.is),s+="#"+(t.name||"(anonymous)"),o&&o.triggerLifeTime("error",[l]),function(e,t){if(!t.type||!1!==a.call(null,[e,t])){if(n.throwGlobalError)throw e;console.error(e.stack)}}(l,{message:s,type:e,element:r,method:t,args:i})}},a=i.create();i.addGlobalErrorListener=function(e){return a.add(e)},i.removeGlobalErrorListener=function(e){return a.remove(e)};var s=null;i.addGlobalWarningListener=function(e){return(s=i.create()).add(e)},i.removeGlobalWarningListener=function(e){if(s){var t=s.remove(e);return s.empty&&(s=null),t}return null},i.hasGlobalWarningListeners=function(){return!!s},i.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;s.call(null,[t],null)},e.exports=i},function(e,t){var r={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document)};e.exports=r},function(e,t){var r=Object.prototype.hasOwnProperty,n=function(e,t){var i=typeof e;if("object"===i&&null!==e){var o=t?t.get(e):void 0;if(void 0!==o)return o;if(e instanceof Array){o=[],t&&t.set(e,o);for(var a=0;a<e.length;a++)o[a]=n(e[a],t)}else for(var s in o={},t&&t.set(e,o),e)r.call(e,s)&&(o[s]=n(e[s],t));return o}if("symbol"!==i)return e};t.deepCopy=function(e,t){var r=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return n(e,r)}},function(e,t,r){var n=r(3),i=(Object.prototype.hasOwnProperty,function(){});i.prototype=Object.create(Object.prototype,{constructor:{value:i,writable:!0,configurable:!0}});var o=null;i._setElementSystem=function(e){o=e,i._setElementSystem=null};var a=null;i._setComponent=function(e){a=e,i._setComponent=null};var s=Date.now();i.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},i.getInitTimeStamp=function(e){return s},i.create=function(e,t,r){var n=(r=r||{}).originalEvent,o=r.extraFields||{},a=Date.now()-s,l=new i;for(var u in l.currentTarget=null,l.type=e,l.timeStamp=a,l.mark=null,l.detail=t,l.bubbles=!!r.bubbles,l.composed=!!r.composed,l.__originalEvent=n,l.__hasCapture=!!r.capturePhase,l.__stopped=!1,l.__dispatched=!1,o)l[u]=o[u];return l},i.prototype.preventDefault=function(){this.__originalEvent&&!this.__originalEvent.__stopPreventDefault&&this.__originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.__stopped=!0},i.prototype.isStopped=function(){return!!this.__stopped};i.prototype.markMutated=function(){this.__mutatedMarked=!0},i.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var l=function(e,t,r,n){for(var i=e,a=e instanceof o?e.collectMarks():{},s=[],l=[],u=e;u;){if(i!==u&&(s.push(e),e=u,l.push(a),a=e instanceof o?e.collectMarks():{}),i=u.parentNode,!1===n(u,e,a))return;if(u.__wxHost){if(r)break;e=s.pop()||u.__wxHost,a=l.pop()||(e instanceof o?e.collectMarks():{}),i=u=u.__wxHost}else{var c=!0;u instanceof o&&(c=!1),u=c||r?u.parentNode:u.__wxSlotParent}}};i.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&(e=e.__wxElement).shadowRoot instanceof o&&(e=e.shadowRoot),t.target=e instanceof o?e.__methodCaller:e;var r=function(e,r,n){if(!(r&&r.length&&t.mutatedMarked())){var i=t.currentTarget=n instanceof o?n.__methodCaller:n,s=e.call(i,[t],n instanceof a?n:void 0);r&&r.length&&t.markMutated(),!1===s&&(t.__originalEvent&&!t.__originalEvent.__stopPreventDefault&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},n=t.type,i=!t.composed;if(t.__hasCapture){var s=[];l(e,0,i,(function(e,t,r){return e.__wxCaptureEvents&&e.__wxCaptureEvents[n]&&s.push([e,t,r]),!0}));for(var u=s.length-1;u>=0;u--){var c=s[u],d=c[0],p=c[1];t.target=p instanceof o?p.__methodCaller:p,t.mark=c[2];var f=d.__wxCaptureMutated&&d.__wxCaptureMutated[n];if(r(d.__wxCaptureEvents[n],f,d),t.__stopped)break}}if(t.target=e instanceof o?e.__methodCaller:e,!t.__stopped){var h=!t.bubbles;l(e,0,i,(function(e,i,a){t.target=i instanceof o?i.__methodCaller:i,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[n];return e.__wxEvents&&e.__wxEvents[n]&&r(e.__wxEvents[n],s,e),!h&&!t.__stopped}))}}},i.triggerEvent=function(e,t,r,n){var o=i.create(t,r,n);i.dispatchEvent(e,o)},i.addListenerToElement=function(e,t,r,i){var o=i&&i.mutated;if(o){var s=r;r=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var l=void 0;return i&&(i.useCapture||i.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=n.create("Event Listener")),l=e.__wxCaptureEvents[t].add(r),o&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(l))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=n.create("Event Listener")),l=e.__wxEvents[t].add(r),o&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(l))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,r,i]),l},i.removeListenerFromElement=function(e,t,r,n){var i,o=null;n&&(n.useCapture||n.capture)?(e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(o=e.__wxCaptureEvents[t].remove(r)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(i=e.__wxCaptureMutated[t].indexOf(r))&&e.__wxCaptureMutated[t].splice(i,1)):(e.__wxEvents&&e.__wxEvents[t]&&(o=e.__wxEvents[t].remove(r)),e.__wxMutated&&e.__wxMutated[t]&&-1!==(i=e.__wxMutated[t].indexOf(r))&&e.__wxMutated[t].splice(i,1));o&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,o,n])},e.exports=i},function(e,t,r){var n=r(1),i=r(8),o=null,a=()=>null!==o?o:o=void 0!==y&&"devtools"===y.platform||Math.random()<1e-4,s=" \n\r\t\f",l=null;t.parseMultiPaths=function(e){l||(l=n.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",s]}],VAR_NAME:[{id:"_blank",states:[s,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",s]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[s,"INT"]},{id:"_jump",states:["INT",s]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}}));var t=l.parse("MULTIPLE_PATHS",e);if(a())try{var r=null;try{r=i.parseMultiPaths(e)}catch(e){}JSON.stringify(t)!==JSON.stringify(r)&&(console.warn('The observer path "'+e+'" is illegal. It may fail in future.'),b.emitFrameworkError(new Error("Observers data-path parsing fail: "+e)))}catch(e){}return t},t.parseSinglePath=function(e){for(var t=e.length,r=[],n="",o=0,s=!1,l=!1,u=0;u<t;u++){var c=e[u];if("\\"===c)u+1<t&&("."===e[u+1]||"["===e[u+1]||"]"===e[u+1]||"\\"===e[u+1])?(n+=e[u+1],u++):n+="\\";else if("."===c)n&&(r.push(n),n="");else if("["===c){if(n&&(r.push(n),n=""),0===r.length)throw new Error("The path string should not start with []: "+e);l=!0,s=!1}else if("]"===c){if(!s)throw new Error("There should be digits inside [] in the path string: "+e);l=!1,r.push(o),o=0}else if(l){if(c<"0"||c>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);s=!0,o=10*o+c.charCodeAt(0)-48}else n+=c}if(n&&r.push(n),0===t)throw new Error("The path string should not be empty");if(a())try{var d=null;try{d=i.parseSinglePath(e)}catch(e){}JSON.stringify(r)!==JSON.stringify(d)&&(console.warn('The setData data-path "'+e+'" is illegal. It may fail in future.'),b.emitFrameworkError(new Error("SetData data-path parsing fail: "+e)))}catch(e){}return r}},function(e,t,r){var n=r(3),i=function(e){for(var t=e.str;e.cur<t.length;){var r=t[e.cur];if(" "!==r&&"\n"!==r&&"\r"!==r&&"\t"!==r&&"\f"!==r)break;e.cur+=1}return e.cur<t.length},o=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if(!(n>="0"&&n<="9"))break;r+=n,e.cur+=1}if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));return parseInt(r,10)},a=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length);else r+=t[e.cur+1],e.cur+=1;else if(/^[_a-zA-Z]$/.test(n))r+=n;else{if(!(n>="0"&&n<="9"))break;if(""===r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name cannot start with digits)"));r+=n}e.cur+=1}return r},s=function(e){for(var t=e.str,r="";e.cur<t.length;){var n=t[e.cur];if("\\"===n)if(e.cur+1===t.length)r+="\\",e.cur+=1;else{var i=t[e.cur+1];"."===i||"["===i||"]"===i||"\\"===i?(r+=i,e.cur+=2):(r+="\\",e.cur+=1)}else{if("."===n||"["===n)break;r+=n,e.cur+=1}}return r},l=function(e){var t=e.str;if(i(e),"*"===t[e.cur]&&"*"===t[e.cur+1])return e.cur+=2,["**"];var r=a(e);if(!r)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (first field name illegal)"));for(var n=[r];e.cur<t.length&&i(e);){var s=t[e.cur];if("."===s){if(e.cur+=1,i(e),"*"===t[e.cur]&&"*"===t[e.cur+1]){n.push("**"),e.cur+=2;break}var l=a(e);if(!l)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (field name illegal)"));n.push(l)}else{if("["!==s)break;e.cur+=1,i(e);var u=o(e);if(i(e),"]"!==t[e.cur])throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,n.push(u)}}return n};t.parseSinglePath=function(e){var t=function(e){for(var t=e.str,r=[];e.cur<t.length;){var n=t[e.cur];if("."===n){e.cur+=1;var i=s(e);i&&r.push(i)}else if("["===n){e.cur+=1;var a=o(e);if("]"!==t[e.cur]&&e.cur<t.length)throw new Error('data path descriptor "'.concat(t,'" is illegal at char ').concat(e.cur," (illegal index)"));e.cur+=1,r.push(a)}else{var l=s(e);l&&r.push(l)}}return r}({str:e,cur:0});return t},t.parseMultiPaths=function(e){try{var t={str:e,cur:0},r=function(e){var t=[];for(t.push(l(e)),i(e);","===e.str[e.cur];)e.cur+=1,t.push(l(e)),i(e);return t}(t);if(t.cur!==e.length)throw new Error('data path descriptor "'.concat(e,'" is illegal at char ').concat(t.cur));return r}catch(e){return n.triggerWarning(e.message),[]}}},function(e,t,r){var n=r(3),i=r(4),o=r(7),a=["created","ready","cacheAttached","attached","moved","detached","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],l=function(){},u=o.parseMultiPaths,c=function(){};c.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var d=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t},p=function(e){var t={};for(var r in e)t[r]=e[r];return t},f=function(e,t){for(var r in t)hasOwnProperty.call(e,r)?"object"!=typeof e[r]||"object"!=typeof t[r]||null===t[r]||t[r]instanceof Array?e[r]=t[r]:(e[r]instanceof Array?e[r]=d(e[r]):e[r]=p(e[r]),f(e[r],t[r])):e[r]=t[r]};c.create=function(e){var t=new c;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.placeholder=e.placeholder||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:i.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:i.lazyRegistration)||c.prepare(t),e.is&&(c._list[e.is]=t),t},c.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.ancestors,i="",o=0;for(o=0;o<(t.behaviors||[]).length;o++){var d=t.behaviors[o],p=d;for(i in"string"==typeof p&&(p=c._list[d],n.hasGlobalWarningListeners()&&(p instanceof c||n.triggerWarning('behavior "'+d+'" is not found (when preparing "'+e.is+'").'))),p._unprepared&&c.prepare(p),"object"==typeof p.data&&(null===e.data?e.data=p.data:f(e.data,p.data)),p.generics){var h=p.generics[i];"object"!=typeof h&&(h={}),e.generics[i]={default:h.default}}for(i in p.properties)n.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&void 0!==e.properties[i]&&n.triggerWarning('property "'+i+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.properties[i]=p.properties[i];for(i in p.relations)e.relations[i]=p.relations[i];for(i in p.methods)n.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&e.methods[i]&&n.triggerWarning('method "'+i+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[i]=p.methods[i];for(var _=0;_<p.ancestors.length;_++)r.indexOf(p.ancestors[_])<0&&r.push(p.ancestors[_])}for(i in"object"==typeof t.data&&(null===e.data?e.data=t.data:f(e.data,t.data)),t.properties){n.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&void 0!==e.properties[i]&&n.triggerWarning('property "'+i+'" from different behaviors is overriding (when preparing "'+e.is+'").');var g=t.properties[i];s.indexOf(g)>=0?g={type:g}:s.indexOf(g.type)<0&&g.optionalTypes&&g.optionalTypes.length>0&&(g.type=g.optionalTypes[0]),n.hasGlobalWarningListeners()&&s.indexOf(g.type)<0&&n.triggerWarning('the type of property "'+i+'" is illegal (when preparing "'+e.is+'").'),void 0===g.value&&(g.type===String?g.value="":g.type===Number?g.value=0:g.type===Boolean?g.value=!1:g.type===Array?g.value=[]:g.value=null),e.properties[i]={type:g.type,optionalTypes:g.optionalTypes,value:g.value,filter:g.filter,observer:g.observer,public:!!(void 0===g.public?e.options.publicProperties:g.public),availability:g.availability,observeAssignments:!!g.observeAssignments,reflectIdPrefix:!!g.reflectIdPrefix}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(i in t.lifetimes)e.lifetimes[i]=t.lifetimes[i];for(o=0;o<a.length;o++)void 0===e.lifetimes[a[o]]&&(e.lifetimes[a[o]]=t[a[o]]);for(i in t.listeners)e.listeners[i]=t.listeners[i];var v=t.observers;if(v instanceof Array)for(o=0;o<v.length;o++){var m=v[o];e.observers.push({paths:u(m.fields||"**"),observer:m.observer})}else for(i in v)e.observers.push({paths:u(i),observer:v[i]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(i in t.pageLifetimes)e.pageLifetimes[i]=t.pageLifetimes[i];for(i in t.relations){var y=t.relations[i];e.relations[i]={target:y.target||i,type:y.type,linked:y.linked||l,linkChanged:y.linkChanged||l,unlinked:y.unlinked||l,linkFailed:y.linkFailed||l}}for(i in t.methods)"function"==typeof t.methods[i]&&(n.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&e.methods[i]&&n.triggerWarning('method "'+i+'" from different behaviors is overriding (when preparing "'+e.is+'").'),e.methods[i]=t.methods[i]);r.push(e)}},c._list=Object.create(null),c.prototype.hasBehavior=function(e){this._unprepared&&c.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof c){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===c._list[e])return!0;return!1},c.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var n=this.ancestors[r];for(var i in n.listeners)Object.prototype.hasOwnProperty.call(e,i)?e[i].push(n.listeners[i]):e[i]=[n.listeners[i]]}return e},c.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,r=0;r<t.length;r++)for(var n=this.ancestors[r].observers,i=0;i<n.length;i++){var o=n[i];e.addObserver(o.observer,o.paths,this)}},c.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=n.create("Lifetime Method")}));for(var r=0;r<t.length;r++){var i=t[r];for(var o in i.lifetimes)i.lifetimes[o]&&(e[o]||(e[o]=n.create("Lifetime Method")),e[o].add(i.lifetimes[o]))}return e},c.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,r=0;r<t.length;r++){var i=t[r];for(var o in i.pageLifetimes)i.pageLifetimes[o]&&(e[o]||(e[o]=n.create("Page Lifetime Method")),e[o].add(i.pageLifetimes[o]))}return e},c.callDefinitionFilter=function(e){var t=e.definitionFilter,r=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?c._list[t]:t)&&t.definitionFilter&&(r.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,r)}:null},e.exports=c},function(e,t,r){var n=r(3),i=r(6),o=r(11),a=r(12),s=r(13),l=r(15),u=r(4),c=r(14),d=function(e){p(this,e||null)};d.prototype=Object.create(Object.prototype,{constructor:{value:d,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var r=this.ownerShadowRoot.__wxHost;r.__idCacheDirty=!0,this.__domElement&&r.__componentOptions.writeIdToDOM&&(r.__idPrefix?this.__domElement.id=r.__idPrefix+"--"+t:this.__domElement.id=t)}u.writeExtraInfoToAttr&&this.__domElement&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){e=String(e),this.__slot!==e&&(this.__inheritSlots?n.hasGlobalWarningListeners()&&n.triggerWarning('slots-inherited nodes do not support "slot" attribute (in component "'+this.is+'").'):(this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})))},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return C.call(this,e)},configurable:!0}}),i._setElementSystem(d),a._setElementSystem(d);var p=d.initialize=function(e,t,r){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=t,e.$$=t,t&&(t.__wxElement=e)};d._clone=function(e,t,r,n){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var i in t.__marks)e.__marks[i]=t.__marks[i];for(var o in e.__attributes=Object.create(null),t.__attributes)e.__attributes[o]=t.__attributes[o];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=r,e.$$=r,r&&(r.__wxElement=e)};var f=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof d){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof d&&t(e.shadowRoot);for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n])}};t(e)}},h=function(e){if(e.__attached){var t=function(e){if(e instanceof d){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__attached=!1,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}};t(e)}},_=function(e,t,r){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var n=null,i=[r];n="add"===t?{type:"childList",target:e,addedNodes:i}:"remove"===t?{type:"childList",target:e,removedNodes:i}:{type:"childList",target:e,addedNodes:i,removedNodes:i},o._callObservers(e,"__childObservers",n)}},g=function(e,t){if(e instanceof d&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var r=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var n=e.childNodes,i=0;i<n.length;i++){var o=n[i];o instanceof d&&r(o)}};r(e)}};d._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var r=e.__idCache=Object.create(null),n=function(e){e.__id&&(r[e.__id]||(r[e.__id]=e));for(var t=e.childNodes,i=0;i<t.length;i++)t[i]instanceof d&&n(t[i])};n(t)}};var v=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t=e.__wxHost,r=null,i=Object.create(null);r=void 0!==t.__singleSlot?{"":t.__singleSlot}:t.__slots;var o=function(e){void 0!==e.__slotName&&(i[e.__slotName]?n.hasGlobalWarningListeners()&&n.triggerWarning('More than one slot named "'+e.__slotName+'" are found inside a single component instance (in component "'+t.is+'"). The first one was accepted.'):i[e.__slotName]=e);for(var r=e.childNodes,a=0;a<r.length;a++)r[a]instanceof d&&o(r[a])};o(e),void 0!==t.__singleSlot?t.__singleSlot!==i[""]&&(i[""]&&(i[""].__wxSlotChildren=t.childNodes),m(t,i,r,!0),t.__singleSlot&&(t.__singleSlot.__wxSlotChildren=[]),t.__singleSlot=i[""]||null):(m(t,i,r,!1),t.__slots=i)}},m=function(e,t,r,n){var i=e.childNodes,o=0;if(n){var a=t[""];if(a)for(;o<i.length;o++)w(a,i[o],null,!1,!1,!1,-1);else if(a=r[""])for(;o<i.length;o++)w(a,null,i[o],!0,!1,!1,o)}else{var s=function(e){for(var n=0;n<e.length;n++){var i=e[n],o=i.__slot||"",a=t[o];a?w(a,i,null,!1,!0,!0):(a=r[o])&&w(a,null,i,!0,!0,!0),i.__inheritSlots&&s(i.childNodes)}};s(i)}},y=function(e,t,r,n){for(var i=function(e,t,n){var o=e.childNodes,a=0;for(t&&(a=o.indexOf(t)+(n?0:1));a<o.length;a++){var s=o[a];if(s.__slot===r)return s;if(s.__inheritSlots){var l=i(s,null,!1);if(l)return l}}return null};t!==e;t=t.parentNode){var o=i(t.parentNode,t,n);if(o)return o;n=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var r=e.__slot||"",n=t.__slots[r];if(n){var i=y(t,e,r,!1);w(n,e,i,!1,!0,!0)}else(n=e.__wxSlotParent)&&w(n,null,e,!0,!0,!0)}},w=function(e,t,r,n,i,o,a){if(n&&(r.__wxSlotParent=null),i&&(a=e.__wxSlotChildren.indexOf(r)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&o){var l=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(l,1),s===e&&l<a&&a--}}var c=!1;(t&&t.__backendExtracted||r&&r.__backendExtracted)&&(c=!0),c||function(e,t,r,n,i){var o=e;if(o instanceof d){for(;o.__virtual;){var a=o.__wxSlotParent;if(!a){o=null;break}if(t&&!r){var s=a.__wxSlotChildren.indexOf(o);r=a.__wxSlotChildren[s+1]}o=a}o instanceof d&&(o=o.__domElement)}if(o){var l=n,u=null,c=null;if(t)if(t.__virtual){var p=document.createDocumentFragment(),f=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?f(r):p.appendChild(r.__domElement)}};f(t),u=p}else u=t.__domElement;if(r)if(r.__virtual){var h=e,_=0;if(n){var g=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];r.__virtual?g(r):o.removeChild(r.__domElement)}};g(r),l=!1,_=i+1}else h=r.__wxSlotParent,_=r===t?i:h.__wxSlotChildren.indexOf(r);if(t){var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var r=e.__wxSlotChildren[t];if(!r.__virtual)return r;var n=v(r,0);if(n)return n}};r=null;for(var m=h;!(r=v(m,_))&&m.__virtual;m=m.__wxSlotParent)_=m.__wxSlotParent.__wxSlotChildren.indexOf(m)+1;r&&(c=r.__domElement)}}else c=r.__domElement;l?u?o.replaceChild(u,c):o.removeChild(c):u&&(c?o.insertBefore(u,c):o.appendChild(u))}else if(t&&t.__wxSlotParent){var y=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)y(e.__wxSlotChildren[t]);else{var r=e.__domElement;r&&r.parentNode&&r.parentNode.removeChild(r)}};y(t)}}(e,t,r,n,a),u.writeExtraInfoToAttr&&(n&&r instanceof d&&r.__domElement&&r.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof d&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),i&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,n?1:0,t):e.__wxSlotChildren.splice(a,n?1:0))},A=function(e,t){for(var r=e.childNodes,n=0;n<r.length;n++){var i=r[n];t(e,i),i.__inheritSlots&&A(i,t)}},E=d.insertChildToElement=function(e,t,r,n){if(void 0!==e.__slotName)return!1;var i=r>=0?e.childNodes[r]:null;n&&t===i&&(n=!1);var a=null,s=e,l=e;if(t){a=t.parentNode,t.parentNode=e;var u=e.__subtreeObserversCount;if(a){var c=a.childNodes.indexOf(t);a.childNodes.splice(c,1),a===e&&c<r&&r--,u-=a.__subtreeObserversCount}u&&o._updateSubtreeCaches(t,u)}for(var p=e;p&&p.__inheritSlots;)p=p.parentNode;for(var m=!p||!p.__slots,b=!m||e.__inheritSlots,E=a;E&&E.__inheritSlots;)E=E.parentNode;var S=!E||!E.__slots,I=!S||a&&a.__inheritSlots;if(m)void 0!==e.__singleSlot&&(s=l=e.__singleSlot),s?w(s,t,i,n,b,I,r):t&&t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,I,!1),t&&!S&&t.__inheritSlots&&A(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var T="";if(t&&(T=t.__slot||"",s=p.__slots[T]||null),i&&(l=p.__slots[i.__slot||""]||null),i&&l&&n&&w(l,null,i,n,!0,!1),t)if(s){var C=i?y(p,i,T,!n):y(p,e,T,!1);w(s,t,C,!1,!0,I)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,I,!1);i&&n&&i.__inheritSlots&&A(i,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&A(t,(function(t,r){var o=r.__slot||"",a=p.__slots[o]||null;if(a){var s=i?y(p,i,o,!n):y(p,e,o,!1);w(a,r,s,!1,!0,!0)}else r.__wxSlotParent&&w(r.__wxSlotParent,null,r,!0,!0,!1)}))}return n&&(e.__subtreeObserversCount&&o._updateSubtreeCaches(i,-e.__subtreeObserversCount),i.parentNode=null),-1===r&&(r=e.childNodes.length),t?e.childNodes.splice(r,n?1:0,t):e.childNodes.splice(r,n?1:0),e.ownerShadowRoot&&(n&&g(i,e.ownerShadowRoot),t&&g(t,e.ownerShadowRoot),v(e.ownerShadowRoot)),n&&(h(i),_(e,"remove",i)),t&&(a?function(e){if(!e.__attached)return f(e);var t=function(e){if(e instanceof d){for(var r=e.childNodes,n=0;n<r.length;n++)t(r[n]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)}(t):f(t),a===e?_(e,"move",t):(a&&_(a,"remove",t),_(e,"add",t))),!0},S=function(e,t,r,n){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var i=n?r:t,o=-1;return r&&(o=e.childNodes.indexOf(r))<0?null:E(e,t,o,n)?i:null};d._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,v(e)},d.appendChild=function(e,t){return S(e,t,null,!1)},d.insertBefore=function(e,t,r){return S(e,t,r,!1)},d.removeChild=function(e,t){return S(e,null,t,!0)},d.replaceChild=function(e,t,r){return S(e,t,r,!0)},d.prototype.appendChild=function(e){return S(this,e,null,!1)},d.prototype.insertBefore=function(e,t){return S(this,e,t,!1)},d.prototype.removeChild=function(e){return S(this,null,e,!0)},d.prototype.replaceChild=function(e,t){return S(this,e,t,!0)};var I=function(e){var t=!0,r=!0;if(e instanceof d?(e.__backendExtracted=!0,e.$$=e.__domElement=null,r=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,r=!1),t&&e.__wxSlotChildren)for(var n=0;n<e.__wxSlotChildren.length;n++){var i=e.__wxSlotChildren[n];I(i)}else if(r&&e.childNodes)for(var o=0;o<e.childNodes.length;o++)I(e.childNodes[o])};d.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return I(e),t};var T=function(e,t,r){var n=e instanceof d&&e.__virtual,i=t?t.childNodes[r]:void 0,o=!0,a=!0,u=null;if(e instanceof d)e.__backendExtracted=!1,n||(u=function(e,t){if(!t){var r=l.toElement(e.__domElement);return e.$$=e.__domElement=r,r}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var n=l.toElement(e.__domElement);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,i)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,u=function(e,t){if(!t){var r=document.createTextNode(e.textContent);return e.$$=e.__domElement=r,r}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var n=document.createTextNode(e.textContent);e.$$=e.__domElement=n,t.parentNode.replaceChild(n,t)}return null}(e,i),o=!1,a=!1;else{var c=document.createDocumentFragment();if(c.__wxSlotChildren=e.__wxSlotChildren,i&&i.childNodes)for(;i.childNodes.length;)c.appendChild(i.childNodes[0]);u=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,i),e=c}u?(t.appendChild(u),i=u):i=t?t.childNodes[r]:void 0;var p=0;if(o&&e.__wxSlotChildren)for(var f=0;f<e.__wxSlotChildren.length;f++){var h=e.__wxSlotChildren[f];if(n)r=T(h,t,r);else if(h.asShadowRoot){for(var _=0;_<h.asShadowRoot.childNodes.length;_++)p=T(h.asShadowRoot.childNodes[_],i,p);e.shadowRoot=i,i.__wxHost=e,e.__wxSlotChildren[0]=i,i.__wxSlotParent=e,e.__singleSlot===h&&(e.__singleSlot=i)}else p=T(h,i,p)}else if(a&&e.childNodes)for(var g=0;g<e.childNodes.length;g++)p=T(e.childNodes[g],i,p);if(n)return r;for(;i.childNodes.length>p;)i.removeChild(i.childNodes[p]);return r+1};d.injectBackend=function(e,t){if(e.__backendExtracted){var r=document.createDocumentFragment();r.appendChild(t),T(e,r,0)}},d.prototype.triggerEvent=function(e,t,r){i.triggerEvent(this,e,t,r)},d.prototype.dispatchEvent=function(e){i.dispatchEvent(this,e)},d.prototype.addListener=function(e,t,r){i.addListenerToElement(this,e,t,r)},d.prototype.removeListener=function(e,t,r){i.removeListenerFromElement(this,e,t,r)},d.setMethodCaller=function(e,t){e.__methodCaller=t},d.getMethodCaller=function(e){return e.__methodCaller},d.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},d.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute(e,t)},d.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute(e))},d.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},d.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var r in t.__marks)hasOwnProperty.call(e,r)||(e[r]=t.__marks[r]);return e};var C=d.prototype.setNodeStyle=function(e,t){this.__styleSegments[t||0]=e;var r=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var n=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof n)return void this.__domElement.setAttribute("style",n.call(this,r))}this.__domElement&&this.__domElement.setAttribute("style",r),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})};d.replaceDocumentElement=function(e,t){e.__attached||(t.parentNode.replaceChild(e.__domElement,t),f(e))},d.pretendAttached=function(e){e.__attached||f(e)},d.pretendDetached=function(e){e.__attached&&h(e)},d.isAttached=function(e){return e.__attached},d.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,v(e.ownerShadowRoot))},d.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},d.getInheritSlots=function(e){return e.__inheritSlots};var O=function(e,t){var r=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!r)return null;var n=r[1].slice(1),i=r[2].split(".");return i.shift(),n||i.length?{id:n,classes:i,relation:t||""}:null},N=d.parseSelector=function(e){for(var t=String(e||"").split(","),r=[],n=!1,i=0;i<t.length;i++){for(var o=t[i].split(/( |\t|>+)/g),a=[],s="",l=0;l<o.length;l++){var u=o[l];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var c=O(u,s);if(s="",!c)break;a.push(c)}else{if(""!==s)break;s=u,">>>"===u&&(n=!0)}}l===o.length&&(a.length&&r.push(a))}return r.length?{crossShadow:n,union:r}:null},x=function(e,t,r,n,i){if(t===e)return!1;var o=r[n],a=!0;o.id&&o.id!==t.__id&&(a=!1);for(var s=o.classes,l=0;a&&l<s.length;l++)t.classList.contains(s[l])||(a=!1);if(!a&&">"===i)return!1;var u=t;if(a&&0===n){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==i)return!1;u=t,a=!1}var c=a?o.relation:i;do{u.parentNode?u=u.parentNode:">>>"===c?u=u.__wxHost:">>>"===i?(a=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&!d.isSelectable(u));if(!u)return!1;if(a){if(x(e,u,r,n-1,c))return!0;if(">>>"!==i)return!1}return x(e,u,r,n,i)},R=function(e,t,r){if(!d.isSelectable(r))return!1;for(var n=e.union,i=0;i<n.length;i++){var o=n[i];if(x(t,r,o,o.length-1,">"))return!0}return!1},P=function(e,t,r,n,i){if(R(t,r,n)&&(e.push(n),i))return!0;if(n.shadowRoot&&t.crossShadow&&((n.ownerShadowRoot?n.ownerShadowRoot.__wxHost.__componentOptions.domain:u.domain)===n.__componentOptions.domain&&P(e,t,r,n.shadowRoot,i)&&i))return!0;for(var o=n.childNodes,a=0;a<o.length;a++)if(o[a]instanceof d&&P(e,t,r,o[a],i)&&i)return!0;return!1};d.prototype.querySelector=function(e){var t="object"==typeof e?e:N(e);if(!t)return null;var r=[];return P(r,t,this,this,!0),r[0]||null},d.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:N(e),r=[];return t?(P(r,t,this,this,!1),r):[]},d.matchSelector=function(e,t){var r="object"==typeof e?e:N(e);return!!r&&R(r,null,t)},d.prototype.matchSelector=function(e,t){var r="object"==typeof e?e:N(e);return!!r&&R(r,this,t)},d.isSelectable=function(e){return!!e.classList},e.exports=d},function(e,t,r){var n=r(3),i=function(){};i.prototype=Object.create(Object.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),i.create=function(e){var t=new i;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},i.prototype.observe=function(e,t){var r=0,i=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(i),subtree:t.subtree?e:null}),r++),t.childList&&(e.__childObservers||(e.__childObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(i),subtree:t.subtree?e:null}),r++),t.characterData&&(e.__textObservers||(e.__textObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(i),subtree:t.subtree?e:null}),r++),t.subtree&&o(e,r),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=n.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(i),subtree:null}))},i.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var r=e[t];r.funcArr.remove(r.id),r.subtree&&o(r.subtree,-1)}this._binded=[]};var o=i._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var r=e.childNodes;if(r)for(var n=0;n<r.length;n++)o(r[n],t)};i._callObservers=function(e,t,r){do{e[t]&&e[t].call(e,[r]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},i._callSingleObserver=function(e,t,r){e[t]&&e[t].call(e,[r])},e.exports=i},function(e,t){var r=function(){},n=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,i=null;r._setElementSystem=function(e){i=e,r._setElementSystem=null};var o=Object.prototype.hasOwnProperty;r.create=function(e,t){var n=new r;for(var i in n._prefix="",n._addOriginalClass=!1,n._alias=t,n._resolvedAlias={},t)n._resolvedAlias[i]="";return n._rawNames=[],n._elem=e,n._owner=null,n};var a=function(e){var t="",r=e._rawNames,n=e._prefix,i=e._owner?e._owner._resolvedAlias:null,a=e._addOriginalClass;n&&(n+="--");for(var s=0;s<r.length;s++){var l=r[s];if(s&&(t+=" "),i&&o.call(i,l))t+=i[l];else if("~"===l[0])t+=l.slice(1);else if("^"===l[0]){l=l.slice(1);for(var u=e._owner||null;"^"===l[0];)l=l.slice(1),u=u?u._owner:null;var c=u?u._prefix:"";c&&(c+="--"),t+=c+l}else a&&(t+=l+" "),t+=n+l}return t},s=function(e){var t=e._elem.__domElement;if(t){var r=a(e);r?t.setAttribute("class",r):t.removeAttribute("class")}},l=function(e){var t=e.classList;t instanceof r&&(t._alias&&u(t),s(t));for(var n=e.childNodes,o=0;o<n.length;o++)n[o]instanceof i&&l(n[o])},u=function(e){var t=e._owner;if(!t)return!1;var r=!1;for(var n in e._alias){var a=e._alias[n],s=[];if(a)for(var u=0;u<a.length;u++){var c=a[u];if(o.call(t._alias,c)){var d=t._resolvedAlias[c];s.push(d)}else{var p=e._prefix&&c?e._prefix+"--"+c:c;s.push(p)}}var f=s.join(" ");e._resolvedAlias[n]!==f&&(r=!0,e._resolvedAlias[n]=f)}r&&e._elem.shadowRoot instanceof i&&l(e._elem.shadowRoot)};r.prototype.toggle=function(e,t){var r=this._rawNames.indexOf(e);void 0===t&&(t=r<0),t?r<0&&(this._rawNames.push(e),s(this)):r>=0&&(this._rawNames.splice(r,1),s(this))},r.prototype.contains=function(e){for(var t=this._rawNames,r=0;r<t.length;r++){var n=t[r];if("~"===n[0]){if(n.slice(1)===e)return!0}else if("^"===n[0]){for(var i=1;"^"===n[i];)i++;if(n.slice(i)===e)return!0}else if(n===e)return!0}return!1},r.prototype._setOwnerOptions=function(e,t,r){var n=this._prefix;this._prefix=t,n!==t&&(this._addOriginalClass=r,this._owner=e,this._alias&&u(this),s(this))},r.prototype._setAlias=function(e,t){var r=this._owner,i=String(t).match(n);this._alias[e]=i;var a=[];if(i)for(var s=0;s<i.length;s++){var u=i[s];r&&o.call(r._alias,u)?a.push(r._resolvedAlias[u]):a.push(this._prefix?this._prefix+"--"+u:u)}this._resolvedAlias[e]=a.join(" "),l(this._elem.shadowRoot)},r.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(n)||[],s(this)},r.prototype.getClassNames=function(){return a(this)},r.prototype.getPrefix=function(){return this._prefix},r.prototype.getAddOriginalClass=function(){return this._addOriginalClass},r.prototype.getRawNames=function(){return this._rawNames},e.exports=r},function(e,t,r){var n=r(11),i=r(4),o=r(14),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var r=new a;r.__slot="";var n=null;return o.backendExtractedDefault||"dom"!==i.documentBackend?r.__textContent=e:(n=document.createTextNode(e||"")).__wxElement=r,r.$$=r.__domElement=n,r.__backendExtracted=o.backendExtractedDefault,r.__subtreeObserversCount=0,r.parentNode=null,r.ownerShadowRoot=t,r};a.create=function(e){return s(e,null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){this.__domElement?this.__domElement.textContent=e:this.__textContent=String(e),(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&n._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var r=function(e){this.tagName=e,this.id="",this.attrs={}};r.toElement=function(e){var t=document.createElement(e.tagName);for(var r in e.id&&(t.id=e.id),e.attrs)t.setAttribute(r,e.attrs[r]);return t},r.fromElement=function(e){var t=new r(e.tagName);t.id=e.id;for(var n=e.attributes,i=0;i<n.length;i++)t.attrs[n[i].name]=n[i].value;return t},r.prototype.cloneNode=function(){var e=new r;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},r.prototype.removeAttribute=function(e,t){delete this.attrs[e]},r.prototype.setAttribute=function(e,t){this.attrs[e]=t},r.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=r},function(e,t,r){var n=r(3),i=r(5),o=r(17),a=r(6),s=r(9),l=r(10),u=r(18),c=r(11),d=r(12),p=r(15),f=r(4),h=r(14),_=r(7),g=a.addListenerToElement,v=_.parseSinglePath,m=i.deepCopy,y=function(){};y.prototype=Object.create(l.prototype,{constructor:{value:y,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace([r],e[r]);t.doUpdates()},configurable:!0},$:{get:function(){return l._updateIdMap(this),this.__idCache},set:function(){}}});var b=function(){};b.prototype=Object.create(Object.prototype),a._setComponent(y);var w=null;y._setDefaultTemplateEngine=function(e){w=e,y._setDefaultTemplateEngine=null};o.setPropUpdater((function(e,t,r,i){var o=e[0],a=this.__propData[o];r=function(e,t,r,i,o){if(r)for(var a=0;a<r.length;a++)if(s.matchTypeWithValue(r[a],e))return e;return t===String?null==e?(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+o+'" of "'+(i.is||"")+'" received type-uncompatible value: expected <String> but get null value. Use empty string instead.'),""):(n.hasGlobalWarningListeners()&&"object"==typeof e&&n.triggerWarning('property "'+o+'" of "'+(i.is||"")+'" received type-uncompatible value: expected <String> but got object-typed value. Force converted.'),String(e)):t===Number?isFinite(e)?Number(e):(n.hasGlobalWarningListeners()&&("number"==typeof e?n.triggerWarning('property "'+o+'" of "'+(i.is||"")+'" received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead.'):n.triggerWarning('property "'+o+'" of "'+(i.is||"")+'" received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.')),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+o+'" of "'+(i.is||"")+'" received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead.'),[]):t===Object?"object"==typeof e?e:(n.hasGlobalWarningListeners()&&n.triggerWarning('property "'+o+'" of "'+(i.is||"")+'" received type-uncompatible value: expected <Object> but got non-object value. Used null instead.'),null):void 0===e?null:e}(r,t.type,t.optionalTypes,this,o);var l=!t.availability||function(e,t,r,i){var o=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,i?void 0:r];return!!n.safeCallback("Availablity Controller",t,e.__methodCaller,o,e)}(this,t.availability,r,i);if(!l)return n.hasGlobalWarningListeners()&&n.triggerWarning('the new value for property "'+o+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var u=n.safeCallback("Property Filter",t.filter,this.__methodCaller,i?[]:[r,a,e],this);void 0!==u&&(r=u)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[o]&&function(e,t,r,n){if(n&&e.ownerShadowRoot){var i=e.ownerShadowRoot.__wxHost.__idPrefix;i&&(r=i+"--"+r)}var o=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),a=typeof r;"boolean"===a?r?e.__domElement.setAttribute(o,""):e.__domElement.removeAttribute(o):"object"===a?e.__domElement.setAttribute(o,JSON.stringify(r)):e.__domElement.setAttribute(o,r)}(this,o,r,t.reflectIdPrefix),r})),o.setPropObserver((function(e,t,r,i,o,a){if(i.observeAssignments||e!==t){var s=r[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&n.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),i.observer&&n.safeCallback("Property Observer",i.observer,this.__methodCaller,o?[]:[e,t,r],this),i.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&c._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var A=function(e,t,r){t.__relationLinks||(t.__relationLinks={});for(var n=t.__relationLinks[r]=[],i=0;i<e.length;i++)n.push(null)},E=function(e,t,r,i,o){for(var a=y.prototype.hasBehavior,u="parent"===i,c="shadowHost"===i,d=0;d<e.length;d++){var p=e[d],f=null;if(f="object"!=typeof p.target?s._list[p.target]:p.target){var h=t[d],_=null;if(!o)for(var g=c?r.ownerShadowRoot&&r.ownerShadowRoot.__wxHost:r.parentNode;g;g=c?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(l.isSelectable(g)){if(a.call(g,f)){var v=null;v=u?g.__relationMap.child:c?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var m=0;m<v.length;m++){var b=v[m],w=null;if((w="object"!=typeof b.target?s._list[b.target]:b.target)&&a.call(r,w)){_={parent:g,relation:b};break}}}if(u||_)break}t[d]=_,!h||_&&h.parent===_.parent||(n.safeCallback("Relation Unlinked Callback",h.relation.unlinked,h.parent.__methodCaller,[r.__methodCaller],h.parent),n.safeCallback("Relation Unlinked Callback",p.unlinked,r.__methodCaller,[h.parent.__methodCaller],r)),!_||h&&h.parent===_.parent||(n.safeCallback("Relation Linked Callback",_.relation.linked,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Linked Callback",p.linked,r.__methodCaller,[_.parent.__methodCaller],r)),h&&_&&h.parent===_.parent&&(n.safeCallback("Relation Link Changed Callback",_.relation.linkChanged,_.parent.__methodCaller,[r.__methodCaller],_.parent),n.safeCallback("Relation Link Changed Callback",p.linkChanged,r.__methodCaller,[_.parent.__methodCaller],r)),o||_||n.safeCallback("Relation Link Failed Callback",p.linkFailed,r.__methodCaller,[],r)}}},S=function(e,t,r){if(e instanceof l){var n=0,i=null;if(e instanceof y){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,r||[]),i=e.childNodes,n=0;n<i.length;n++)S(i[n],t,r);e=e.shadowRoot}for(i=e.childNodes,n=0;n<i.length;n++)S(i[n],t,r)}};y._list={},y.register=function(e){var t=e.options||{},r=s.create(e),n=void 0!==t.classPrefix?t.classPrefix:f.classPrefix;null==n&&(n=r.is||"");var i=new b;return i._unprepared=r,i.is=e.is||"",i.behavior=r,i.protoFunc=null,i.props=null,i.template=null,i.innerEvents=null,i.generics=r.generics,i.placeholder=r.placeholder,i.initiator=r.initiator||null,i.options={availability:t.availability||f.availability,domain:t.domain||f.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:f.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:f.allowInWriteOnly),classPrefix:n,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:f.addGlobalClass),templateEngine:t.templateEngine||f.templateEngine||w,renderingMode:t.renderingMode||f.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:f.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:f.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:f.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:f.writeIdToDOM),idPrefixGenerator:t.idPrefixGenerator||f.idPrefixGenerator,separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:f.separateInnerData),innerDataExclude:t.innerDataExclude||f.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:f.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:f.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:f.virtualHost)},r._unprepared||y.prepare(i),void 0!==e.is&&(y._list[r.is]=i),i},y.isPrepared=function(e){return!e._unprepared},y.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var r=e.options,i={};t._unprepared&&s.prepare(t),r.writeOnly&&(i.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var n=t.properties[e];a[e]={type:n.type,optionalTypes:n.optionalTypes,value:n.value,filter:"function"==typeof n.filter?n.filter:null==n.filter?null:t.methods[n.filter],observer:"function"==typeof n.observer?n.observer:null==n.observer?null:t.methods[n.observer],public:n.public,availability:n.availability,observeAssignments:n.observeAssignments,reflectIdPrefix:n.reflectIdPrefix},r.writeFieldsToNode&&(i[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var r=this.__dataProxy;r.scheduleReplace([e],t),r.doUpdates()}})}));var l=function(){};e.protoFunc=l;var u=l.prototype=Object.create(y.prototype,i);if(u.is=e.is,u.__componentOptions=r,u.__using=t.using,e.dataGroupObserverTree=o._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),u.__behavior=t,r.writeFieldsToNode)for(var c in t.methods)u[c]=t.methods[c];u.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),u.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var d=t.relations,p=u.__relationMap={};for(var f in d){var h=d[f],_=h.type;p[_]?p[_].push(h):p[_]=[h]}var g=[];p.parent&&g.push((function(e){E(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),p.ancestor&&g.push((function(e){E(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),p.shadowHost&&g.push((function(e){E(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<g.length;t++)g[t].call(this,e)};var v={},m={},b=t.data,w="";for(w in b)m[w]=b[w];for(w in a){var A=a[w];n.hasGlobalWarningListeners()&&void 0!==m[w]&&n.triggerWarning('data field "'+w+'" is overwritten by property with the same name (when preparing "'+t.is+'").'),m[w]=A.value,v[w]=A.public}var S=m,I=r.separateInnerData,T=r.innerDataExclude;if(T){for(var C in S={},m)T.test(C)||(S[C]=m[C]);I||(m=S)}var O=r.templateEngine;e.template=O.create(t,m,S,r),u.__propPublic=v;var N=t._getAllListeners(),x=e.innerEvents=[];for(var R in N){for(var P=N[R],D=R.indexOf("."),L=R.slice(D+1),B=D<1?"":R.slice(0,D),k=[],M=0;M<P.length;M++){var F=P[M];"function"!=typeof F&&(F=null==F?null:t.methods[F]),k.push(F)}x.push({id:B,name:L,funcs:k})}}};var I=1,T=Object.prototype.hasOwnProperty,C=function(e,t){return function(r){return e.call(t.__methodCaller,r,t)}},O=y._advancedCreate=function(e,t,r,i,a,s){var u=t;u._unprepared&&y.prepare(u);var c=u.options,_=!c.availability||function(e,t,r){var i=[t?t.__wxHost.__componentOptions.domain:void 0];return!!n.safeCallback("Availablity Controller",r,e,i)}(u,r,c.availability);_||(n.hasGlobalWarningListeners()&&n.triggerWarning('the component "'+(u.is||"")+'" is currently not available. The default component is used instead.'),u=y._list[""]);var v=new(0,u.protoFunc);c.idPrefixGenerator&&(v.__idPrefix=String(c.idPrefixGenerator.call(v))),v.__placeholder=function(e,t){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}(a,u.placeholder);var b=u.generics;v.__generics=b?function(e,t,r){var i={};for(var o in e){var a=e[o],s=t[o];"object"!=typeof s&&T.call(y._list,s)&&(s=y._list[s]),"object"!=typeof s&&null!=a.default&&(s=y._list[a.default]),n.hasGlobalWarningListeners()&&(s||n.triggerWarning('generic "'+o+'" is not instantiated. The default component is used instead.')),s&&(i[o]=s)}if(n.hasGlobalWarningListeners())for(var l in t)void 0===e[l]&&n.triggerWarning('generic "'+l+'" is not defined. It will be ignored.');return i}(b,i||{}):{};var w=null,E=f.documentBackend;if(c.virtualHost){w=null;"dom"===f.documentBackend&&(w=void 0),l.initialize(v,w,r),v.__virtual=!0}else"dom"===E?(w=h.backendExtractedDefault?new p(e):document.createElement(e),l.initialize(v,w,r)):l.initialize(v,null,r);var S=0,O=v.__externalClassAlias={};if(u.behavior.externalClasses){var N=u.behavior.externalClasses;for(S=0;S<N.length;S++)O[N[S]]=null}if(v.classList=d.create(v,O),r){var x=r.__wxHost;v.classList._setOwnerOptions(x.classList,x.__componentOptions.classPrefix,x.__componentOptions.addGlobalClass),f.writeExtraInfoToAttr&&w&&w.setAttribute("exparser:info-class-prefix",x.__componentOptions.classPrefix&&x.__componentOptions.classPrefix+"--")}f.writeExtraInfoToAttr&&w&&(v.__componentInstanceId=I++,w.setAttribute("exparser:info-component-id",v.__componentInstanceId));var R=v.__templateInstance=u.template.createInstance(v,s);v.__propData=R.data;var P=c.separateInnerData;v.__innerData=P?m(v.__propData):null;var D=c.innerDataExclude;if(P&&D){var L={};for(var B in v.__innerData)D.test(B)||(L[B]=v.__innerData[B]);v.__innerData=L}v.__dataProxy=o._advancedCreate(v,v.__propData,v.__innerData,D,u.dataGroupObserverTree,(function(e,t,r,n){v.__templateInstance.updateValues(v,P?v.__innerData:v.__propData,e,t,r,n)})),R.beforeMergeValues&&v.__dataProxy.setBeforeMergeCb((function(e,t,r){v.__templateInstance.beforeMergeValues(e,t,r)})),R.beforeUpdateValues&&v.__dataProxy.setBeforeUpdateCb((function(e){v.__templateInstance.beforeUpdateValues(v,P?v.__innerData:v.__propData,e)})),c.writeOnly&&v.__dataProxy.setHidingValue(!0),v.__idCacheDirty=!1,v.__idCache=R.idMap,null===R.slots[""]&&(R.slots[""]=w),u.options.multipleSlots?v.__slots=R.slots:(v.__singleSlot=R.slots[""]||null,v.__singleSlot&&(v.__singleSlot.__wxSlotChildren=v.childNodes)),R.shadowRoot instanceof l?(v.shadowRoot=R.shadowRoot,l._attachShadowRoot(R.shadowRoot)):w instanceof p?(v.shadowRoot=w,w.__wxHost=v,v.__domElement.asShadowRoot=R.shadowRoot,v.__wxSlotChildren=[w],w.__wxSlotParent=v):(v.shadowRoot=w,w.__wxHost=v,v.__domElement.appendChild(R.shadowRoot),v.__wxSlotChildren=[w],w.__wxSlotParent=v);for(var k=R.listeners,M=0;M<k.length;M++){var F=k[M];g(F.target,F.name,C(F.func,v))}var j=u.innerEvents;for(S=0;S<j.length;S++){var U=j[S],$=U.id?"this"===U.id?v:v.__idCache[U.id]:v.shadowRoot;if($)for(var W=U.name,q=U.funcs,H=0;H<q.length;H++)g($,W,C(q[H],v))}var G=v.__relationMap;return G.parent&&(A(G.parent,v,"parent"),v.__relationHandler=u.relationHandler),G.ancestor&&(A(G.ancestor,v,"ancestor"),v.__relationHandler=u.relationHandler),G.shadowHost&&(A(G.shadowHost,v,"shadowHost"),v.__relationHandler=u.relationHandler),v.__propertyChangeListeners=null,u.initiator&&n.safeCallback("Component Initiator",u.initiator,v.__methodCaller,[],v),v.__lifeTimeFuncs.created.call(v.__methodCaller,[],v),v};y.createWithGenerics=function(e,t,r,i){return"object"==typeof e?O(e.is,e,null,r,null,i):e?e.indexOf("-")<0&&!t?u.create(e):(n.hasGlobalWarningListeners()&&(t||T.call(y._list,e)||"virtual"===e||n.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),O(e.toLowerCase(),t||T.call(y._list,e)&&y._list[e]||y._list[""],null,r,null,i)):O("virtual",y._list[""],null,r,null,i)},y.create=function(e,t,r){return y.createWithGenerics(e,t,null,r)},y.listProperties=function(e){var t=[];for(var r in e.__propPublic)void 0!==e.__propPublic[r]&&t.push(r);return t},y.listPublicProperties=function(e){var t=[];for(var r in e.__propPublic)!0===e.__propPublic[r]&&t.push(r);return t},y.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},y.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},y.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},y.getMethod=function(e,t){return e.__behavior.methods[t]},y.getComponentOptions=function(e){return e.__componentOptions},y.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},y.prototype.triggerPageLifeTime=function(e,t){S(this,e,t)},y.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},y.prototype.getRootBehavior=function(){return this.__behavior},y.prototype.getPlaceholder=function(e){return this.__placeholder[e]},y.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var r=this.__relationMap[t.type],n=0;n<r.length&&r[n]!==t;n++);return this.__relationLinks[t.type][n]?[this.__relationLinks[t.type][n].parent]:[]}return function(e,t){var r=[],n=t.type,i="child"===n,o="shadowContent"===n,a=function(n){for(var s=n.childNodes,u=0;u<s.length;u++){var c=s[u];if(c instanceof l)if(l.isSelectable(c)){if(c.__relationLinks){var d=null;if(d=i?c.__relationLinks.parent:o?c.__relationLinks.shadowHost:c.__relationLinks.ancestor)for(var p=0;p<d.length;p++){var f=d[p];if(f&&f.parent===e&&f.relation===t){r.push(c);break}}}o&&c instanceof y&&a(c.shadowRoot),i||a(c)}else a(c)}};return a(o?e.shadowRoot:e),r}(this,t)},y.prototype.hasExternalClass=function(e){return T.call(this.__externalClassAlias,e)},y.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},y.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},y.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},y.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},y.getInnerData=function(e){return e.__innerData},y.getDataProxy=function(e){return e.__dataProxy},y.replaceWholeData=function(e,t,r){e.__propData=t,e.__dataProxy.replaceWholeData(t,r)},y.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},y.prototype.setData=function(e){var t=this.__dataProxy;for(var r in e)t.scheduleReplace(v(r),e[r]);t.doUpdates()},e.exports=y},function(e,t,r){var n=r(3),i=r(5),o=null,a=null,s=Object.prototype.hasOwnProperty,l=i.deepCopy,u=function(e,t,r,n,i,o){this._data=t,this._innerData=r,this._innerDataExclude=n,this._comp=e,this._updateCb=o,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=i._propFields,this._observers=i._observers,this._observerTree=i._observerTree,this._relatedObserverTreeObj=i,this._observerStatus=[]};u._advancedCreate=function(e,t,r,n,i,o){return new u(e,t,r,n,i,o)};var c=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new c(e)},u.create=function(e,t,r){var n=new c({});return new u({__methodCaller:e},t,null,null,n,r)},u.setPropUpdater=function(e){o=e},u.setPropObserver=function(e){a=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,r,i){for(var o=e,a=0;a<t.length;a++){var s=t[a];if("**"===s)return n.hasGlobalWarningListeners()&&a!==t.length-1&&n.triggerWarning('"**" can only be used at the end of a path descriptor (in "'+i.is+'").'),o["**"]||(o["**"]=[]),void o["**"].push(r);o[s]||(o[s]={}),o=o[s]}o["~"]||(o["~"]=[]),o["~"].push(r)},p=function(e,t,r,n){for(var i=0;i<t.length;i++)d(e,t[i],r,n)},f=function(e,t,r){for(var n=e,i=0,o="";i<t.length&&"**"!==(o=t[i]);i++){if(!n)return;n=n[o]}var a="**"===o?n["**"]:n["~"];if(a)for(i=0;i<a.length;i++)if(a[i]===r){a.splice(i,1);break}},h=function(e,t,r){for(var n=0;n<t.length;n++)f(e,t[n],r)};c.prototype.addObserver=function(e,t,r){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},p(this._observerTree,t,n,r),n},c.prototype.removeObserver=function(e){var t=this._observers[e];h(this._observerTree,t.pathObj,e),this._observers[e]=null},c.prototype.moveObserver=function(e,t){var r=this._observers[e];h(this._observerTree,r.pathObj,e),r.pathObj=t,p(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var _=function(e,t,r){for(var i=[],o=r.pathObj,a=0;a<o.length;a++){for(var s=o[a],l=t,u=0;u<s.length;u++){var c=s[u];if("**"===c)break;if("object"!=typeof l){l=void 0;break}l=l[c]}i[a]=l}n.safeCallback("Data Observer",r.func,e.__methodCaller,i,e)},g=function(e,t){var r=null,n=0;for(var i in e)if("~"!==i)if("**"!==i)g(e[i],t);else for(r=e["**"],n=0;n<r.length;n++)t[r[n]]=!0;else for(r=e["~"],n=0;n<r.length;n++)t[r[n]]=!0},v=function(e,t,r){for(var n=e,i=0;i<r.length;i++){if(n["**"])for(var o=n["**"],a=0;a<o.length;a++){t[o[a]]=!0}var l=r[i];if("number"==typeof l){if(!s.call(n,l)){n=null;break}}else if(!/^[_a-zA-Z]/.test(l)||!s.call(n,l)){n=null;break}n=n[l]}n&&g(n,t)},m=function(e,t,r,n,i){for(var o=0;o<e.length;o++){var a=e[o],s=t[o];s&&(s&&(t[o]=!1,_(r,i?void 0:n,a)))}};u.prototype.scheduleReplace=function(e,t,r){this._changes.push([e,t,r])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var r=this._propFields,n=this._comp,i=this._hidingValue,u=this._innerDataExclude,c=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,p=null,f=null,h=null;d?(c||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),p=this._doingUpdates.changedPaths,f=this._doingUpdates.changedValues,h=this._doingUpdates.combinedChanges):(p=[],f=[],h=[]);var _=this._changes;this._changes=[];var g=[];this._beforeMergeCb&&this._beforeMergeCb(_,g,e);for(var y=0;y<_.length;y++){var b=_[y],w=b[0],A=b[1],E=A,S=void 0,I=w[0],T=!!u&&u.test(I),C=r[I];if(C&&1===w.length)S=this._data[I],A=o.call(this._comp,w,C,A,this._hidingValue),T||(this._innerData?(E=l(A),g[y]||(this._innerData[I]=E)):E=A,b[1]=E),T&&!this._innerData||(this._data[I]=A);else{var O=this._data,N=I,x=null,R=1;if(!T||this._innerData){for(;R<w.length;R++)"number"==typeof(x=w[R])&&isFinite(x)?s.call(O,N)&&O[N]instanceof Array||(O[N]=[]):(!s.call(O,N)||null===O[N]||"object"!=typeof O[N]||O[N]instanceof Array)&&(O[N]={}),O=O[N],N=x;O[N]=A}if(this._innerData&&(O=this._innerData,N=I,!T)){for(R=1;R<w.length;R++)"number"==typeof(x=w[R])&&isFinite(x)?s.call(O,N)&&O[N]instanceof Array||(O[N]=[]):(!s.call(O,N)||null===O[N]||"object"!=typeof O[N]||O[N]instanceof Array)&&(O[N]={}),O=O[N],N=x;E=l(A),g[y]||(O[N]=E),b[1]=E}}v(this._observerTree,this._observerStatus,w),T||(p.push(w),f.push([E,S,A]),h.push(b)),d&&(this._doingUpdates.changesTotal+=1)}if(!c){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var P=0;do{P=this._doingUpdates.changesTotal,m(this._observers,this._observerStatus,n,this._data,i)}while(P!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(p,f,h,e);for(var D=0;D<f.length;D++){var L=f[D];if(L){var B=p[D],k=r[B[0]];k&&a.call(n,L[2],L[1],B,k,i,t)}}}},e.exports=u},function(e,t,r){var n=r(10),i=r(12),o=r(15),a=r(4),s=r(14),l=function(){};l.prototype=Object.create(n.prototype,{constructor:{value:l,writable:!0,configurable:!0}});var u=l._advancedCreate=function(e,t){var r=new l;r.is=e.toLowerCase();var u=null;if("dom"===a.documentBackend&&(u=s.backendExtractedDefault?new o(e):document.createElement(e)),n.initialize(r,u,t),r.classList=i.create(r,null),t){var c=t.__wxHost;r.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return r};l.create=function(e){return u(e,null)};var c=l._advancedClone=function(e,t){var r=new l;r.is=e.is;var u=null;if(e.__domElement&&(u=e.__domElement instanceof o?s.backendExtractedDefault?e.__domElement.cloneNode():o.toElement(e.__domElement):s.backendExtractedDefault?o.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1)),n._clone(r,e,u,t),r.classList=i.create(r,null),t){var c=t.__wxHost;r.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return r};l.cloneNode=function(e){return c(e,null)},e.exports=l},function(e,t,r){var n=r(10),i=r(4),o=function(e,t){a(this,e,t)};o.prototype=Object.create(n.prototype);var a=o.initialize=function(e,t,r){e.is=t||"";var o=null;"dom"===i.documentBackend&&(o=void 0),n.initialize(e,o,r),e.__virtual=!0};o._advancedCreate=function(e,t){return new o(e,t)},o.create=function(e){return new o(e,null)},e.exports=o},function(e,t,r){var n=r(10),i=r(16),o=r(19),a=r(18),s=r(13),l=Object.prototype.hasOwnProperty,u=function(e){o.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};u.prototype=Object.create(o.prototype),u.create=function(e){var t=new u(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var r in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[r]||(t.__childrenPropsFilter[r]=e.ownerShadowRoot.__childrenPropsFilter[r]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};u.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},u.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},u.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},u.prototype.createVirtualNode=function(e){return o._advancedCreate(e,this)},u.prototype.getCompDefByTagName=function(e){var t=this.__wxHost;return l.call(t.__using,e)?t.__using[e]:l.call(t.__generics,e)?t.__generics[e]:e},u.prototype.createComponent=function(e,t,r,n){var o=null;o=void 0===t?e:t;var a=this.__wxHost;"object"!=typeof o&&"object"!=typeof(o=this.getCompDefByTagName(o))&&(o=i._list[o]||i._list[""]);var s=function(e,t){var r={};for(var n in e){var o=e[n];"object"!=typeof o&&l.call(t.__placeholder,o)&&(o=t.__placeholder[o],l.call(t.__using,o)?o=t.__using[o]:l.call(t.__generics,o)&&(o=t.__generics[o]||i._list[""]),r[n]=o)}return r}(r,a);return r&&(r=function(e,t){var r={};for(var n in e){var o=e[n];"object"!=typeof o&&(l.call(t.__using,o)?o=t.__using[o]:l.call(t.__generics,o)&&(o=t.__generics[o]||i._list[""]),r[n]=o)}return r}(r,a)),"object"==typeof e&&(e=o.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",r=0;r<8;r++){var n=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[n]}return t}()),a.__componentOptions.writeOnly&&!o.options.allowInWriteOnly&&(o=i._list[""]),i._advancedCreate(e,o,this,r,s,n)},u.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!l.call(t.__using,e)||(!!l.call(t.__placeholder,e)||(!!l.call(t.__generics,e)||!!l.call(t.__placeholder,e)))},u.prototype.getHostNode=function(){return this.__wxHost},u.prototype.getElementById=function(e){return n._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=u},function(e,t,r){var n=r(10),i=r(13),o=function(){};o.create=function(e,t,r){var a=new o;if(!(e instanceof n||e instanceof i))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=r||n;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,r,n,i){if(n<0&&e instanceof t&&!1===i(e))return!1;var o=r&&e.__wxSlotChildren||e.childNodes;if(o)for(var s=0;s<o.length;s++)if(!1===a(o[s],t,r,n,i))return!1;return!(n>0&&e instanceof t&&!1===i(e))};o.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,r,n){for(;e;e=r&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===n(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=o},function(e,t,r){var n=r(4),i=r(3),o=r(10),a=r(18),s=r(13),l=r(20),u=r(16),c=r(23),d=r(24),p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var f=function(){};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0}});var h=null;p.precompiler=h,p.htmlParser=null;var _=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},g=Object.prototype.hasOwnProperty,v=function(e,t){if(null!==e&&"object"==typeof e&&g.call(e,t))return e[t]},m=function(e,t,r,n){if(g.call(t,r)){var o=t[r];if("function"==typeof o)return i.safeCallback("Template Method",o,e,n)}},y=function(e,t){return[{t:1,n:"slot",a:[],c:[],p:null}]},b={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,r){e.classList.toggle(t,!!r)},A=function(e,t,r){e[t]=r},E=function(e,t,r){var n=e.__dataProxy;n.scheduleReplace([t],r),n.doUpdates()},S=function(e,t,r){e.class=r},I=function(e,t,r){e.setAttribute("style",r)},T=function(e,t,r){e.setAttribute("class",r)},C=function(e,t,r){e.textContent=r},O=function(e,t,r){e.dataset||(e.dataset={}),e.dataset[t]=r},N={$:function(e,t,r){!0===r?e.setAttribute(t,""):!1===r||null==r?e.removeAttribute(t):e.setAttribute(t,r)},":":A,c:w,s:function(e,t,r){var n=e.style;n&&(n[t]=r)},d:O},x=function(e,t,r){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};p.create=function(e,t,r,n){var o=void 0===e.template?x:e.template,a=o;"function"!=typeof o&&("undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node?a=p.precompileAndGetCreator(o):(i.hasGlobalWarningListeners()&&i.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),a=y));var s=Object.create(p.prototype);return s._initValuesJSON=JSON.stringify(r),s._dataJSON=t!==r?JSON.stringify(t):null,s._tagTreeRoot=R(a,r,e.methods,n),s._renderingMode=n.renderingMode,s};var R=function(e,t,r,i){var o="native"===i.renderingMode,s=o,l=!1,u=Object.create(null);o&&!n.hasDOMBackend&&(e=y);var c={},p=e(v,m,r),f=function(e){for(var r=0;r<e.length;r++){var n=e[r];if(3!==n.t){var i=n.n,u=!(o||"string"==typeof i&&i.indexOf("-")<0);"slot"===i&&""===n.sn&&(l=!0),n.n=i;var p=n.st;p&&p.e&&(p.o=I,s&&(p.v=p.e(t,c,null)));var h=n.cl;h&&h.e&&(h.o=o?T:S,s&&(h.v=h.e(t,c,null)));var g=null;u||(n.p=g=o?document.createElement(n.n):a.create(n.n),p&&void 0!==p.v&&g.setAttribute("style",p.v),o&&h&&void 0!==h.v&&g.setAttribute("class",h.v));for(var v=n.a,m=0;m<v.length;m++){var y=v[m];if(y.d)o||d[y.n].register(y.n,y,n);else{o||("bind"===y.n.slice(0,4)?(y.evCatch=!1,y.ev=_(y.n.slice(4)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))):"catch"===y.n.slice(0,5)&&(y.evCatch=!0,y.ev=_(y.n.slice(5)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))));var b=y.o;if(u)b?y.o="&"===b?N[":"]:N[b]:(y.o=N[":"],y.n=_(y.n)),y.o===A&&(y.o=E),s&&y.e&&(y.v=y.e(t,c,null));else if(!y.ev){var O=N;y.o=b?"&"===b?O[":"]:O[b]:O.$,s?(y.e&&(y.v=y.e(t,c,null)),(y.o!==w||o)&&y.o(g,y.n,y.v)):y.e||y.o(g,y.n,y.v)}}}f(n.c),o&&(1!==n.c.length||void 0===n.c[0].sn||n.c[0].compressed||(n.sn=n.c[0].sn,n.compressed=!0,n.c.pop()))}else n.e&&(n.o=C,n.c=s?n.e(t,c,null):"")}};return f(p,u,!0),o&&(l||p.push(b),1!==p.length||""!==p[0].sn||p[0].compressed||p.pop()),p},P=function(e,t){return function(r){if(this[e](r),t)return!1}},D=function(e,t,r,n,i,a,s,l){for(var p=null,f=0,h=null,_=0;_<e.length;_++){var g=s,v=e[_];if(3===v.t)p=v.e?t.createTextNode(v.e(n,i,null)):t.createTextNode(v.c),v.e&&c.addBindings(a,g,v.b,p,v),o.appendChild(r,p);else{var m=v.cl,y=v.st,b=v.a,S=!1;for(f=0;f<b.length;f++)if((h=b[f]).d){var I=d[h.n].create(h.n,h,v,n,i,a,g,l,t,D,r);if(d[h.n].requireBlock){p=I,o.appendChild(r,p),S=!0;break}}if(S)continue;if(v.v)p=t.createVirtualNode(v.n);else if(v.p){for(p=t.cloneNativeNode(v.p),f=0;f<b.length;f++)(h=b[f]).d||(h.ev?l(p,h.ev,h.v,h.evCatch):h.o===A?p.__domElement&&(h.o(p.__domElement,h.n,h.e(n,i,null)),c.addBindings(a,g,h.b,p.__domElement,h)):(h.e&&h.o(p,h.n,h.e(n,i,null)),(h.e||h.o===w||h.o===O)&&c.addBindings(a,g,h.b,p,h)));y&&y.e&&(p.setAttribute("style",y.e(n,i,null)),c.addBindings(a,g,y.b,p,y))}else{if(v.cpf){var T={},C=t.__wxHost;for(var N in v.cpf)!function(e){var t=v.cpf[e];T[e]=C.__behavior.methods[t]}(N);t.__childrenPropsFilter=T}for(p=t.createComponent(v.n,void 0,v.g,void 0),f=0;f<b.length;f++)if(!(h=b[f]).d){var x=h.v;h.o===E&&u.hasPublicProperty(p,h.n)?(h.e&&(x=h.e(n,i,null),c.addBindings(a,g,h.b,p,h)),h.e?E(p,h.n,x):p.__behavior.properties[h.n].type===Boolean?E(p,h.n,!0):E(p,h.n,x)):h.ev?l(p,h.ev,x,h.evCatch):h.o!==E&&(h.e&&(x=h.e(n,i,null),c.addBindings(a,g,h.b,p,h)),h.o(p,h.n,x))}y&&(y.e?(p.__domElement.setAttribute("style",y.e(n,i,null)),c.addBindings(a,g,y.b,p.__domElement,y)):p.__domElement.setAttribute("style",y.v))}v.id&&(p.id=v.id),m&&(m.e?p.class=m.e(n,i,null):p.class=m.v,m.o&&c.addBindings(a,g,m.b,p,m)),v.sl&&(p.slot=v.sl),void 0!==v.sn&&o.setSlotName(p,v.sn),o.appendChild(r,p),D(v.c,t,p,n,i,a,g,l)}}},L=function(e,t,r){for(var n=e.childNodes,i=0;i<n.length;i++){var o=n[i];o instanceof s||(o.__id&&(t[o.__id]=o),void 0!==o.__slotName&&(r[o.__slotName]=o),L(o,t,r))}},B=function(e,t,r,n,i,o){for(var a=null,s=0,l=null,u=0;u<e.length;u++){var d=e[u];if(void 0===d.n)a=document.createTextNode(d.c),d.e&&c.addBindings(i,o,d.b,a,d),t.appendChild(a);else{var p=d.cl,f=d.st,h=d.a;for(a=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<h.length;s++)(l=h[s]).e&&c.addBindings(i,o,l.b,a,l);t.appendChild(a),d.id&&(r[d.id]=a),p&&p.e&&c.addBindings(i,o,p.b,a,p),f&&f.e&&c.addBindings(i,o,f.b,a,f),void 0!==d.sn&&(n[d.sn]=a),B(d.c,a,r,n,i,o)}}};p.prototype.createInstance=function(e){var t=Object.create(f.prototype),r=JSON.parse(this._initValuesJSON),i=null===this._dataJSON?r:JSON.parse(this._dataJSON),o=Object.create(null),a=Object.create(null),s=[],u=c.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===n.documentBackend&&(d=document.createDocumentFragment()),B(this._tagTreeRoot,d,o,a,u,{}),a[""]||(a[""]=null);else{if(d=l.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var p in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[p]||(d.__childrenPropsFilter[p]=e.ownerShadowRoot.__childrenPropsFilter[p]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;D(this._tagTreeRoot,d,d,r,{},u,{},(function(e,t,r,n){d.__wxHost?e.addListener(t,P(r,n).bind(d.__wxHost)):s.push({target:e,name:t,func:P(r,n)})})),L(d,o,a)}return t.data=i,t.shadowRoot=d,t.idMap=o,t.slots=a,t.listeners=s,t._topScope=u,t},f.prototype.updateValues=function(e,t,r){for(var n=o.getMethodCaller(e),i=0;i<r.length;i++){var a=r[i];c.updateBinding(this._topScope,a,t,{},n)}},e.exports=p},function(e,t){var r={create:function(e,t,r,i,o,a,s){for(var l={inc:1,name:e,exp:i,lp:o,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<a.length;u++){var c=a[u];null===c[0]?n(t,c,null,l):n(r[c[0]],c,null,l)}return l},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return n(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var r in e)t[r]={inc:1,linked:e[r],scopes:{},targets:{},children:null,__scopeBinded:[]},n(e[r],[null],null,t[r]);return t}},n=r.addBinding=function(e,t,r,n){for(var i=e,o=1;o<t.length;o++){var a=t[o];i.children||(i.children=Object.create(null));var s=i.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),i=s[a]}var l=e.inc++;return r?i.targets[l]=[r,n]:(i.scopes[l]=n,n.__scopeBinded.push([i,l])),l};r.addBindings=function(e,t,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];s[0]?n(t[s[0]],s,i,o):n(e,s,i,o)}},r.updateLvaluePath=function(e,t){e.lp=t},r.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,r=0;r<t.length;r++){var n=t[r];delete n[0].scopes[n[1]]}};var i=function(e,t,r,n,i){if(e.linked)o(e,t,r,n,i);else{var a=n[e.name];n[e.name]=e.exp(r,n,i),o(e,t,r,n,i),n[e.name]=a}},o=r.updateBinding=function(e,t,r,n,o){for(var a=e,s=0,l=0;l<t.length;l++){for(s in a.scopes)i(a.scopes[s],t,r,n,o);var u=t[l];if(!a.children)return;var c=a.children;if(!c[u])return;a=c[u]}var d=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(r,n,o))}for(s in e.scopes)i(e.scopes[s],[],r,n,o);for(s in e.children)d(e.children[s])};d(a)};e.exports=r},function(e,t,r){e.exports={if:r(25),elif:r(25),else:r(25),for:r(27),key:r(28),"for-index":r(29),"for-item":r(30),alias:r(31)}},function(e,t,r){var n=r(23),i=r(26).RUNTIME_NAMES;i.TOP_SCOPE,i.SUB_SCOPE,i.CALLER;e.exports={requireBlock:!0,register:function(e,t,r){},create:function(e,t,r,i,o,a,s,l,u,c,d){var p=u.createVirtualNode("wx:"+e);p.__wxIfCondValue=!0,p.__wxIfNextNode=null,p.__wxIfHasTrueCond=!0;var f=null;"if"!==e&&("wx:if"!==(f=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==f.is?f=null:f.__wxIfNextNode=p),r.id&&(p.id=r.id);var h=p.__wxIfUpdateNode=function(){var e=p.__wxIfCondValue;if(f&&f.__wxIfHasTrueCond&&(e=!1),e&&!p.childNodes.length){var t=n.proxyTopScope(a),d=n.proxySubScopes(s);p.__wxTopScope=t,p.__wxSubScopes=d,c(r.c,u,p,i,o,t,d,l)}else if(!e&&p.childNodes.length){for(var h in n.removeBindingsForScope(p.__wxTopScope),p.__wxSubScopes)n.removeBindingsForScope(p.__wxSubScopes[h]);for(;p.childNodes.length;)p.removeChild(p.childNodes[0])}p.__wxIfNextNode&&p.__wxIfNextNode.__wxIfUpdateNode()},_=function(e){p.__wxIfCondValue=!!e,p.__wxIfHasTrueCond=p.__wxIfCondValue||f&&f.__wxIfHasTrueCond,h()};return"else"===e?_(!0):(n.addBindings(a,s,t.b,p,{e:t.d,o:function(e,t,r){_(r)}}),_(t.d(i,o,null))),p}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var r=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},n=t.STRING_ESCAPE_MAP={},i="";for(var o in r)n[r[o]]=o,i+=r[o];t.STRING_ESCAPE_REGEXP=new RegExp("["+i+"]","g")},function(e,t,r){r(19);var n=r(23),i=r(26).RUNTIME_NAMES;i.TOP_SCOPE,i.SUB_SCOPE,i.CALLER;e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,r){},create:function(e,t,r,i,o,a,s,l,u,c){var d=r._wxForIndex||"index",p=r._wxForItem||"item",f=r._wxKey,h=u.createVirtualNode("wx:for:list");r.id&&(h.id=r.id),n.create("",a,s,(function(e,r,n){var i=t.d(e,r,null);return y(i,e,r,n),i}),t.l,t.b);var _=function(e,t,i,o,f){var _=u.createVirtualNode("wx:for:item"),g=n.proxyTopScope(a),v=n.proxySubScopes(s);_.__wxTopScope=g,_.__wxSubScopes=v,_.__wxForToRemove=!1,_.__wxForKeyStr="";var m=n.create(d,g,v,null,null,[]),y=n.create(p,g,v,null,[i],[]);return v[d]=m,v[p]=y,t[d]=i,t[p]=o,c(r.c,u,_,e,t,g,v,l),void 0===f?h.appendChild(_):h.insertBefore(_,f),_},g=function(e,t,r,o,a,s){var l=e.__wxSubScopes[p];n.updateLvaluePath(l,[o]),a&&(s?h.insertBefore(e,s):h.appendChild(e));var u=e.__wxSubScopes[d];r[d]=o,n.updateBinding(u,[],i,r,t)},v=function(e,t,r,i,o,a){i[p]=o,n.updateBinding(e.__wxSubScopes[p],t,r,i,a)},m=function(e){for(var t in n.removeBindingsForScope(e.__wxTopScope),h.__wxSubScopes)n.removeBindingsForScope(e.__wxSubScopes[t]);h.removeChild(e)},y=function(e,t,r,n){var i="",o=e;"object"==typeof e&&null!==e||(o=[]);var a={};for(i in r)a[i]=r[i];var s=0;if(f){var l=[],u=e instanceof Array,c=[];if(!u){var d=o;for(i in o=[],d)o.push(d[i]),c.push(i)}for(s=0;s<o.length;s++)l.push(String(o[s][f]));if(0===o.length)for(;h.childNodes.length;)m(h.childNodes[0]);else{var p=Object.create(null),y=Object.create(null),b=h.childNodes,w=null,A="";for(s=0;s<b.length;s++)p[A=(w=b[s]).__wxForKeyStr]>=0?(m(w),s--):(p[A]=s,y[A]=w,w.__wxForToRemove=!0);var E=-1,S=0,I=1,T=[];for((S=p[o[0][f]])>=0||(S=-1),b[S]&&(b[S].__wxForToRemove=!1),s=1;s<o.length;s++)(I=p[o[s][f]])>=0&&(E<S&&(S<I||E>I)&&(T.push(b[S]),E=S),b[S=I]&&(b[S].__wxForToRemove=!1));for(E<S&&T.push(b[S]),s=0;s<b.length;s++)(w=b[s]).__wxForToRemove&&(m(w),s--);var C=T.shift(),O=0;for(s=0;s<o.length;s++){var N=o[s],x=y[N[f]];if(y[N[f]]=null,x){var R=!0;if(x===C){for(;b[O]!==C;)O++;O++,C=T.shift(),R=!1}g(w=x,n,a,u?s:c[s],R,b[O]),R&&b[O]===w&&O++,v(w,[],t,a,o[s],n)}else w=_(t,a,u?s:c[s],o[s],b[O]),O++,w.__wxForKeyStr=String(N[f])}}}else{for(;h.childNodes.length;)m(h.childNodes[0]);if(e instanceof Array)for(s=0;s<o.length;s++)_(t,a,s,o[s]);else for(i in o)_(t,a,i,o[i])}};return y(t.d(i,o,null),i,o,null),h}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,r){r._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,r){r._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,r){r._wxForItem=t.d},create:function(){}}},function(e,t,r){var n=r(23),i=r(26).RUNTIME_NAMES;i.TOP_SCOPE,i.SUB_SCOPE,i.CALLER;e.exports={requireBlock:!0,register:function(e,t,r){},create:function(e,t,r,i,o,a,s,l,u,c){var d=t.s[0],p=n.create(d,a,s,t.d,t.l,t.b),f={},h="";for(h in s)f[h]=s[h];f[d]=p;var _={};for(h in o)_[h]=o[h];_[d]=t.d(i,o,null);var g=u.createVirtualNode("wx:alias");return r.id&&(g.id=r.id),c(r.c,u,g,i,_,a,f,l),g}}}]),L,B;(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{Behavior:()=>Jo,Component:()=>aa,CustomComponent:()=>ra,Page:()=>sa,addView:()=>Va,attachView:()=>Ja,beginTapMark:()=>Tn,checkTapMark:()=>On,componentAliases:()=>Yi,componentExists:()=>Qa,componentPathToAlias:()=>Zi,convertComponentAliasToRoute:()=>Ti,convertRouteToComponentAlias:()=>Ii,destroyCustomTabBarManager:()=>R,destroyDataThreadTabBar:()=>Ya,dispatchViewRoute:()=>vo,doDataThreadReplacePlaceholder:()=>Ho,enableUpdateWxAppCode:()=>ms,endTapMark:()=>In,endViewInfoCallback:()=>po,getAllPluginSubPackagePrefix:()=>Ci,getDomTreeByPageId:()=>Ea,getDomainByPluginId:()=>eo,getEntryFile:()=>Ui,getGenericsByPath:()=>Lo,getNodeById:()=>fs,getNodeId:()=>hs,getOwnerPluginAppId:()=>Go,getPageId:()=>vs,getPlaceholderByPath:()=>Bo,getPluginRoutePrefix:()=>Ni,getPluginSubPackagePrefix:()=>Oi,getRendererByPath:()=>ko,getRootNode:()=>_s,getRootNodeId:()=>gs,getSubPackagePlugin:()=>ji,getUsingByPath:()=>Po,getWorkletIdByName:()=>fa,getXrFrameTouchEventBubbleByPath:()=>Mo,initBannedMap:()=>Qe,initViewThread:()=>ya,injectWxss:()=>qo,isLazyLoad:()=>jo,isSubPackageIndependent:()=>Pi,isViewAttached:()=>Za,matchSubPackageName:()=>Ri,mergeData:()=>ws,newPage:()=>Aa,newTabBar:()=>wa,onComponentDef:()=>xa,onLazyLoadError:()=>Le,onMainPageFrameReady:()=>go,prepareSubPackagesStyle:()=>Na,publishDomainComponents:()=>ro,removeView:()=>Xa,requestViewInfo:()=>co,restoreView:()=>Ji,runComponentDef:()=>Ba,saveView:()=>Vi,sendTabBarCreationRequest:()=>$a,setLazyLoadTimeout:()=>Re,setModelValueData:()=>Fo,setPageRootCompPath:()=>Ka,setPageType:()=>fe,showTabBar:()=>es,triggerGenerateFuncReady:()=>Wo,updateWxAppCode:()=>ys,wrapTapMark:()=>Cn,xrFrameTouchEvent:()=>rs});var n=void 0!==D?D:{},a="none";"undefined"!=typeof __useSclExparser__&&__useSclExparser__&&void 0!==f&&(a="scl"),"undefined"!=typeof __skylineEngine__&&(a="skyline"),"undefined"!=typeof xrFrame&&(a="xr-frame"),"scl"===a?n=f.exparser||n||{}:"skyline"===a?n=__skylineEngine__.getRuntime().getExparser()||n||{}:"xr-frame"===a&&(n=xrFrame.getExparser()||n||{});var c=()=>n,d=()=>__skylineEngine__.getRuntime(),p=()=>a,_=c(),v={WX_EVENT:11,REQUEST_SAVE:12,COMPONENT_DEF:21,SAVE_STATE:22,RESTORE_STATE:23,FLOW_INITIAL_RENDERING_CACHE:24,FLOW_CLEAR_INITIAL_RENDERING_CACHE:25,FLOW_SET_SUBPACKAGE_LOADED:26,SET_DATA_CALLBACK:32,FLOW_SET_DATA:33,FLUSH_BLOCKED:43,FLOW_GROUP:41,FLOW_GROUP_END:42,FLOW_DEPTH:2,FLOW_INITIAL_CREATION:3,FLOW_UPDATE:6,FLOW_DATA_OBSERVER:8,FLOW_APPLY_PROPERTY:4,FLOW_MINIPULATE_CHILD:7,FLOW_CREATE_NODE:5,FLOW_REPEAT:9,FLOW_VIEW_INFO:63,REQUEST_TAB:51,COMPONENT_DEF_TAB:52,FLOW_CREATE_TAB:53,DESTROY_TAB:54,DESTROY_PAGE:55,SHOW_TAB:56,SCL_CONTEXT_READY:57,SCL_COMPONENT_DEF_TAB_READY:58,REQUEST_BROADCAST_VIEW_ID:61,RESPONSE_BROADCAST_VIEW_ID:62,BANNING_MAP:90,CALL_METHOD_FROM_WXS:50,RESPONSE_VIEW_INFO:64,MODEL_VALUE_CHANGE:65,FLOW_SET_NODE_ANIMATION_INFO:100,ANIMATION_TRANSITION_END:101,FLOW_CLEAR_NODE_ANIMATION_INFO:102,CLEAR_ANIMATION_COMPLETE:103,FLOW_SET_NODE_NEXT_ANIMATION_INFO:104,LOAD_COMPONENT_DEF:110,FLOW_WAIT_COMPONENT:112,FLOW_REPLACE_PLACEHOLDER:113,FLOW_PEND_PLACEHOLDER_REPLACEMENT:114,FLOW_COMPONENT_DEF_ADD:120,FLOW_INJECT_SUBPACKAGE:121,FLOW_INJECT_COMPONENT:122,FLOW_HOT_UPDATE:900,FLOW_HOT_UPDATE_CHILD:901,FLOW_HOT_UPDATE_RESET:902,UPDATE_COMPONENT_DEF:903,UPDATE_PERFORMANCE_STAT:800,ENABLE_UPDATE_PERFORMANCE_STAT:801,DISABLE_UPDATE_PERFORMANCE_STAT:802,REQUEST_WORKLET_METHOD:200,RESPONSE_WORKLET_METHOD:201,FLOW_SET_NODE_ANIMATED_STYLE:202,XR_FRAME_CANVAS_CREATED:300,XR_FRAME_CANVAS_READY:301,FLOW_SET_ROOT_PROPERTIES:302,XR_FRAME_COMP_OPTIONS:303,LOAD_APP_PKG:1e3,LOAD_APP_PKG_READY:1001},m={};Object.keys(v).forEach((e=>{m[v[e]]=e}));var w=e=>m[e]||`UNKNOWN_EVENT_${e}`,A=0,E=1,S=2,I=4294967297,T=4294967298,C="custom-tab-bar/index";class O{constructor(){this.__instances=void 0,this.__instances=new Map}add(e,t,r){this.__instances.set(e,{tm:r,renderType:t})}get(e){var t=this.__instances.get(e);return t||s.warn(`[customTabBarManager] pageId: ${e} TabBar is not exists`),t}remove(e){this.__instances.delete(e)}has(e){return this.__instances.has(e)}getRenderType(e){var t;return(null===(t=this.__instances.get(e))||void 0===t?void 0:t.renderType)||"webview"}}O.MANAGER=void 0;var N=()=>(O.MANAGER||(O.MANAGER=new O),O.MANAGER),R=()=>{O.MANAGER=null},P=e=>{var t,r;if(Array.isArray(null===(t=y)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.list))for(var n=y.tabBar.list,i=0;i<n.length;i++){var o=n[i];if(o.pagePath===`${e}.html`)return!o.hide}return!1},k=()=>{var e,t;return!(null===(e=y)||void 0===e||null===(t=e.tabBar)||void 0===t||!t.custom)},M=(e,t,r)=>{var n,i,o=!0,a=null===(n=y)||void 0===n||null===(i=n.tabBar)||void 0===i?void 0:i.list;Array.isArray(a)&&(a.map((e=>null==e?void 0:e.pagePath)).filter((e=>!!e)).indexOf(`${t}.html`)>=0&&(o=!1));s.info(`[checkPageIncludingTabBar] rootCompName=${t}, viewId=${r}, needRemove=${o}`),o&&(e.tabDestroyed=!0,ce(v.DESTROY_TAB,[],r))},F=c(),j=/^[-+a-z]+:\/\//i,U=function(e,t){if(j.test(t))return t;var r=e.match(j),n="";r&&(n=r[0],e=e.slice(n.length)),0===t.indexOf("/")&&(e="");var i=e.split("/");i.pop();for(var o=t.split("/");o.length;){var a=o.shift();""!==a&&"."!==a&&(".."!==a?i.push(a):i.pop())}return n+i.join("/")},$=t=>{var r=("undefined"==typeof window?e.g:window).__wcc_version_info__;if(r)return r[t]},W=()=>Math.floor(4294967296*(1+Math.random())).toString(16).slice(1),q=e=>Object.keys(e).map((t=>e[t])),H=(e,t,r)=>{e instanceof F.Component&&(t>0&&r(e),t&&e.shadowRoot instanceof F.Element&&H(e.shadowRoot,t,r),t<0&&r(e));for(var n=e.childNodes,i=0;i<n.length;i++)n[i]instanceof F.Element&&H(n[i],t,r)},G=e=>{if(null==e)return e;var t=typeof e;if("string"===t||"number"===t||"boolean"===t)return e;if(Array.isArray(e)){for(var r=Array(e.length),n=0;n<e.length;++n)r[n]=G(e[n]),void 0===r[n]&&(r[n]=null);return r}if("object"===t){for(var i={},o=Object.keys(e),a=0;a<o.length;++a)i[o[a]]=G(e[o[a]]),void 0===i[o[a]]&&delete i[o[a]];return i}},Q=e=>{var t={};return e.forEach((e=>{t[e]={ok:!1,callbacks:[]}})),{notify(e){t[e]&&(t[e].ok=!0,t[e].callbacks.forEach((e=>e())),t[e].callbacks=[])},on(e,r){t[e]&&(t[e].ok?r():t[e].callbacks.push(r))},isNotified:e=>t[e]&&t[e].ok}},z={},K=-1,V=null,J=!1,X=()=>J,Y=[],Z=null,ee=null,te=!1,re=()=>u,ne={[I]:"skyline",[T]:"scl"},ie={},oe={},ae=new Set,se=(e,t)=>{var r="webview"===ne[t]?e:"xr-frame"===ne[t]?[...e]:e.map((e=>G(e))),n=r.shift();if(""===n)return K=t,void(V&&V(t));t=t||0,"webview"===p()&&(t=0),le(t,n,r)},le=(e,t,r)=>{var n,i=null;if(z[e]&&(i=z[e][t]),!i&&z.$GLOBAL){if(ae.has(e))return;i=z.$GLOBAL[t]}if(!(i||"skyline"!==p()||null!==(n=oe[e])&&void 0!==n&&n.isReady))return oe[e]||(oe[e]={queue:[],isReady:!1}),void oe[e].queue.push({ev:t,data:r});i?i(r,t,e):s.error(`[VD] recvData no handler for event=${t}, pageId=${e}`)},ue=()=>{ee&&(ee=clearTimeout(ee)),Y.length&&ie[Z].vdSyncBatch(Y,Z&&[Z]),Z=null,Y=[],te=!1},ce=(e,t,r,n)=>{if(t=[e].concat(t),"webview"===ne[r]){if(ne[r],!te||n)return ue(),te=!0,void ie[r].vdSync(t,r&&[r]);Z!==r&&ue(),Z=r,Y.push(t),te=!0,ee||(ee=setTimeout((()=>{ee=null,ue()}),15))}else ie[r].vdSync(t,r&&[r])},de=e=>{e.__registered||(e.__registered=!0,e.onVdSync(((e,t)=>{void 0===ne[t]&&fe(t,"webview"),se(e,t)})),e.onVdSyncBatch(((e,t)=>{void 0===ne[t]&&fe(t,"webview");for(var r=0;r<e.length;r++)se(e[r],t)})))},pe=()=>{de(re()._virtualDOMTunnel)};void 0!==r&&r?x.onInitReady(pe):pe();var fe=(e,t)=>{var r;null!==(r=ie[e])&&void 0!==r&&r.__registered&&ne[e]===t||(ne[e]=t,ie[e]=re()._virtualDOMTunnel)},he=e=>ne[e],_e=(e,t,r)=>{if(void 0!==r){if(""===e)return V=t,void(K>=0&&V(K));z[r=r||0]||(z[r]={}),z[r][e]=t}},ge=e=>{delete z[e]},ve={},me=(e,t)=>{ve[e]=t},ye=e=>{Object.keys(ve).forEach((t=>{_e(t,ve[t],e)})),oe[e]&&(oe[e].isReady=!0,oe[e].queue.forEach((({ev:t,data:r})=>{le(e,t,r)})),oe[e].queue=[])},be=e=>(t,r={})=>{if(0===t.length)return 0;s.info(`[Lazyload] loadJsFileTo${e}`);var n=Date.now(),i=x.loadJsFiles(t,null,{reportKey:void 0,isPageInitialScript:r.isPageInitialScript}),o=Date.now();return s.info(`[Lazyload] loadJsFileTo${e} done, cost: ${o-n}ms`),{cost:o-n,res:i}},we=be("AppService"),Ae=(be("RenderContext"),new Set),Ee=!1,Se=[],Ie=(e,t,r=!1)=>{if(Ee)Se.push([e,t,r]);else{var n=e.filter((e=>Ae.has(e))),i=r?e:e.filter((e=>!Ae.has(e)));if(n.length>0&&s.info("[VD] loadJsFileToWebview ignored loaded: "+n.join(",")),0===i.length)return s.info("[VD] loadJsFileToWebview no files to load, return"),void t(0);i.forEach((e=>Ae.add(e)));var o={paths:i},a=void 0;"android"===y.platform?o.key=a:o.options={reportKey:a},Ee=!0;var l=Date.now();h.invoke("loadJsFiles",o,(()=>{var e=Date.now();if(t(e-l),Ee=!1,Se.length>0){var r=Se.shift();Ie(...r)}}))}},Te=(e,t)=>{var r=Date.now();u.loadSubpackage({name:e,success(){var n=Date.now();t({cost:n-r,res:"ok",pkg:e}),s.info(`[VD] loadSubPackage ${e} success, cost ${n-r}`)},fail(){var n=Date.now();t({cost:n-r,res:"fail",pkg:e}),s.info(`[VD] loadSubPackage ${e} fail, cost ${n-r}`)},complete(t){s.info("[VD] loadSubpackage "+e+": ",t)}})},Ce=(e,t)=>{s.info("[VD] injectSubPackages: "+e.join(", ")),h.invoke("injectSubPackages",{subPackages:e},t)},Oe=new Set,Ne=(e,t)=>{var r=e.filter((e=>Oe.has(e))),n=e.filter((e=>!Oe.has(e)));if(r.length>0&&s.info(`[loadComponentsInDevTool] ignored loaded: [${r.length} comps]`),0===n.length)return s.info("[loadComponentsInDevTool] no comps to load, return"),0;n.forEach((e=>Oe.add(e)));var i=Date.now();return h.invoke("loadComponents",{comps:n},(()=>{})),Date.now()-i},xe=5e3,Re=e=>{xe=e},Pe=()=>{},De=e=>{Pe(e)},Le=e=>{Pe=e},Be=c();var ke=class{constructor(){this._idNodeMap={}}getAll(){return this._idNodeMap}getNodeById(e){return this._idNodeMap[e]}getNodeId(e){return e.__wxTmplId}allocNodeId(e,t){var r=t||W();return e.__wxTmplId=r,this._idNodeMap[e.__wxTmplId]=e,r}addNode(){}removeNode(e){if(e.__wxTmplId&&delete this._idNodeMap[e.__wxTmplId],e.childNodes)for(var t=0;t<e.childNodes.length;t++)this.removeNode(e.childNodes[t]);e.shadowRoot instanceof Be.Element&&this.removeNode(e.shadowRoot)}},Me=g.asyncToGenerator,Fe=e.n(Me),je=c(),Ue={},$e=1,We=(e,t,r)=>{void 0===e.__resizers?(e.__resizers=[],(e=>{var t=$e++;Ue[t]=e,je.Observer.create((e=>{"detached"===e.status&&delete Ue[t]})).observe(e,{attachStatus:!0})})(e),e.__resizers[t]=r):e.__resizers[t]=r},qe=(e,t)=>{void 0!==e.__resizers&&(e.__resizers[t]=void 0)},He=c(),Ge=null,Qe=e=>{0!==Object.keys(e).length&&(Ge=e,ps.listViewId().forEach((t=>{ce(v.BANNING_MAP,[e],t)})))},ze=e=>{e.$$.style.display="none"},Ke=e=>{var t=e=>{e instanceof He.Component?ze(e):e instanceof He.VirtualNode?e.childNodes.forEach((e=>{t(e)})):e instanceof He.TextNode&&(e.textContent=""),e.__banned=!0};t(e)},Ve={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Je={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Xe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],Ye={CSS:{},springs:{}};function Ze(e,t,r){return Math.min(Math.max(e,t),r)}function et(e,t){return e.indexOf(t)>-1}function tt(e,t){return e.apply(null,t)}var rt={arr:function(e){return Array.isArray(e)},obj:function(e){return et(Object.prototype.toString.call(e),"Object")},pth:function(e){return rt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||rt.svg(e)||e.$$},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return rt.hex(e)||rt.rgb(e)||rt.hsl(e)},key:function(e){return!Ve.hasOwnProperty(e)&&!Je.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function nt(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function it(e,t){var r=nt(e),n=Ze(rt.und(r[0])?1:r[0],.1,100),i=Ze(rt.und(r[1])?100:r[1],.1,100),o=Ze(rt.und(r[2])?10:r[2],.1,100),a=Ze(rt.und(r[3])?0:r[3],.1,100),s=Math.sqrt(i/n),l=o/(2*Math.sqrt(i*n)),u=l<1?s*Math.sqrt(1-l*l):0,c=l<1?(l*s-a)/u:-a+s;function d(e){var r=t?t*e/1e3:e;return r=l<1?Math.exp(-r*l*s)*(1*Math.cos(u*r)+c*Math.sin(u*r)):(1+c*r)*Math.exp(-r*s),0===e||1===e?e:1-r}return t?d:function(){var t=Ye.springs[e];if(t)return t;for(var r=1/6,n=0,i=0;;)if(1===d(n+=r)){if(++i>=16)break}else i=0;var o=n*r*1e3;return Ye.springs[e]=o,o}}function ot(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var at,st,lt=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function n(e){return 3*e}function i(e,i,o){return((t(i,o)*e+r(i,o))*e+n(i))*e}function o(e,i,o){return 3*t(i,o)*e*e+2*r(i,o)*e+n(i)}return function(t,r,n,a){if(0<=t&&t<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(t!==r||n!==a)for(var l=0;l<11;++l)s[l]=i(l*e,t,n);return function(e){return t===r&&n===a||0===e||1===e?e:i(u(e),r,a)}}function u(r){for(var a=0,l=1;10!==l&&s[l]<=r;++l)a+=e;--l;var u=a+(r-s[l])/(s[l+1]-s[l])*e,c=o(u,t,n);return c>=.001?function(e,t,r,n){for(var a=0;a<4;++a){var s=o(t,r,n);if(0===s)return t;t-=(i(t,r,n)-e)/s}return t}(r,u,t,n):0===c?u:function(e,t,r,n,o){var a,s,l=0;do{(a=i(s=t+(r-t)/2,n,o)-e)>0?r=s:t=s}while(Math.abs(a)>1e-7&&++l<10);return s}(r,a,a+e,t,n)}}}(),ut=(at={linear:function(){return function(e){return e}}},st={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var r=Ze(e,1,10),n=Ze(t,.1,2);return function(e){return 0===e||1===e?e:-r*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/n)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){st[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(st).forEach((function(e){var t=st[e];at["easeIn"+e]=t,at["easeOut"+e]=function(e,r){return function(n){return 1-t(e,r)(1-n)}},at["easeInOut"+e]=function(e,r){return function(n){return n<.5?t(e,r)(2*n)/2:1-t(e,r)(-2*n+2)/2}}})),at);function ct(e,t){if(rt.fnc(e))return e;var r=e.split("(")[0],n=ut[r],i=nt(e);switch(r){case"spring":return it(e,t);case"cubicBezier":return tt(lt,i);case"steps":return tt(ot,i);default:return tt(n,i)}}function dt(e){try{return document.querySelectorAll(e)}catch(e){return}}function pt(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<r;o++)if(o in e){var a=e[o];t.call(n,a,o,e)&&i.push(a)}return i}function ft(e){return e.reduce((function(e,t){return e.concat(rt.arr(t)?ft(t):t)}),[])}function ht(e){return rt.arr(e)?e:(rt.str(e)&&(e=dt(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function _t(e,t){return e.some((function(e){return e===t}))}function gt(e){var t={};for(var r in e)t[r]=e[r];return t}function vt(e,t){var r=gt(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function mt(e,t){var r=gt(e);for(var n in t)r[n]=rt.und(e[n])?t[n]:e[n];return r}function yt(e){return rt.rgb(e)?(r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+r[1]+",1)":t:rt.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(e):rt.hsl(e)?function(e){var t,r,n,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,l=i[4]||1;function u(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0==a)t=r=n=s;else{var c=s<.5?s*(1+a):s+a-s*a,d=2*s-c;t=u(d,c,o+1/3),r=u(d,c,o),n=u(d,c,o-1/3)}return"rgba("+255*t+","+255*r+","+255*n+","+l+")"}(e):void 0;var t,r}function bt(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function wt(e,t){return rt.fnc(e)?e(t.target,t.id,t.total):e}function At(e,t){return e.getAttribute(t)}function Et(e,t,r){if(e=e.$$||e,_t([r,"deg","rad","turn"],bt(t)))return t;var n=Ye.CSS[t+r];if(!rt.und(n))return n;var i=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(i),i.style.position="absolute",i.style.width=100+r;var a=100/i.offsetWidth;o.removeChild(i);var s=a*parseFloat(t);return Ye.CSS[t+r]=s,s}function St(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e.$$||e).getPropertyValue(n)||"0";return r?Et(e,i,r):i}}function It(e,t){return rt.dom(e)&&!rt.inp(e)&&(At(e,t)||rt.svg(e)&&e[t])?"attribute":rt.dom(e)&&_t(Xe,t)?"transform":rt.dom(e)&&"transform"!==t&&St(e,t)?"css":null!=e[t]?"object":void 0}function Tt(e){if(rt.dom(e)){for(var t,r=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map;t=n.exec(r);)i.set(t[1],t[2]);return i}}function Ct(e,t,r,n){var i=et(t,"scale")?1:0+function(e){return et(e,"translate")||"perspective"===e?"px":et(e,"rotate")||et(e,"skew")?"deg":void 0}(t),o=Tt(e).get(t)||i;return r&&(r.transforms.list.set(t,o),r.transforms.last=t),n?Et(e,o,n):o}function Ot(e,t,r,n){switch(It(e,t)){case"transform":return Ct(e,t,n,r);case"css":return St(e,t,r);case"attribute":return At(e,t);default:return e[t]||0}}function Nt(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=bt(e)||0,i=parseFloat(t),o=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return i+o+n;case"-":return i-o+n;case"*":return i*o+n}}function xt(e,t){if(rt.col(e))return yt(e);if(/\s/g.test(e))return e;var r=bt(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function Rt(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Pt(e){for(var t,r=e.points,n=0,i=0;i<r.numberOfItems;i++){var o=r.getItem(i);i>0&&(n+=Rt(t,o)),t=o}return n}function Dt(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*At(e,"r")}(e);case"rect":return function(e){return 2*At(e,"width")+2*At(e,"height")}(e);case"line":return function(e){return Rt({x:At(e,"x1"),y:At(e,"y1")},{x:At(e,"x2"),y:At(e,"y2")})}(e);case"polyline":return Pt(e);case"polygon":return function(e){var t=e.points;return Pt(e)+Rt(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function Lt(e,t){var r=t||{},n=r.el||function(e){for(var t=e.parentNode;rt.svg(t)&&rt.svg(t.parentNode);)t=t.parentNode;return t}(e),i=n.getBoundingClientRect(),o=At(n,"viewBox"),a=i.width,s=i.height,l=r.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function Bt(e,t){function r(r){void 0===r&&(r=0);var n=t+r>=1?t+r:0;return e.el.getPointAtLength(n)}var n=Lt(e.el,e.svg),i=r(),o=r(-1),a=r(1);switch(e.property){case"x":return(i.x-n.x)*n.w;case"y":return(i.y-n.y)*n.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function kt(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=xt(rt.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:rt.str(e)||t?n.split(r):[]}}function Mt(e){return pt(e?ft(rt.arr(e)?e.map(ht):ht(e)):[],(function(e,t,r){return r.indexOf(e)===t}))}function Ft(e){var t=Mt(e);return t.map((function(e,r){return{target:e,id:r,total:t.length,transforms:{list:Tt(e)}}}))}function jt(e,t){var r=gt(t);if(/^spring/.test(r.easing)&&(r.duration=it(r.easing)),rt.arr(e)){var n=e.length;2===n&&!rt.obj(e[0])?e={value:e}:rt.fnc(t.duration)||(r.duration=t.duration/n)}var i=rt.arr(e)?e:[e];return i.map((function(e,r){var n=rt.obj(e)&&!rt.pth(e)?e:{value:e};return rt.und(n.delay)&&(n.delay=r?0:t.delay),rt.und(n.endDelay)&&(n.endDelay=r===i.length-1?t.endDelay:0),n})).map((function(e){return mt(e,r)}))}function Ut(e,t){var r=[],n=t.keyframes;for(var i in n&&(t=mt(function(e){for(var t=pt(ft(e.map((function(e){return Object.keys(e)}))),(function(e){return rt.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),r={},n=function(n){var i=t[n];r[i]=e.map((function(e){var t={};for(var r in e)rt.key(r)?r==i&&(t.value=e[r]):t[r]=e[r];return t}))},i=0;i<t.length;i++)n(i);return r}(n),t)),t)rt.key(i)&&r.push({name:i,tweens:jt(t[i],e)});return r}function $t(e,t){var r;return e.tweens.map((function(n){var i=function(e,t){var r={};for(var n in e){var i=wt(e[n],t);rt.arr(i)&&1===(i=i.map((function(e){return wt(e,t)}))).length&&(i=i[0]),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,t),o=i.value,a=rt.arr(o)?o[1]:o,s=bt(a),l=Ot(t.target,e.name,s,t),u=r?r.to.original:l,c=rt.arr(o)?o[0]:u,d=bt(c)||bt(l),p=s||d;return rt.und(a)&&(a=u),i.from=kt(c,p),i.to=kt(Nt(a,c),p),i.start=r?r.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=ct(i.easing,i.duration),i.isPath=rt.pth(o),i.isColor=rt.col(i.from.original),i.isColor&&(i.round=1),r=i,i}))}var Wt={css:function(e,t,r){if(e.$$)return`${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${wx.transformRpx(" "+r)};`;e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,i){if(n.list.set(t,r),t===n.last||i){var o="";if(n.list.forEach((function(e,t){o+=t+"("+e+") "})),e.$$)return`transform:${wx.transformRpx(" "+o)};`;e.style.transform=o}return""}};function qt(e,t){Ft(e).forEach((function(e){for(var r in t){var n=wt(t[r],e),i=e.target,o=bt(n),a=Ot(i,r,o,e),s=Nt(xt(n,o||bt(a)),a),l=It(i,r);Wt[l](i,r,s,e.transforms,!0)}}))}function Ht(e,t){return pt(ft(e.map((function(e){return t.map((function(t){return function(e,t){var r=It(e.target,t.name);if(r){var n=$t(t,e),i=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:i.end,delay:n[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!rt.und(e)}))}function Gt(e,t){var r=e.length,n=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=r?Math.max.apply(Math,e.map((function(e){return n(e)+e.duration}))):t.duration,i.delay=r?Math.min.apply(Math,e.map((function(e){return n(e)+e.delay}))):t.delay,i.endDelay=r?i.duration-Math.max.apply(Math,e.map((function(e){return n(e)+e.duration-e.endDelay}))):t.endDelay,i}var Qt=0;var zt,Kt=[],Vt=function(){function e(){zt=requestAnimationFrame(t)}function t(t){var r=Kt.length;if(r){for(var n=0;n<r;){var i=Kt[n];if(i.paused){var o=Kt.indexOf(i);o>-1&&(Kt.splice(o,1),r=Kt.length)}else i.tick(t);n++}e()}else zt=cancelAnimationFrame(zt)}return e}();function Jt(e){void 0===e&&(e={});var t,r=0,n=0,i=0,o=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var l=function(e){var t=vt(Ve,e),r=vt(Je,e),n=Ut(r,e),i=Ft(e.targets),o=Ht(i,n),a=Gt(o,r),s=Qt;return Qt++,mt(t,{id:s,children:[],animatables:i,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);s(l);function u(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function c(e){return l.reversed?l.duration-e:e}function d(){r=0,n=c(l.currentTime)*(1/Jt.speed)}function p(e,t){t&&t.seek(e-t.timelineOffset)}function f(e){for(var t=0,r=l.animations,n=r.length,i=[];t<n;){var o=r[t],a=o.animatable,s=o.tweens,u=s.length-1,c=s[u];u&&(c=pt(s,(function(t){return e<t.end}))[0]||c);for(var d=Ze(e-c.start-c.delay,0,c.duration)/c.duration,p=isNaN(d)?1:c.easing(d),f=c.to.strings,h=c.round,_=[],g=c.to.numbers.length,v=void 0,m=0;m<g;m++){var y=void 0,b=c.to.numbers[m],w=c.from.numbers[m]||0;y=c.isPath?Bt(c.value,p*b):w+p*(b-w),h&&(c.isColor&&m>2||(y=Math.round(y*h)/h)),_.push(y)}var A=f.length;if(A){v=f[0];for(var S=0;S<A;S++){f[S];var I=f[S+1],T=_[S];isNaN(T)||(v+=I?T+I:T+" ")}}else v=_[0];var C=Wt[o.type](a.target,o.property,v,a.transforms);i.push(C),o.currentValue=v,t++}1===l.animatables.length&&l.animatables[0].target.$$&&l.animatables[0].target.setNodeStyle(i.join(" "),E)}function h(e){l[e]&&!l.passThrough&&l[e](l)}function _(e){var d=l.duration,_=l.delay,g=d-l.endDelay,v=c(e);l.progress=Ze(v/d*100,0,100),l.reversePlayback=v<l.currentTime,t&&function(e){if(l.reversePlayback)for(var r=o;r--;)p(e,t[r]);else for(var n=0;n<o;n++)p(e,t[n])}(v),!l.began&&l.currentTime>0&&(l.began=!0,h("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,h("loopBegin")),v<=_&&0!==l.currentTime&&f(0),(v>=g&&l.currentTime!==d||!d)&&f(d),v>_&&v<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,h("changeBegin")),h("change"),f(v)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,h("changeComplete")),l.currentTime=Ze(v,0,d),l.began&&h("update"),e>=d&&(n=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(r=i,h("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&u()):(l.paused=!0,l.completed||(l.completed=!0,h("loopComplete"),h("complete"),!l.passThrough&&"Promise"in window&&(a(),s(l)))))}return l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var r=o=t.length;r--;)l.children[r].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,f(l.reversed?l.duration:0)},l.set=function(e,t){return qt(e,t),l},l.tick=function(e){i=e,r||(r=i),_((i+(n-r))*Jt.speed)},l.seek=function(e){_(c(e))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Kt.push(l),d(),zt||Vt())},l.reverse=function(){u(),d()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function Xt(e,t){for(var r=t.length;r--;)_t(e,t[r].animatable.target)&&t.splice(r,1)}Jt.version="3.1.0",Jt.speed=1,Jt.running=Kt,Jt.remove=function(e){for(var t=Mt(e),r=Kt.length;r--;){var n=Kt[r],i=n.animations,o=n.children;Xt(t,i);for(var a=o.length;a--;){var s=o[a],l=s.animations;Xt(t,l),l.length||s.children.length||o.splice(a,1)}i.length||o.length||n.pause()}},Jt.get=Ot,Jt.set=qt,Jt.convertPx=Et,Jt.path=function(e,t){var r=rt.str(e)?dt(e)[0]:e,n=t||100;return function(e){return{property:e,el:r,svg:Lt(r),totalLength:Dt(r)*(n/100)}}},Jt.setDashoffset=function(e){var t=Dt(e);return e.setAttribute("stroke-dasharray",t),t},Jt.stagger=function(e,t){void 0===t&&(t={});var r=t.direction||"normal",n=t.easing?ct(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s="first"===a,l="center"===a,u="last"===a,c=rt.arr(e),d=c?parseFloat(e[0]):parseFloat(e),p=c?parseFloat(e[1]):0,f=bt(c?e[1]:e)||0,h=t.start||0+(c?d:0),_=[],g=0;return function(e,t,v){if(s&&(a=0),l&&(a=(v-1)/2),u&&(a=v-1),!_.length){for(var m=0;m<v;m++){if(i){var y=l?(i[0]-1)/2:a%i[0],b=l?(i[1]-1)/2:Math.floor(a/i[0]),w=y-m%i[0],A=b-Math.floor(m/i[0]),E=Math.sqrt(w*w+A*A);"x"===o&&(E=-w),"y"===o&&(E=-A),_.push(E)}else _.push(Math.abs(a-m));g=Math.max.apply(Math,_)}n&&(_=_.map((function(e){return n(e/g)*g}))),"reverse"===r&&(_=_.map((function(e){return o?e<0?-1*e:-e:Math.abs(g-e)})))}return h+(c?(p-d)/g:d)*(Math.round(100*_[t])/100)+f}},Jt.timeline=function(e){void 0===e&&(e={});var t=Jt(e);return t.duration=0,t.add=function(r,n){var i=Kt.indexOf(t),o=t.children;function a(e){e.passThrough=!0}i>-1&&Kt.splice(i,1);for(var s=0;s<o.length;s++)a(o[s]);var l=mt(r,vt(Je,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=rt.und(n)?u:Nt(n,u),a(t),t.seek(l.timelineOffset);var c=Jt(l);a(c),o.push(c);var d=Gt(o,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},Jt.easing=ct,Jt.penner=ut,Jt.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var Yt=Jt,Zt=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom","borderRadius"],er=["easeInElastic","easeOutElastic","easeInOutElastic","easeSpringElastic"],tr=Object.assign,rr=Object.keys,nr=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","delay","duration","offset","easing"],ir=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier","steps"],or=(e,t)=>(e="undefined"!=typeof __webViewSDK__?__webViewSDK__.predefinedColor[e]||e:__skylineSDK__.predefinedColor[e]||e,t?[e,e]:e),ar=(e,t)=>{var r=e.length,n=0;return e.map(((e,i)=>{var o,a={};o="offset"in e?e.offset:1===r?1:i/(r-1);var s=n===o;return rr(e).forEach((t=>{nr.indexOf(t)>-1||("transform"!==t?a[t]=or(e[t],s):tr(a,((e,t)=>{if("none"===(e=e.toLowerCase().trim()))return{};for(var r,n={},i=nr.map((e=>e.toLowerCase())),o={scale3d:"AAA",translate:"Aa",translate3d:"AAA",rotate3d:"AAAA",matrix3d:"AAAAAA",matrix:"AAAAAAAAAAAAAAAA"},a=["rotate3d","matrix","matrix3d"],s=/\s*(\w+)\(([^)]*)\)/g,l=0;r=s.exec(e);){if(r.index!==l)return{};l=r.index+r[0].length;var u=r[1],c=r[2].split(",");if(i.indexOf(u)>-1)n[u.replace(/(x|y|z)$/,(e=>e.toUpperCase()))]=or(c.join(" "),t);else{if(!(rr(o).indexOf(u)>-1))return{};var d=o[u];if(c.length>d.length)return{};for(var p=d.length-1;p>=0;p--){var f=d[p];if("a"!==f||c[p]){if("A"===f&&!c[p])return{};-1===a.indexOf(u)&&(n[u.replace("3d","")+String.fromCharCode(88+p)]=or(c[p].trim(),t))}}}}return n})(e[t],s)))})),s?a.duration=0:(a.duration=(o-n)*t,n=o),a}))},sr=e=>{for(var t=0;t<ir.length&&0!==e.indexOf(ir[t]);t++);if(t===ir.length)return"linear";switch(e){case"ease":return"cubicBezier(0.25, 0.1, 0.25, 1)";case"ease-in":return"cubicBezier(0.42, 0, 1, 1)";case"ease-out":return"cubicBezier(0, 0, 0.58, 1)";case"ease-in-out":return"cubicBezier(0.42, 0, 0.58, 1)";default:return e.replace(/^cubic-bezier/,"cubicBezier")}};class lr{constructor(e,t){this._nativeSupported="function"==typeof HTMLElement.prototype.animate;var r=e.keyframeOptions,n=this.direction=r.direction;if(this.timeline=t,this._nativeSupported){var i=((e,t)=>{var r=t.easing;return delete t.easing,e.map((e=>(e.easing=r,e)))})(e.keyframeSet,r);this._inst=e.element.$$.animate(i,tr(r,{fill:"both"})),this._inst.pause()}else this._inst=Yt({targets:e.element,keyframes:ar(e.keyframeSet,r.duration),autoplay:!1,loop:r.iterations===1/0||r.iterations,easing:sr(r.easing),direction:"normal",delay:"reverse"===n?r.endDelay:r.delay,endDelay:"reverse"===n?r.delay:r.endDelay});t._driven(this)}set currentTime(e){if(!isNaN(e)){var t=this._inst;this._nativeSupported?t.currentTime=e:"reverse"===this.direction?t.seek(t.duration-e):t.seek(e)}}cancel(){this._nativeSupported?this._inst.cancel():this._inst.reset(),this.timeline._destroy(),this._inst=null}}class ur{constructor(e,t){if(t.scrollSource){if(this._scrollNode=window.__DOMTree__.shadowRoot.querySelector(t.scrollSource),this._scrollNode||(this._scrollNode=e&&e.querySelector(t.scrollSource)),!this._scrollNode)throw new Error(`Cannot find scroll source by ${t.scrollSource} selector.`)}else this._scrollNode=window.__DOMTree__;this.orientation=t.orientation||"vertical",this.startScrollOffset=t.startScrollOffset,this.endScrollOffset=t.endScrollOffset,this.timeRange=t.timeRange,this.fill=t.fill||"both",this._scroll=this._scroll.bind(this)}_calcCurrentTime(e,t){var r=this.startScrollOffset,n=this.endScrollOffset,i=this.fill,o=this.timeRange,a=e.scrollTop,s=e.scrollHeight-t.$$.offsetHeight;return"horizontal"===this.orientation&&(a=e.scrollLeft,s=e.scrollWidth-t.$$.offsetWidth),a<r?"none"===i||"forwards"===i?NaN:0:a>=n?n<s&&("none"===i||"backwards"===i)?NaN:o:r>=n?NaN:(a-r)/(n-r)*o}_scroll(){var e=this._calcCurrentTime(this._scrollNode===window.__DOMTree__?window.__DOMTree__.$$:this._scrollNode.getScrollPosition(),this._scrollNode);this._animation.currentTime=e}_driven(e){this._animation=e,this._scrollNode===window.__DOMTree__?document.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}),this._scroll()}_destroy(){this._scrollNode===window.__DOMTree__?document.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0})}}var cr=(e,t,r,n,i)=>{var o={element:t,keyframeSet:r.map((e=>{var t={};return Object.entries(e).forEach((([e,r])=>{t[e]=Ar(r)})),t})),keyframeOptions:{delay:n.delay||0,direction:n.direction||"normal",duration:n.duration||0,easing:n.easing||"linear",endDelay:n.endDelay||0,iterations:1}},a=new ur(e,i);t.__scrollAnimations=t.__scrollAnimations||[],t.__scrollAnimations.push(new lr(o,a))},dr=({nodeId:e,selector:t,options:r,duration:n,timeline:i},o)=>{for(var a=o.nodeId.getNodeById(e),s=(a=a?a.shadowRoot:window.__DOMTree__?window.__DOMTree__.shadowRoot:null)?a.querySelectorAll(t):[],l=0;l<s.length;l++)cr(a,s[l],r,{duration:n},i)},pr=(e,t)=>{for(var r=[],n=0;n<e.length;++n)r.push(Object.assign({},e[n]));r[0].offset=0,r[r.length-1].offset=1;for(var i=function(e){r[e].offset=function(e,t){if("number"==typeof t[e].offset)return t[e].offset;for(var r=e+1;r<t.length;++r)if(t[r].offset)return(t[r].offset-t[e-1].offset)/(r-e+1)+t[e-1].offset;return 0}(e,r),r[e].duration=0===e?0:(r[e].offset-r[e-1].offset)*t,er.some((t=>r[e].ease&&r[e].ease.startsWith(t)))&&(r[e].type="animeJS")},o=0;o<r.length;++o)i(o);return r},fr=c(),hr={},_r={},gr=0,vr=1,mr=2,yr=function(e){return Object.keys(e).filter((t=>{var r=t.toLocaleLowerCase();return!((r.includes("transform")||r.includes("transition"))&&""===e[t]||""===t.trim()||void 0===e[t]||""===e[t]||!isNaN(parseInt(t,10)))})).map((t=>`${t.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${e[t]}`)).join(";")},br=(e,t)=>{var{nodeId:r,webviewId:n,options:i,selector:o,reqId:a,hasCallback:s,fromWxs:l}=e,u=fs(r,n);if(u){var c=u.shadowRoot,d=t||c.querySelectorAll(o);if(t){var p=()=>{var e=ps.getByNode(t);if(l){var r=e.clearAnimationCbMap[a];"function"==typeof r&&(delete e.clearAnimationCbMap[a],fr.safeCallback("Clear Animation",r,null,[]))}else ce(v.CLEAR_ANIMATION_COMPLETE,{reqId:a},e.viewId)};if((e=>{(e.__scrollAnimations||[]).forEach((e=>{e.cancel()})),e.__scrollAnimations=[]})(d),!i||"function"==typeof i||!d.__styleObj)return d.__animeOptions&&(d.__animeOptions.forEach((e=>"function"==typeof e.reset&&e.reset())),d.__animeOptions=[]),d.setNodeStyle("",E),qe(d,E),d.__styleObj=null,d.__animateStatus=gr,d.__animationPendingQueue=[],void p();var f=d.__styleObj.transform.split(" ");for(var h of Object.keys(i))if(i[h])if(d.__styleObj["backgroundColor"===h?"background-color":h])delete d.__styleObj["backgroundColor"===h?"background-color":h];else for(var _=0;_<f.length;++_)f[_].indexOf(h)>=0&&f.splice(_,1);d.__styleObj.transform=f.join(" "),d.__styleObj["-webkit-transform"]=f.join(" "),d.__styleObj.transition="unset",d.__styleObj.transitionProperty="unset",d.__styleObj["-webkit-transition"]="unset",d.__styleObj["-webkit-transition-property"]="unset";var g=e=>{d.setNodeStyle(wx.transformRpx(e,!0),E)};g(yr(d.__styleObj)),We(d,E,g),d.__animateStatus=gr,--_r[a],0===_r[a]&&s&&p()}else{_r[a]=d.length;for(var m=0;m<d.length;++m)br(e,d[m])}}},wr=(e,t)=>{var{nodeId:r,webviewId:n,selector:i}=e,o=fs(r,n);if(o){var a=o.shadowRoot,s=t||a.querySelectorAll(i);if(t)s.__animationPendingQueue&&s.__animationPendingQueue.length>0&&(s.__animateStatus=mr,setTimeout((()=>{Er(s.__animationPendingQueue.shift(),s,!0)}),32));else for(var l=0;l<s.length;++l)wr(JSON.parse(JSON.stringify(e)),s[l])}},Ar=e=>("string"==typeof e?e=wx.transformRpx(e,!0):"object"==typeof e&&"string"==typeof e.value?e.value=wx.transformRpx(e.value,!0):Array.isArray(e)&&e.map((e=>{if("string"==typeof e.value)e.value=wx.transformRpx(e.value,!0);else if("string"==typeof e)return wx.transformRpx(e,!0);return e})),e),Er=(e,t,r)=>{wx.nextTick((()=>{var{nodeId:n,webviewId:i,options:o,selector:a,reqId:s,hasCallback:l,type:u,isLastAnimation:c,fromWxs:d}=e,p=fs(n,i);if(p){var f=p.shadowRoot,h=t||f.querySelectorAll(a);if(t){if(h.__animateStatus===vr||h.__animateStatus===mr&&!r)return h.__animationPendingQueue||(h.__animationPendingQueue=[]),void h.__animationPendingQueue.push(JSON.parse(JSON.stringify(e)));h.__hasCallback=l,h.__reqId=s,h.__args=JSON.stringify(e);var _=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom"],g=["opacity","backgroundColor","width","height","left","top","bottom"],m=["rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ"],y="animeJS"===u,b=(r,n=!0)=>{if(h.__animateStatus===vr){if(--hr[h.__reqId],h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&!h.__hasCallback?(h.__animateStatus=mr,Er(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=gr,"function"==typeof r)h.__styleObj.transition="unset",h.__styleObj.transitionProperty="unset",h.__styleObj["-webkit-transition"]="unset",h.__styleObj["-webkit-transition-property"]="unset",r(yr(h.__styleObj));if(0===hr[h.__reqId]&&h.__hasCallback&&n){var i=ps.getByNode(t);if(d){var o=i.applyAnimationCbMap[h.__reqId];"function"==typeof o&&(delete i.applyAnimationCbMap[h.__reqId],fr.safeCallback("Animation",o,null,[])),wr(e)}else ce(v.ANIMATION_TRANSITION_END,{reqId:h.__reqId,args:h.__args},i.viewId)}}},w=[];for(var A of Object.keys(o))_.indexOf(A)>=0&&(g.indexOf(A)>=0?w.push({type:"style",args:["backgroundColor"===A?"background-color":A,o[A]]}):m.indexOf(A)>=0?w.push({type:A,args:[o[A]]}):w.push({type:A,args:o[A]}));var S={transition:{delay:o.delay||0,duration:o.duration||0,timingFunction:o.ease||"linear"},transformOrigin:o.transformOrigin||"50% 50% 0"},I={option:S,animates:w},{transition:T,transitionProperty:C,transform:O,transformOrigin:N,style:x}=wx.animationToStyle(I),R=h.__styleObj?Object.assign({},h.__styleObj,{transition:T,transform:O,transitionProperty:C,transformOrigin:N}):{transition:T,transform:O,transitionProperty:C,transformOrigin:N};for(var P of(R["-webkit-transition"]=R.transition,R["-webkit-transform"]=R.transform,R["-webkit-transition-property"]=R.transitionProperty,R["-webkit-transform-origin"]=R.transformOrigin,Object.keys(x||{})))R[P]=x[P];if(h.__styleObj&&R.transform===h.__styleObj.transform){var D=!0;for(var L of Object.keys(R))g.indexOf(L)>=0&&h.__styleObj[L]!==R[L]&&(D=!1);if(D)return void setTimeout((()=>{h.__animationPendingQueue&&h.__animationPendingQueue.length>0&&Er(h.__animationPendingQueue.shift(),h,!0)}),S.duration)}if(0===S.transition.duration?(R.transition="unset",R.transitionProperty="unset",R["-webkit-transition"]="unset",R["-webkit-transition-property"]="unset"):h.__animateStatus=vr,h.__styleObj=R,y){o.targets=h,o.ease&&(o.easing=o.ease,delete o.ease),(e=>{Object.keys(e).forEach((t=>{Zt.includes(t)&&(e[t]=Ar(e[t]))}))})(o),h.__animateStatus=vr,h.__banned&&ze(h);var B=o.complete;o.complete=(...e)=>{b(void 0,c),"function"==typeof B&&B(...e)};var k=Yt(o);h.__animeOptions||(h.__animeOptions=[]),h.__animeOptions.push(k)}else{var M=yr(R),F=e=>{var t=()=>{h.setNodeStyle(wx.transformRpx(e,!0),E)};t(),We(h,E,t)};0===S.transition.duration?F(M):setTimeout((()=>{F(M)}),32),h.__banned&&ze(h),h.__animationListener||(h.addListener("transitionend",(()=>{b(F)})),h.__animationListener=!0),0===S.transition.duration&&(h.__animationPendingQueue&&h.__animationPendingQueue.length>0?(h.__animateStatus=mr,Er(h.__animationPendingQueue.shift(),h,!0)):h.__animateStatus=gr)}}else{hr[s]=h.length;for(var j=0;j<h.length;++j)Er(JSON.parse(JSON.stringify(e)),h[j])}}}))},Sr=(e,t,r)=>{var n=e.$$,i={},o=null,a=new Set,s=e=>{a.add(e),e((()=>{a.delete(e),0===a.size&&"function"==typeof o&&o(i)}))};if(t.id&&(i.id=e.id||""),t.dataset&&(i.dataset=e.dataset||{}),t.mark&&(i.mark=e.collectMarks()||{}),(t.rect||t.size)&&s((e=>{((e,t)=>{"webview"===p()?t(e.getBoundingClientRect()):e.getBoundingClientRect((e=>{t(e)}))})(n,(r=>{t.rect&&(i.left=r.left,i.right=r.right,i.top=r.top,i.bottom=r.bottom),t.size&&(i.width=r.width,i.height=r.height),e()}))})),t.properties&&t.properties.forEach((t=>{var r=t.replace(/-([a-z])/g,((e,t)=>t.toUpperCase()));fr.Component.hasPublicProperty(e,r)&&(i[r]=e[r])})),t.scrollOffset)if("function"==typeof e.hasBehavior&&e.hasBehavior("wx-positioning-container")){var l=e.getScrollPosition();i.scrollLeft=l.scrollLeft,i.scrollTop=l.scrollTop,i.scrollWidth=l.scrollWidth,i.scrollHeight=l.scrollHeight}else i.scrollLeft=0,i.scrollTop=0,i.scrollWidth=0,i.scrollHeight=0;if(t.computedStyle&&t.computedStyle.length){var u="webview"!==p()?e.__backendContext:null;s((e=>{((e,t,r)=>{"webview"===p()?r(window.getComputedStyle(t)):"function"==typeof(null==e?void 0:e.getComputedStyle)?e.getComputedStyle(t,(e=>{r(e||{})})):r({})})(u,n,(r=>{for(var n=0,o=t.computedStyle.length;n<o;n++){var a=t.computedStyle[n];a&&void 0!==r[a]&&(i[a]=r[a])}e()}))}))}if(t.context&&(i.contextIs=e.is,i.contextId="function"==typeof e.getContextId&&e.getContextId(),i.contextCanvasId=e.canvasId||"","xr-frame"===p()&&(i.__context=n.__xrElement)),t.node&&(i.nodeIs=e.is,i.nodeId="function"==typeof e.getContextId&&e.getContextId(),i.nodeCanvasId=e.canvasId||"",i.nodeCanvasType=e.type||"",i.nodeNodeId=e.getNodeId()),0!==a.size){if("function"!=typeof r)throw new Error("Framework Error: getNetInfo called asynchronously without a callback");o=r}else{if("function"!=typeof r)return i;r(i)}},Ir=(e,t)=>"webview"===p()?Sr(e,t):new Promise((r=>{Sr(e,t,(e=>{r(e)}))})),Tr=function(){var e=Fe()((function*(e,t){var r=[],{pluginId:n,queue:i}=e;return i.forEach((e=>{var i=e.component,o=e.selector,a=e.single,s=e.fields,l=null;if(0===i)l=((e,t)=>{var r={},n=e=>"webview"===p()?document.documentElement[e]||document.body[e]:t.root.getBackendContext()[e];return e.id&&(r.id=""),e.dataset&&(r.dataset={}),e.mark&&(r.mark={}),e.rect&&(r.left=0,r.right=0,r.top=0,r.bottom=0),e.size&&(r.width=n("clientWidth"),r.height=n("clientHeight")),e.scrollOffset&&(r.scrollLeft=n("scrollLeft"),r.scrollTop=n("scrollTop"),r.scrollWidth=n("scrollWidth"),r.scrollHeight=n("scrollHeight")),r})(s,t);else{var u=t.nodeId.getNodeById(i),c=!1;if(u?(fr.Component.getComponentOptions(u).writeOnly&&(c=!0),u=u.shadowRoot):n||(u=window.__DOMTree__?window.__DOMTree__.shadowRoot:null),a){var d=u&&!c?u.querySelector(o):null;l=d?Ir(d,s):null}else{var f=u&&!c?u.querySelectorAll(o):[];l=[];for(var h=0;h<f.length;h++)l.push(Ir(f[h],s));l=Promise.all(l)}}r.push(l)})),Promise.all(r)}));return function(t,r){return e.apply(this,arguments)}}(),Cr=c(),Or={},Nr={},xr={},Rr=function(){var e=Fe()((function*(e){return yield new Promise((t=>{"webview"===p()?t(e.$$.getBoundingClientRect()):e.$$.getBoundingClientRect((e=>t(e)))}))}));return function(t){return e.apply(this,arguments)}}(),Pr=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Dr=(e,t)=>{var r={left:e.left<t.left?t.left:e.left,top:e.top<t.top?t.top:e.top,right:e.right>t.right?t.right:e.right,bottom:e.bottom>t.bottom?t.bottom:e.bottom,width:0,height:0};return r.right>r.left?r.width=r.right-r.left:r.right=r.left=r.bottom=r.top=0,r.bottom>r.top?r.height=r.bottom-r.top:r.right=r.left=r.bottom=r.top=0,r},Lr=function(){var e=Fe()((function*(e){for(var t="webview"===p()?document.documentElement.clientWidth:y.screenWidth||500,r="webview"===p()?document.documentElement.clientHeight:y.screenHeight||1e3,n=null,i=0;i<e.length;i++){var{node:o,margins:a}=e[i],s=o?yield Rr(o):{left:0,top:0,right:t,bottom:r,width:t,height:r},l={left:s.left-a.left,top:s.top-a.top,right:s.right+a.right,bottom:s.bottom+a.bottom};n=n?Dr(n,l):l}return n}));return function(t){return e.apply(this,arguments)}}(),Br=function(){var e=Fe()((function*(e){var{targetNode:t,relatives:r,thresholds:n,minWidthOrHeight:i,cb:o,currentRatio:a}=e,s=yield Lr(r),l=Pr(yield Rr(t));l.right-l.left<i&&(l.right=l.left+i,l.width=i),l.bottom-l.top<i&&(l.bottom=l.top+i,l.height=i);var u=Dr(s,l),c=l.width*l.height,d=c?u.width*u.height/c:0;e.currentRatio=d;var p=void 0===a;d!==a&&n.forEach((e=>{if(p)return!1;(d<=e&&a>=e||d>=e&&a<=e)&&(p=!0)})),p&&o.call(t,{id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:l,intersectionRatio:d,intersectionRect:Pr(u),relativeRect:s})}));return function(t){return e.apply(this,arguments)}}(),kr=function(){var e=Fe()((function*(){for(var e of Object.keys(Or))Or[e]&&(yield Br(Or[e]))}));return function(){return e.apply(this,arguments)}}(),Mr=e=>({left:(e=e||{}).left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}),Fr=(e,t,r,n,i)=>{var o=null;if((n=n||{}).observeAll)o=e.querySelectorAll(t);else{var a=e.querySelector(t);o=a?[a]:[]}o.length||console.warn('For developer:Node "'+t+'" is not found. Intersection observer will not trigger.');var s=[];return r.forEach((t=>{var{selector:r,margins:n}=t,i=null==r?null:e.querySelector(r);i||null==r?s.push({node:i,margins:Mr(n)}):console.warn('For developer:Node "'+r+'" is not found. The relative node for intersection observer will be ignored.')})),s.length||console.warn("For developer:Intersection observer will be ignored because no relative nodes are found."),((e,t,r,n,i,o)=>{var a=W();if(!e.length||!t.length)return a;var s=e.length;return xr[a]=s,e.forEach(((e,l)=>{var u=a+"#"+l,c={targetNode:e,relatives:t,thresholds:r,currentRatio:n,minWidthOrHeight:i,cb:o},d=Cr.Observer.create((e=>{"attached"===e.status?(Or[u]=c,requestAnimationFrame((()=>{Br(c)}))):"detached"===e.status&&(delete Or[u],d.disconnect(),delete Nr[u],--s||delete xr[a])}));Nr[u]=d,d.observe(e,{attachStatus:!0}),Cr.Element.isAttached(e)&&(Or[u]=c,requestAnimationFrame((()=>{Br(c)})))})),a})(o,s,n.thresholds||[0],n.initialRatio||0,n.minWidthOrHeight||0,i)},jr=!1,Ur=()=>{jr||(jr=!0,requestAnimationFrame((()=>{jr=!1,kr()})))};"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.addEventListener&&"webview"===p()&&(wx.onPageReRender((()=>{Ur()})),window.addEventListener("scroll",(()=>{Ur()}),{capture:!0,passive:!0}));var $r=(e,t,r)=>{if("addIntersectionObserver"===e.type){var n=null;if(e.nodeId){var i=t.nodeId.getNodeById(e.nodeId);if(!i)return;n=i.shadowRoot}else e.pluginId||(n=window.__DOMTree__.shadowRoot);if(!n)return;return{observerId:Fr(n,e.targetSelector,e.relativeInfo,e.options,(e=>{r({info:e})}))}}if("removeIntersectionObserver"===e.type)return(e=>{var t=xr[e];delete xr[e];for(var r=0;r<t;r++){var n=e+"#"+r,i=Nr[n];if(!i)break;delete Or[n],i.disconnect(),delete Nr[n]}})(e.observerId),{reqEnd:!0}},Wr=1,qr={},Hr=(e,t)=>{var r=(e=>{if("object"!=typeof e)return"";var t="";return["minWidth","maxWidth","width","minHeight","maxHeight","height"].forEach((r=>{if(void 0!==e[r]){var n=Number(e[r]);n>=0||(n="");var i=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${i}: ${n}px)`}})),["orientation"].forEach((r=>{if(void 0!==e[r]){var n=/^[-_a-z0-9]+$/i.test(e[r])?e[r]:"",i=r.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));t&&(t+=" and "),t+=`(${i}: ${n})`}})),t})(e),n=window.matchMedia(r),i=Wr++,o=e=>{t({matches:e.matches})};return qr[i]={observer:n,listener:o},n.addListener(o),t({matches:n.matches}),i},Gr=(e,t)=>"addMediaQueryObserver"===e.type?{observerId:Hr(e.mediaQueryCond,(e=>{t({info:e})}))}:"removeMediaQueryObserver"===e.type?((e=>{var{observer:t,listener:r}=qr[e];t.removeListener(r),delete qr[e]})(e.observerId),{reqEnd:!0}):void 0;function Qr(e){var{nodeId:t,pageId:r,selector:n,animatedStyle:i}=e[0],o=ps.get(r).nodeId.getNodeById(t);if(o){var{mapperId:a}=i;d().addPageMapperDep(a);for(var s=o.shadowRoot.querySelectorAll(n),l=0;l<s.length;l++){s[l].$$.addAnimatedStyle(i)}}}var zr=c();class Kr{constructor(e,t,r){this._treeManager=e,this._arr=t,this._depth=0,this._startCb=r}_consumeHead(){return this._arr.shift()}nextStepType(){return this._arr[0][0]}nextStep(){for(;this._arr[0][0]===v.FLOW_DEPTH;)this._startCb(this._treeManager);if(this._arr[0][0]===v.FLOW_REPEAT){var e=this._arr[0][2];return--this._arr[0][1]||this._consumeHead(),[e]}return this._consumeHead()}nextStepIf(e){for(;this._arr[0][0]===v.FLOW_DEPTH;)this._startCb(this._treeManager);return this._arr[0][0]===e?this._consumeHead():null}expectStart(){var e=this._consumeHead();if(this._depth++,e[0]!==v.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect START descriptor with depth ${this._depth} but get ${w(e[0])})`);return e[2]}expectEnd(){for(;this._arr[0][0]===v.FLOW_DEPTH&&this._arr[0][1]!==this._depth-1;)this._startCb(this._treeManager);var e=this._consumeHead();if(this._depth--,e[0]!==v.FLOW_DEPTH||e[1]!==this._depth)throw new Error(`Framework inner error (expect END descriptor with depth ${this._depth} but get ${w(e[0])})`)}skipToEnd(){for(;this._arr[0];)if(this._arr[0][0]!==v.FLOW_DEPTH)this._consumeHead();else{if(this._arr[0][1]===this._depth-1)break;this._startCb(this._treeManager)}}getQueueLength(){return this._arr.length}getDepth(){return this._depth}}class Vr{constructor(e,t){var r=this;this._viewId=e,this._treeManager=t,this._depth=0,this._curWinSize=0,this._setDataCallbackInc=1,this._pendingSetDataCallbacks=[],this._setDataCallbackMap={},this._received=[],this._cache=[],this._blocked=[],this._isBlocked=!0,this._fetchingViewInfoCallbacks=[];var n=(e,t)=>{if(this._received.push([t].concat(e)),t===v.FLOW_DEPTH&&(this._depth=e[0],0===this._depth)){var r=this._received;this._received=[],this._isBlocked?this._blocked.push(r):(this.iterator=new Kr(this._treeManager,r,Vr._startCb),Vr._startCb(this._treeManager),this.onFinished())}};for(var i of Object.keys(v))"FLOW_"===i.slice(0,5)&&("FLOW_SET_DATA"===i?_e(v[i],(([e])=>{this._pendingSetDataCallbacks.push(e)}),e):"FLOW_VIEW_INFO"===i?function(){var t=function(){var e=Fe()((function*([e,t,n]){var i=null;"selectorQuery"===e?i=yield Tr(t,r._treeManager):"intersection"===e?i=$r(t,r._treeManager,(e=>{ce(v.RESPONSE_VIEW_INFO,[e,n],r._viewId)})):"matchMedia"===e&&(i=Gr(t,(e=>{ce(v.RESPONSE_VIEW_INFO,[e,n],r._viewId)}))),i&&ce(v.RESPONSE_VIEW_INFO,[i,n],r._viewId)}));return function(t){return e.apply(this,arguments)}}();_e(v[i],(e=>{r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(t.bind(r,e)):t(e)}),e)}():_e(v[i],"FLOW_SET_NODE_ANIMATION_INFO"===i?e=>{"scrollTimeline"===e[0].type?"webview"===p()?dr(e[0],this._treeManager):"skyline"===p()&&console.warn("component rendered with skyline does not support timeline animation, 'animate' call will be ignored."):Er(e[0])}:"FLOW_SET_NODE_ANIMATED_STYLE"===i?e=>{this._received.length||this._isBlocked?this._fetchingViewInfoCallbacks.push(Qr.bind(null,e)):Qr(e)}:"FLOW_CLEAR_NODE_ANIMATION_INFO"===i?e=>{br(e[0])}:"FLOW_SET_NODE_NEXT_ANIMATION_INFO"===i?e=>{wr(e[0])}:n,e));_e(v.SET_DATA_CALLBACK,(([e])=>{this.triggerSetDataCallbacks(e)}),e)}flushBlocked(){for(;this._blocked.length&&!this._isBlocked;)try{var e=this._blocked.shift();this.iterator=new Kr(this._treeManager,e,Vr._startCb),Vr._startCb(this._treeManager),this.onFinished()}catch(e){console.error(e.message),o.errorReport({key:"webviewScriptError",error:e})}}unblock(){this._isBlocked=!1,this.flushBlocked()}block(){this._isBlocked||(this._isBlocked=!0)}sendInIndividualFlow(e){this.start(Date.now()),this.push(e),this.end()}start(){this.flush(),this._depth++,ce(v.FLOW_DEPTH,[this._depth,Date.now()],this._viewId)}dedupe(){var e=this._cache;if(this._curWinSize){if(2===e.length){var t=e[1][2];if(e[0][0]!==t){var r=e.pop(),n=r.shift();ce(n,r,this._viewId)}else e.shift(),e[0][1]++}}else{var i=0;if(e.length>2&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]&&e[0][0]!==v.FLOW_SET_DATA&&e[0][0]!==v.FLOW_VIEW_INFO&&(i=1),i){var o=e[0][0];e.splice(0,3),this.flush(),this._curWinSize=1,e.unshift([v.FLOW_REPEAT,3,o])}else if(e.length>3){var a=e.pop(),s=a.shift();ce(s,a,this._viewId)}}}push(e){this._cache.unshift(e),1!==e.length?this.flush():this.dedupe()}flush(){for(this._curWinSize=0;this._cache.length;){var e=this._cache.pop(),t=e.shift();ce(t,e,this._viewId)}}end(){this.flush(),this._depth--,ce(v.FLOW_DEPTH,this._depth,this._viewId),0===this._depth&&ue()}checkDelayFetchingViewInfo(){if(this._fetchingViewInfoCallbacks.length){var e=this._fetchingViewInfoCallbacks;this._fetchingViewInfoCallbacks=[],e.forEach((e=>e()))}}registerSetDataCallback(e,t,r){var n=this._setDataCallbackInc++;this._setDataCallbackMap[n]=[e,t,r],this.push([v.FLOW_SET_DATA,n])}triggerSetDataCallbacks(e){for(var t=0;t<e.length;t++){var r=e[t];if(this._setDataCallbackMap[r]){var[n,i,o]=this._setDataCallbackMap[r];delete this._setDataCallbackMap[r],zr.safeCallback("SetData Callback",n,i,[],o)}else s.error("setDataCallback error")}}onFinished(){if(wx.triggerPageReRender(),this._blocked.length||(ce(v.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],this._viewId,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo()),"skyline"===p()){s.info("[Skyline Critical] router skyline startRender pageId="+this._viewId,Date.now());var e=d();this._viewId===I?this._treeManager.__attached?e.getTabBarContext().startRender((()=>{s.info("[Skyline Critical] tabbar startRender callback, doing nothing.")})):s.error("[OperationFlow] [Skyline] tabBar startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):!0!==this._treeManager.__attached?s.error("[OperationFlow] [Skyline] startRender ignored, because root element is not attached (may be due to some unexpected error). pageId="+this._viewId):e.getContext(this._viewId).startRender((()=>{s.info("[Skyline Critical] page startRender callback, doing nothing. pageId="+this._viewId)}))}}static setStartOperation(e){Vr._startCb=e}}var Jr=Vr,Xr=c(),Yr=Object.prototype.hasOwnProperty,Zr=Xr.dataUtils.deepCopy,en=(e,t,r,n,i)=>{for(var o=i?Zr(e):e,a=0;a<t.length;a++){var s=t[a],l=s[0],u=s[1],c=s[2];if(void 0!==u){for(var d=o,p=l[0],f=1;f<l.length;f++)if(null!=(d=d[p])&&d.__wxspec__&&(d=d.__value__),p=l[f],null!=d&&!Yr.call(d,p)){d=null;break}null!=d&&Yr.call(d,p)&&(r?null!=c&&"object"==typeof u&&u instanceof Array==c instanceof Array?d[p]={__value__:c,__wxspec__:!0}:null!=d[p]&&d[p].__wxspec__||(d[p]={__value__:d[p],__wxspec__:!0}):d[p]=n?Zr(u,!1):u)}}return o},tn={restoring:null,idDataMap:null,compIdArr:null,compExtraDataMap:null,compIdArrIndex:0,onReady:()=>{}},rn=c(),nn={},on=(e,t)=>{var r=rn.Component.getComponentOptions(e).domain;if("/"!==r&&"//"!==r&&r){var n=r.split("/",1)[0],i=t.viewId;if(nn[i]||(nn[i]={}),!nn[i][n]){nn[i][n]=!0;var a=[n,u.pluginInfos[n].version,t.rootCompName,u.getLaunchOptionsSync().sessionid||u.getLaunchOptionsSync().sessionId||"",0,""].map(encodeURIComponent).join(",");void 0!==o&&(o.reportKeyValue({key:"PluginDisplay",value:a,force:!0}),o.reportIDKey({key:"pluginDisplayInPage",force:!0}))}}},an=0,sn=0,ln=0,un=(e,t,r,n)=>{var i=r-t,a=r-e,s=Math.ceil(ln/(sn||1)),l=[an,1,i,sn,s,1,a,n].map(encodeURIComponent).join(",");an=0,sn=0,ln=0,void 0!==o&&o.reportKeyValue({key:"SetDataPerf",value:l,force:!0})},cn=0,dn=0,pn=0,fn=0,hn=0,_n=0,gn=()=>{var e=["libVersion","isFirstPage","isWebview","totalComps","loadedComps","lazyedComps","loadTime","lazyLoadTime"],t=new Set(e),r={},n=!1,i=(i,a)=>{n||(r[i]=a,t.has(i)&&t.delete(i),0===t.size&&((()=>{if(void 0!==o){var t=e.map((e=>encodeURIComponent(r[e]))).join(",");o.reportKeyValue({key:"LazyCodeLoading",value:t,immediately:!0})}})(),n=!0))};return i("libVersion",wx.version.version),i("isWebview",!1),i("lazyedComps",0),i("lazyLoadTime",0),{set:i}},vn=(g.objectSpread2,e=>{var t={};return r=>(t[r]||(t[r]=e(r)),t[r])}),mn=/-[a-z]/g,yn=/([A-Z])/g,bn=vn((e=>e.indexOf("-")<=0?e:e.replace(mn,(e=>e[1].toUpperCase())))),wn=vn((e=>e.replace(yn,"-$1").toLowerCase())),An=0,En=[],Sn=(...e)=>{En.push(e)};b.onLoad((()=>{Sn=setTimeout,En.forEach((e=>{setTimeout(...e)}))}));var In=function(e){An===e&&(An=0)},Tn=function(){return An=Date.now()+Math.random()},Cn=function(e){var t,r=Tn();try{t=e(r)}catch(e){throw Sn((()=>{In(r)}),0),e}return Sn((()=>{In(r)}),0),t},On=function(){return!!An},Nn=c(),xn=(Object.prototype.hasOwnProperty,null),Rn=(e,t)=>xn?xn(e,"nv_",t?2:void 0):e,Pn=(e,t=!1)=>xn?xn(e,void 0,t?2:void 0):e,Dn=(e,t,r)=>t?r?t+e+r:t||"":r||"",Ln=([e,t,r,n,i])=>{if(n||(n={}),t){var o=ps.get(e);if(!o)return;var a=o.nodeId.getNodeById(t);if(!a)return;var s=Nn.Element.getMethodCaller(a);s&&"function"==typeof s[r]&&(i?Cn((()=>{s[r](n)})):s[r](n))}else{var l=B.getCurrentPagesByDomain("");if(!l.length)return;var u=l[l.length-1];u&&"function"==typeof u[r]&&(i?Cn((()=>{u[r](n)})):u[r](n))}};b.onLoad((()=>{u.onCallMethodFromWxs(Ln)}));var Bn=(e,t,r)=>{if(t.__wxsStyle||t.__wxsClass){var n={wxsStyle:t.__wxsStyle,wxsClass:t.__wxsClass,index:r,wxsState:Pn(t.__wxsState)};if(t.ownerShadowRoot){var i=ps.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);e._custom=e._custom||{},(e=e._custom)[i]=e[i]||{},e=e[i]}e[t.is]=e[t.is]||[],e[t.is].push(n)}},kn=(e,t,r)=>{if(e){var n=null;if(t.ownerShadowRoot&&e._custom){var i=ps.getByNode(t).nodeId.getNodeId(t.ownerShadowRoot.__wxHost);if(!(e=e._custom)[i])return;e=e[i]}e[t.is]&&e[t.is].length&&e[t.is][0]&&e[t.is][0].index===r&&(n=e[t.is].shift()),n&&((e,t)=>{if(e.__wxsStyle=t.wxsStyle,e.__wxsClass=t.wxsClass,e.__wxsState=Rn(t.wxsState),t.wxsStyle){var r=()=>{var t=window.wx.transformRpx(e.__wxsStyle,!0);e.setNodeStyle(t,S)};r(),We(e,S,r)}t.wxsClass&&(e.class=Dn(" ",e.class,t.wxsClass))})(t,n)}};var Mn=c(),Fn=Mn.Component.getComponentOptions,jn=e=>e instanceof Mn.Component?ps.get(e.__wxWebviewId__).nodeId.getNodeById(e.__wxExparserNodeId__):e,Un=(e,t,r)=>{var n=jn(e);return r&&n instanceof Mn.VirtualNode&&(n.id||Object.getOwnPropertyNames(n.dataset).length||(n=jn(r))),{id:t?"":n.id,dataset:t?{}:n.dataset}},$n=(e,t,r,n,i,o,a,s)=>{var l=o?"__wxEventCaptureHandleName":"__wxEventHandleName";t[l]||(t[l]=Object.create(null)),void 0===t[l][r]&&t.addListener(r,(function(e){var n=t[l][r],o=e.mutatedMarked();if((!s||!e.mutatedMarked())&&(s&&e.markMutated(),n)){e._hasListeners=!0;var u=t.ownerShadowRoot;if(u){var c=u.getHostNode(),d=Mn.Component.getComponentOptions(c).writeOnly;if(!d||e._allowWriteOnly){if(a&&"function"==typeof n)return void console.warn('Cannot use wxs function to handle custom event "'+e.type+'".');var p=Mn.Element.getMethodCaller(c);"function"!=typeof p[n]?console.warn('Component "'+c.is+'" does not have a method "'+n+'" to handle event "'+e.type+'".'):p[n]({type:e.type,timeStamp:e.timeStamp,target:Un(e.target,d,this),currentTarget:Un(this,d,null),mark:e.mark,detail:e.detail,touches:e.touches,changedTouches:e.changedTouches,mut:o,_requireActive:e._requireActive})}}return!i&&void 0}}),{capture:o}),a?t[l][r]=n:(t[l][r]=null==n?"":String(n),t.__eventHandlerChangeListener__&&(t.__eventHandlerChangeListener__(r,t[l][r],o),"function"==typeof t.__domElement.setListenerOption&&t.__domElement.setListenerOption(r,!i,o)))},Wn=(e,t,r,n)=>{var i=ps.getByNode(e);e.__component__&&!tn.restoring&&e.__isXrFrame__&&(i.operationFlow.start(),i.operationFlow.push([v.FLOW_SET_ROOT_PROPERTIES,Mn.dataUtils.deepCopy(t),Mn.dataUtils.deepCopy(r),Mn.dataUtils.deepCopy(n)])),e.dataset=e.dataset||{};var o=0,a=!1,l=[],u=e instanceof Mn.Component,c=u&&"//"===Fn(e).domain,d=Mn.Component.getDataProxy(e),f=function(i){var f,h=t[i],_=null;if("slot"===e.is&&e instanceof Mn.VirtualNode&&"name"===i)return Mn.Element.setSlotName(e,h),"continue";if("id"===i)return e.id=null==h?"":h,"continue";if("slot"===i)return e.slot=null==h?"":h,"continue";if("class"===i){if(u)e.class=e.__wxsClass?Dn(" ",null==h?"":h,e.__wxsClass):null==h?"":h,u&&e.hasExternalClass("class")&&e.setExternalClass("class",h);else e.class=h;return"continue"}if("style"===i)if(u&&e.$$){var g=wx.transformRpx(h,!0);e.setNodeStyle(g,A),g!==h?We(e,A,(()=>{var t=wx.transformRpx(h,!0);e.setNodeStyle(t,A),e.__transformedPropValue=t})):qe(e,A),e.__banned&&ze(e)}else e.$$&&e.setNodeStyle(h,A);if(u&&Mn.Component.hasPublicProperty(e,i)){!c&&tn.restoring||(d.scheduleReplace([i],h,null!=r?r[i]:null),c?d.doUpdates(void 0,!0):(a=!0,e.isInnerDataExcluded(i)||o++));var v=n&&n["model:"+wn(i)];if(v){var m=v.match(/^\{\{(.*?)\}\}$/);if(m){var y=m[1].match(/^\s*([_a-zA-Z$][_a-zA-Z0-9$]+)\s*$/);if(y){var b=y[1];e.__modelValueName=Object.assign(e.__modelValueName||{},{[i]:b}),l.push(i)}else console.warn("For developer:Two-way binding does not support complex data paths currently. This two-way binding is ignored.")}else console.warn(`For developer:"${v}" is not an assignable expression. This two-way binding is ignored.`)}return"continue"}if("style"===i)return"continue";if(i.startsWith("data-")){var w=bn(i.slice(5).toLowerCase());if(e.dataset[w]=h,e.setAttribute(i,h),e.__componentOptions&&"//"===e.__componentOptions.domain){var S=Mn.Element.getMethodCaller(e),I=S.onPropertyUpdate;"function"==typeof I&&I.call(S,"dataset",w,h)}return"continue"}if("$gdc"===i)return"function"==typeof(f=h)&&(xn=f),"continue";if((_=i.match(/^\$wxs:(capture-)?(mut-)?(bind|catch):?(.+)$/))&&("function"==typeof h||!h))return $n(0,e,_[4],h,"catch"===_[3],_[1],!0,_[2]),X(),"continue";if(_=i.match(/^(capture-)?(mut-)?(bind|catch):?(.+)$/))return $n(0,e,_[4],h,"catch"===_[3],_[1],!1,_[2]),X(),"continue";if("on"===i.slice(0,2))return $n(0,e,i.slice(2),h,!1,!1,!1),"continue";if("animation"===i){if(u&&e.$$&&null!==h&&"object"==typeof h&&h.actions&&h.actions.length>0){var T=0,C=h.actions,O=h.actions.length;function R(){if(T<O){var{transition:t,transitionProperty:r,transform:n,transformOrigin:i,style:o}=wx.animationToStyle(C[T]),a=e.__styleObj?Object.assign({},e.__styleObj,{transition:t,transform:n,transitionProperty:r,transformOrigin:i}):{transition:t,transform:n,transitionProperty:r,transformOrigin:i};for(var s of(a["-webkit-transition"]=a.transition,a["-webkit-transform"]=a.transform,a["-webkit-transition-property"]=a.transitionProperty,a["-webkit-transform-origin"]=a.transformOrigin,Object.keys(o||{})))a[s]=o[s];e.__styleObj=a,""!==a.transform&&(e.__transformNoneEnabled=!0);var l=Object.keys(a).filter((t=>!(t.toLowerCase().includes("transition")&&""===a[t]||""===t.trim()||void 0===a[t]||!t.toLowerCase().includes("transform")&&""===a[t]||!isNaN(parseInt(t,10)))&&(t.toLowerCase().includes("transform")&&""===a[t]&&e.__transformNoneEnabled&&(a[t]="none"),!0))).map((e=>`${e.replace(/([A-Z]{1})/g,(e=>`-${e.toLowerCase()}`))}:${a[e]}`)).join(";"),u=()=>{e.setNodeStyle(wx.transformRpx(l,!0),E)};u(),We(e,E,u),e.__banned&&ze(e)}}e.addListener("transitionend",(()=>{T+=1,R()})),R()}return"continue"}if(_=i.match(/^\$wxs:change:(.+)$/))return e.wxsObserver=e.wxsObserver||{},e.wxsObserver[_[1]]=e.wxsObserver[_[1]]||{},e.wxsObserver[_[1]].observer=h,"continue";if(_=i.match(/^mark:(.+)$/))return e.setMark(_[1],h),"continue";var N=wn(i);if(u&&e.hasExternalClass(N))return e.setExternalClass(N,h),"continue";if("webview"!==p()&&e instanceof Mn.NativeNode){var x="skyline"===p()?bn(i):wn(i);if(void 0!==e.__extraAttributeFilters&&"function"==typeof e.__extraAttributeFilters[x])try{e.__extraAttributeFilters[x](e,x,h,(t=>{e.setAttribute(x,t)}))}catch(P){s.error(`[Skyline] attribute filter error, on node <${e.is}>, attr [${x}], msg: ${P.message}`),e.setAttribute(x,h)}else e.setAttribute(x,h)}};for(var h of Object.keys(t||{}))f(h);a&&d.doUpdates(o,!1);for(var _=function(t){var r=l[t];e.__wxPropertyListener__&&e.__wxPropertyListener__[r]||(e.setPropertyChangeListener(r,(t=>{var n=e.ownerShadowRoot.getHostNode();n.setData({[e.__modelValueName[r]]:t})})),e.__wxPropertyListener__=e.__wxPropertyListener__||{},e.__wxPropertyListener__[r]=!0)},g=0;g<l.length;g++)_(g);e.__component__&&!tn.restoring&&(i.operationFlow.push([v.FLOW_APPLY_PROPERTY]),e.__isXrFrame__&&i.operationFlow.end())},qn=Object.create(null),Hn=!1,Gn={},Qn=function(e,t){Hn&&(qn[e]=t)},zn=function(){return Hn},Kn={},Vn={},Jn=e=>{Object.keys(Kn).length>0&&ce(v.XR_FRAME_COMP_OPTIONS,[Kn,Vn],e)};var Xn=c(),Yn=Xn.dataUtils.deepCopy,Zn={tag:"shadow",children:[]},ei=(t,r)=>{var n,i=Date.now(),o=t?t(r,null,e.g):Zn;return n=Date.now()-i,sn+=1,ln+=n,o.tag="shadow",o},ti=(e,t)=>{if(zn()){t.operationFlow.start(Date.now()),t.operationFlow.push([v.FLOW_HOT_UPDATE_RESET,t.nodeId.getNodeId(e)]);var r="";e===t.root?r="body":e===t.tabRoot&&(r="tab-bar");var n=e.__vtObj,i=e.ownerShadowRoot?e.ownerShadowRoot.createComponent(n.tag,void 0,n.generics,t):Xn.createElement(r,Xn.Component._list[e.is],t);t.operationFlow.push([v.FLOW_HOT_UPDATE_RESET]);var o=t.nodeId.getNodeId(e);if(t.nodeId.removeNode(e),t.nodeId.allocNodeId(i,o),e===t.root){Xn.Element.pretendDetached(e),t.root=i,Xn.Element.getMethodCaller(i).__wxExparserNodeId__=o,Xn.Element.pretendAttached(i);var a={},s=!1;Object.keys(t.initialRootData).forEach((e=>{Xn.Component.hasProperty(i,e)&&(a[e]=t.initialRootData[e],s=!0)})),s&&t.root.setData(a)}else if(e===t.tabRoot){t.tabRoot=i,Xn.Element.getMethodCaller(i).__wxExparserNodeId__=o}else{i.__vtObj=n;var l=n.attr;for(Wn(i,l,n.raw,n.rawAttr);e.childNodes.length;)i.appendChild(e.childNodes[0]);e.parentNode.replaceChild(i,e)}t.operationFlow.end()}},ri=(e,t,r,n)=>{var i,o=Kn[i=e]||Kn[Vn[i]]||{},a=null;return o.isXrComp&&"xr-frame"!==he(n.viewId)&&"xr-frame"!==p()?(s.info(`[VirtualTreeCreate] <${t.tag}>[${e}] will be created as xr-frame`),(a=u.xrFrame.createXrFrame(e,r,t.generics,n.viewId)).__isXrFrame__=!0):a=r.createComponent(t.tag,void 0,t.generics,n),on(a,n),a},ni=(e,t,r,n,i)=>{var o=null;if("shadow"===e.tag&&t)r=o=Xn.ShadowRoot.create(t);else if("virtual"===e.tag||"shadow"===e.tag){var a="virtual";1===e.wxXCkey||3===e.wxXCkey?a="wx:if":2!==e.wxXCkey&&4!==e.wxXCkey||(a="wx:for"),o=r.createVirtualNode(a),Xn.Element.setInheritSlots(o),o.__treeManager__=n}else if("wx-slot"===e.tag)o=r.createVirtualNode("slot"),Xn.Element.setSlotName(o,"");else{if(r.tagNameUsed(e.tag)){var s=r.getHostNode(),l=r.getCompDefByTagName(e.tag);"string"==typeof l.is&&(l=l.is);var u=s.getPlaceholder(e.tag);n.compManager.shouldUsePlaceholder(l)&&!!u?((o=r.createComponent(e.tag,u,e.generics,n)).__placeholder__=!0,n.compManager.arrangePlaceholderReplace(l,(()=>{var e=o.__vtObj,t=ri(l,e,r,n);ii(e,t,n,i);var a=[...o.childNodes];o.parentNode&&o.parentNode.insertBefore(t,o),a.forEach((e=>{t.appendChild(e)})),o.parentNode&&o.parentNode.removeChild(o)}))):o=ri(l,e,r,n)}else(o=r.createVirtualNode(e.tag)).__treeManager__=n}ii(e,o,n,i);var c=e.children;if(c)for(var d=0;d<c.length;d++){var p=c[d];if(null!=p)if("object"==typeof p){var f=ni(p,null,r,n,i);o.appendChild(f)}else{var h=r.createTextNode(p);o.appendChild(h)}}return o},ii=(e,t,r,n)=>{(zn()||!0===t.__placeholder__)&&(t.__vtObj=e),3!==e.wxXCkey&&4!==e.wxXCkey||(t.__wxDynamicSync__=4===e.wxXCkey?"wx:for":"wx:if");var i=t.__component__,o=t.__placeholder__,a=t.__isXrFrame__;if(i||o||a){var s=r.nodeId.allocNodeId(t,r.nodeId.getNodeId(t));Xn.Element.getMethodCaller(t).__wxExparserNodeId__=s,r.operationFlow.push([v.FLOW_CREATE_NODE,s])}var l=n?Yn(e.attr):e.attr;Wn(t,l,e.raw,e.rawAttr),t.__isXrFrame__},oi=e=>{e.operationFlow.push([v.FLOW_MINIPULATE_CHILD])},ai=Object.prototype.hasOwnProperty,si=e=>"number"==typeof e&&isNaN(e),li=(e,t)=>{for(var r=(e=>{for(var t={},r=0;r<e.length;++r){var n=e[r],i=n&&n.wxKey;i?ai.call(t,i)?n.wxKey=void 0:t[i]=r:si(i)&&(n.wxKey=void 0)}return t})(e),[n,i]=(e=>{for(var t={},r=[],n=0;n<e.length;++n){var i=e[n],o=i&&i.wxKey;o?ai.call(t,o)?(console.warn(`For developer:Do not set same key "${o}" in wx:key.`),i.wxKey=void 0,r.push(n)):t[o]=n:(si(o)&&(i.wxKey=void 0),r.push(n))}return[t,r]})(t),o=[],a=[],s=[],l=0,u=0,c=0;c<e.length;++c){var d=e[c].wxKey;if(d)if(ai.call(n,d)){var p=n[d];o.push(t[p])}else a.push(c-u),++u,o.push(null);else if(l<i.length){var f=i[l];o.push(t[f]),++l}else a.push(c-u),++u,o.push(null)}for(var h=o,_=0,g=[],v=0;v<t.length;){for(var m=t[v],y=m&&m.wxKey,b=h[_],w=b&&b.wxKey;null===b;)w=(b=h[++_])&&b.wxKey;_>=h.length?(s.push({oldIndex:r[y],index:v,pos:-1}),++_,++v):w===y?(g.push(_),++_,++v):y?(w?n[w]===v+1?s.push({oldIndex:r[y],index:v,pos:_}):(b=h[++_])&&b.wxKey===y?(g.push(_),++_):(--_,s.push({oldIndex:r[y],index:v,pos:_})):s.push({oldIndex:r[y],index:v,pos:_}),++v):++_}for(var A=0,E=0;E<s.length;E++){var S=s[E].pos;if(-1===S)break;for(;A<g.length&&S>g[A];)A++;A>=g.length?s[E].pos=-1:s[E].pos=g[A]}return{children:o,removes:a,inserts:s}},ui=(e,t,r)=>{if(e!==t&&(!e||r))if(null==t)r.parentNode.removeChild(r);else if("object"==typeof t)if("object"!=typeof e||null===e||e.tag!==t.tag||String(e.wxKey)!==String(t.wxKey)||"virtual"===e.tag&&e.wxVkey!==t.wxVkey){var n=ps.getByNode(r),i=r.parentNode,o=ni(t,null,i.ownerShadowRoot,n,!1);i&&("wx:for"===i.__wxDynamicSync__||"wx:if"===r.__wxDynamicSync__?(n.nodeId.addNode(o),i.replaceChild(o,r),oi(n),n.nodeId.removeNode(r)):i.replaceChild(o,r),r.__banned&&Ke(o))}else{if(t.n&&t.n.length){for(var a=t.n,s=t.attr,l={},u=0;u<a.length;u++){var c=a[u];l[c]=s[c]}Wn(r,l,t.raw,t.rawAttr)}void 0!==t.wxScopeData&&(r.__wxScopeData__=t.wxScopeData),void 0!==r.__vtObj&&(r.__vtObj=t),ci(e,t,r)}else if("string"==typeof e)t!==e&&(r.textContent=t);else{var d=r.ownerShadowRoot.createTextNode(t);r.parentNode.replaceChild(d,r)}},ci=(e,t,r)=>{var n=!!$("customComponents"),i=e.children,o=t.children,a="virtual"===e.tag&&(2===e.wxXCkey||4===e.wxXCkey||void 0===e.wxXCkey)||!n&&i.length!==o.length,s=null,l=null;if(a){var u=li(i,t.children);o=u.children,s=u.removes,l=u.inserts}for(var c=r.childNodes,d=0;d<i.length;d++){var p=i[d],f=o[d];!f&&a||ui(p,f,c[d])}a&&((e,t,r,n)=>{for(var i=ps.getByNode(r),o=r.childNodes,a=[],s=0;s<t.length;s++){var l=t[s];a.push({node:void 0!==l.oldIndex?o[l.oldIndex]:null,before:l.pos>=0?o[l.pos]:void 0,index:l.index})}for(var u=0;u<e.length;u++){var c=o[e[u]];r.removeChild(c),"wx:for"===o.__wxDynamicSync__&&(oi(i),i.nodeId.removeNode(c))}for(var d=0;d<a.length;d++){var{before:p,index:f}=a[d],h=a[d].node;null===h&&(h=ni(n[f],null,r.ownerShadowRoot,i,!1)),"wx:for"===r.__wxDynamicSync__?(i.nodeId.addNode(h),r.insertBefore(h,p),oi(i)):r.insertBefore(h,p)}r.__banned&&Ke(r)})(s,l,r,t.children)},di=c(),pi={},fi=1,hi=[],_i=(e,t)=>{if(pi[e]){var r=pi[e],n=hi[hi.length-1],i=hi[hi.length-2],{isMergedUpdate:o,dataPaths:a,pendingStartTimestamp:s,updateStartTimestamp:l,updateEndTimestamp:u,pageId:c}=t(r);ce(v.UPDATE_PERFORMANCE_STAT,[e,{isMergedUpdate:o,dataPaths:a,updateProcessId:n,parentUpdateProcessId:i,pendingStartTimestamp:s,updateStartTimestamp:l,updateEndTimestamp:u}],c)}};var gi=c(),vi=gi.dataUtils.deepCopy,mi=e=>{if("object"!=typeof e||!e)return e;var t=e.slice();return t.shift()(...t)},yi=function(e,t,r){for(var n=e.childNodes,i=0;i<n.length;i++){var o=n[i];o instanceof gi.TextNode||(o.__id&&(t[o.__id]=o),void 0!==o.__slotName&&(r[o.__slotName]=o),yi(o,t,r))}};class bi{createInstance(e,t){var r=new wi,n=t;if(r._template=this,r._generateFunc=this._generateFunc,r.data=vi(this._data),r.idMap=Object.create(null),r.slots=Object.create(null),tn.restoring){if(tn.compIdArrIndex>=tn.compIdArr.length)throw new Error("Component count unmatched while page recovering");n.nodeId.allocNodeId(e,tn.compIdArr[tn.compIdArrIndex++]);var i=tn.idDataMap[n.nodeId.getNodeId(e)];r._virtualTree=ei(this._generateFunc,i)}else r._virtualTree=this._virtualTree;return r.shadowRoot=ni(r._virtualTree,e,null,t,!0),yi(r.shadowRoot,r.idMap,r.slots),r.listeners=[],this._isSimpleComponent||(e.__component__=!0),e.__treeManager__=n,r.shadowRoot.__treeManager__=n,n.operationFlow.registerSetDataCallback((()=>{e.triggerLifeTime("ready")})),r._delayedUpdateValues=null,r}updateGenerateFunc(e){this._generateFunc=mi(e),this._virtualTree=ei(this._generateFunc,this._initValues),ps.list().forEach((t=>{[t.root,t.tabRoot].forEach((r=>{r&&H(r,1,(r=>{r instanceof gi.Component&&r.__templateInstance._template===this&&(r.__templateInstance._generateFunc=e,r.__templateInstance._resetShadowChildren(r,r.data,t))}))}))}))}}bi.create=function(e,t,r,n){var i=new bi;i._initValues=r,i._data=t;var o=e.template;return i._generateFunc=mi(o.func),i._virtualTree=ei(i._generateFunc,i._initValues),i._isSimpleComponent="simple://"===n.domain.slice(0,9),Qn(o.path,(e=>{o.func=e,i.updateGenerateFunc(e)})),i};class wi{beforeMergeValues(e,t,r){if("number"!=typeof r)e.forEach(((e,r)=>{void 0!==e[1]?t[r]=!1:(t[r]=!0,console.warn('Setting data field "'+e[0].join(".")+'" to undefined is invalid.'))}));else{for(var n=0;n<r;n++)t[n]=!1;for(var i=r;i<e.length;i++){var o=e[i];void 0!==o[1]?t[i]=!1:(t[i]=!0,console.warn('Setting data field "'+o[0].join(".")+'" to undefined is invalid.'))}}}beforeUpdateValues(e,t,r){}updateValues(e,t,r,n,i,o){if(!tn.restoring){var a=null,s="number"!=typeof o;if(a=e.__treeManager__,s){a.operationFlow.start(Date.now());var l=[];i.forEach((e=>{void 0!==e[1]&&l.push(e)})),a.operationFlow.push([v.FLOW_UPDATE,a.nodeId.getNodeId(e),vi(l)])}else{for(var u=[],c=o;c<i.length;c++){var d=i[c];void 0!==d[1]&&u.push(d)}a.operationFlow.push([v.FLOW_DATA_OBSERVER,vi(u)])}if(this._delayedUpdateValues)this._delayedUpdateValues.push([vi(t),r,n,i,o]);else{this._delayedUpdateValues=[];try{this._updateValues(e,t,r,n,i,o);var p=this._delayedUpdateValues;this._delayedUpdateValues=null;for(var f=0;f<p.length;f++){var h=p[f];this._updateValues(e,h[0],h[1],h[2],h[3],h[4])}}catch(e){throw this._delayedUpdateValues=null,e}}s&&a.operationFlow.end()}}_updateValues(e,t,r,n,i,o){var a="number"!=typeof o,s=!$("propValueDeepCopy"),l=en(t,i,!0,!1,s),u=ei(this._generateFunc,l);en(t,i,!1,a,!1);var c=this._virtualTree;this._virtualTree=u,ui(c,u,this.shadowRoot)}_resetShadowChildren(e,t,r){var n=()=>{r.operationFlow.push([v.FLOW_HOT_UPDATE_CHILD])};r.operationFlow.start(Date.now()),r.operationFlow.push([v.FLOW_HOT_UPDATE,r.nodeId.getNodeId(e)]);for(var i=this.shadowRoot,o=(this._virtualTree.children||[]).length,a=0;a<o;a++)i.removeChild(i.childNodes[0]);n();var s=ei(this._generateFunc,t);n(),this._virtualTree=s;for(var l=ni(s,null,e.shadowRoot,r,!0).childNodes,u=l.length,c=0;c<u;c++)i.insertBefore(l[0],i.childNodes[c]);r.operationFlow.end()}}var Ai=c(),Ei=null,Si=()=>{Ei={};var e=null;y&&y.plugins?e=y.plugins:"undefined"!=typeof window&&window&&window.__wxConfigAppService__&&window.__wxConfigAppService__.plugins&&(e=window.__wxConfigAppService__.plugins);var t=!1;if(e)for(var r of Object.keys(e)){var n=e[r].provider,i=e[r].subpackage;if(void 0!==i){t=!0;var o=i||"";"__APP__"===o&&(o=""),"/"===o[0]&&(o=o.slice(1)),o&&"/"!==o.slice(-1)&&(o+="/"),Ei[n]=o}}if(!t){var a;if(y&&y.subPackages)a=y.subPackages;else{if("undefined"==typeof window||!window||!window.__subPackages)return;a=window.__subPackages}a.length&&a.forEach((e=>{if(e){var t=e.root||"";if(t&&"/"!==t.slice(-1)&&(t+="/"),e.plugins)for(var r of Object.keys(e.plugins)){var n=e.plugins[r]&&e.plugins[r].provider;n&&(Ei[n]=t)}}}))}},Ii=e=>{var t=e.match(/(?:^|\/)__(wx|plugin)__\/(.*)$/);return t?"wx"===t[1]?"wx://"+t[2]:"plugin-private://"+t[2]:e},Ti=e=>(Ei||Si(),(Ai.Component._list[e]&&Ai.Component._list[e].is||e).replace(/^plugin-private:\/\/([0-9a-zA-Z]+)\//,((e,t)=>(Ei[t]||"")+"__plugin__/"+t+"/")).replace(/^wx:\/\//,"__wx__/")),Ci=()=>(Ei||Si(),Ei),Oi=e=>Ei[e]||"",Ni=e=>(Ei||Si(),(Ei[e]||"")+"__plugin__/"+e+"/"),xi=e=>{Ei||Si();var t,r,n,i=e.match(/^plugin:\/\/(.+?)\//);if(i)return xi(Ei[i[1]]||"");if(i=e.match(/^plugin-private:\/\/([0-9a-zA-Z]+)\//))return xi(Ei[i[1]]||"");t=null!==(r=null===(n=y)||void 0===n?void 0:n.subPackages)&&void 0!==r?r:[];for(var o=0;o<t.length;++o){var a=t[o].root||"";if(a&&"/"!==a.slice(-1)&&(a+="/"),e.slice(0,a.length)===a)return t[o]}return null},Ri=e=>{var t=xi(e);if(!t)return"__APP__";var r=t.root||"";return"/"===r.slice(-1)?r:r+"/"},Pi=e=>{var t=xi(e);return!!t&&t.independent},Di={main:"app-service.js",sub:"app-service.js",lazyCommon:"common.app.js",lazyApp:"appservice.app.js",plugin:"appservice.js"},Li=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],Bi=e=>("__APP__"===e||("/"!==e[0]&&(e="/"+e),"/"!==e[e.length-1]&&(e+="/")),e),ki={},Mi=(e,t)=>{e=Bi(e),"string"!=typeof t.subpackage&&(t.subpackage=e),void 0===ki[e]?ki[e]=[t]:ki[e].push(t)},Fi=Q(["ready"]),ji=(e,t)=>{Fi.on("ready",(()=>{t(ki[e]||[])}))};y.onReady((()=>{var e=new Set,t={};Object.keys(y.plugins||{}).forEach((r=>{var n=y.plugins[r];"string"==typeof n.subpackage?Mi(n.subpackage,n):(e.add(n.provider),t[n.provider]=n)})),(y.subpackages||[]).forEach((r=>{Object.keys(r.plugins||{}).forEach((n=>{var i=r.plugins[n],o=i.provider;e.has(o)&&(e.delete(o),delete t[o],Mi(r.root,i))}))})),Array.from(e).forEach((e=>{Mi("__APP__",t[e])})),Fi.notify("ready")}));var Ui=(e,t)=>{t(`isLazyLoad: ${jo()}`),t(`moduleName: ${e}`);var r="devtools"===y.platform?[]:(ki[Bi(e)]||[]).map((e=>{var t=e.provider,r=`__plugin__/${t}`;return{plugin_id:t,prefix_path:Li.includes(t)?null:r}}));t(`separatedPlugins: ${JSON.stringify(r)}`);var n="__APP__"===e,i=n?"":e;if(jo()){var o=[];return r.forEach((e=>{var t=(i+e.prefix_path+"/").replace(/\/\/$/,"/");e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),o.push(t+Di.plugin)})),o.push(i+Di.lazyCommon,i+Di.lazyApp),t(`all files to inject: ${JSON.stringify(o)}`),o}var a=r.map((e=>{var t=(i+e.prefix_path+"/").replace(/\/\/$/,"/");return e.prefix_path||(t+=`__extended__/${e.plugin_id}/`),t+Di.plugin}));return n?a.push(i+Di.main):a.push(i+Di.sub),t(`all files to inject: ${JSON.stringify(a)}`),a},$i=c(),Wi=(e,t,r)=>{if(e instanceof $i.Component){e!==window.__DOMTree__&&(t.compCount++,e.hasBehavior("wx-base")?(r&&t.rootInternalCompCount++,e.hasBehavior("wx-native")&&t.nativeCompCount++):r&&t.rootCustomCompCount++);var n=e===window.__DOMTree__&&r;e.shadowRoot instanceof $i.Element&&Wi(e.shadowRoot,t,n)}for(var i=e.childNodes,o=0,a=i.length;o<a;o++){var s=(i[o]instanceof $i.VirtualNode||e===window.__DOMTree__||e===window.__DOMTree__.shadowRoot)&&r;i[o]instanceof $i.Element&&Wi(i[o],t,s)}},qi={id:null,prev:null,data:[]};_e(v.SAVE_STATE,(()=>{"function"==typeof wx.webViewReadyToTerminate&&wx.webViewReadyToTerminate({})})),_e(v.RESTORE_STATE,(([e,t,r,n],i,a)=>{if(e&&e.isSplitData){var{id:s,index:l,total:u,data:c}=e.splitInfo;if(1!==l&&(l!==qi.prev+1||s!==qi.id))return qi.id=null,qi.prev=null,void(qi.data=[]);if(l!==u)return qi.id=s,qi.prev=l,void qi.data.push(c);qi.data.push(c);var d=qi.data.join("");try{d=JSON.parse(d)}catch(e){console.error("Expected parse completed data with split data but got error"),o.errorReport({key:"webviewScriptError",error:new Error("Expected parse completed data with split data but got error")}),d=null}if(qi.id=null,qi.prev=null,qi.data=[],!d)return;e=d[0],t=d[1],r=d[2],n=d[3]}tn.restoring=e||{},tn.idDataMap=t,tn.compIdArr=r,tn.compIdArrIndex=0;var p=ps.get(a).compManager;p.restore(n),tn.onReady=p.onRestoreInjectDone.bind(p)}));var Hi=e=>{(e=>{var t=document.body.scrollTop||document.documentElement.scrollTop;e.__page__={scrollTop:t}})(e),e.compExtraDataMap={};var t=0;window.__TAB_BAR__&&(H(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("saved",[e]),Bn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap),H(window.__DOMTree__,1,(r=>{r.triggerLifeTime("saved",[e]),Bn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap},Gi=e=>{(e=>{var t=e.__page__;if(t){var r=parseInt(t.scrollTop,10);requestAnimationFrame((()=>{document.body.scrollTop=document.documentElement.scrollTop=r}))}})(e);var t=0;window.__TAB_BAR__&&(H(window.__TAB_BAR__,1,(r=>{r.triggerLifeTime("restored",[e]),kn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap),H(window.__DOMTree__,1,(r=>{r.triggerLifeTime("restored",[e]),kn(e.compExtraDataMap,r,t++)})),e.compExtraDataMap},Qi=()=>{__webViewSDK__.publish("recycleStatistics",(()=>{var e={compCount:0,customCompCount:0,nativeCompCount:0,rootCustomCompCount:0,rootInternalCompCount:0};try{Wi(window.__DOMTree__,e,!0)}catch(e){}var{compCount:t,customCompCount:r,nativeCompCount:n,rootCustomCompCount:i,rootInternalCompCount:o}=e,a=i+o;return{compCount:t,customCompCount:r,nativeCompCount:n,rootCompCount:a,rootCustomCompCount:i,rootCustomCompRatio:a?Math.floor(100*i/a):0,rootInternalCompCount:o}})());var e={};Hi(e),ce(v.REQUEST_SAVE,e,0,!0)},zi=262144,Ki=Date.now(),Vi=(e,t)=>{var r=ps.get(e);r&&(r.statesData=t,r.tabRoot&&H(r.tabRoot,1,(e=>{e.triggerLifeTime("saved")})),H(r.root,1,(e=>{e.triggerLifeTime("saved")})),ce(v.SAVE_STATE,[],e))},Ji=e=>{var t=ps.get(e);if(t){var r=t.nodeId.getAll(),n={},i=[],o=e=>{var o=t.nodeId.getNodeId(e);void 0!==o&&(i.push(o),n[o]=r[o].data)};t.tabRoot&&!t.tabDestroyed&&H(t.tabRoot,1,o),H(t.root,1,o);var a=t.compManager.getRestoredData(),s=[t.statesData||{},n,i,a],l=JSON.stringify(s),u=l.length;if(u>zi){for(var c=[],d=0;u>d;)c.push(l.substr(d,zi)),d+=zi;for(var p=++Ki,f=0,h=c.length;f<h;f++)ce(v.RESTORE_STATE,[{isSplitData:!0,splitInfo:{id:p,index:f+1,total:h,data:c[f]}}],e)}else ce(v.RESTORE_STATE,s,e);if(t.statesData=void 0,!t.tabDestroyed&&t.tabRoot){ce(v.COMPONENT_DEF_TAB,t.tabUsedDef,e);var _=t.tabRoot;t.operationFlow.start(),t.operationFlow.push([v.FLOW_CREATE_TAB,_.is,t.nodeId.getNodeId(_)]),t.operationFlow.push([v.FLOW_CREATE_TAB]),t.operationFlow.end()}ce(v.COMPONENT_DEF,t.usedDef,e);var g=t.root;t.operationFlow.start(),t.operationFlow.push([v.FLOW_INITIAL_CREATION,g.is,t.nodeId.getNodeId(g),{}]),t.operationFlow.push([v.FLOW_INITIAL_CREATION]),t.operationFlow.end(),t.tabRoot&&H(t.tabRoot,1,(e=>{e.triggerLifeTime("restored")})),H(t.root,1,(e=>{e.triggerLifeTime("restored")}))}},Xi=c(),Yi={},Zi={},eo=function(e,t){return e+"/"+t},to=function(e,t,r,n=!0){var i=t.match(/^plugin-private:\/\/(.*?)\//);if(!i)return!1;var o=i[1];if(n&&eo(o,"0")!==e)return!1;var a=r.match(/^plugin:\/\/(.*?)\//);if(!a)return!1;var s=a[1];return(!n||eo(s,"0")===e)&&(Xi.Component._list[r]?(console.error('"'+r+'" has been used as another component or page. Please do not register multiple components or pages with the same alias.'),!1):(((e,t)=>{Vn[e]=t})(r,t),Xi.Component._list[r]=Xi.Component._list[t],Yi[r]=t,Zi[t]=r,!0))},ro=function(e,t){for(var r in t)to(e,t[r],r)};var no=c(),io=0;function oo(e){e&&".html"!==e.slice(5)&&(e+=".html");var t="";return __wxConfigWindow__&&__wxConfigWindow__.initialRenderingCache&&(t=String(__wxConfigWindow__.initialRenderingCache)),t}function ao(e,t){var r=Date.now(),n={},i={},o=document.head.querySelectorAll("style")||[],a=[];no.ElementIterator.create(e,"composed-descendants-root-first",no.Component).forEach((e=>{e.hasBehavior("wx-base")||(n["./"+e.is+".wxss"]=!0)})),Object.keys(no.Component._list).forEach((e=>{i["./"+e+".wxss"]=!0}));for(var s=0;s<o.length;s++){var l=o[s],u=l.getAttribute("wxss:path");null!=u&&(!i[u]||n[u]?a.push("<style>"+l.innerHTML+"</style>"):l.innerHTML.length+15)}var c=a.join(""),d=c+e.$$.innerHTML;wx.saveInitialRenderingCache({content:d,appserviceData:t});Date.now();c.length}function so(){wx.saveInitialRenderingCache({content:""})}function lo(e,t){return"dynamic"!==oo(window.__route__)?(console.error('An initial rendering cache state is ignored, because initialRenderingCache mode is not "dynamic".'),!1):(e?ao(e,t):so(),!0)}var uo=c(),co=(e,t,r,n)=>{var i=`${Math.random()}-${+new Date}`,o=ps.get(r);if(o)return o.operationFlow.push([v.FLOW_VIEW_INFO,e,t,i]),"function"==typeof n&&(o.viewInfoCbMap[i]=n),i},po=(e,t)=>{var r=ps.get(e);r&&delete r.viewInfoCbMap[t]},fo=c(),ho=c(),_o={},go=(e,t)=>{void 0===_o[e]&&(_o[e]=Q(["ready"])),_o[e].on("ready",t)},vo=(e,t)=>{if(wx.traceBeginEvent("Framework","dispatchViewRoute"),"webview"!==p()&&!y.isLazyLoad){var r=e.replace(/\.html$/,"").replace(/^\//,"");wx.traceBeginEvent("Framework","injectWxss"),qo(r),wx.traceEndEvent(),wx.traceBeginEvent("Framework","triggerGenerateFuncReady"),Wo(r,t),wx.traceEndEvent()}wx.traceEndEvent()},mo=ho.dataUtils.deepCopy,yo={lazyRegistration:!0,publicProperties:!0},bo={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",templateEngine:bi,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,idPrefixGenerator:null,separateInnerData:!0,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},wo={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",renderingMode:"full",templateEngine:bi,multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!0,idPrefixGenerator:null,separateInnerData:!1,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},Ao="undefined"!=typeof WeakMap?new WeakMap:{},Eo={},So={},Io={},To={},Co={},Oo={},No=1,xo=Object.prototype.hasOwnProperty,Ro="wx-",Po=(e,t)=>{var r={},n=(t[e+".json"]||{}).usingComponents||{};for(var i of Object.keys(n))r[Ro+i]=U(e,String(n[i]));return r},Do=(e,t)=>{for(var r in t){var n=t[r];n.target=null!=n.target?String(n.target):U(e,String(r))}return t},Lo=(e,t)=>{var r={},n=(t[e+".json"]||{}).componentGenerics||{};for(var i of Object.keys(n)){var o=n[i];"object"==typeof o?r[Ro+i]={default:U(e,String(o.default||""))}:null!=o&&(r[Ro+i]={})}return r},Bo=(e,t)=>{var r=t[e+".json"]||{},n={},i=r.componentPlaceholder||{};return Object.keys(i).forEach((e=>{n[Ro+e]=Ro+String(i[e])})),n},ko=(e,t)=>(t[e+".json"]||{}).renderer,Mo=(e,t)=>(t[e+".json"]||{}).xrFrameTouchEventBubble,Fo=(e,t,r,n)=>{var i=ps.get(r).nodeId.getNodeById(n,r);i&&t&&ho.Element.getMethodCaller(i).setData({[t]:e})},jo=()=>y.isLazyLoad,Uo=e=>{var t="__plugin__/",r=e.indexOf(t);return-1===r?e:"plugin-private://"+e.slice(r+t.length)},$o=e=>{if(-1===e.indexOf("plugin://"))return e;var t=e.match(/\w+\//);if(!t)return e;t=t[0].slice(0,t[0].length-1);var r,n,i=(r=t,(n=y.plugins||{})[r]?n[r].provider:null);if(!i)return e;var o=e.replace(t,i);return Yi[o]?Yi[o]:o},Wo=(e,t)=>{var r=Uo(e);s.info(`[triggerGenerateFuncReady] dispatch generateFuncReady from vd, comp=${r}`);var n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[r+".wxml"];Array.isArray(n)&&(n=n[0][n[1]]),window.__wxAppCodeReadyCallback__?window.__wxAppCodeReadyCallback__(n):window.document.dispatchEvent(new CustomEvent("generateFuncReady",{detail:{generateFunc:n,pageId:t}}))},qo=e=>{var t=p();if("webview"===t){var r=Uo(e);s.info(`[injectWxss] inject page wxss from vd, comp=${r}`);var n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[r+".wxss"];void 0!==n&&"function"==typeof n||(s.warn("codeMap does not contain valid wxss "+(r+".wxss")),n=()=>{}),window.__setCssStartTime__=Date.now(),n(),window.__setCssEndTime__=Date.now()}else s.info(`[injectWxss] current renderer is ${t}, handle root wxss by priority`)},Ho=(e,t,r,n)=>{Jn(e.viewId);var i=[[],[],t,Yi];zo(i,t,Object.create(null),"",e);var o=new Set(e.usedDef[0].map((e=>e.is))),a=new Set(e.usedDef[0].map((e=>e.is))),s=[],l=[];i[0].forEach((e=>{o.has(e.is)||(s.push(e),o.add(e.is))})),i[1].forEach((e=>{a.has(e.is)||(l.push(e),a.add(e.is))})),i[0]=s,i[1]=l,e.usedDef[0].push(...i[0]),e.usedDef[1].push(...i[1]),e.operationFlow.sendInIndividualFlow([v.FLOW_COMPONENT_DEF_ADD,n,i]),e.operationFlow.sendInIndividualFlow([v.FLOW_WAIT_COMPONENT,n]),e.operationFlow.start(Date.now()),e.operationFlow.push([v.FLOW_REPLACE_PLACEHOLDER,n]),r.replacers.forEach((e=>{e()})),e.operationFlow.end()},Go=e=>{var t=Yo(e);return t?Xo(t):""},Qo=(e,t,r)=>{if("wx://"!==t.slice(0,5)){var n=So[t];if(!n)throw new Error('"'+t+'" is not a behavior registered by Behavior()');e[0].unshift(n),r[t]=!0;var i=Co[n.is];if(i)for(var o=0;o<i.length;o++){var a=i[o];r[a]||Qo(e,a,r)}}},zo=(e,t,r,n,i,o=!1)=>{xo.call(Yi,t)&&(t=Yi[t]);var a=Eo[t];if(!i.compManager.shouldUsePlaceholder(t)||!o)if(a){var s=Oo[t];"wx://"!==t.slice(0,5)&&e[1].unshift(a),r[t]=!0;var l=Io[a.is],u=To[a.is];for(var c of Object.keys(l||{})){var d=l[c];r[d]||zo(e,d,r,t,i,!!s[c])}for(var p of Object.keys(u||{})){var f=u[p].default;f&&(r[f]||zo(e,f,r,t,i,!!s[p]))}var h=Co[a.is];if(h)for(var _=0;_<h.length;_++){var g=h[_];r[g]||Qo(e,g,r)}}else console.error(`Component is not found in path "${t}"${n?` (using by "${n}")`:""}`)},Ko=(e,t)=>{var r={};for(var n in e.properties){var i=e.properties[n];if(null===i)r[n]={type:null};else if(i===Number||i===String||i===Boolean||i===Object||i===Array)r[n]={type:i.name};else if(void 0===i.public||i.public){var o=i.type,a=null;o!==Number&&o!==String&&o!==Boolean&&o!==Object&&o!==Array||(a=o.name);var s=void 0;if(i.optionalTypes){s=[];for(var l=0;l<i.optionalTypes.length;l+=1){var u=i.optionalTypes[l];u!==Number&&u!==String&&u!==Boolean&&u!==Object&&u!==Array||s.push(u.name)}}r[n]={type:a,optionalTypes:s,value:i.value}}}var c=e.options.innerDataExclude;return{is:e.is,using:e.using,generics:e.generics,placeholder:e.placeholder,behaviors:e.behaviors,data:e.data,properties:r,externalClasses:e.externalClasses,template:t,options:{domain:e.options.domain,writeOnly:e.options.writeOnly||void 0,multipleSlots:e.options.multipleSlots||void 0,writeIdToDOM:e.options.writeIdToDOM||void 0,styleIsolation:e.options.styleIsolation||void 0,addGlobalClass:e.options.addGlobalClass||void 0,hasObservers:!!e.observers,innerDataExcludeString:c?c.toString():null,virtualHost:e.options.virtualHost||void 0}}},Vo=function(e){if(e.behaviors){for(var t=[],r=0;r<e.behaviors.length;r++){var n=String(e.behaviors[r]);if("/"!==n[0]&&"wx://"!==n.slice(0,5))throw new Error("Behaviors should be constructed with Behavior()");t.push(n)}e.behaviors=t,Co[e.is]=t}else e.behaviors=null},Jo=function(e){var t="/"+No+++"/"+W(),r={};for(var n in e)r[n]="data"===n?mo(e[n]):e[n];return r.is=t,Vo(r),r.options=yo,So[t]=Ko(r),r.definitionFilter=ho.Behavior.callDefinitionFilter(r),ho.registerBehavior(r),r.is},Xo=e=>ho.Component.getComponentOptions(e).domain.split("/",1)[0],Yo=e=>Ao.get(e),Zo=(e,t,r)=>{var n=ho.Component.getComponentOptions(t).domain,i=ho.Component.getMethod(t,"__export__"),o=n===e?ho.Element.getMethodCaller(t):null;if(i){var a=n===e?r:null,s=i.call(ho.Element.getMethodCaller(t),a);return void 0===s?o:s}return o},ea=(e,t,r)=>{var n=Yo(e),i=ho.Component.getComponentOptions(n).domain,o=n.shadowRoot;if(r)return o.querySelectorAll(t).map((t=>Zo(i,t,e)));var a=o.querySelector(t);return a?Zo(i,a,e):null},ta=(e,t,r)=>{e!==na&&Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})};function ra(){}var na=ra.prototype=Object.create(Object.prototype,{is:{get(){return Yo(this).is},set(e){ta(this,"is",e)}},id:{get(){var e=Yo(this);return ho.Component.getComponentOptions(e).writeOnly?"":e.id},set(e){ta(this,"id",e)}},getPageId:{get:()=>function(){return"pageId:"+Yo(this).__treeManager__.viewId},set(e){ta(this,"getPageId",e)}},router:{get(){return Yo(this).__pageRouter__},set(e){ta(this,"router",e)}},pageRouter:{get(){return(e=>{for(var t=Yo(e),r=ho.Component.getComponentOptions(t).domain;;){var n=t.ownerShadowRoot;if(!n)break;if(!(n instanceof ho.ShadowRoot))return null;var i=n.getHostNode();if(!i)return null;if(ho.Component.getComponentOptions(i).domain!==r)return null;t=i}return t})(this).__pageRouter__},set(e){ta(this,"pageRouter",e)}},renderer:{get(){var e=Yo(this).__treeManager__;return he(e.viewId)},set(e){ta(this,"renderer",e)}},dataset:{get(){var e=Yo(this);return ho.Component.getComponentOptions(e).writeOnly?null:e.dataset},set(e){ta(this,"dataset",e)}},properties:{get(){return this.__data__},set(e){ta(this,"properties",e)}},data:{get(){return this.__data__},set(e){ta(this,"data",e)}},setData:{get:()=>function(e,t){var r=Yo(this),n=r.__treeManager__;return"function"==typeof t&&n.operationFlow.registerSetDataCallback(t,this,r),r.setData(e)},set(e){ta(this,"setData",e)}},groupSetData:{get:()=>function(e){var t=Yo(this).__treeManager__;t.operationFlow.start(Date.now()),t.operationFlow.push([v.FLOW_GROUP]);var r=null;try{e.call(this)}catch(e){r=e}if(t.operationFlow.push([v.FLOW_GROUP_END]),t.operationFlow.end(),r)throw r},set(e){ta(this,"setData",e)}},replaceDataOnPath:{get(){return(e,t)=>Yo(this).replaceDataOnPath(e,t)},set(e){ta(this,"replaceDataOnPath",e)}},mergeDataOnPath:{get(){return(e,t)=>Yo(this).mergeDataOnPath(e,t)},set(e){ta(this,"mergeDataOnPath",e)}},applyDataUpdates:{get(){return()=>Yo(this).applyDataUpdates()},set(e){ta(this,"applyDataUpdates",e)}},hasBehavior:{get(){return e=>Yo(this).hasBehavior(e)},set(e){ta(this,"hasBehavior",e)}},triggerEvent:{get(){return(e,t,r)=>Yo(this).triggerEvent(e,t,r)},set(e){ta(this,"triggerEvent",e)}},createSelectorQuery:{get(){return()=>u._createSelectorQuery({},Xo(Yo(this))).in(this)},set(e){ta(this,"createSelectorQuery",e)}},createIntersectionObserver:{get(){return e=>u._createIntersectionObserver(this,e,Xo(Yo(this)))},set(e){ta(this,"createIntersectionObserver",e)}},createMediaQueryObserver:{get(){return e=>u._createMediaQueryObserver(this,e,Xo(Yo(this)))},set(e){ta(this,"createMediaQueryObserver",e)}},getOpenerEventChannel:{get(){return()=>this.__eventChannel},set(e){ta(this,"getOpenerEventChannel",e)}},applyAnimation:{get(){return(e,t,r,n,i)=>{var o=Yo(this);!function(e,t,r,n,i,o,a,s){var l=`${Math.random()}-${+new Date}`;"function"==typeof a&&(t.applyAnimationCbMap[l]=a),t.operationFlow.push([v.FLOW_SET_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof a,reqId:l,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:i,type:o?"animeJS":void 0,isLastAnimation:s}])}(o,o.__treeManager__,this.__wxWebviewId__,e,t,r,n,i)}},set(e){ta(this,"applyAnimation",e)}},clearAnimation:{get(){return(e,t,r)=>{var n=Yo(this);!function(e,t,r,n,i,o){var a=`${Math.random()}-${+new Date}`;"function"==typeof o?t.clearAnimationCbMap[a]=o:"function"==typeof i&&(t.clearAnimationCbMap[a]=i),t.operationFlow.push([v.FLOW_CLEAR_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof t.clearAnimationCbMap[a],reqId:a,nodeId:t.nodeId.getNodeId(e),webviewId:r,selector:n,options:i}])}(n,n.__treeManager__,this.__wxWebviewId__,e,t,r)}},set(e){ta(this,"clearAnimation",e)}},animate:{get(){return(e,t,r,n,i)=>{if("function"==typeof n)i=n;else if(void 0!==n){var o=Yo(this),a=o.__treeManager__;return void a.operationFlow.push([v.FLOW_SET_NODE_ANIMATION_INFO,{type:"scrollTimeline",nodeId:a.nodeId.getNodeId(o),selector:e,options:t,duration:r,timeline:n}])}for(var s=pr(t,r),l=0;l<s.length;++l){var u="animeJS"===s[l].type;delete s[l].type,l===s.length-1?this.applyAnimation(e,s[l],u,i,!0):this.applyAnimation(e,s[l],u)}}},set(e){ta(this,"animate",e)}},applyAnimatedStyle:{get(){return(e,t)=>{var r=Yo(this),n=r.__treeManager__,i=n.viewId;u.worklet.createAnimatedStyleAsync(i,t).then((t=>{JSON.stringify(t),n.operationFlow.push([v.FLOW_SET_NODE_ANIMATED_STYLE,{nodeId:n.nodeId.getNodeId(r),pageId:i,selector:e,animatedStyle:t}])}))}},set(e){ta(this,"applyAnimatedStyle",e)}},selectOwnerComponent:{get(){return e=>{var t=Yo(this);return ho.Component.getComponentOptions(t).writeOnly?null:(e=>{var t=Yo(e),r=ho.Component.getComponentOptions(t).domain,n=t.ownerShadowRoot;if(!(n instanceof ho.ShadowRoot))return null;var i=n.getHostNode();return i?Zo(r,i,e):null})(this)}},set(e){ta(this,"selectOwnerComponent",e)}},selectComponent:{get(){return e=>{var t=Yo(this);return ho.Component.getComponentOptions(t).writeOnly?null:ea(this,e,!1)}},set(e){ta(this,"selectComponent",e)}},selectAllComponents:{get(){return e=>{var t=Yo(this);return ho.Component.getComponentOptions(t).writeOnly?[]:ea(this,e,!0)}},set(e){ta(this,"selectAllComponents",e)}},getRelationNodes:{get(){return e=>((e,t)=>{var r=Yo(e).getRelationNodes(t);return null===r?null:r.map((e=>ho.Element.getMethodCaller(e)))})(this,e)},set(e){ta(this,"getRelationNodes",e)}},getTabBar:{get:()=>function(e){var t=Yo(this).__treeManager__;return"function"==typeof e?t.tabRoot?(e(ho.Element.getMethodCaller(t.tabRoot)),ho.Element.getMethodCaller(t.tabRoot)):(qa(t.viewId).then((()=>{!t.tabDestroyed&&t.tabRoot&&e(ho.Element.getMethodCaller(t.tabRoot))})),null):t.tabDestroyed||!t.tabRoot?null:ho.Element.getMethodCaller(t.tabRoot)},set(e){ta(this,"getTabBar",e)}},exitState:{get(){return this.__exitState__},set(e){ta(this,"exitState",e)}},setInitialRenderingCache:{get:()=>function(e){var t=Yo(this).__treeManager__;null===e?ja(t):Fa(t,e)},set(e){ta(this,"exitState",e)}},setUpdatePerformanceListener:{get:()=>function(e,t){var r=Yo(this),n=r.__treeManager__,i=n.nodeId.getNodeId(r);"function"==typeof t?(r.__updatePerformanceListener__=t,n.operationFlow.push([v.ENABLE_UPDATE_PERFORMANCE_STAT,i,e])):(r.__updatePerformanceListener__=null,n.operationFlow.push([v.DISABLE_UPDATE_PERFORMANCE_STAT,i]))},set(e){ta(this,"exitState",e)}},getPassiveEvent:{get:()=>function(e){wx.getPassiveEvent(this.__wxWebviewId__,e)},set(e){ta(this,"exitState",e)}},setPassiveEvent:{get:()=>function(e){wx.setPassiveEvent(this.__wxWebviewId__,e)},set(e){ta(this,"exitState",e)}}}),ia=function(e,t,r){var n=t[r+".json"]||{};void 0!==n.styleIsolation&&(e.options||(e.options={}),e.options.styleIsolation=n.styleIsolation),void 0!==n.pureDataPattern&&(e.options||(e.options={}),e.options.pureDataPattern=new RegExp(n.pureDataPattern))},oa=function(e,t){var r,n;e.using=Io[e.is]=Po(e.is,t),e.generics=To[e.is]=Lo(e.is,t),e.placeholder=Oo[e.is]=Bo(e.is,t),r=e.is,((n={isXrComp:"xr-frame"===ko(e.is,t),xrFrameTouchEventBubble:Mo(e.is,t)}).isXrComp||n.xrFrameTouchEventBubble)&&(Kn[r]=n),Vo(e);var i=e.is+".wxml",o={path:i,func:Gn[i]||t[i]||null};e.template=o,null===e.template.func&&s.warn(`[componentRegistration] Generate function of ${e.is} not found in data thread`),Eo[e.is]=Ko(e,i);var a=ho.registerElement(e),l=Object.create(na,{constructor:{value:ra,writable:!0,configurable:!0}});ho.Behavior.prepare(a.behavior);var u=a.behavior.methods;for(var c in u)l[c]=u[c];return Qn(e.is+".js",(t=>{t(),(e=>{var t=Eo[e];ps.list().forEach((r=>{ce(v.UPDATE_COMPONENT_DEF,[t],r.viewId),[r.root,r.tabRoot].forEach((t=>{t&&H(t,1,(t=>{if(t instanceof ho.Component&&t.is===e){var n=t===r.root;n&&r.lifetimeListener&&r.lifetimeListener.call(r.root,"onUnload"),ti(t,r),n&&r.lifetimeListener&&(r.lifetimeListener.call(r.root,"onLoad"),r.lifetimeListener.call(r.root,"onShow"))}}))}))}))})(e.is)})),l},aa=function(e,t,r,n){var i=n||__wxAppCurrentFile__,o=r||__wxAppCode__,a=o[i+"on"];if(!i||!a)return console.error("Component constructors should be called while initialization. A constructor call has been ignored."),"";var s=i.slice(0,-3);if(a.component&&"simple"===a.component.type)return function(e,t,r,n,i){ia(e,i,t);var o={is:t,using:Po(t,i),properties:e.properties,externalClasses:e.externalClasses,options:bo},a=e.options||{};o.options=bo,o.options.multipleSlots=a.multipleSlots||!1,o.options.writeOnly=!0,o.options.writeIdToDOM=!1,o.options.domain="simple://"+(n||"/"),o.options.styleIsolation=a.styleIsolation||"",o.options.addGlobalClass=a.addGlobalClass||!1,o.options.innerDataExclude=null,o.options.virtualHost=!1,Eo[t]=Ko(o,t+".wxml"),o.is}(e,s,0,t,o),s;ia(e,o,s),ca(s,e.methods);var l=ho.Behavior.callDefinitionFilter(e),c={is:s,properties:e.properties,data:mo(e.data),methods:e.methods,behaviors:e.behaviors,lifetimes:e.lifetimes,pageLifetimes:e.pageLifetimes,created:e.created,attached:e.attached,ready:e.ready,moved:e.moved,detached:e.detached,saved:e.saved,restored:e.restored,relations:e.relations?Do(i,e.relations):void 0,externalClasses:e.externalClasses,observers:e.observers,definitionFilter:l,options:bo,initiator(){this.__customConstructor__=aa,this.__pageRouter__=u.createRouter(s,this.__treeManager__.viewId);var e=Object.create(p);Ao.set(e,this),ho.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},d=e.options||{};c.options=bo,c.options.multipleSlots=d.multipleSlots||!1,c.options.writeOnly=d.writeOnly||!1,c.options.writeIdToDOM=!1,c.options.domain=(d.writeOnly?"wo://":"")+(t||"/"),c.options.styleIsolation=d.styleIsolation||"",c.options.addGlobalClass=d.addGlobalClass||!1,c.options.innerDataExclude=d.pureDataPattern||null,c.options.virtualHost=d.virtualHost||!1;var p=oa(c,o);return c.is},sa=function(e,t,r,n){var i=n||__wxAppCurrentFile__;if(!i)return console.error("Page constructors should be called while initialization. A constructor call has been ignored."),"";var o=r||"undefined"!=typeof __wxAppCode__&&__wxAppCode__||{},a=Object.create(null),s={methods:{}};for(var l in e)"data"===l?s.data=e.data:"function"==typeof e[l]?s.methods[l]=e[l]:"methods"===l?a.methods=e.methods:s[l]=e[l];var c=(e=>{if(!e)return!1;if(e instanceof Array){for(var t=0;t<e.length;t++){var r=String(e[t]);if("wx://"!==r.slice(0,5)&&!So[r])return console.warn('"behaviors" list contains non-behavior items. The whole list is ignored.'),!1}return!0}return!1})(s.behaviors),d=i.slice(0,-3);for(var p of(ia(s,o,d),c&&ho.Behavior.callDefinitionFilter(s),Object.keys(s)))"data"!==p&&"methods"!==p&&(a[p]=s[p]);ca(d,s.methods);var f={is:d,behaviors:c?s.behaviors:void 0,data:mo(s.data),methods:s.methods,properties:void 0===e.properties?s.properties:void 0,lifetimes:void 0===e.lifetimes?s.lifetimes:void 0,pageLifetimes:void 0===e.pageLifetimes?s.pageLifetimes:void 0,created:void 0===e.created?s.created:void 0,attached:void 0===e.attached?s.attached:void 0,ready:void 0===e.ready?s.ready:void 0,moved:void 0===e.moved?s.moved:void 0,detached:void 0===e.detached?s.detached:void 0,saved:void 0===e.saved?s.saved:void 0,restored:void 0===e.restored?s.restored:void 0,relations:void 0===e.relations&&s.relations?Do(i,s.relations):void 0,externalClasses:void 0===e.externalClasses?s.externalClasses:void 0,observers:void 0===e.observers?s.observers:void 0,options:bo,initiator(){this.__customConstructor__=sa,this.__pageRouter__=u.createRouter(d,this.__treeManager__.viewId);var e=Object.create(_);Ao.set(e,this),ho.Element.setMethodCaller(this,e),Object.defineProperties(e,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},h=s.options||{};f.options.multipleSlots=!1,f.options.writeOnly=!1,f.options.writeIdToDOM=!0,f.options.domain=t||"/",f.options.styleIsolation=h.styleIsolation||"shared",f.options.addGlobalClass=!1,f.options.innerDataExclude=h.pureDataPattern||null,f.options.virtualHost=h.virtualHost||!1;var _=oa(f,o);return _.__freeData__=a,f.is},la="_worklet_factory_",ua={},ca=(e,t)=>{ua[e]={},Object.keys(t||{}).forEach((r=>{if(r.startsWith("_")&&r.endsWith(la)){var n=r.slice("_".length,-la.length);ua[e][n]=t[r]}}))},da=0,pa={},fa=(e,t,r)=>new Promise((n=>{var i=ps.get(r).nodeId.getNodeId(e);pa[da]=n,ce(v.REQUEST_WORKLET_METHOD,{methodName:t,nodeId:i,reqId:da},r),da++}));me(v.RESPONSE_WORKLET_METHOD,(e=>{var t=e[0].reqId,r=pa[t];"function"==typeof r&&(delete pa[t],r(e[0].workletId))}));var ha=!0,_a=e=>{(e=>{var t=fi++;hi.push(t);try{e(t)}catch(e){throw hi.pop(),e}hi.pop()})((()=>{ga(e)}))},ga=e=>{an+=1;var t,r,n,i,a,l=Date.now(),u=e.operationFlow.iterator,c=u.expectStart(),d=u.nextStepType();if(d===v.FLOW_INITIAL_CREATION)va(e,v.FLOW_INITIAL_CREATION),un(c,l,Date.now(),2);else if(d===v.FLOW_INITIAL_RENDERING_CACHE)va(e,v.FLOW_INITIAL_RENDERING_CACHE);else if(d===v.FLOW_CREATE_TAB)va(e,v.FLOW_CREATE_TAB),un(c,l,Date.now(),3);else if(d===v.FLOW_SET_ROOT_PROPERTIES){var p=u.nextStep();Wn(e.root,p[1],p[2],p[3])}else if(xo.call(us,u.nextStepType())){var f=us[u.nextStepType()],h=u.nextStep().slice(1);f(e.compManager,h)}else{var _=Date.now(),g=u.nextStep();if(g[0]===v.FLOW_UPDATE){var m=g[1],y=e.nodeId.getNodeById(m),b=g[2];if(y){if(b.length){var A=ho.Component.getDataProxy(y);A.setChanges(b),A.doUpdates(void 0,!1),_i(m,(t=>({isMergedUpdate:!1,dataPaths:t.withDataPaths?b.map((e=>e[0])):void 0,pendingStartTimestamp:c,updateStartTimestamp:l,updateEndTimestamp:Date.now(),pageId:e.viewId})))}}else s.warn(`[flowUpdate] node ${g[1]} not found`),u.skipToEnd()}else if(g[0]===v.FLOW_GROUP){var E=u.nextStep();if(E[0]!==v.FLOW_GROUP_END)throw new Error(`Framework inner error (expect FLOW_GROUP_END but get ${w(E[0])})`)}else if(g[0]===v.FLOW_REPLACE_PLACEHOLDER){var S=g[1];e.compManager.getAndClearPendingPlaceholderReplacement(S).replacers.forEach((e=>{e()}))}else if(g[0]===v.FLOW_HOT_UPDATE){var I=e.nodeId.getNodeById(g[1]);I?I.__templateInstance._resetShadowChildren(I,I.data,e):u.skipToEnd()}else{if(g[0]!==v.FLOW_HOT_UPDATE_RESET)throw new Error(`Framework inner error (expect an update event but get ${w(g[0])})`);var T=e.nodeId.getNodeById(g[1]);ti(T,e)}((e,t,r,n)=>{o.speedReport({key:e,timeMark:{startTime:t,endTime:r},force:"reRenderTime"!==e,data:n})})("reRenderTime",_,Date.now()),ha&&5===((e,t,r)=>(cn+=an,pn+=r-t,fn+=sn,hn+=ln,_n+=r-e,an=0,sn=0,ln=0,dn+=1))(c,l,Date.now())&&(ha=!1,t=1,r=Math.ceil(pn/(dn||1)),n=Math.ceil(hn/(fn||1)),i=Math.ceil(_n/(dn||1)),a=[cn,dn,r,fn,n,1,i,t].map(encodeURIComponent).join(","),void 0!==o&&o.reportKeyValue({key:"SetDataPerf",value:a,force:!0}))}u.expectEnd()},va=(e,t)=>{s.info(`[OperationFlow] executing init flow with type ${w(t)}`);var r,n=t===v.FLOW_CREATE_TAB,i=t===v.FLOW_INITIAL_RENDERING_CACHE,o=e.operationFlow.iterator,a=o.nextStep(),l=a[1],u=a[2],c=p(),f=null;if("skyline"===c?r=d().getContext(e.viewId):"scl"===c||"xr-frame"===p()&&(r=xrFrame.getOrCreateContext(e.viewId)),n){if(e.tabNodeId=u,s.info(`[OperationFlow] creating tab bar comp <${l}> ok, pageId=${e.viewId}`),"skyline"===c){var h=d().getTabBarContext();e.tabRoot=f=window.__TAB_BAR__=ho.Component.createWithContext("tab-bar",ho.Component._list[l],h,e),"function"==typeof f.__domElement.setStyleScope&&f.__domElement.setStyleScope(ho.getStyleScopeId(ho.Component._list[l].options.classPrefix))}else"scl"===c||("xr-frame"===p()?s.info(`[OperationFlow] unexpected xr-frame tabb bar, pageId=${e.viewId}`):e.tabRoot=f=window.__TAB_BAR__=ho.createElement("tab-bar",ho.Component._list[l]));s.info(`[OperationFlow] create tab bar comp ok, pageId=${e.viewId}`)}else if(i){if(!l)return void lo(null);f=ho.createElement("initial-rendering-cache",ho.Component._list[l])}else{var _=a[3]||{};e.rootNodeId=u,s.info(`[OperationFlow] creating root component on view thread, pageId=${e.viewId}`),wx.traceBeginEvent("Framework","createRootComponent"),"skyline"===c?(e.root=f=window.__DOMTree__=ho.Component.createWithGenericsAndContext("wx-page",ho.Component._list[l],_,r,e),"function"==typeof f.__domElement.setStyleScope&&f.__domElement.setStyleScope(ho.getStyleScopeId(ho.Component._list[l].options.classPrefix))):"xr-frame"===p()?e.root=f=window.__DOMTree__=ho.Component.createWithGenericsAndContext("wx-xr-element",ho.Component._list[l],_,r,e):e.root=f=window.__DOMTree__=ho.Component.createWithGenerics("body",ho.Component._list[l],_,e),wx.traceEndEvent(),s.info(`[OperationFlow] create root component on view thread ok, pageId=${e.viewId}`)}if(e.nodeId.allocNodeId(f,u),f.setAttribute("is",l),tn.restoring&&!n){var g=tn.idDataMap[e.nodeId.getNodeId(f)];ho.Component.replaceWholeData(f,g,null),Gi(tn.restoring),tn.restoring=null,tn.idDataMap=null}if((a=o.nextStep())[0]!==t)throw new Error(`Framework inner error (expect ${w(t)} end but get ${w(a[0])})`);if(e.nodeId.addNode(f),n)if("skyline"===c){s.info("[OperationFlow] attaching tabBar to skyline");var m=d().getTabBarContext();f.__domElement.setStyle("pointer-events: none;"),m.attach(f.__domElement),ho.Element.pretendAttached(f),e.__attached=!0,s.info("[OperationFlow] attach tabBar to skyline done")}else if("scl"===c);else{var b=ho.createElement("wx-tab-bar-wrapper",ho.Component._list["wx://tab-bar-wrapper"]);b.appendChild(f),document.documentElement.insertBefore(b.$$,document.body),ho.Element.pretendAttached(b),e.tabDestroyed&&b.removeChild(f)}else if(i){var A=document.createElement("wx-initial-rendering-cache-wrapper");if(A.setAttribute("style","height: 0; overflow: hidden"),A.appendChild(f.$$),document.documentElement.insertBefore(A,document.body),(a=o.nextStep())[0]!==v.FLOW_INITIAL_RENDERING_CACHE)throw new Error("Framework inner error (expect initial rendering end but get another)");H(f,1,(e=>{e.triggerLifeTime("cacheAttached")})),lo(f,a[1]),e.nodeId.removeNode(f),document.documentElement.removeChild(A)}else{if("skyline"===c){s.info(`[WABaseLib.Critical] attach root element to skyline, pageId=${e.viewId}`);var E=d(),S=E.getContext(e.viewId);if(E.useCustomRoute(e.viewId)){s.info(`[WABaseLib.Critical] useCustomRoute, pageId=${e.viewId}`);var I=S.createElement("empty","host");I.setStyle("overflow: hidden;"),I.appendChild(f.__domElement),f.__domElement.forceDetached(),S.attach(f.__domElement,I),E.attachCustomRoute(e.viewId,I)}else s.info(`[WABaseLib.Critical] useNormalRoute, pageId=${e.viewId}`),S.attach(f.__domElement);e.__attached=!0}else"webview"===p()&&(document.body=f.$$);H(f,1,(e=>{e.triggerLifeTime("cacheAttached")})),"webview"===c&&function(e){io&&Date.now();var t=oo(window.__route__);if("static"!==t){if("dynamic"!==t){var r=y.envVersion;"develop"!==r&&"trial"!==r||so()}return!1}ao(e)}(f),ho.Element.pretendAttached(f)}s.info(`[OperationFlow] init flow type ${w(t)} execution ok`)},ma={},ya=()=>{Jr.setStartOperation(_a)},ba=!1,wa=(e={})=>{var t=p(),r="skyline"===t?I:T;if((fe(r,t),"reLaunch"!==e.openType&&"autoReLaunch"!==e.openType||(Ia(r),ba=!1),!ba)&&(ba=!0,s.info(`[VD] newTabBar, tabBarViewId=${r}`),Pa[r]=!0,ps.create(r),ye(r),ps.get(r).operationFlow.unblock(),"skyline"===t)){var n=d().getTabBarContext();__webviewEngine__.getStyleSheetManager(r).registerBackendContext(n)}},Aa=(e,t)=>{if(!ps.get(e)){s.info(`[VD] newPage, pageId=${e}`),fe(e,p());var r=ps.create(e).compManager;if(Pa[e]=!1,Da[e]=[],La[e]=[],ye(e),go(e,(()=>{if(s.info(`[WebviewInjectFirstPage] onMainPageFrameReady, isLazyLoad=${jo()}, pageId=${e}, isFirstPage=${y.isFirstPage}`),jo()&&y.isFirstPage&&"webview"===p()){var t=y.appLaunchInfo.path,r=t.replace(/\.html$/,"").replace(/^\//,"");r=$o(r),s.info(`[WebviewInjectFirstPage] entryPath=${t}, pageId=${e}, rootCompPath=${r}`);var n=ps.get(e).compManager;setTimeout((()=>{(e=>{var t="ios"===y.platform,r=y.isLazyLoad,n=y.isFirstPage,i=y.appLaunchInfo.path.replace(/\.html$/,"").replace(/^\//,""),o=Ri(i),a="__APP__"===o,l=[101,111].includes(y.appLaunchInfo.preloadType),u=t&&r&&n&&a&&l;if(s.info(`[fixPluginInjectionMiss] isIOS=${t} isLazyLoad=${r} isFirstPage=${n} isMainPackage=${a} isPreload=${l}, isNeedFix=${u}`),u){var c=[];Object.values(y.plugins||{}).filter((e=>e.subpackage.includes(o))).forEach((e=>{var t=e.provider,r=void 0!==window[`__pluginFrameStartTime_${t}__`];s.info(`[fixPluginInjectionMiss] pluginId=${t} isPluginInjected=${r}`),r||c.push(`__plugin__/${t}/pageframe.js`)})),s.info(`[fixPluginInjectionMiss] loadJsFiles to webview: [${c.join(",")}]`),Ie(c,(()=>{e()}))}else e()})((()=>{r=$o(r),n.setInitialSubPackage(r),n.injectComponentsRecursively([r],(()=>{ma[e].on("inject",(()=>{qo(r),Wo(r)}))}),!0)}))}))}})),ma[e]=Q(["inject"]),ma[e].on("inject",(()=>{"webview"===p()&&$a(e)})),y.onReady((()=>{jo()&&k()?go(e,(()=>{"skyline"===p()?r.injectComponentsRecursively([C],(()=>{d().onPageReady(e,(()=>{var r,n,i,o,a,s,l="autoReLaunch"===t.openType||"reLaunch"===t.openType;t.isTabPage&&(P(t.path)?($a(e,l),"skyline"===p()&&(null===(o=window)||void 0===o||null===(a=o.__TAB_BAR__)||void 0===a||null===(s=a.__domElement)||void 0===s||s.setStyle("pointer-events: none; display: flex;"))):"skyline"===p()&&(null===(r=window)||void 0===r||null===(n=r.__TAB_BAR__)||void 0===n||null===(i=n.__domElement)||void 0===i||i.setStyle("pointer-events: none; display: none;"))),ma[e].notify("inject")}))})):r.injectComponentsRecursively([C],(()=>{ma[e].notify("inject")}))})):ma[e].notify("inject")})),"skyline"===p()){var n=Ci();__webviewEngine__.addStyleSheetIndexGroup(""),Object.keys(n).forEach((e=>{var t=`${n[e]}__plugin__/${e}/`;__webviewEngine__.addStyleSheetIndexGroup(t)})),d().onPageReady(e,(r=>{var n,i,o,a,s,l;(__webviewEngine__.getStyleSheetManager(e).registerBackendContext(r),t.isTabPage)&&(P(t.path)?(wa(t),null===(n=window)||void 0===n||null===(i=n.__TAB_BAR__)||void 0===i||null===(o=i.__domElement)||void 0===o||o.setStyle("display: flex; pointer-events: none;")):null===(a=window)||void 0===a||null===(s=a.__TAB_BAR__)||void 0===s||null===(l=s.__domElement)||void 0===l||l.setStyle("display: none; pointer-events: none;"))}))}}},Ea=e=>{var t=ps.get(e);if(s.info("[skyline] getDomTreeByPageId tm: ",typeof t),void 0!==t&&void 0!==t.root)return t.root},Sa=e=>{if("webview"!==p()){s.info(`[destroyPage] pageId=${e}`);var t=ps.get(e);t&&(ho.Element.pretendDetached(t.root),ps.destroy(e),Ta(null),delete Pa[e],delete Da[e],delete La[e],delete ma[e],ge(e),(e=>{delete ne[e],delete ie[e]})(e),"skyline"===p()?(d().markDestroyContext(e),__webviewEngine__.removeStyleSheetManager(e),b.emit("SKYLINE_DESTROY_PAGE",e)):"xr-frame"===p()&&(xrFrame.getOrCreateContext(e).destroy(),delete window.__DOMTree__))}},Ia=e=>{if("webview"!==p()){s.info(`[destroyTabBar] pageId=${e}`);var t=ps.get(e);t&&(null!=t&&t.tabRoot&&ho.Element.pretendDetached(t.tabRoot),ps.destroy(e),delete Pa[e],delete Da[e],delete La[e],delete ma[e],"skyline"===p()&&__webviewEngine__.removeStyleSheetManager(e))}},Ta=e=>{var t;window.__DOMTree__=null!==e?null===(t=ps.get(e))||void 0===t?void 0:t.root:null};"skyline"===p()&&wx.subscribe("onAppRouteDone",(e=>{Ta(e.webviewId)})),me(v.DESTROY_PAGE,((e,t,r)=>{Sa(r)}));var Ca={String:String,Number:Number,Boolean:Boolean,Object:Object,Array:Array,null:null},Oa=(e,t)=>{for(var r in e.properties){var n=e.properties[r];n.type=Ca[n.type],n.optionalTypes&&(n.optionalTypes=n.optionalTypes.map((e=>Ca[e])))}var i="";t||(i=ls.getComponentClassPrefix(e.is));var o=e.options,a=!(!o.writeIdToDOM&&!t);e.options=wo,e.options.multipleSlots=o.multipleSlots||!1,e.options.writeOnly=o.writeOnly||!1,a||"xr-frame"===p()?e.options.idPrefixGenerator=null:e.options.idPrefixGenerator=W,e.options.domain=o.domain,e.options.randomizeTagName=!1,e.options.innerDataExclude=(e=>{if(!e)return null;var t=e.lastIndexOf("/"),r=e.slice(1,t),n=e.slice(t+1);return new RegExp(r,n)})(o.innerDataExcludeString),e.options.virtualHost=o.virtualHost;var l=!1;if(o.styleIsolation){var u=o.styleIsolation;"page-"===u.slice(0,5)&&(l=!0,u=u.slice(5)),"isolated"===u?(i=ls.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1):"strong-isolated"===u?(i=ls.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1,e.options.randomizeTagName=!0):"apply-shared"===u?(i=ls.getComponentClassPrefix(e.is),e.options.addGlobalClass=!0):"shared"===u&&"/"===o.domain?(i="",e.options.addGlobalClass=!1):l=!1}else e.options.addGlobalClass=o.addGlobalClass||!1;e.options.classPrefix=i,o.hasObservers&&(e.observers={"**"(){}}),window.__customComponentMode__="undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template];var c=window.__generateFunc__;return"undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template]?c=__wxAppCode__[e.template]:s.warn(`[componentRegistration] Generate function of ${e.is} not found in view thread`),e.template={path:e.is+".wxml",func:c},ho.registerElement(e),{disableAppWxss:l,classPrefix:i}},Na=(e,t)=>{var r=__webviewEngine__.getStyleSheetManager(e,t);t.forEach((e=>{var t="__APP__"===e?"":e;r.setIndex(t+"app.fpiib"),ji(e,(e=>{e.forEach((e=>{r.setIndex(`${t}__plugin__/${e.provider}/app.fpiib`)}))}))}))},xa=(e,t,r)=>{var n="xr-frame"===p()?G(e):e,i=p();t||(window.__forceSaveStates__=Qi,"function"==typeof wx.onWebViewWillManuallyTerminate&&wx.onWebViewWillManuallyTerminate(Qi));var o,[a,s,l,u]=n,c=ps.get(r);t||(c.rootCompName=l);for(var d=0;d<a.length;d++){var f=a[d];f.options.hasObservers&&(f.observers={"**"(){}}),f.options=yo,ho.registerBehavior(f)}"skyline"===i?((o=__webviewEngine__.getStyleSheetManager(r)).preventUpdate(),o.setStyleSheet("app",0,2)):"webview"===p()&&(o=window.__styleSheetManager2__).preventUpdate();for(var h=function(e){var r=s[e],n=Ti(r.is);n.startsWith("plugin-private://")&&!c.compManager.__injectedComponents.has(n)&&c.compManager.__injectedComponents.add(n);var a=r.is===l&&!t,{disableAppWxss:u,classPrefix:d}=Oa(r,a);u&&r.is===l&&!t&&("webview"===i?__webviewEngine__.disableStyleElement("app.wxss"):"skyline"===p()&&o.disableStyleSheet("app"));var f=r.is+".wxss",h="undefined"==typeof __wxAppCode__?null:__wxAppCode__[f];if("skyline"===i){h&&!o.usePreCompiled&&h("",{allowIllegalSelector:!0});var _=0;"function"==typeof ho.getStyleScopeId&&(_=ho.getStyleScopeId(d));var g=r.is===l?1:0;o.setStyleSheet(n,_,g)}else"webview"===p()&&(u&&r.is===l&&!t&&__webviewEngine__.disableStyleElement("app.wxss"),h&&((r.is!==l||t)&&h(d&&d+"--",{allowIllegalSelector:!0}),Qn(f,(e=>{e?e(d&&d+"--",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./"+f,""),wx.triggerPageReRender()}))))},_=0;_<s.length;_++)h(_);for(var g in Qn("app.wxss",(e=>{e?e("",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./app.wxss",""),wx.triggerPageReRender()})),"skyline"!==p()&&"webview"!==p()||(o.allowUpdate(),o.requestUpdate()),u)xo.call(ho.Component._list,u[g])&&(ho.Component._list[g]=ho.Component._list[u[g]])},Ra=!1;me(v.LOAD_COMPONENT_DEF,((e,t,r)=>{if(s.info(`[loadComponentDef] isFirstPage=${y.isFirstPage}, isLazyLoad=${jo()}`),jo()&&("webview"!==p()||!y.isFirstPage)){var n=e[0],i=ps.get(r).compManager;i.setInitialSubPackage(n);var o="webview"===p()?new Promise((e=>{"ios"===wx.getPlatform()&&y.clientVersion<402658304&&"undefined"==typeof __pageFrameStartTime__&&!Ra?(_e(v.LOAD_APP_PKG_READY,(()=>{Ie(["common.app.js","webview.app.js"],(()=>{Ra=!0,e()}),!0)}),0),ce(v.LOAD_APP_PKG,{})):e()})):Promise.resolve();go(r,(()=>{o.then((()=>{i.injectComponentsRecursively([n],(()=>{ma[r].on("inject",(()=>{qo(n),Wo(n,r)}))}),!0)}))}))}}));var Pa={},Da={},La={};me(v.COMPONENT_DEF,((e,t,r)=>{Pa[r]?xa(e,!1,r):Da[r].push(e),ps.get(r).compManager.setInitialSubPackage(e[2])})),me(v.COMPONENT_DEF_TAB,((e,t,r)=>{Pa[r]?"webview"!==p()?xa(e,!0,r):ma[r].on("inject",(()=>{xa(e,!0,r)})):La[r].push(e)}));var Ba=e=>{Pa[e]=!0,"webview"===p()&&$a(e),Da[e].forEach((t=>{xa(t,!1,e)})),Da[e]=[],La[e].forEach((t=>{ma[e].on("inject",(()=>{xa(t,!0,e)}))})),La[e]=[]},ka=(e,t,r,n,i)=>{u.traceBeginEvent("Framework","doDataThreadInitCreation");var o=[[],[],r=Ii(r),Yi],a=Object.create(null);zo(o,r,a,"",t);var l=(e=>{var t=Zi[e];if(!t)return{};var r=t.match(/^plugin:\/\/(wx[0-9a-f]{16})\/(.+)$/);if(!r)return{};var n=r[1],i=r[2],o=q(y.plugins).find((e=>e.provider===n));if(!o)return{};if(!o.genericsImplementation)return{};var a=o.genericsImplementation[i]||{},s={},l=Oi(n);return Object.keys(a).forEach((e=>{s[Ro+e]=U(l,String(a[e]))})),s})(r);q(l).forEach((e=>{zo(o,e,a,"",t)})),s.info(`[doDataThreadInitCreation] sending component def to view, viewId=${e}, rootCompName=${r}`),Jn(e),ce(v.COMPONENT_DEF,o,e),(e=>{Ge&&ce(v.BANNING_MAP,[Ge],e)})(e),t.rootCompName=r,t.rootNodeId=W(),s.info(`[OperationFlow] creating root component on data thread, use different shadowRoot=${void 0!==n}, viewId=${e}`),t.operationFlow.start(),t.operationFlow.push([v.FLOW_INITIAL_CREATION,r,t.rootNodeId,l]);var c=void 0===n?ho.Component.createWithGenerics("body",ho.Component._list[r],l,t):n.createComponent("body",ho.Component._list[r],i,t);return on(c,t),t.root=c,t.usedDef=o,ho.Element.getMethodCaller(c).__wxExparserNodeId__=t.nodeId.allocNodeId(c,t.rootNodeId),t.operationFlow.push([v.FLOW_INITIAL_CREATION]),t.nodeId.addNode(c),u.traceEndEvent(),s.info(`[OperationFlow] create root component on data thread ok, viewId=${e}`),c};me(v.UPDATE_COMPONENT_DEF,((e,t,r)=>{var[n]=e,i=ps.get(r);ho.Component._list[n.is]&&Oa(n,i.rootCompName===n.is)}));var Ma=(e,t)=>{t.listenerInited||(t.listenerInited=!0,((e,t)=>{_e(v.WX_EVENT,(r=>{var n=r[2],i=r[1],o=t.nodeId.getNodeById(r[0]);if(o){var a=ho.Element.getMethodCaller(o),s=n._userTap;if(n._requireActive&&!B.isFramesetMode()){var c=B.getCurrentPagesByDomain("");if(c[c.length-1].__wxWebviewId__!==e)return;delete n._requireActive}if(n._relatedInfo&&(B.DisplayReporter.setEventRelatedInfo(n._relatedInfo),delete n._relatedInfo),"function"!=typeof a[i])console.warn('Component "'+o.is+'" does not have a method "'+i+'" to handle event "'+n.type+'".');else if(s)Cn((()=>{var e=l.startTraceHandler(n);u.setWxInterfaceIsInvokeInTap(n.type),ho.safeCallback("Event Handler",a[i],a,[n],o),u.unsetWxInterfaceIsInvokeInTap(),l.endTraceHandler(e)}));else{var d=l.startTraceHandler(n);ho.safeCallback("Event Handler",a[i],a,[n],o),l.endTraceHandler(d)}}}),e),_e(v.MODEL_VALUE_CHANGE,((e,t,r)=>{var{data:n,modelValueName:i,nodeId:o}=e[0];Fo(n,i,r,o)}),e)})(e,t),_e(v.REQUEST_SAVE,(([t])=>{Vi(e,t)}),e),_e(v.CALL_METHOD_FROM_WXS,(e=>{Ln(e)}),e),function(e,t){_e(v.ANIMATION_TRANSITION_END,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.applyAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.applyAnimationCbMap[e[0].reqId],uo.safeCallback("Animation",r,null,[]));var n=JSON.parse(e[0].args);t.operationFlow.push([v.FLOW_SET_NODE_NEXT_ANIMATION_INFO,n])}}),e),_e(v.CLEAR_ANIMATION_COMPLETE,(e=>{if(e&&e[0]&&e[0].reqId){var r=t.clearAnimationCbMap[e[0].reqId];"function"==typeof r&&(delete t.clearAnimationCbMap[e[0].reqId],uo.safeCallback("Clear Animation",r,null,[]))}}),e)}(e,t),function(e,t){_e(v.RESPONSE_VIEW_INFO,(([e,r])=>{if(r){var n=t.viewInfoCbMap[r];n&&n(e)}}),e)}(e,t),((e,t)=>{_e(v.UPDATE_PERFORMANCE_STAT,(e=>{var[r,n]=e,i=t.nodeId.getNodeById(r);if(i&&i.__updatePerformanceListener__){var o=di.Element.getMethodCaller(i);di.safeCallback("Update Performance Listener",i.__updatePerformanceListener__,o,[n],i)}}),e)})(e,t),_e(v.REQUEST_WORKLET_METHOD,((e,t,r)=>{var n,i,{methodName:o,nodeId:a,reqId:s}=e[0],l=e=>ce(v.RESPONSE_WORKLET_METHOD,{reqId:s,workletId:e},r),c=ps.get(r).nodeId.getNodeById(a),d=null!==(n=null==ua||null===(i=ua[c.is])||void 0===i?void 0:i[o])&&void 0!==n?n:null;if("function"==typeof d){var p=ho.Element.getMethodCaller(c),f=d.call(p);if("function"==typeof f)return void l(u.worklet.registerJsValue(f))}l(null)}),e))},Fa=(e,t)=>{var r=Ii(e.rootCompName),n=W();e.operationFlow.start(),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,r,n]);var i=ho.createElement("initial-rendering-cache",ho.Component._list[r],e);return ho.Element.getMethodCaller(i).__wxExparserNodeId__=e.nodeId.allocNodeId(i,n),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE]),e.nodeId.addNode(i),i.setData(t),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,t]),e.operationFlow.end(),e.nodeId.removeNode(i),i},ja=e=>{e.operationFlow.start(),e.operationFlow.push([v.FLOW_INITIAL_RENDERING_CACHE,"",null]),e.operationFlow.end()},Ua={},$a=(e,t=!1)=>{Ua[e]||(Ua[e]=!0,s.info(`[CustomTabBar] sendTabBarCreationRequest pageId=${e}`),ce(v.REQUEST_TAB,[t],e))};me(v.DESTROY_TAB,((e,t,r)=>{s.info(`[CustomTabBar] destroyTabBar pageId=${r}`),ps.get(r).tabDestroyed=!0,"webview"===p()&&window.__TAB_BAR__&&window.__TAB_BAR__.parentNode.removeChild(window.__TAB_BAR__)})),me(v.SHOW_TAB,((e,t,r)=>{ps.get(r).tabDestroyed=!1,p()}));var Wa={},qa=e=>new Promise((t=>{Wa[e]=t})),Ha=(e,t)=>{var r=(()=>{var e,t,r=k();return Qa(C)||(r=!1),"singlePage"===(null===(e=y)||void 0===e||null===(t=e.appLaunchInfo)||void 0===t?void 0:t.mode)&&(r=!1),r})(),n=(e=>{var t,r,n,i,o=(null===(t=y)||void 0===t||null===(r=t.tabBar)||void 0===r?void 0:r.renderer)||"webview";if(Array.isArray(null===(n=y)||void 0===n||null===(i=n.tabBar)||void 0===i?void 0:i.list))for(var a=y.tabBar.list,l=0;l<a.length;l++){var u=a[l];if(u.pagePath===`${e}.html`){"string"==typeof u.renderer&&(o=u.renderer);break}}return s.info(`[CustomTabBar] getCustomTabBarRenderer pagePath: ${e}, renderer: ${o}`),"cover-view"===o?"scl":o||"webview"})(za[e]),i=he(e)||"webview";if("scl"===i?n="scl":i!==n&&(n=i),s.info(`[checkAndExecuteTabbarCreation] viewId=${e}, isGeneratorFunctionReady=${t}, needRenderCustomTabBar=${r}, renderer=${n}`),r){var o=ps.get(e)||ps.create(e);Ma(e,o),o.tabRoot||o.tabDestroyed||(o.compManager.injectComponentsRecursively([C]),((e,t,r,n)=>{if(s.info(`doDataThreadTabbarCreation viewId: ${e}, tabCompName: ${r}, renderer: ${n}`),"webview"!==n){var i,o,a=N();if("skyline"===n)i=I;else{if("scl"!==n)throw Error(`[CustomTabBar] renderer: ${n} not support`);i=T}var l=a.has(i);if(l)o=a.get(i).tm,a.add(e,n,o),t.tabCompName=o.tabCompName,t.tabNodeId=o.tabNodeId,t.tabRoot=o.tabRoot,t.tabUsedDef=o.tabUsedDef;else{fe(i,n);var u=[[],[],r=Ii(r),{}];o=ps.create(i),zo(u,r,Object.create(null),"",o),Ma(i,o),ce(v.COMPONENT_DEF_TAB,u,i);var c=W();t.tabCompName=o.tabCompName=r,t.tabNodeId=o.tabNodeId=c,a.add(i,n,o),a.add(e,n,o),o.operationFlow.start(),o.operationFlow.push([v.FLOW_CREATE_TAB,r,c]);var d=ho.createElement("tab-bar",ho.Component._list[r],o);t.tabRoot=o.tabRoot=d,t.tabUsedDef=o.tabUsedDef=u,ho.Element.getMethodCaller(d).__wxExparserNodeId__=o.nodeId.allocNodeId(d,o.tabNodeId),o.operationFlow.push([v.FLOW_CREATE_TAB]),o.nodeId.addNode(d),ho.Element.pretendAttached(d)}t.nodeId.addNode(t.tabRoot),!l&&o.operationFlow.end(),"function"==typeof Wa[e]&&Wa[e]()}else{N().add(e,n,t);var p=[[],[],r=Ii(r),{}];zo(p,r,Object.create(null),"",t),ce(v.COMPONENT_DEF_TAB,p,e),t.tabCompName=r,t.tabNodeId=W(),t.operationFlow.start(),t.operationFlow.push([v.FLOW_CREATE_TAB,r,t.tabNodeId]);var f=ho.createElement("tab-bar",ho.Component._list[r],t);t.tabRoot=f,t.tabUsedDef=p,ho.Element.getMethodCaller(f).__wxExparserNodeId__=t.nodeId.allocNodeId(f,t.tabNodeId),t.operationFlow.push([v.FLOW_CREATE_TAB]),t.nodeId.addNode(f),ho.Element.pretendAttached(t.tabRoot),t.operationFlow.end()}})(e,o,C,n),t&&ce(v.FLUSH_BLOCKED,[],"skyline"===n?I:e),o.rootCompName&&M(o,o.rootCompName,e))}},Ga=[];y.onReady((()=>{Ga.forEach((e=>{"skyline"!==he(e)&&Ha(e,!0)})),Ga=null})),_e(v.REQUEST_TAB,((e,t,r)=>{e[0]&&Ya(r,!0),"skyline"===he(r)?Ha(r,!0):null!==Ga?Ga.push(r):Ha(r,!0)}),"$GLOBAL"),me(v.FLUSH_BLOCKED,((e,t,r)=>{s.info(`[flushBlocked] pageId=${r}`),ps.get(r).operationFlow.flushBlocked()}));var Qa=e=>(e=Ii(e),xo.call(Yi,e)&&(e=Yi[e]),Eo[e]),za={},Ka=(e,t)=>{za[e]=t},Va=(e,t,r,n,i)=>{s.info(`[addView] viewId=${e}, rootCompPath=${t}`),u.traceBeginEvent("Framework","addView"),Ka(e,t);var a=ps.get(e)||ps.create(e);a.lifetimeListener=r,a.operationFlow.unblock();try{"webview"===he(e)&&Ha(e,!1)}catch(e){o.thirdErrorReport({error:e})}a.compManager.setInitialSubPackage(t),M(a,t,e),Ma(e,a),t=Ii(t);var l=(y.subPackages||[]).filter((e=>!!e.allExtendedComponents));ce(v.LOAD_COMPONENT_DEF,[t,l],e),a.compManager.injectComponentsRecursively([t],null,!0,!0),Qa(t)||(s.error(`[addView] viewId=${e} rootCompPath=${t} not found`),t="wx://not-found");var c=ka(e,a,t,n,i);return u.traceEndEvent(),c},Ja=(e,t)=>{s.info(`[attachView] viewId=${e}`);var r=ps.get(e);if(r){var n=r.root,i=!1,o={};Object.keys(t).forEach((e=>{ho.Component.hasProperty(n,e)&&(o[e]=t[e],i=!0)})),i&&r.root.setData(o),zn()&&(r.initialRootData=t),ho.Element.pretendAttached(n),r.root.__treeManager__.operationFlow.end()}},Xa=e=>{s.info(`[removeView] viewId=${e}`);var t=ps.get(e);t&&(ho.Element.pretendDetached(t.root),ps.destroy(e),ge(e),ae.add(e),u.worklet.removeRouteContext(e),ce(v.DESTROY_PAGE,[],e,!0))},Ya=(e,t=!1)=>{var r=N();if(t&&(r.remove(e),r.remove(I),Ga=null),r.has(e)){var n=r.getRenderType(e);r.remove(e),"skyline"===n&&r.remove(I),Ga=null}},Za=e=>{var t=ps.get(e);if(!t)return!1;var r=t.root;return!!r&&ho.Element.isAttached(r)},es=e=>{ce(v.SHOW_TAB,[],e)},ts=new WeakMap,rs={onNegotiation:(e,t,r)=>{var n=r||__wxAppCode__,i=Yo(e);if(!i.__isXrFrame__)throw new Error("component is not a xr-frame component");var o=(e=>{for(var t=e;;){var r=t.ownerShadowRoot;if(!r)break;if(!(r instanceof ho.ShadowRoot))return null;var n=r.getHostNode();if(!n)return null;t=n}return t})(i);if("skyline"!==he(o.__treeManager__.viewId))throw new Error("component is not in a skyline page");if(!0!==(n[i.is+".json"]||{}).xrFrameTouchEventBubble)throw new Error('component should set "xrFrameTouchEventBubble" to true in configuration');ts.set(i,t)},negotiate:(e,t,r)=>{var n=ts.get(e);"function"==typeof n?n(t,r):r(!0,!0)}};_e(v.LOAD_APP_PKG,((e,t,r)=>{Te("__APP__",(()=>{ce(v.LOAD_APP_PKG_READY,{},r)}))}),"$GLOBAL");var ns=!1,is=Object.prototype.hasOwnProperty,os=()=>"devtools"===y.platform||"devtool"===y.serviceRuntime,as=()=>"undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__,ss=!0;class ls{constructor(e,t){this.__viewId=e,this.__treeManager=t,this.__loadedSubPackage=new Set,this.__injectedSubPackage=new Set,this.__logPrefix=`[CompMgr] [data] $[${this.__viewId}]`,this.__log=e=>{s.info(`${this.__logPrefix} ${e}`)},this.__ensureComponentNotifier={},this.__placeholderReplacement=null,this.__pendingReplacement=new Map,this.__injectedComponents=new Set([]),this.__restoreInjectNotifier=null}getRestoredData(){return[Array.from(this.__loadedSubPackage),Array.from(this.__injectedSubPackage),Object.fromEntries(ls.__classPrefixMap),Array.from(this.__injectedComponents),this.__treeManager.rootCompName]}getRestoreInjectNotifier(){return this.__restoreInjectNotifier||(this.__restoreInjectNotifier=Q(["inject"])),this.__restoreInjectNotifier}restore(e){var[t,r,n,i,o]=e,a=()=>{qo(o),Wo(o),this.getRestoreInjectNotifier().notify("inject")};this.setSubPackageLoaded(t),this.batchInjectSubPackages(r,(()=>{jo()?this.batchInjectComponents(i,a):a()})),ls.__usedClassPrefix=new Set(Object.values(n)),ls.__classPrefixMap=new Map(Object.entries(n))}onRestoreInjectDone(e){this.getRestoreInjectNotifier().on("inject",e)}recurseUsingComponents(e){if(!jo())return e;var t=__wxAppCode__,r="undefined"!=typeof __WXML_DEP__&&__WXML_DEP__||{},n=new Set,i=new Set,o=e=>{if(!n.has(e)){if(n.add(e),is.call(t,e+".json")){i.add(e);var a=Po(e,t),s=Lo(e,t),l=Bo(e,t);for(var u of Object.keys(a))is.call(l,u)?is.call(a,l[u])&&o(a[l[u]]):o(a[u]);for(var c of Object.keys(s)){var d=s[c];"string"==typeof d.default&&o(d.default)}}(r["./"+e+".wxml"]||[]).forEach((e=>{var t=e.substr(2,e.length-7);o(t)}))}};e.forEach((e=>o(e)));var a=Array.from(i);return this.__log(`recurseUsingComponents(${JSON.stringify(e)}) => [${a.length} components]`),a}batchLoadSubPackages(e,t){this.__log("loadSubPackages begin: "+e.join(", "));var r=!0;setTimeout((()=>{r&&De({type:"subpackage",errMsg:"loadSubpackage: timeout",subpackage:e})}),xe);var n=0;Promise.all(e.map((e=>new Promise((t=>{Te(e,t)}))))).then((i=>{r=!1;var o=[];i.forEach((e=>{var{res:t,pkg:r,cost:i}=e;"fail"===t?De({type:"subpackage",subpackage:[r],errMsg:"loadSubpackage: fail"}):o.push(r),n+=i})),this.__log(`loadSubPackages end: ${e.join(", ")}, cost: ${n}`),this.setSubPackageLoaded(o),this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_SET_SUBPACKAGE_LOADED,o]),t(o)}))}setSubPackageLoaded(e){this.__log("setSubPackageLoaded: "+e.join(", ")),e.forEach((e=>{this.__loadedSubPackage.add(e)}))}batchInjectSubPackages(e,t){this.__log("injectSubPackages: "+e.join(", "));var r=e.filter((e=>!this.__injectedSubPackage.has(e))).map((e=>"__APP__"===e||"/"===e.slice(-1)?e:e+"/"));if(os()){Ce(r),this.setSubPackageInjected(r)}else{var n=[];r.forEach((e=>{n.push(...Ui(e,(t=>{this.__log(`getEntryFile ${e}: ${t}`)})))})),we(n),this.setSubPackageInjected(r)}}batchInjectComponents(e,t,r=!1){if(!jo())return-1;var n=e.map((e=>Ti(e))).filter((e=>!this.__injectedComponents.has(e))).filter((e=>!e.includes("://")));this.__log(`injectComponents: [${n.length} components]`);var i=(()=>{if(os())return Ne(n);var e=[];if(as()){var t=new Set(n.map((e=>__LAZY_CODE_LOADING_CHUNK_MAP__[e]||e)));e=Array.from(t).map((e=>`${e}.appservice.js`))}else e=n.map((e=>`${e}.appservice.js`));var{res:i,cost:o}=we(e,{isPageInitialScript:r});return"failed"===i&&De({type:"components",components:n,errMsg:"loadComponents: fail"}),o})();return n.forEach((e=>{this.__injectedComponents.add(e)})),i}setSubPackageInjected(e){this.__log("setSubPackageInjected: "+e.join(", ")),e.forEach((e=>{"__APP__"!==e&&0!==e.indexOf("/")&&(e=`/${e}`),ji(e,(e=>{Object.keys(e).forEach((t=>{var r=(e=>{var t=e.provider,r=fo.Component._list;return Object.keys(r).filter((e=>0===e.indexOf(`plugin-private://${t}/`)))})(e[t]);r.forEach((e=>{var t=Ti(e);this.__injectedComponents.add(t)}))}))}))})),e.forEach((e=>{this.__injectedSubPackage.add(e)}))}setInitialSubPackage(e){var t=[Ri(e)];Pi(e)||t.includes("__APP__")||t.push("__APP__"),this.setSubPackageLoaded(t),this.setSubPackageInjected(t),(()=>{if(!ns){ns=!0;var e="disabled";y.isLazyLoad&&(e="undefined"!=typeof __LAZY_CODE_LOADING_CHUNK_MAP__?"requiredComponentChunks":"requiredComponents"),s.info(`LazyCodeLoading: ${e}`)}})()}shouldUsePlaceholder(e){var t=Ti(e),r=Ri(t),n=this.__loadedSubPackage.has(r);return jo()&&(n=n&&this.__injectedComponents.has(t)),!n}doLazyLoadReport(e,t){var r=gn(),n=ss;ss=!1;var i=Object.keys(__wxAppCode__).filter((e=>e.endsWith(".json"))).length;r.set("isFirstPage",n),r.set("totalComps",i),r.set("loadedComps",e),r.set("loadTime",t)}injectComponentsRecursively(e,t,r=!1,n=!1){if(jo()){var i=this.recurseUsingComponents(e),o=this.batchInjectComponents(i,(e=>{0}),n);r&&this.doLazyLoadReport(i.length,o)}}ensureComponents(e,t,r){var n,i=e.map((e=>Ri(e)));n=i,(i=Array.from(new Set(n))).some((e=>!Pi(e)))&&!i.includes("__APP__")&&i.unshift("__APP__"),i=i.filter((e=>!this.__loadedSubPackage.has(e))),this.batchLoadSubPackages(i,(n=>{this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_INJECT_SUBPACKAGE,t,n]),jo()&&this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_INJECT_COMPONENT,t,e]),this.batchInjectSubPackages(n),this.injectComponentsRecursively(e),r()}))}pendPlaceholderReplacement(e){var t=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement(),this.__pendingReplacement.set(e,t),this.__log(`set [${e}] as pending placeholder replacements (${t.replacers.length} replacers)`)}getAndClearPendingPlaceholderReplacement(e){var t=this.__pendingReplacement.get(e);return this.__pendingReplacement.delete(e),t}getEnsureComponentsNotifier(e){if(!this.__ensureComponentNotifier[e]){var t=["inject","def"];jo()&&t.push("inject-common"),this.__ensureComponentNotifier[e]=Q(t)}return this.__ensureComponentNotifier[e]}destructEnsureComponentsNotifier(e){this.__ensureComponentNotifier[e]&&delete this.__ensureComponentNotifier[e]}injectSubPackageOnReady(e,t){this.batchInjectSubPackages(t,(()=>{var t=jo()?"inject-common":"inject";this.getEnsureComponentsNotifier(e).notify(t)}))}injectComponentsOnReady(e,t){jo()&&this.getEnsureComponentsNotifier(e).on("inject-common",(()=>{this.injectComponentsRecursively(t,(()=>{this.getEnsureComponentsNotifier(e).notify("inject")}))}))}appendComponentDef(e,t){this.getEnsureComponentsNotifier(e).on("inject",(()=>{xa(t,!1,this.__viewId),this.getEnsureComponentsNotifier(e).notify("def")}))}waitComponentEnsuring(e,t){this.getEnsureComponentsNotifier(e).on("def",(()=>{t((()=>{this.destructEnsureComponentsNotifier(e)}))}))}doPlaceholderReplace(){var e=W(),t=this.__treeManager,r=this.getPlaceholderReplaceData();this.finishPlaceholderReplacement();var n=Array.from(r.compNames);this.__treeManager.operationFlow.sendInIndividualFlow([v.FLOW_PEND_PLACEHOLDER_REPLACEMENT,e]),this.__log(`doPlaceholderReplace(${e}) for ${r.replacers.length} placeholder replacements`),this.ensureComponents(n,e,(()=>{Ho(t,t.rootCompName,r,e)}))}arrangePlaceholderReplace(e,t){null===this.__placeholderReplacement?this.__placeholderReplacement={compNames:new Set,replacers:[]}:clearTimeout(this.__placeholderReplacement.timer),this.__placeholderReplacement.compNames.add(e),this.__placeholderReplacement.replacers.push(t),this.__placeholderReplacement.timer=setTimeout((()=>{this.doPlaceholderReplace()}),50)}getPlaceholderReplaceData(){return this.__placeholderReplacement}finishPlaceholderReplacement(){this.__placeholderReplacement=null}static getComponentClassPrefix(e){if(ls.__classPrefixMap.has(e))return ls.__classPrefixMap.get(e);var t=e.split(/[^a-z0-9]+/i),r="",n=0,i=0;do{n<t.length?n+=1:i+=1,r=t.slice(-n).join("-"),i>0&&(r+="-"+i),Number(r[0])>=0&&(r="x-"+r)}while(ls.__usedClassPrefix.has(r));return ls.__classPrefixMap.set(e,r),ls.__usedClassPrefix.add(r),r}}ls.__classPrefixMap=new Map,ls.__usedClassPrefix=new Set;var us={[v.FLOW_PEND_PLACEHOLDER_REPLACEMENT](e,t){var r=t[0];e.pendPlaceholderReplacement(r)},[v.FLOW_COMPONENT_DEF_ADD](e,t){var r=t[0],n=t[1];e.appendComponentDef(r,n)},[v.FLOW_INJECT_SUBPACKAGE](e,t){var r=t[0],n=t[1];e.injectSubPackageOnReady(r,n)},[v.FLOW_INJECT_COMPONENT](e,t){var r=t[0],n=t[1];e.injectComponentsOnReady(r,n)},[v.FLOW_SET_SUBPACKAGE_LOADED](e,t){var r=t[0];e.setSubPackageLoaded(r)},[v.FLOW_WAIT_COMPONENT](e,t){var r=t[0];e.__treeManager.operationFlow.block(),e.waitComponentEnsuring(r,(t=>{e.__treeManager.operationFlow.unblock(),t()}))}},cs=Object.create(null);class ds{constructor(e){this.viewId=e,this.listenerInited=!1,this.root=null,this.tabRoot=null,this.tabDestroyed=!1,this.usedDef=null,this.tabUsedDef=null,this.statesData=null,this.operationFlow=new Jr(e,this),this.nodeId=new ke,this.compManager=new ls(e,this),this.rootNodeId="",this.tabNodeId="",this.rootCompName="",this.tabCompName="",this.applyAnimationCbMap={},this.clearAnimationCbMap={},this.viewInfoCbMap={},this.initialRootData=null,this.lifetimeListener=null}static create(e){var t=new ds(e);return cs[e]=t,t}static destroy(e){delete cs[e]}static get(e){return cs[e]}static listViewId(){var e=[];for(var t of Object.keys(cs))e.push(cs[t].viewId);return e}static list(){var e=[];for(var t of Object.keys(cs))e.push(cs[t]);return e}static getByNode(e){return e.__treeManager__}}var ps=ds,fs=function(e,t){if(null==t){for(var r=ps.list(),n=0;n<r.length;++n)if(void 0!==r[n].nodeId.getNodeById(e))return r[n].nodeId.getNodeById(e);return null}var i=ps.get(t);return i?i.nodeId.getNodeById(e):null},hs=function(e,t){var r=void 0!==t?ps.get(t):ps.getByNode(e);return r?r.nodeId.getNodeId(e):""},_s=function(e){var t=ps.get(e);return t?t.root:""},gs=function(e){var t=ps.get(e);return t?t.rootNodeId:""},vs=function(e){var t=ps.getByNode(e);return t?t.viewId:0};_e(v.XR_FRAME_CANVAS_CREATED,function(){var e=Fe()((function*(e,t,r){var n=ps.get(r),i=e[0],o=Date.now(),a=yield u.xrFrame.getCanvasContext(i),l=n.nodeId.getNodeById(e[1]).__xrFrameId__;u.xrFrame.assignCanvasNodeIdToXrFrame(i.nodeId,l),s.info(`[xrFrameCreated] service get xrFrame canvasNodeId=${i.nodeId}, pageId=${r}, xrFrameId=${l}`),ce(v.XR_FRAME_CANVAS_READY,[a,o],l)}));return function(t,r,n){return e.apply(this,arguments)}}(),"$GLOBAL");var ms=function(){Hn=!0},ys=function(e,t){var r=qn[e];if(r)return Gn[e]=t,r(t)},bs=c(),ws=e=>e;bs.addGlobalErrorListener(((e,t)=>{var r=l.getCurrentEventInfo();r&&(r.callErr=e);var n=t.element&&t.element instanceof ra?t.element:null,i=n?Go(n):"";return o.thirdErrorReport({source:i,error:e,extend:t.message.replace(/^\[exparser\] \[(error|warning)\] /i,"")}),!1})),bs.addGlobalWarningListener((e=>{console.warn(e.replace(/^\[exparser\] \[(error|warning)\] /i,""))})),bs.globalOptions.createFakeDomElement=!1,bs.globalOptions.inDocument=!1,bs.globalOptions.documentBackend="none",bs.updateDefaultComponent(),_.registerBehavior({is:"wx://form-field",properties:{name:{type:String,public:!0},value:{type:null,public:!0}}}),_.registerBehavior({is:"wx://form-field-group"}),_.registerBehavior({is:"wx://form-field-button"}),_.registerBehavior({is:"wx://style-filter"}),_.registerBehavior({is:"wx://request-filter"}),_.registerBehavior({is:"wx://request-sender"}),_.registerBehavior({is:"wx://component-export",definitionFilter(e){"function"==typeof e.export&&("object"==typeof e.methods?e.methods.__export__=e.export:e.methods={__export__:e.export})}}),(()=>{var e={domain:"//",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1};["not-found","functional-page","open-api-redirecting-page"].forEach((t=>{aa({options:e,properties:{}},"//",{[`wx://${t}.json`]:{usingComponents:{}}},`wx://${t}.js`)}))})(),L=t})(),(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new i("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};e.r(r),e.d(r,{App:()=>Ue,Behavior:()=>jr,Component:()=>Fr,DisplayReporter:()=>ie,Page:()=>Mr,__createPluginGlobal:()=>kr,__getCreatePluginGlobal:()=>Lr,__setCreatePluginGlobal:()=>Br,convertComponentAliasToRoute:()=>wt,forcePageReload:()=>vr,getApp:()=>$e,getCurrentPage:()=>jt,getCurrentPageWithAdditionalInfo:()=>Ut,getCurrentPages:()=>Ht,getCurrentPagesByDomain:()=>qt,getCurrentRoute:()=>Lt,getGlobalWebviewIds:()=>Ft,getPageByWebviewId:()=>$t,getPageMetaByWebviewId:()=>Wt,hasPageRoute:()=>Kt,isFramesetMode:()=>Dt,openNewXrFrame:()=>tr,setPrivateExtraData:()=>qe,showShareTimelineMenuIfNeeded:()=>wr});var n=g.objectSpread2,a=e.n(n),c=!1,d=function(e){c=e},p=function(){return c},h=Object.prototype.toString;function _(e){var t=m(e);return null!==t?t:v(e)}function v(e){if("function"==typeof e)return d(!0),e;var t=h.call(e);if("[object Array]"===t)return[];if("[object Object]"===t){var r;if(e.constructor===Object)return{};var n=Object.getPrototypeOf(e);if(n&&n.constructor!==Object&&"Object"===(null===(r=n.constructor)||void 0===r?void 0:r.name)&&n.hasOwnProperty&&e instanceof Object)return{}}if("[object Date]"===t)return new Date(e.getTime());if("[object RegExp]"===t){d(!0);var i=String(e),o=i.lastIndexOf("/");return new RegExp(i.slice(1,o),i.slice(o+1))}return d(!0),null}function m(e){var t=typeof e;return null!==e&&"object"!==t&&"function"!==t?e:null}function w(e){var t=typeof e;return null!==e&&("function"===t||"object"===t)}function A(e,t,r){if(null===e)return null;var n=m(e);if(null!==n)return n;for(var i=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],o=0,a=i.length;o<a;++o){var s=i[o],l=e[s],u=w(l),c=void 0,d=void 0;if(u&&r.has(l))d=r.get(l);else{var p=_(l);c=null!==p?p:l,u&&r.set(l,c)}t[s]=d||A(l,c,r)}return t}var E=function(e){if(d(!1),null===e)return null;var t=m(e);if(null!==t)return t;var r=v(e),n=null!==r?r:e,i=new WeakMap;return i.set(e,n),A(e,n,i)},S=(e,t)=>{for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e},I=()=>{},T=e=>Object.prototype.toString.call(e).split(" ")[1].split("]")[0],C=e=>"Promise"===T(e),O=Object.prototype.toString,N=e=>"[object Object]"===O.call(e),x=(e,t)=>{console.group(`${new Date} ${e}`),console.error(t),console.groupEnd()},P=(e,t)=>{console.group(`${new Date} ${e}`),console.warn(t),console.groupEnd()},k=e=>{var t;null!==(t=y)&&void 0!==t&&t.debug&&console.info(e)},M=(e,t)=>{if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceEngineKnownError"===e.type)throw e;o.errorReport({key:"jsEnginScriptError",error:e,extend:t})}},F=(e,t)=>function(...r){try{return e.apply(e,r)}catch(e){return M(e,t),()=>{}}};class j extends Error{constructor(e){super(`APP-SERVICE-Engine:${e}`),this.type="AppServiceEngineKnownError"}}function U(e,...t){var r;o.__route__=this.__route__,o.__method__=e;try{var n=Date.now();r=this[e](...t);var i=Date.now()-n;i>1e3&&o.slowReport({key:"pageInvoke",cost:i,extend:`at ${this.__route__} page ${e} function`})}catch(t){var a=L.getOwnerPluginAppId(this);o.thirdErrorReport({source:a,error:t,extend:`at ${this.__route__} page ${e} function`})}return o.__route__=o.__method__="",r}var $=Object.assign,W=()=>"devtools"===y.platform,q=e=>{if("string"!=typeof e)return e;var t=e.split("?")[0]||"",r=e.split("?")[1];return t+=".html",void 0!==r?`${t}?${r}`:t};function H(){return u}var G=[];function Q(e){if(!G)return e(u);G.push(e)}function z(e,t,r,n){return function(...i){try{return u.traceBeginEvent(e,t,n),r(...i)}finally{u.traceEndEvent()}}}b.onLoad((()=>{G&&(G.forEach((e=>e(u))),G=null)}));var K={},V=!0,X=null,Y={},Z={},ee=null,te=null,re=null;function ne(e={}){var t=e.clickTimestamp;t&&((t=(t=parseInt(t,10))<1e12?1e3*t:t)&&t>0&&(X=t),V=e.isLaunch)}class ie{constructor(e,t){this.showOptions={},this.hideOptions={},this.route=e,this.pageType=t||0,this.query={},this.deferred=[],this.showTimeStamp=null,this.pageReadyTime=null,this.showReferpagepath="",this.isentrance=0,this.isInitialLoading=!0,this.startCostTime=null,this.startType=null}static setOnLaunch(e={}){ne(e),(Y=Object.assign(Y,e)).publicLibVersion=y.SDKVersion,Y.hostAppId=y.host&&y.host.appId||"",ie._assignForClientOnShow(Y,e)}static setOnAppShow(e={}){ne(e),Y=Object.assign(Y,e),ie._assignForClientOnShow(Y,e)}static setOnAppHide(e={}){Z=Object.assign(Z,e)}static setEventRelatedInfo(e){ee=e}static _assignForClientOnShow(e,t){e.shortLink=t.shortLink||"",e.scene_note=t.scene_note||t.sceneNote||"",e.referpagepath=t.referpagepath||"",e.usedstate=t.usedstate||t.usedState,e.prescene=t.prescene,e.prescene_note=t.prescene_note||t.presceneNote||"",e.clickTimestamp=Date.now()}checkShowOptions(){var e=Y,t=this.showOptions;t.scene=e.scene||0,t.scene_note=e.scene_note,t.sessionid=e.sessionid||e.sessionId,t.usedstate=e.usedstate,t.referpagepath=e.referpagepath,t.clickTimestamp=e.clickTimestamp,t.prescene=e.prescene,t.prescene_note=e.prescene_note,t.apptype=o.getAppType(),t.publicLibVersion=e.publicLibVersion,t.hostAppId=e.hostAppId||"",t.shortLink=e.shortLink||"";var r=this.query,n=[];r&&"object"==typeof r&&Object.keys(r).forEach((e=>{n.push(`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)})),t.query=n.join("&")}checkHideOptions(){var e=Z,t=this.hideOptions;t.targetAction=e.targetAction||0,t.targetPagePath=e.targetPagePath||"",void 0!==e.usedstate&&(t.usedstate=e.usedstate),void 0!==e.usedState&&(t.usedstate=e.usedState)}static _getNetworkType(){var e=H()._getCurrentNetworkType()||"";return"none"===e&&(e="offline"),e}_checkDeferred(){for(var e=this.deferred;e.length;){e.pop()()}}_reportShowPage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");o.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_reportHidePage(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");o.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}_submit(){o.submit(),setTimeout((()=>{o.submit()}),100)}_reportRealtime(e){var t;if(!W()){var r="",n=2;if(y){var i=y.accountInfo,o=y.envVersion;i&&(r=i.appId||""),"release"===o?n=1:"trial"===o&&(n=3)}var a=H().getStableSystemInfo(),s={DeviceModel:a.model||"",DeviceBrand:a.brand||"",OsName:a.platform||"",OsVersion:a.system||"",LanguageVersion:a.language||"",appid:r,appversion:(null===(t=y.appLaunchInfo)||void 0===t?void 0:t.appversion)||0,appstate:n,event_id:e.event_id,scene:e.scene,scene_note:(e.scene_note||"").substr(0,1024),sessionid:e.sessionid,usedstate:e.usedstate,pagepath:e.pagepath,networktype:e.networktype,costtime:e.costtime,staytime:e.staytime,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.publicLibVersion,prescene:e.prescene,prescene_note:e.prescene_note,isentrance:e.isentrance,query:(e.query||"").substr(0,1024),apptype:e.apptype,pagetype:e.pagetype,anchorTargetText:e.anchorTargetText,clickTime:e.clickTimestamp,anchorTargetRelatedText:e.anchorRelatedText,orientationChangeCount:0,startCostTime:e.startCostTime,startType:e.startType,reportTime:e.reportTime};try{H().operateRealtimeData(1e3,JSON.stringify(s),!0)}catch(e){}}}setReadyTime(e){this.pageReadyTime=e,this._checkDeferred()}setQuery(e){this.query=e}reportShowPage(){this._checkDeferred(),this.checkShowOptions();var e=Date.now(),t=this.route,r=this.pageType,n=this.showOptions,i=n.referpagepath||"",o=n.clickTimestamp,a=0,s=0,l=0;te&&te!==t&&(i=te+".html",o=e);var u=ee;ee=null;var c={anchorTargetText:"",anchorRelatedText:""};this.isInitialLoading&&u&&u.anchorTapTime&&o-u.anchorTapTime<1e3&&(c.anchorTargetText=u.anchorTargetText,c.anchorRelatedText=u.anchorRelatedText),te=t,this.showTimeStamp=e,this.showReferpagepath=i,re!==n.sessionid&&(re=n.sessionid,a=1),1===a&&(s=e-X,l=V?1:2,this.startCostTime=s,this.startType=l),this.isInitialLoading=!1,this.isentrance=a;var d=Object.assign({},n,c,{event_id:1,pagepath:t+".html",networktype:ie._getNetworkType(),staytime:0,referpagepath:i,targetAction:0,targetPagePath:"",isentrance:a,pagetype:r,clickTimestamp:o,startCostTime:s,startType:l});this.pageReadyTime?this._reportShowPage(d):this.deferred.push((()=>{this._reportShowPage(d)}))}reportHidePage(e,t){this._checkDeferred(),this.checkShowOptions(),this.checkHideOptions();var r=Date.now(),n=this.route,i=this.pageType,o=this.showOptions,a=this.hideOptions,s=this.showReferpagepath||"",l=this.showTimeStamp?r-this.showTimeStamp:0;this.showTimeStamp=null;var u=void 0!==a.usedstate?a.usedstate:o.usedstate,c=a.targetAction,d=a.targetPagePath,p=0,f=0;e&&(c=t?1:2,d=e+".html"),1===this.isentrance&&(p=null!==this.startCostTime?this.startCostTime:p,f=null!==this.startType?this.startType:f,this.startCostTime=null,this.startType=null);var h=Object.assign({},o,{event_id:2,pagepath:n+".html",usedstate:u,networktype:ie._getNetworkType(),staytime:l,referpagepath:s,targetAction:c,targetPagePath:d,isentrance:this.isentrance||0,pagetype:i,anchorTargetText:"",anchorRelatedText:"",orientationChangeCount:this.orientationChangeCount||0,startCostTime:p,startType:f});this._reportHidePage(h)}}var oe={kbone:0};function ae(){try{(t=>{var r=[];try{Object.keys(e.g.__modules__||{}).forEach((e=>{if(e.indexOf("miniprogram-render/")>=0&&(oe.kbone=1),0===e.indexOf("miniprogram_npm/")){var t=e.indexOf("/",16),n=e.substring(16,t);"@"===n[0]&&(t=e.indexOf("/",t+1),n=e.substring(16,t)),r.push(n)}}));for(var n=r.length;n>=0;n--)for(var i=0;i<n;i++)r[i]===r[n]&&r.splice(n,1)}catch(e){}var a=[0,0,0,0,0,0,0,JSON.stringify(oe),r.join(";")].map(encodeURIComponent).join(",");o.reportKeyValue({key:"CustomComponent",value:a,force:!0})})(),t=D.Component._list,r=Object.keys(t),n=["miniprogram-recycle-view","miniprogram-barrage","wxml-to-canvas","weui-miniprogram","miniprogram-navigation-bar"],i=/^miniprogram_npm\/(.+$)/,a={},r.forEach((e=>{var r=t[e].is,o=i.exec(r);if(o){var s=o[1],l=s.indexOf("/"),u=s.substring(0,l),c=s.substring(l+1);"@"===u[0]&&(l=s.indexOf("/",l+1),u=s.substring(0,l),c=s.substring(l+1)),(n.indexOf(u)>-1||/^@miniprogram-component-plus\//.test(u))&&(a[u]=a[u]||[],a[u].push(c))}})),Object.keys(a).forEach((e=>{o.reportKeyValue({key:"NpmExtendedLib",value:[e,a[e].join(";")].map(encodeURIComponent).join(","),force:!0})})),o.submit()}catch(e){}var t,r,n,i,a}var se=e=>{if("String"!==T(e))throw x("数据路径错误","Path must be a string"),new j("Path must be a string");for(var t=e.length,r=[],n="",i=0,o=!1,a=!1,s=0;s<t;s++){var l=e[s];if("\\"===l)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1])?(n+=e[s+1],s++):n+="\\";else if("."===l)n&&(r.push(n),n="");else if("["===l){if(n&&(r.push(n),n=""),0===r.length)throw x("数据路径错误","Path can not start with []: "+e),new j("Path can not start with []: "+e);a=!0,o=!1}else if("]"===l){if(!o)throw x("数据路径错误","Must have number in []: "+e),new j("Must have number in []: "+e);a=!1,r.push(i),i=0}else if(a){if(l<"0"||l>"9")throw x("数据路径错误","Only number 0-9 could inside []: "+e),new j("Only number 0-9 could inside []: "+e);o=!0,i=10*i+l.charCodeAt(0)-48}else n+=l}if(n&&r.push(n),0===r.length)throw x("数据路径错误","Path can not be empty"),new j("Path can not be empty");return r},le=(e,t)=>{for(var r,n={},i=e,o=0;o<t.length;o++)Number(t[o])===t[o]&&t[o]%1==0?Array.isArray(i)||(n[r]=[],i=n[r]):N(i)||(n[r]={},i=n[r]),r=t[o],n=i,i=i[t[o]];return{obj:n,key:r}},ue=(e,t)=>{for(var r,n,i=se(t),o=e,a=0;a<i.length;a++)Number(i[a])===i[a]&&i[a]%1==0?Array.isArray(o)||(o=[]):N(o)||(o={}),n=i[a],r=o,o=o[i[a]];return{obj:r,key:n}},ce=["onLoad","onReady","onShow","onRouteDone","onHide","onUnload","onResize"],de=["__wxWebviewId__","__route__"],pe=["route"];class fe{static create(e,t,r){var n=new fe(e,t,r),i=n.__wxExparserNode__;return delete n.__wxExparserNode__,{page:n,node:i}}static destroy(e){L.removeView(e.__wxWebviewId__)}constructor(e,t,r){var n=this;s.info(`[PageManager] create new page, route=${t}, componentMode=false`);var i={__wxWebviewId__:e,__route__:t};de.forEach((e=>{Object.defineProperty(this,e,{set(){P("关键字保护",`should not change the protected attribute ${e}`)},get:()=>i[e]})}));var a=H(),u=a.getLogManager(),c=L.addView(e,t,(function(e){var t=D.Element.getMethodCaller(this),n=t[e]||I,i=[];return"onLoad"===e?i=[r]:"onShow"===e?this.triggerPageLifeTime("show"):"onHide"===e?this.triggerPageLifeTime("hide"):"onResize"===e?this.triggerPageLifeTime("resize"):"onRouteDone"===e&&this.triggerPageLifeTime("routeDone"),n.apply(t,i)})),d=D.Element.getMethodCaller(c),f=L.getOwnerPluginAppId(d);this.__wxExparserNode__=c,this.__wxComponentInst__=d,D.Element.setMethodCaller(c,this);var h=Pr(),_={};hasOwnProperty.call(h,t)?_=h[t]:console.info(`Page "${t}" has not been registered yet.`),_.data=_.data||{},N(_.data)||x("Page data error","Page.data must be an object");var g=JSON.stringify(_.data);this.data=JSON.parse(g),this.__viewData__=JSON.parse(g),this.__displayReporter=new ie(t,1);var v=l.getCurrentRoutePath(),m=l.getCurrentFullyRoutePath();this.__callPageLifeTime__=function(e,...t){s.info(`[Lifetime] call Page.${e}, is=${d.is}`);var r=(this[e]||I).bind(this);if(o.__route__=this.__route__,o.__method__=e,"onLoad"===e)this.__displayReporter.setQuery(...t);else if("onShow"===e)this.__displayReporter.reportShowPage();else if("onReady"===e)this.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var n=this.__toRoute__,i=this.__isBack__,a=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,a||this.__displayReporter.reportHidePage(n,i)}l.traceLife(e,{path:v,fullyPath:m}),k(`${this.__route__}: ${e} have been invoked`);var u=r.apply(this,t);return o.__route__=o.__method__="",u},ce.forEach((t=>{this[t]=function(...r){var n,i=(_[t]||I).bind(this);try{var l=Date.now();a.traceBeginEvent("LifeCycle",`Page.${t}`,{path:this.__route__,id:e}),n=i.apply(this,r),a.traceEndEvent();var c=Date.now()-l;c>1e3&&o.slowReport({key:"pageInvoke",cost:c,extend:`at ${this.__route__} page lifeCycleMethod ${t} function`}),u&&u.logApiInvoke&&u.log(`page ${this.__route__} ${t} have been invoked`),s.info(`page ${this.__route__} ${t} have been invoked`)}catch(e){o.thirdErrorReport({source:f,error:e,extend:`at ${this.__route__} page lifeCycleMethod ${t} function`})}return n}.bind(this)}));var y=function(e){(e=>-1!==de.indexOf(e))(e)?P("关键字保护",`Page's ${e} is write-protected`):(e=>{for(var t=0;t<ce.length;++t)if(ce[t]===e)return!0;return"data"===e})(e)||("Function"===T(_[e])?n[e]=function(...t){var r;o.__route__=this.__route__,o.__method__=e,a.traceBeginEvent("User Script",`Page.${e}`,{path:this.__route__});try{var n=Date.now();r=_[e].apply(this,t);var i=Date.now()-n;i>1e3&&o.slowReport({key:"pageInvoke",cost:i,extend:`at ${this.__route__} page ${e} function`})}catch(t){o.thirdErrorReport({source:f,error:t,extend:`at ${this.__route__} page ${e} function`})}return a.traceEndEvent(),o.__route__=o.__method__="",r}.bind(n):(n[e]=E(_[e]),p()&&P("Free data",`Free data with key "${e}" of page "${c.is}" seems not a simple value. Result of deep cloning this value in page instantiation may be unexpected. Consider assigning this value at the beginning of onLoad method.`)))};for(var b in _)y(b);var w={route:t};pe.forEach((e=>{Object.prototype.hasOwnProperty.call(this,e)||(this[e]=w[e])}));var A="function"==typeof _.onShareAppMessage;A&&a.showShareMenu();var S="function"==typeof _.onShareTimeline;A&&S&&a.showShareTimelineMenu()}setData(e,t){var r=H();try{var n=T(e);if("Object"!==n)return void x("类型错误",`setData accepts an Object rather than some ${n}`);r.traceBeginEvent("Framework","setData"),Object.keys(e).forEach((t=>{void 0===e[t]&&x("Page setData warning",'Setting data field "'+t+'" to undefined is invalid.');var r=se(t),{obj:n,key:i}=le(this.data,r);if(n&&(n[i]=E(e[t])),void 0!==e[t]){var{obj:o,key:a}=le(this.__viewData__,r);o&&(o[a]=E(e[t]))}})),this.__wxComponentInst__.setData(JSON.parse(JSON.stringify(e)),t)}catch(e){M(e)}finally{r.traceEndEvent()}}pageScrollTo(e){H().publishPageScrollTo(e,[this.__wxWebviewId__])}}var he=fe,_e=["onLoad","onReady","onShow","onRouteDone","onHide","onUnload","onResize"];var ge=class{static create(e,t,r){var n=H(),i=n.getLogManager();s.info(`[PageManager] create new page, route=${t}, componentMode=true`);var a=L.addView(e,t,(function(e){var t=D.Element.getMethodCaller(this),n=t[e]||I,i=[];return"onLoad"===e?i=[r]:"onShow"===e?this.triggerPageLifeTime("show",i):"onHide"===e?this.triggerPageLifeTime("hide",i):"onResize"===e?this.triggerPageLifeTime("resize",i):"onRouteDone"===e&&this.triggerPageLifeTime("routeDone",i),n.apply(t,i)})),u=D.Element.getMethodCaller(a),c=L.getOwnerPluginAppId(u);if(u.__wxWebviewId__=e,u.__route__=t,u.route=t,u.__displayReporter=new ie(t,2),a.__customConstructor__===L.Page){var d=a.getRootBehavior().methods,f=u.__freeData__;for(var h in d)u[h]=d[h].bind(u);for(var _ in f)u[_]=E(f[_]),p()&&P("Free data",`Free data with key "${_}" of page "${u.is}" seems not a simple value. Result of deep cloning this value in page instantiation may be unexpected. Consider assigning this value at the beginning of onLoad method.`)}var g=l.getCurrentRoutePath(),v=l.getCurrentFullyRoutePath();u.__callPageLifeTime__=function(e,...t){s.info(`[Lifetime] call Page.${e}, is=${u.is}`);var r=this[e]||I;if(o.__route__=this.__route__,o.__method__=e,"onLoad"===e)u.__displayReporter.setQuery(...t);else if("onShow"===e)u.__displayReporter.reportShowPage();else if("onReady"===e)u.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var n=this.__toRoute__,i=this.__isBack__,c=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,c||u.__displayReporter.reportHidePage(n,i)}"onShow"===e?a.triggerPageLifeTime("show",t):"onHide"===e?a.triggerPageLifeTime("hide",t):"onResize"===e?a.triggerPageLifeTime("resize",t):"onRouteDone"===e&&a.triggerPageLifeTime("routeDone",t),l.traceLife(e,{path:g,fullyPath:v}),k(`${this.__route__}: ${e} have been invoked`);var d=r.apply(this,t);return o.__route__=o.__method__="",d},_e.forEach((t=>{var r=u[t];u[t]=function(...a){var l,u=r||I;n.traceBeginEvent("LifeCycle",`Page.${t}`,{path:this.__route__,id:e});try{var d=Date.now();l=u.apply(this,a);var p=Date.now()-d;p>1e3&&o.slowReport({key:"pageInvoke",cost:p,extend:`at "${this.__route__}" page lifeCycleMethod ${t} function`}),i&&i.logApiInvoke&&i.log(`page ${this.__route__} ${t} have been invoked`),s.info(`component page ${this.__route__} ${t} have been invoked`)}catch(e){o.thirdErrorReport({source:c,error:e,extend:`at "${this.__route__}" page lifeCycleMethod ${t} function`})}return n.traceEndEvent(),l}.bind(u)}));var m="function"==typeof u.onShareAppMessage;m&&n.showShareMenu();var y="function"==typeof u.onShareTimeline;return m&&y&&n.showShareTimelineMenu(),{page:u,node:a}}static destroy(e){L.removeView(e.__wxWebviewId__),Array.isArray(e.__xrFrameIds__)&&e.__xrFrameIds__.forEach((e=>{L.removeView(e)}))}};function ve(){return 7===y.appType}function me(){return"SAAASDK"===y.host.env}var ye=null,be=Object.create(null),we=(e,t,r)=>{ye&&ye.triggerLifeTime("route",[{method:e,url:t,args:r}])},Ae=(e,t,r,n,i,o)=>{if("appLaunch"===o)s=()=>{we("appLaunch",t,{tabBarConfig:y.tabBar,entryPagePath:y.entryPagePath})},f.initScl((e=>{(ye=e.mainRoot.append("frameset",{placeholderImage:"frameset/placeholder.png"})).setPageLifeTimeCallback(((e,t,...r)=>{var n=be[e],i=$t(n);i&&R.surroundThirdByTryCatch((()=>{i.__callPageLifeTime__("on"+t,...r)}),`at ${t} callback function`)()})),s()}));else if("navigateTo"===o)we("navigateTo",t);else if("redirectTo"===o)we("redirectTo",t);else if("switchTab"===o)we("switchTab",t);else if("reLaunch"===o||"autoReLaunch"===o)we("reLaunch",t);else if("navigateBack"===o){var a=f.getExparserElementByViewId(i);a&&a.triggerEvent("navigateBack")}else"frameLoad"===o?(be[i]=r,er(e,t,r,n,{framesetViewId:i})):"frameUnload"===o&&(delete be[i],ir(Wt(r),""));var s},Ee=!1;function Se(e){var t=H().isIsolatedSubpackage(e);!Ee&&t?xe():Ee&&!t&&Ne(),Ee=t}var Ie=[],Te=!0,Ce={};function Oe(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function Ne(e){var t=e?Oe(e):Ce;H().emitIsloatedAppShow(t),Ie.forEach((e=>{e.preventOnShow||e.app.onShow(t),e.preventOnShow=!1})),Ce=t}function xe(e){H().emitIsloatedAppHide(),Ie.forEach((t=>{ve()?t.app.onHide(e):t.app.onHide()}))}function Re(){!1}function Pe(e={}){var t;if(e.isLaunch?(lt("launch"),ie.setOnLaunch(e),ae()):ie.setOnAppShow(e),Bt(e.path),t=e.path,(Ee=H().isIsolatedSubpackage(t))||Ne(e.__public||e,e.isLaunch),lt("foreground"),Te||e.reLaunch)Te=!1;else{var r=qt("");r.length&&(Dt()?ye&&ye.setGlobalShowStatus(!0):"function"==typeof r[r.length-1].__callPageLifeTime__&&r[r.length-1].__callPageLifeTime__("onShow"),lt("enterPage",r[r.length-1],!0))}}function De(e={}){ie.setOnAppHide(e),"hang"===e.mode&&!0;var t=qt("");if(t.length){Dt()?ye&&ye.setGlobalShowStatus(!1):"function"==typeof t[t.length-1].__callPageLifeTime__&&t[t.length-1].__callPageLifeTime__("onHide");var r=jt(),n=r.page;lt("leavePage",n,!0);var i="function"==typeof n.onSaveExitState?U.call(n,"onSaveExitState"):void 0;H().saveExitState(r.route,r.rawPath,i)}Ee||xe(e),lt("background")}Q((e=>{e.onAppUnhang(Re),e.onAppShow(Pe),e.onAppHide(De)}));var Le,Be,ke,Me=["onLaunch","onShow","onHide","onUnlaunch"];class Fe{constructor(e={}){var t=this,r=H(),n=r.getLogManager();Me.forEach((t=>{this[t]=function(...i){var a=e[t]||I;o.__route__="App",o.__method__=t,k(`App: ${t} have been invoked`),s.info(`[Lifetime] call App.${t}`),r.traceBeginEvent("LifeCycle",`App.${t}`);try{a.apply(this,i),n&&n.logApiInvoke&&n.log(`App ${t} have been invoked`),s.info(`App ${t} have been invoked`)}catch(e){o.thirdErrorReport({error:e,extend:`at App lifeCycleMethod ${t} function`})}r.traceEndEvent(),o.__route__=o.__method__=""}.bind(this)}));var i,l,u,c,d=function(n){(e=>"getCurrentPage"===e)(n)?P("关键字保护",`App's ${n} is write-protected`):(e=>{for(var t=0;t<Me.length;++t)if(Me[t]===e)return!0;return!1})(n)||("function"==typeof e[n]?t[n]=function(...t){var i;o.__route__="App",o.__method__=n,r.traceBeginEvent("User Script",`App.${n}`);try{i=e[n].apply(this,t)}catch(e){o.thirdErrorReport({error:e,extend:`at App ${n} function`})}return r.traceEndEvent(),i}.bind(t):t[n]=e[n])};for(var p in e)d(p);"function"==typeof this.onError&&r.onError(this.onError),"function"==typeof this.onUnhandledRejection&&r.onUnhandledRejection(this.onUnhandledRejection),"function"==typeof this.onPageNotFound&&r.onPageNotFound(this.onPageNotFound),"function"==typeof this.onThemeChange&&r.onThemeChange(this.onThemeChange),i=this,l=H().getLaunchOptionsSync(),u=y.appLaunchInfo&&y.appLaunchInfo.inBackground,c=Oe(l.__public),i.onLaunch(c),u||i.onShow(c),Ie.push(a()({app:i},u?{}:{preventOnShow:!0}))}}var je={},Ue=F(((e={})=>{Object.assign(e,je),je={},Le=new Fe(e)}),"create app instance"),$e=F(((e={})=>e.allowDefault?Le||je:Le),"get app instance"),We=()=>Be,qe=e=>{s.info(`[privateExtraData] set to [${JSON.stringify(e)}]`),Be=e};function He(e){var t=e.referrerInfo&&e.referrerInfo.privateExtraData;if(t){qe(t);var r=Gt();t.functionalPage&&r&&H().publishFunctionalPage(t.functionalPage,[r]),t.functionalPage&&"string"==typeof t.functionalPage.callbackId&&t.functionalPage.callbackId.startsWith("RPP")&&H().requestPluginPaymentEmitter.emit(t.functionalPage)}e.referrerInfo&&e.referrerInfo.openapiInvokeData&&(ke=e.referrerInfo.openapiInvokeData)}Q((e=>{e.onAppShow(He)}));var Ge={},Qe={},ze=[],Ke=!1,Ve=[],Je=!1,Xe=!1,Ye=0,Ze=0,et=0,tt=0,rt=0,nt=0,it=null,ot=null,at=(e,t)=>{Object.keys(e.data||{}).forEach((r=>{var n,i,o=e.data[r],a=t&&t.data||{},s=!1;if("$"!==o.charAt(0)||void 0===(n=(e=>{var t=0;switch(e){case"PAGE_TIME":return(t=et?Date.now()-et-tt:0)>=0?t:null;case"APP_TIME":return(t=Ye?Date.now()-Ye-Ze:0)>=0?t:null;case"CURRENT_PAGE":return ot||null;case"LAST_PAGE":return it||null;default:return}})(o.substr(1))))if(0!==o.indexOf("$APP")){if(t&&(e.page===t.__route__||"ANY_PAGE"===e.page)){if(0===o.indexOf("$DATASET")){var l=o.replace("$DATASET.","");i=e.dataset||{},(n=le(i,se(l))).obj&&void 0!==n.obj[n.key]&&(Qe[e.eventID].data[r]=n.obj[n.key],s=!0)}if(0===o.indexOf("$COMP")&&"number"==typeof e.nodeId){var u=L.getNodeById(e.nodeId,e.webviewId);if(!u)return void console.warn(`[自定义分析] 找不到自定义组件里的 "${e.element}" 节点`);var c=D.Element.getMethodCaller(u);c&&(o=o.replace("$COMP.",""),a=c.data)}if(o.indexOf("[]")>-1){if((e.index||[]).forEach((e=>{o=o.replace("[]","["+e+"]")})),o.indexOf("[-1]")>-1||o.indexOf("[]")>-1)return void console.warn(`[自定义分析] 取不到下标，请检查配置（${o}）`);var d=o.match(/\[(\d+)\]\.\$INDEX$/);d&&(Qe[e.eventID].data[r]=Number(d[1]),s=!0)}if(void 0===(n=ue(a,o)).obj||void 0===n.key||void 0===n.obj[n.key])return void(s||console.warn(`[自定义分析] 取不到该字段，请检查配置（${o}）`));Qe[e.eventID].data[r]=n.obj[n.key]}}else((e,t)=>{var r=e.data[t],n=$e()||{},i=r.replace("$APP.",""),o=ue(n,i);if(o.obj&&void 0!==o.obj[o.key]){var a=o.obj[o.key];"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a||(Qe[e.eventID].data[t]=a)}})(e,r);else null!==n&&(Qe[e.eventID].data[r]=n)}))},st=(e,r)=>{if("start"!==e.action&&"start_and_report"!==e.action||(Qe[e.eventID]={eventID:e.eventID,data:{},extra:e.extra}),Qe[e.eventID]){var n,i,o,a=r||jt()&&jt().page;at(e,a),"report"!==e.action&&"start_and_report"!==e.action||(n=e.eventID,i=a&&a.__route__,o=[],Object.keys(Qe[n].data).forEach((e=>{o.push({id:e,value:Qe[n].data[e]})})),Qe[n].data=o,Qe[n].page=i,Qe[n].version=(void 0!==t?t.version:0)||0,Qe[n].uid=Date.now().toString(16)+Math.random().toString(16).substr(2),Qe[n].type=0,W()||(console.info("[自定义分析] 上报成功"),console.info(Qe[n])),H().reportRealtimeAction({actionData:JSON.stringify(Qe[n])}),Qe[n]=null)}},lt=(e,t,r)=>{if("pageReady"===e&&t)(e=>{if(e){var t=e.__route__,r=Ge.click,n=[];r&&(r.forEach((e=>{e.page!==t&&"ANY_PAGE"!==e.page||!e.element||n.push({eventID:e.eventID,page:e.page,element:e.element,action:e.action})})),0!==n.length&&H().publishAnalyticsConfig(n,[e.__wxWebviewId__]))}})(t);else if(Xe)ze.push(e);else{if("launch"===e&&!Je)return Ye=Date.now(),Je=!0,Xe=!0,ze.push(e),void H().getAppConfig({type:1,complete:F((e=>{Xe=!1,e.data&&(console.info("[自定义分析] 配置拉取成功"),ut(e))}))});if(Ke){r||("enterPage"===e?(et=Date.now(),tt=0,ot=t&&t.__route__):"leavePage"===e?it=t&&t.__route__:"background"===e?rt=Date.now():"foreground"===e&&(nt=Date.now(),rt&&nt>rt&&(tt+=nt-rt,Ze+=nt-rt)));var n=Ge[e];if(n){if("enterPage"===e&&t&&"page/component/index"===t.__route__&&y.accountInfo&&"wxe5f52902cf4de896"===y.accountInfo.appId){var i=0;n.map((e=>e.eventID)).forEach((e=>{1007===e&&i++})),i>1&&o.reportIDKey({key:"demoConfigRepeat"}),o.reportIDKey({key:"demoEnterHomePage"})}var a=["enterPage","leavePage","pageLoad","pageUnload","pullDownRefresh","switchTab"];n.forEach((r=>{r&&(a.indexOf(e)>-1?(t&&r.page===(t&&t.__route__)||"ANY_PAGE"===r.page)&&st(r,t):st(r))}))}}else Ve.push([e,t,r])}},ut=(e,t)=>{var r={};try{r=JSON.parse(e.data)}catch(e){r={}}var n=jt();Ge=(e=>{var t={};return"[object Array]"!==Object.prototype.toString.call(e)||e.forEach((e=>{var r=e.eventTarget;"[object Object]"===Object.prototype.toString.call(r)&&(r=[r]),r.forEach((r=>{var n=r.trigger||"click";t[n]||(t[n]=[]),("click"!==n||/^([.#][a-zA-Z_][^.#]* ?)+$/.test(r.element&&r.element.trim()))&&t[n].push({eventID:e.eventID,page:r.page,element:r.element&&r.element.trim(),data:r.data,action:r.action,extra:e.extra})}))})),t})(r),Qe={},t||(ze.forEach((e=>{lt(e,n&&n.page,!0)})),ze=[]),lt("pageReady",n&&n.page)};Q((e=>{e.subscribeAnalyticsReport(((e,t)=>{var r,n,i=e,o=Ge.click;if(o&&("start"===i.action||"start_and_report"===i.action||Qe[i.eventID])){for(var a=qt(""),s=0;s<a.length;s++){var l=a[s];if(l.__wxWebviewId__===t){n=l;break}}if(n){for(var u=0;u<o.length;u++){var c=o[u];if(i.eventID===c.eventID&&(i.page===c.page||"ANY_PAGE"===c.page)&&i.element===c.element){c.dataset=i.dataset||{},r=S({},c);break}}r&&(r.index=i.index,r.nodeId=i.nodeId,r.webviewId=t,st(r,n))}}})),e.onAppConfig(F((e=>{console.info("[自定义分析] 收到最新配置"),1===Number(e.type)&&ut(e,!0)}))),e.onAppRouteDone((()=>{Ke=!0,Ve.forEach((e=>{lt(...e)})),Ve=[]}))}));var ct,dt=class{static emit(e,t,r){var n=H();n.traceBeginEvent("Framework","sendInitData"),n.invokeWebviewMethod("appDataChange",e,[t],r),n.traceEndEvent()}},pt={},ft=(e,t)=>{pt[e]=t,L.setPageType(e,t)},ht={appLaunchTime:0,appFgTime:0,appRouteTime:0,newPageTime:0,pageReadyTime:0},_t=Object.prototype.hasOwnProperty,gt=262144,vt=Date.now();var mt,yt,bt,wt=L.convertComponentAliasToRoute,At=L.convertRouteToComponentAlias,Et={},St={},It={},Tt={},Ct={},Ot=[],Nt=[],xt="",Rt=null,Pt=!1,Dt=()=>Pt,Lt=()=>xt,Bt=e=>{xt=e},kt=(e,t,r)=>{var n;return r._userTap?L.wrapTapMark((()=>{n=U.call(e,t,r)})):n=U.call(e,t,r),n};y.onReady((()=>{var e=y.page||{},t=y.global?y.global.window:{};Object.keys(e).forEach((r=>{e[r].window=Object.assign({},t,e[r].window)})),y.tabBar&&y.tabBar.list&&"object"==typeof y.tabBar.list&&"function"==typeof y.tabBar.list.forEach&&y.tabBar.list.forEach((e=>{Nt.push(e.pagePath)})),y.appLaunchInfo&&"string"==typeof y.appLaunchInfo.path&&Bt(y.appLaunchInfo.path),yt=(y.appLaunchInfo||{}).scene||0}));var Mt=(e,t,r)=>{o.speedReport({key:e,timeMark:{startTime:t,endTime:r}})},Ft=()=>Ot.map((e=>e.webviewId)),jt=()=>mt,Ut=()=>mt,$t=e=>_t.call(Et,e)?Et[e].page:null,Wt=e=>_t.call(Et,e)?Et[e]:null,qt=e=>{var t=[];return Ot.forEach((r=>{e&&(e=>{if(/^__wx__\//.test(e=e||""))return"//";var t=e.match(/(?:^|\/)__plugin__\/(.*?)\//);return t?t[1]:"/"})(r.route)!==e?t.push(null):t.push(r.page)})),t},Ht=()=>qt("/"),Gt=()=>{if(0!==Ot.length)return Ot[Ot.length-1].webviewId},Qt=(e,t)=>e.__wxExparserNodeId__&&_t.call(Object.getPrototypeOf(e),t)||_t.call(e,t),zt=e=>!!/(?:^|\/)__(wx|plugin)__\//.test(e)||!!("undefined"!=typeof __wxAppCode__&&__wxAppCode__[e+".json"]||{}).usingComponents,Kt=e=>!!(e=>{for(var t=0;t<y.pages.length;t++)if(y.pages[t]===e)return!0;return!1})(e)||void 0!==Ct[e],Vt=(e,t,r,n,i={})=>{H().traceBeginEvent("User Script","Component constructor");var o=!1;(i.__wxRouteBegin||__wxRouteBegin)&&(o=!0),i.__wxRouteBegin?i.__wxRouteBegin=!1:__wxRouteBegin=!1;var a=L.Component(e,t,r,n),s=wt(a);return a&&(Tt[s]=D.Component._list[a]),Ct[s]=o,H().traceEndEvent({path:s}),String(a)},Jt=(t,r,n,i,o={})=>{var a=o.__wxRoute||e.g.__wxRoute||i.replace(/\.js$/,"")||"",s=H();if(s.traceBeginEvent("User Script","Page constructor",{path:a}),!o.__wxRouteBegin&&!__wxRouteBegin){if(!a)throw x("Page 注册错误",'Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json'),s.traceEndEvent(),new j('Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json');throw x("Page 注册错误",`Please do not register multiple Pages in ${a}.js`),s.traceEndEvent(),new j(`Please do not register multiple Pages in ${a}.js`)}o.__wxRouteBegin?o.__wxRouteBegin=!1:__wxRouteBegin=!1;var l=At(a),u=wt(l),c=zt(u);if("Object"!==T(t))throw x("Page 注册错误",`Options is not object: ${JSON.stringify(t)} in ${a}.js`),s.traceEndEvent(),new j(`Options is not object: ${JSON.stringify(t)} in ${a}.js`);k(`Register: ${l}`);var d=L.Page(t,r,n,c&&i?i:__wxRoute+".js");Tt[u]=c?D.Component._list[d]:t,Ct[u]=!0,s.traceEndEvent()},Xt={isInit:!1};Q((e=>{e.subscribeSubjectInfo((e=>{Xt.isInit=e.isInit}))}));var Yt=z("Framework","publishInitData",F(((e,r,n,{statesData:i,isPageReload:o,isPrerender:a,isLaunch:u})=>{k("Update view with init data"),s.info(`[publishInitData] prepare init data to webview ${r}`);var c=e.page,d={},p=H();l.shouldStartReport()&&(d.traceActionReportInfo={eventType:l.getReportEvent(),textContentMaxLayer:l.getTextContentMaxLayer(),textContentMaxLength:l.getTextContentMaxLength()}),d.wechatLibVersion=(void 0!==t?t.version:"")||"",d.webviewId=r,d.enablePullUpRefresh=Qt(c,"onReachBottom"),d.enablePageScroll=Qt(c,"onPageScroll"),d.onReachBottomDistance=(e=>{try{if("number"==typeof y.page[`${e}.html`].window.onReachBottomDistance)return y.page[`${e}.html`].window.onReachBottomDistance}catch(e){return 50}return 50})(c.__route__),d.statesData=i,d.scene=yt,d.route=c.__route__,d.query=c.options,d.lastRoute=e.lastRoute,d.lastQuery=e.lastQuery,d.wxConfig={accountInfo:y&&y.accountInfo||{},appContactInfo:y&&y.appContactInfo||{},appLaunchInfo:y&&y.appLaunchInfo||{},plugins:y&&y.plugins||{}},d.windowConfig=y&&y.page&&y.page[c.__route__+".html"]&&y.page[c.__route__+".html"].window||{},d.debug=y&&y.debug,d.appId=y&&y.accountInfo&&y.accountInfo.appId,d.appLaunchTime=ht.appLaunchTime,d.appFgTime=ht.appFgTime,d.isTabBarPage=e.isTabBarPage,d.isMainTabBarPage=e.isMainTabBarPage,d.navigationStyle=y&&y.global&&y.global.window&&y.global.window.navigationStyle,d.packageType=(e=>{if(y&&y.subPackages&&y.subPackages.length){for(var t=0;t<y.subPackages.length;t++){var r=y.subPackages[t];if(0===e.indexOf(r.root))return r.independent?"independent":"normal"}return"main"}return"none"})(c.__route__),d.needGetSubjectInfo=!Xt.isInit,d.subPackages=y.subPackages,d.isReload=o,d.adInfo={preloadVideoAdUnitIds:p.getPreloadVideoAdUnitIds(),preloadAdUnitIds:p.getPreloadAdUnitIds()},d.permissionBytes=p.getCachePermissionBytes(),d.fontFaceRecords=p.fontFaceRecords,d.fontSizeSetting=p.getStaticSystemInfoSync().fontSizeSetting,d.prerender=a,d.isLaunch=u,d.extendedLibList=y.extendedLibList;var f={ext:d,options:{firstRender:!0,timestamp:n,path:c.__route__}};if(i){var h=JSON.stringify(f),_=h.length;if(_>gt){for(var g=[],v=0;_>v;)g.push(h.substr(v,gt)),v+=gt;for(var m=++vt,b=0,w=g.length;b<w;b++)dt.emit({isSplitData:!0,splitInfo:{id:m,index:b+1,total:w,data:g[b]}},r);return void lt("pageReady",c)}}s.info(`[publishInitData] publish init data to webview ${r}`),dt.emit(f,r),lt("pageReady",c)}))),Zt=e=>-1!==Nt.indexOf(e.route)||-1!==Nt.indexOf(e.route+".html"),er=z("Framework","openNewPage",((e,t,r,n,i={})=>{var o=bt;bt=void 0;var a=H(),u=zt(e);i.isMainTabBarPage&&"reLaunch"===i.openType&&L.destroyCustomTabBarManager(),St[r]=[],ht.newPageTime=Date.now(),Bt(e);var c=u?ge.create(r,e,n):he.create(r,e,n),d=c.page,p=E(n);St[r].length>0&&(d.__xrFrameIds__=St[r]),(mt={page:d,webviewId:r,route:e,rawPath:t,lastRoute:mt?mt.route:"",lastQuery:mt?mt.page.options:{},node:c.node}).isTabBarPage=Zt(mt),mt.isMainTabBarPage=i.isMainTabBarPage||!1,Ot.push(mt),d.__exitState__=o;var f={};if(Object.keys(p).forEach((e=>{var t=p[e];try{f[e]=decodeURIComponent(t)}catch(r){f[e]=t}})),a.traceBeginEvent("Framework","attachViewService"),L.attachView(r,f),St[r].forEach((e=>{rr(e)})),a.traceEndEvent(),/^__wx__\//.test(e)){var h={};if(/^__wx__\/open-api-redirecting-page/.test(e))s.info(`[openNewPage] route ${e} is open api page`),h=ke||{};else if(/^__wx__\/functional-page/.test(e)){s.info(`[openNewPage] route ${e} is functional page`);var _=We();_&&_.functionalPage&&(h=Object.assign({},_.functionalPage,{accountInfo:y.accountInfo}))}s.info(`[openNewPage] wx special page, setting data [${JSON.stringify(h)}]`),d.setData(h)}d.options=p,Yt(mt,r,ht.newPageTime,{statesData:void 0,isPageReload:!1,isPrerender:i.prerender||!1,isLaunch:!!i.isLaunch}),W()&&(__wxAppData[e]=d.data,__wxAppData[e].__webviewId__=r,a.publishUpdateAppData()),i.initialRenderingCacheData&&d.setData(i.initialRenderingCacheData);var g=a._getOpenerEventChannel();g&&(d.__eventChannel=g),void 0!==l&&l.traceNewRoute(y.page,y.global),d.__callPageLifeTime__("onLoad",n),d.__callPageLifeTime__("onShow"),Et[r]={page:d,route:e,rawPath:t,webviewId:r,statesData:null,framesetViewId:i.framesetViewId,node:u?c.node:void 0},lt("pageLoad",d),lt("enterPage",d),Mt("appRoute2newPage",ht.appRouteTime,ht.newPageTime)})),tr=z("Framework","openNewXrFrame",((e,t,r,n,i)=>{ft(t,"xr-frame");var o=L.addView(t,e,null,n,i),a=D.Element.getMethodCaller(o);return St[r].push(t),a.__wxWebviewId__=t,a.__route__=e,a.route=e,a.__displayReporter=new ie(e,2),It[t]=o,L.isViewAttached(r)&&rr(t),o})),rr=z("Framework","attachXrFrame",(e=>{var t=H(),r=It[e],n=D.Element.getMethodCaller(r);t.traceBeginEvent("Framework","attachViewService"),L.attachView(e,{}),t.traceEndEvent(),Yt({page:n},e,ht.newPageTime,{statesData:void 0,isReload:!1,prerender:!1,isLaunch:!1})})),nr=z("Framework","hidePage",((e,t)=>{e.page.__toRoute__=t,Dt()||e.page.__callPageLifeTime__("onHide"),lt("leavePage",e.page),H().uploadUserLogOnHide(e.route)})),ir=z("Framework","unloadPage",((e,t,r,n)=>{H()._triggerBeforeUnloadPage(e.webviewId),e.page.__toRoute__=t,e.page.__isBack__=r,e.page.__notReportHide__=n,e.page.__callPageLifeTime__("onUnload"),e.node&&ge.destroy(e.page),W()&&(delete __wxAppData[e.route],H().publishUpdateAppData()),delete Et[e.webviewId],St[e.webviewId].forEach((e=>{delete It[e]})),delete St[e.webviewId];for(var i=Ot.length-1;i>=0&&Ot[i].webviewId!==e.webviewId;i--);if(i>=0&&Ot.splice(i,1),Ot.length){var o=Ot[Ot.length-1];Bt(o.route);var a=(e=>{var t=void 0;for(var r in be)if(be[r]===e){t=r;break}return t})(o.webviewId);a&&f.setCurrentFrameView(a)}else Bt("");lt("pageUnload",e.page),lt("leavePage",e.page),H().uploadUserLogOnHide(e.route),H().recordUnloadWebviewIdForUserBehaviorAnalytics(e.webviewId)})),or=z("Framework","minimizePage",(e=>{nr(e),(Ot=Ot.slice(0,Ot.length-1)).length?Bt(Ot[Ot.length-1].route):Bt("")})),ar=z("Framework","onNavigateTo",((e,t,r,n,i)=>{mt&&nr(mt,e),Se(e),_t.call(Et,r)?x("Page route 错误(system error)",`navigateTo with an already exist webviewId ${r}`):er(e,t,r,n,{initialRenderingCacheData:i})})),sr=z("Framework","onNavigateToPip",((e,t,r,n,i)=>{mt&&nr(mt,e),Se(e),"min"===i?(Rt=Ot[Ot.length-1],_t.call(Et,r)?x("Page route 错误(system error)",`navigateTo with an already exist webviewId ${r}`):er(e,t,r,n)):"max"===i?Rt&&(Bt(e),mt=Rt,Ot.push(mt),mt.page.__callPageLifeTime__("onShow"),Rt=null):x("Page route 错误(system error)","navigateTo with unexpected pipMode")})),lr=z("Framework","onRedirectTo",((e,t,r,n,i)=>{mt&&ir(mt,e),Se(e),_t.call(Et,r)?x("Page route 错误(system error)",`redirectTo with an already exist webviewId ${r}`):er(e,t,r,n,{initialRenderingCacheData:i})})),ur=z("Framework","onNavigateBack",((e,t)=>{"min"===t?(Rt=Ot[Ot.length-1],cr(e,!0)):"max"===t&&(Rt=null,cr(e))})),cr=z("Framework","onNavigateBack",((e,t=!1)=>{for(var r=!1,n=Et[e]&&Et[e].route,i=Ot.length-1;i>0;i--){var o=Ot[i];if(o.webviewId===e){r=!0,mt=o;break}!t&&Rt&&Rt.webviewId===o.webviewId?Ot=Ot.slice(0,Ot.length-1):t&&Rt&&Rt.webviewId===o.webviewId?or(o,n,!0):ir(o,n,!0)}if(1===Ot.length&&!r){var a=Ot[0];if(a.webviewId===e)r=!0,mt=a;else if(Zt(a)&&_t.call(Et,e)){r=!0;var{page:s,node:l}=Et[e];mt={webviewId:e,route:n,page:s,node:l}}Bt(mt.route)}if(Se(n),r){Dt()||(mt.page.__callPageLifeTime__("onShow"),Zt(mt.page)&&L.showTabBar(e)),lt("enterPage",mt.page);var u=We();qe({}),u&&u.functionalPage&&e&&H().publishFunctionalPage(u.functionalPage,[e]),u&&u.functionalPage&&"string"==typeof u.functionalPage.callbackId&&u.functionalPage.callbackId.startsWith("RPP")&&H().requestPluginPaymentEmitter.emit(u.functionalPage)}else x("Page route 错误(system error)",`navigateBack with an unexist webviewId ${e}`)})),dr=z("Framework","onSwitchTab",((e,t,r,n,i)=>{var o=!0,a=!0;if(0!==Ot.length){for(;Ot.length>1;)Rt&&Rt.webviewId===Ot[Ot.length-1].webviewId?((Ot=Ot.slice(0,Ot.length-1)).length?Bt(Ot[Ot.length-1].route):Bt(""),o=!1):(ir(Ot[Ot.length-1],e),o=!1);if(Ot[0].webviewId===r)mt=Ot[0],o||Dt()||mt.page.__callPageLifeTime__("onShow");else if(Zt(Ot[0])?(a=!1,o&&nr(Ot[0],e)):Rt&&Rt.webviewId===Ot[0].webviewId?(Ot=Ot.slice(0,Ot.length-1),Bt("")):ir(Ot[0],e),_t.call(Et,r)){var{page:s,node:l}=Et[r];Ot=[mt={webviewId:r,route:e,page:s,node:l}],Dt()||s.__callPageLifeTime__("onShow"),lt("enterPage",s),lt("switchTab",s)}else Ot=[],er(e,t,r,n,{isMainTabBarPage:a,initialRenderingCacheData:i})}else er(e,t,r,n,{initialRenderingCacheData:i})})),pr=z("Framework","onAppLaunch",((e,t,r,n,i,o)=>{ht.appLaunchTime=Date.now(),ht.appFgTime=Date.now();var a=H();_t.call(Et,r)?x("Page route 错误(system error)",`appLaunch with an already exist webviewId ${r}`):er(e,t,r,n,{isMainTabBarPage:Zt({route:e}),initialRenderingCacheData:i,prerender:o,isLaunch:!0});var s=a.getLaunchOptionsSync().scene;[1001,1003,1023,1038,1056,1080,1083,1089,1090,1103,1104,1112,1113,1114,1117,1127,1131,1134].indexOf(s)<0||a.loadExitState(((e,t,r)=>{"latestPage"===e?setTimeout((()=>{bt=r,a.route.redirectTo({url:t})}),0):"homePageAndLatestPage"===e?setTimeout((()=>{bt=r,a.route.navigateTo({url:t})}),0):bt=r}))})),fr=z("Framework","unloadPagePip",(()=>{var e=Rt;e&&(Ot.findIndex((e=>e.webviewId===Rt.webviewId))>=0?Rt=null:(H()._triggerBeforeUnloadPage(e.webviewId),e.page.__callPageLifeTime__("onUnload"),e.node&&ge.destroy(e.page),W()&&(delete __wxAppData[e.route],H().publishUpdateAppData()),delete Et[e.webviewId],Array.isArray(St[e.webviewId])&&(St[e.webviewId].forEach((e=>{delete It[e]})),delete St[e.webviewId]),lt("pageUnload",e.page),lt("leavePage",e.page),H().uploadUserLogOnHide(e.route)))})),hr=z("Framework","onReLaunch",((e,t,r,n,i,o,a)=>{var s=!1;for("reLaunch"===i&&(s=!0);Ot.length>0;){var l=!0;s&&(l=!1,s=!1),ir(Ot[Ot.length-1],e,!1,l)}Object.keys(Et).forEach((t=>{ir(Et[t],e,!1,!0)})),Se(e),er(e,t,r,n,{isMainTabBarPage:Zt({route:e}),initialRenderingCacheData:o,prerender:a,openType:i})})),_r=z("Framework","handleAppRoute",((e,t,r,n,i,o,a,s)=>{var l=Object.keys(r).map((e=>encodeURIComponent(e)+"="+r[e])).join("&"),u="/"+e+(l?"?"+l:"");k(`On app route: ${e} (${n}), renderer: ${a.renderer}`),ht.appRouteTime=Date.now(),Pt?Ae(e,u,t,r,s,n):"navigateTo"===n?i?sr(e,u,t,r,i):ar(e,u,t,r,o):"redirectTo"===n?lr(e,u,t,r,o):"navigateBack"===n?i?ur(t,i):cr(t):"switchTab"===n?dr(e,u,t,r,o):"appLaunch"===n?pr(e,u,t,r,o,a.prerender):"reLaunch"===n||"autoReLaunch"===n?hr(e,u,t,r,n,o,a.prerender):"dismissPip"===n?Rt&&fr():x("Page route 错误(system error)",`Illegal open type: ${n}`)})),gr=z("Framework","onPageReload",((e,t)=>{if(k(`On page reload: ${e}`),_t.call(Et,t)){var r=zt(e),n=Et[t].statesData;Et[t].statesData=void 0,L.restoreView(t),Yt(Et[t],t,Date.now(),{statesData:n||{},isPageReload:!0,isPrerender:!1,isLaunch:!1}),((e,{pageCount:t,pageType:r})=>{var n=K[e]||{},i=[t,r,n.rootCompCount||0,n.rootCustomCompCount||0,n.rootCustomCompRatio||0,n.rootInternalCompCount||0].map(encodeURIComponent).join(",");K[e]={},o.reportKeyValue({key:"WebviewRestore",value:i}),o.submit()})(t,{pageCount:Ot.length,pageType:r?2:1})}else x("Page reload(system error)",`Can not find webviewId ${t}`)})),vr=()=>{var{route:e,webviewId:t}=Ot[Ot.length-1];gr(e,t)},mr=(e,t)=>{if(null!=Et[t]){var r=H();r._triggerBeforeShareAppMessage(t);var{chatroomUsername:n,scene:i}=r.getInnerEnterOptionsSync(),{openType:a}=e.detail||{},s=e.origin||"weixin",l=((e,t)=>{var r,n=e,i=Et[t],o=i.page;if(Qt(o,"onShareAppMessage")&&(r="onShareAppMessage"),r){k(`Invoke event ${r} in page: ${i.route}`);var a={from:e.fromShareButton?"button":"menu",target:e.target};e.webViewUrl&&(a.webViewUrl=e.webViewUrl);var s=U.call(o,r,a)||{},l=s.promise;delete s.promise,C(l)||(l=Promise.resolve(s));var u=new Promise((e=>setTimeout(e,3e3,s)));return Promise.race([u,l]).then((t=>(n.title=t.title&&"string"==typeof t.title?t.title:e.title,n.desc=t.desc&&"string"==typeof t.desc?t.desc:e.desc,n.path=t.path&&"string"==typeof t.path?q(wt(t.path)):e.path,"string"==typeof t.imageUrl&&(t.imageUrl&&!/^(http|https|wxfile|cloud):\/\//.test(t.imageUrl)?n.imageUrl=H()._getRealRoute(t.imageUrl,!1):n.imageUrl=t.imageUrl),n.toCurrentGroup=t.toCurrentGroup,t.cacheKey&&(n.cacheKey=t.cacheKey),t.webpageUrl&&(n.webpageUrl=t.webpageUrl),"wx60422b707e49ff2e"===y.accountInfo.appId&&(t.bizSourceName&&(n.bizSourceName=t.bizSourceName),t.bizSourceIconUrl&&(n.bizSourceIconUrl=t.bizSourceIconUrl)),n.path.length>0&&"/"===n.path[0]&&(n.path=n.path.substr(1)),H().userShareMenuState.isPrivateMessage?n.disableForward=!0:n.disableForward="boolean"==typeof t.disableForward&&t.disableForward,me()&&(n.userName=t.userName,n.imagePath=t.imagePath,n.withShareTicket=t.withShareTicket,n.miniprogramType=t.miniprogramType,n.scene=t.scene),n.success=t.success,n.cancel=t.cancel,n.fail=t.fail,n.complete=t.complete,n.thumbDataHash=t.thumbDataHash,n.signature=t.signature,lt("share",o),n)))}return Promise.resolve(n)})(e,t);l.then((l=>{var u,c;if(1158===i&&void 0===l.toCurrentGroup&&(l.toCurrentGroup=!0),!0===e.fromShareButton){u="shareAppMessageDirectly";var d=r.getShareCookieString();if(d&&(l.messageExtraData=l.messageExtraData||{},l.messageExtraData.cookies=d),c=2,"shareToChatroom"===a&&l.toCurrentGroup){if(1156!==i||!n)return void console.warn(`shareToChatroom:fail scene ${i}, chatroomUsername ${n}`);l.chatroomUsername=n,l.bizType=1,u="shareAppMessageToSpecificContactForFakeNativeDirectly"}}else u="shareAppMessage",l.to=s,c=1;1158===i&&l.toCurrentGroup&&(u="shareAppMessageToSpecificContactDirectly",l.chatroomUsername=n);ve()&&"wxfe02ecfe70800f46"!==y.accountInfo.appId&&(l.bizType=1,u="shareAppMessageForFakeNative",1156!==i&&1158!==i||!l.toCurrentGroup||(u="shareAppMessageToSpecificContactForFakeNativeDirectly")),l.useDefaultSnapshot=!0,l.webviewId=t,!W()&&r.checkAPIAvailable("share")||(l=$({},l),["success","fail","cancel","complete"].some((e=>"function"==typeof l[e]))&&r.reportRecycledAPI({name:u,strategy:1}),"shareToChatroom"!==a&&(delete l.success,delete l.fail,delete l.cancel,delete l.complete)),me()&&(u="shareMiniProgramMessage"),H().reportNativeUiEvent("onShareAppMessage",l);var p=()=>{r[u](l,{beforeAll:e=>{var t=jt();try{((e,t,r)=>{var n=e.page.__displayReporter;n.checkShowOptions();var i=n.showOptions,a=n.route+".html",s=t.errMsg,l=0,u=e.updateTitle&&e.updateTitle.trim(),c=(y.global&&y.global.window||{}).navigationBarTitleText||"",d=((y.page[a]||{}).window||{}).navigationBarTitleText||"",p=y.host&&y.host.appId||"";s.indexOf(":ok")>=0?l=1:s.indexOf(":fail")>=0?l=2:s.indexOf(":cancel")>=0&&(l=3);var f=[i.scene,i.scene_note,i.sessionid,a,u||d||c,i.apptype,l,0,i.query,r,0,"","",p].map(encodeURIComponent).join(",");o.reportKeyValue({key:"Share",value:f,force:!0}),o.submit()})(t,e,c)}catch(e){}H().reportNativeUiEvent("doShareAppMessage",e),e.errMsg=e.errMsg.replace(/shareAppMessageDirectly|shareAppMessageToSpecificContactForFakeNativeDirectly|shareAppMessageForFakeNative|shareAppMessageToSpecificContactDirectly/,"shareAppMessage"),r.invokeInnerShareCallbacks("shareAppMessage",e),void 0!==e.shareInfos&&e.shareInfos.length>0&&(e.shareTickets=e.shareInfos.filter((e=>e.shareKey&&e.shareName)).map((e=>(r.showUpdatableMessageSubscribeButton({shareKey:e.shareKey}),function(){if(!ct){var e=H();ct=e.ShareInfoStorage,delete e.ShareInfoStorage}return ct}().set(e.shareKey,e.shareName))))),delete e.shareInfos},beforeFail:e=>{me()&&console.error("shareMiniProgramMessage fail",e)}})};return"string"==typeof l.imageUrl?r.getCloudFileUrl([l.imageUrl],"image",(e=>{l.imageUrl=e.data[0].url,p()})):p(),null})).catch((e=>{console.warn("onShareAppMessage error ",e)}))}},yr=e=>{H().shareTimeline(e,{beforeAll:e=>{H().invokeInnerShareCallbacks("shareTimeline",e),H().reportNativeUiEvent("doShareTimeline",e)}})},br=(e={},t)=>{if(null!=Et[t]){var r=Et[t],n=r.page,i={from:e.fromShareTimeLineButton?"button":"menu",target:e.target},o=Qt(n,"onShareTimeline")&&U.call(n,"onShareTimeline",i)||{},{title:a,query:s}=o,l={title:a||e.title,path:"string"==typeof s?`${r.route}.html?${s}`:r.rawPath.replace(/^\//,"").replace(/(\?|$)/,".html$1")};H().reportNativeUiEvent("onShareTimeline",l),"string"==typeof o.imageUrl&&o.imageUrl?(/^(http|https|wxfile|cloud):\/\//.test(o.imageUrl)?l.imageUrl=o.imageUrl:l.imageUrl=H()._getRealRoute(o.imageUrl,!1),H().getCloudFileUrl([l.imageUrl],"image",(e=>{l.imageUrl=e.data[0].url,yr(l)}))):yr(l)}},wr=e=>{if(Et[e]){var t=Et[e].page;Qt(t,"onShareTimeline")&&Qt(t,"onShareAppMessage")&&H().showShareTimelineMenu()}},Ar=null;function Er(e){var t=e.path,r=e.webviewId,n=e.viewId,i=e.query||{},o=e.openType,a=e.pipMode,l=e.initialRenderingCacheData;if("appLaunch"===o&&e.frameset&&(s.info("[onAppRoute] switching to frameset mode by onAppRoute#appLaunch"),Pt=!0),ft(r,e.renderer),!l&&e.appserviceData)try{l=JSON.parse(e.appserviceData)}catch(e){}Ar&&Ar(),e.resizing?(s.info("Delayed onAppRoute due to resizing"),Ar=F((()=>{Ar=null,s.info("Delayed onAppRoute executed"),_r(t,r,i,o,a,l,e,n)}),"onAppRoute")):_r(t,r,i,o,a,l,e,n)}var Sr=z("Framework","handleAppRouteDone",(()=>{mt&&mt.page.__callPageLifeTime__("onRouteDone")}));function Ir(e){e.webviewId===(mt&&mt.webviewId)?Sr():x("Page route 错误(system error)",`routeDone with a webviewId ${e.webviewId} that is not the current page`)}function Tr(e){var t=e.path,r=e.webviewId;gr(t,r)}Q((e=>{e.onAppRoute(F(Er,"onAppRoute")),e.onAppRouteDone(F(Ir),"onAppRouteDone"),e.onAppRouteResized((()=>{Ar&&Ar()})),e.onPageReload(F(Tr,"onPageReload")),e.onWebviewEvent(F((e=>{var{webviewId:t,eventName:r,data:n,nodeId:i}=e,o=((e,t,r,n)=>{if(_t.call(Et,e)){var i=Et[e],o=i.page;if("__DOMReady"===r)return ht.pageReadyTime=Date.now(),k(`Invoke event onReady in page: ${i.route}`),o.__callPageLifeTime__("onReady"),void Mt("newPage2pageReady",ht.newPageTime,ht.pageReadyTime);if("telecontrol"!==r){if(n._requireActive){var a=Ot[Ot.length-1];if(!a||a.webviewId!==e)return}if(n._relatedInfo&&ie.setEventRelatedInfo(n._relatedInfo),t){var s=L.getNodeById(t,e);if(!s)return;if(s.__isXrFrame__)return void H().dispatchXrFrameEvent(s.__xrFrameId__,n.type,n);var l=D.Element.getMethodCaller(s);return k(`Invoke event ${r} in component: ${s.is}`),Qt(l,r)?kt(l,r,n):void P("事件警告",`Do not have ${r} handler in component: ${s.is}. Please make sure that ${r} handler has been defined in ${s.is}.`)}if(k(`Invoke event ${r} in page: ${i.route}`),Qt(o,r))return kt(o,r,n);P("事件警告",`Do not have ${r} handler in current page: ${i.route}. Please make sure that ${r} handler has been defined in ${i.route}, or ${i.route} has been added into app.json`)}else{var u=n.type,c="onTelecontrolSelect";if("start"===u)H().publishTelecontrol({type:u,custom:Qt(o,c)},[e]);else if("next"===u){if(k(`Invoke event ${c} in page: ${i.route}`),!Qt(o,c))return void P("事件警告",`Do not have ${c} handler in current page: ${i.route}. Please make sure that ${c} handler has been defined in ${i.route}, or ${i.route} has been added into app.json`);var d=kt(o,c,{current:n.current,target:n.target,key:n.key});if(C(d)){var p=new Promise((e=>setTimeout(e,1e3,"")));Promise.race([d,p]).then((t=>{H().publishTelecontrol({seqId:n.seqId,type:u,res:t},[e])})).catch((()=>{}))}else H().publishTelecontrol({seqId:n.seqId,type:u,res:d},[e])}}}})(t,i,r,n);return o}),"onWebviewEvent")),e.onAppEnterForeground((e=>{ht.appFgTime=Date.now(),0!==e.scene&&"0"!==e.scene&&(yt=e.scene)})),e.onPullDownRefresh(F(((e,t)=>{(e=>{if(_t.call(Et,e)){var t=Et[e],r=t.page;Qt(r,"onPullDownRefresh")&&(k(`Invoke event onPullDownRefresh in page: ${t.route}`),U.call(r,"onPullDownRefresh"),lt("pullDownRefresh",r))}else P("事件警告",`onPullDownRefresh WebviewId: ${e} not found`)})(t)}),"onPullDownRefresh")),e.onShareAppMessage(F(mr,"onShareAppMessage"))}));var Cr=(e,t)=>{if(null!==Et[t]){var r=e,n="onAddToFavorites",i=Et[t],o=i.page;if(Qt(o,n)){k(`Invoke event onAddToFavorites in page: ${i.route}`);var a={webViewUrl:r.webViewUrl},s=U.call(o,n,a)||{};if(s.title&&"string"==typeof s.title&&(r.title=s.title),s.query&&"string"==typeof s.query){var l=r.path.split("?")[0];r.path=`${l}?${s.query}`}s.imageUrl&&"string"==typeof s.imageUrl&&(/^(https?|wxfile|cloud):\/\//.test(s.imageUrl)?r.imageUrl=s.imageUrl:r.imageUrl=H()._getRealRoute(s.imageUrl,!1)),r.disableForward=s.disableForward||!1}H().getCloudFileUrl([r.imageUrl],"image",(e=>{r.imageUrl=e.data[0].url,H().addToFavorites(r,{})}))}},Or=(e,t)=>{if(e=e||{},null!==Et[t]){var r=Et[t],n=r.page,i=(e=>{if(null===Et[e])return"";var t=Et[e].page,r=t.options||{},n=q(t.route);return Object.keys(r).length&&(n+="?"+Object.keys(r).map((e=>`${e}=${r[e]}`)).join("&")),n})(t),o={path:i,fromButton:!!e.fromButton};if(Qt(n,"onHandoff")){k(`Invoke event onHandoff in page: ${r.route}`);var a=U.call(n,"onHandoff")||{};a.path&&"string"==typeof a.path&&(o.path=q(wt(a.path)))}H().startHandoff(o)}};function Nr(e,t){if(_t.call(Et,t)){var r=Et[t].page,n=q(r.route);Object.keys(r.options).length>0&&(n+="?"+Object.keys(r.options).map((e=>`${e}=${r.options[e]}`)).join("&")),F(mr,"onShareAppMessage")({path:n,title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareButton:!0},t)}else P("事件警告",`tapShareButton WebviewId: ${t} not found`)}function xr(e,t){if(_t.call(Et,t)){var r=Et[t].page;Qt(r,"onShareTimeline")&&Qt(r,"onShareAppMessage")?F(br,"onShareTimeline")({title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareTimeLineButton:!0},t):P("事件警告","onShareTimeline and onShareAppMessage are both needed")}else P("事件警告",`tapShareButton WebviewId: ${t} not found`)}function Rr(e,t){if(H()._setWxIsInvokeInTapForNavToMiniProgram(),_t.call(Et,t)){var r=Et[t],n=r.page;if(void 0!==y&&y.tabBar&&y.tabBar.list&&y.tabBar.list[e.index]){var i={index:e.index,pagePath:(y.tabBar.list[e.index].pagePath||"").replace(/\.html$/,""),text:y.tabBar.list[e.index].text};if(i.pagePath!==r.route)return;Qt(n,"onTabItemTap")&&(k(`Invoke event onTabItemTap in page: ${r.route}`),L.wrapTapMark((()=>{U.call(n,"onTabItemTap",i)})))}}}Q((e=>{e.onAddToFavorites(F(Cr,"onAddToFavorites")),e.onStartHandoff(F(Or,"onStartHandoff")),e.subscribeTapHandoffButton(((e,t)=>{F(Or,"onStartHandoff")({fromButton:!0},t)})),e.subscribeTapShareButton(Nr),e.subscribeTapShareTimeLineButton(xr),e.onShareTimeline(F(br,"onShareTimeline")),e.subscribeSavePageState(F(((e,t)=>{_t.call(Et,t)?Et[t].statesData=e:P("事件警告",`onPageWillManuallyTerminate WebviewId: ${t} not found`)}),"savePageState")),e.subscribeRecycleStatistics(F(((e,t)=>{if(_t.call(Et,t)){var r=Et[t];((e,{pageCount:t,pageType:r,rootCompCount:n=0,rootCustomCompCount:i=0,rootCustomCompRatio:a=0,rootInternalCompCount:s=0})=>{var l=[t,r].map(encodeURIComponent).join(",");K[e]={rootCompCount:n,rootCustomCompCount:i,rootCustomCompRatio:a,rootInternalCompCount:s},o.reportKeyValue({key:"WebviewRecycle",value:l}),o.submit()})(t,a()({pageCount:Ot.length,pageType:zt(r.route)?2:1},e))}}),"recycleStatistics")),e.onTabItemTap(F(Rr,"tabItemTap")),e.onNavigationBarTitleUpdate((e=>{if(e.errMsg.indexOf(":ok")>=0&&e.title){var t=jt();t&&(t.updateTitle=e.title)}}))}));var Pr=()=>Tt,Dr=function(e,t){var r=e+"/"+t,n={__wxAppCode__:{},__wxAppCurrentFile__:""},i=H();n.wx=i.createPluginWX(e,t),n.console=i.createPluginConsole(),n.WXWebAssembly=i.createPluginWXWebAssembly(e,t),n.Page=e=>{Jt(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__,n)},n.getCurrentPages=()=>qt(e),n.Component=e=>Vt(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__,n),n.Behavior=e=>L.Behavior(e,r,n.__wxAppCode__,n.__wxAppCurrentFile__),n.publishDomainComponents=e=>L.publishDomainComponents(r,e);var o,a=(e=>{var t=[];y.plugins&&Object.keys(y.plugins).forEach((e=>{var r=y.plugins[e];t.push({alias:e,plugin:r,prefix:""})})),y.subpackages&&y.subpackages.forEach((e=>{e.plugins&&Object.keys(e.plugins).forEach((r=>{var n=e.plugins[r];t.push({alias:r,plugin:n,prefix:e.root})}))}));var r=(()=>{var r=t.filter((t=>t.plugin.provider===e));if(0===r.length)return null;if(1===r.length){var n=r[0].plugin.subpackage||r[0].prefix;return"__APP__"===n&&(n=""),r[0].prefix=n,r[0]}return r.find((e=>""!==e.prefix))})();if(null===r)return null;if(void 0===r.plugin.export)return null;var n=r.prefix||"";return"/"===n[0]&&(n=n.slice(1)),n&&"/"!==n.slice(-1)&&(n+="/"),n+(r.plugin.export||"")})(e);return n.requireMiniProgram=()=>(void 0===o&&(o=null===a?{}:J(a)),o),n.beforeFactory=t=>{var r=i.buildPluginPrivateApi(e);t("__wx__/plugin-private-api",((e,t)=>{t.exports=r}))},n},Lr=()=>Dr,Br=e=>Dr=e,kr=(...e)=>Dr(...e);"function"==typeof logxx&&logxx("app-service-engine start");var Mr=F((e=>{Jt(e,"/")}),"create page instance"),Fr=F((e=>Vt(e,"/")),"create component instance"),jr=F((e=>L.Behavior(e)),"create behavior instance");B=r})();var k=B.Page,M=B.Component,F=B.Behavior,j=.02,U={delayedGwx:!0},$=B.App,W=B.getApp,q=B.getCurrentPages,H=null,G;Object.assign(e,{Page:k,Component:M,Behavior:F,__webview_engine_version__:j,__vd_version_info__:U,App:$,getApp:W,getCurrentPages:q,__pageComponent:H}),(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>m});var r={},n=/^plugin:\/\/([A-Za-z0-9_-]+)[/]?(.*)/,i=e=>{var t=e.match(n);if(t&&3===t.length)return{pluginId:t[1],version:"0",modId:t[2].length>=1?t[2]:void 0}},o=e=>`${e.pluginId}/${e.version}`,a=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],l=r,c=r,d=e=>{for(var t=[],r=e.split("/"),n=0,i=r.length;n<i;++n){var o=r[n];if(""!==o&&"."!==o)if(".."===o){if(0===t.length){t=null;break}t.pop()}else n+1<i&&".."===r[n+1]?n++:t.push(o)}return t},p=(e,t)=>{var r=c[e],n=d(t+"/index.js").join("/");return r&&r.mods&&r.mods[n]?n:(n=d(t).join("/"),/\.js$/.test(n)||(n+=".js"),r&&r.mods&&r.mods[n]?n:"")},f=(e,t)=>{var r=(e=>{var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"})(t);return function(t){if("string"!=typeof t)throw new Error("require args must be a string.");var n=d(t.startsWith("/")?t:`${r}/${t}`);if(!n)throw new Error("can't find module : "+t);var i=n.join("/");return i=((e,t,r,n)=>{var i=t,o=c[e];if(/\.js$/.test(i)||(i+=".js"),"string"==typeof i&&o&&o.mods&&o.mods[i])return i;var a=d(r);if(!a)throw new Error("can't find module : "+n);for(var s,l=t.substring(a.join("/").length);a.length;){var u=a.join("/")+"/miniprogram_npm"+l;if(s=p(e,u))break;a.pop()}return s||(l="/"===l[0]?l:"/"+l,s=p(e,"miniprogram_npm"+l)),s||t})(e,i,r,t),_(e,i)}},_=(e,t)=>{(e=>{if("string"!=typeof e)throw new Error("require args must be a string")})(t);var r=c[e];if(void 0===r)throw new Error(`Plugin "${e}" is not defined.`);var n=r.mods[t];if(void 0===n)throw new Error(`Plugin module "${t}" is not defined.`);if(1===n.status){var i;n.status=2;var o=n.factory,a={exports:{}};o&&(i=o(f(e,t),a,a.exports)),n.exports=void 0!==a.exports?a.exports:i}return n.exports},g=(e,t)=>{var r=t.factory,n=t.global,i={exports:{}};if(!r)return i.exports;var o=(e=>function(t,r){var n=l[e];if(void 0===n)throw new Error(`Sorry, plugin "${e}" is not defined.`);n.mods[t]={status:1,factory:r}})(e),a=(e=>function(t){return _(e,t)})(e),s=n.beforeFactory;delete n.beforeFactory;var u=n.afterFactory;delete n.afterFactory,"function"==typeof s&&s.apply(n,[o,a,i]);var c=r(o,a,i,i.exports,n,n.wx,void 0,n.Page,n.Component,n.Behavior,void 0,n.getCurrentPages,void 0,n.requireMiniProgram,n.WXWebAssembly);return"function"==typeof u&&u.apply(n,[o,a,i]),void 0!==i.exports?i.exports:c},v=(e,t)=>{var r,n,l;(()=>{if(void 0===y||void 0===y.plugins&&void 0===y.gamePlugins)throw new Error("This application has not registered any plugins yet.")})(),(e=>{if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")})(e);var d=i(e),p=void 0===d;if(p||(r=d.pluginId,n=o(d),l=c[n]),void 0===l&&(e=>null!==e.match(/^wx[0-9a-f]{16}$/))(e)&&(r=e,n=o({pluginId:e,version:"0"}),l=c[n]),void 0===l){var f=(e=>{var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error(`Plugin "${e}" has not registered.`);var r=t[1],n=t[2],i=(y.plugins||y.gamePlugins)[r];if(void 0===i)throw new Error(`Plugin "${e}" has not registered.`);return{pluginId:i.provider,version:"0",path:n}})(e);r=f.pluginId,n=o(f),l=c[n]}if("function"!=typeof t){if(void 0===l)throw new Error(`Plugin "${n}" is not defined.`);return 1===l.status&&(l.exports=g(n,l),l.status=2),p?"function"==typeof l.exports?l.exports():void 0:l.exports}if(void 0===l){var _=(e=>{for(var t=y.subPackages||[],r=function(r){if(!t[r].plugins)return"continue";if(Object.keys(t[r].plugins).find((n=>t[r].plugins[n].provider===e))){var n=t[r].root||"";return n&&"/"!==n.slice(-1)&&(n+="/"),{v:n}}},n=0;n<t.length;++n){var i=r(n);if("continue"!==i&&"object"==typeof i)return i.v}return"__APP__"})(r);((e,t)=>{var r="__APP__"===e;r||"/"===e.slice(-1)||(e+="/"),"devtools"===y.platform?(s.info(`[WebNode] injectSubPackages: ${e}`),h.invoke("injectSubPackages",{subPackages:[e]},t)):(s.info(`[WebNode] loadSubpackage: ${e}`),u.loadSubpackage({name:e,success(){var n=Object.values(y.plugins||{}).filter((t=>t.subpackage.includes(e))).map((e=>{var t=e.provider,r=`__plugin__/${t}`;return{plugin_id:t,prefix_path:a.includes(t)?null:r}}));x.injectEntryFile(r?"":e,n),t()}}))})(_,(()=>{t(v(e))}))}else setTimeout((function(){t(v(e))}))};v.async=function(e){return new Promise((function(t,r){try{v(e,(e=>{t(e)}))}catch(e){r(e)}}))};var m={definePlugin:(e,t)=>{var r=i(e);if(!r||!r.pluginId||!r.version)throw new Error('schema must match "plugin://{name}/{version}"');var n=o(r),a=(e=>{if(void 0===B||"function"!=typeof B.__createPluginGlobal)throw new Error("Create plugin global failed.");return B.__createPluginGlobal(e.pluginId,e.version)})(r);l[n]={status:1,factory:t,mods:{},global:a}},requirePlugin:v};G=t.default})();var Q=G.definePlugin,z=G.requirePlugin,K;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{define:()=>d,require:()=>S,requireOnce:()=>I});var r=globalThis,n={},i={};if(globalThis.wxModuleVersion){var a=~~globalThis.wxModuleVersion;globalThis.enableWxModule=2>a}else globalThis.wxModuleVersion=2,globalThis.enableWxModule=!0;var l=()=>({__wxRoute:r.__wxRoute,__wxAppCurrentFile__:r.__wxAppCurrentFile__,__wxRouteBegin:r.__wxRouteBegin}),c=e=>{r.__wxRoute=e.__wxRoute,r.__wxAppCurrentFile__=e.__wxAppCurrentFile__,r.__wxRouteBegin=e.__wxRouteBegin};function d(e,t){if(n[e]&&n[e].factory){var r=n[e],i=t.toString();r.factoryString||(r.factoryString=r.factory.toString()),i!==r.factoryString&&(n[e]={status:1,factory:t,factoryString:i})}else n[e]={status:1,factory:t}}var p=e=>{if(e&&y.subPackages)for(var t=0,r=y.subPackages.length;t<r;t++)if(0===e.indexOf(y.subPackages[t].root))return y.subPackages[t]},f=e=>{for(var t=[],r=e.split("/"),n=0,i=r.length;n<i;++n){var o=r[n];if(""!==o&&"."!==o)if(".."===o){if(0===t.length){t=null;break}t.pop()}else n+1<i&&".."===r[n+1]?n++:t.push(o)}return t},_=e=>{var t=f(e+"/index.js").join("/");return n[t]?t:(t=f(e).join("/"),/\.js$/.test(t)||(t+=".js"),n[t]?t:"")},g=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"];function v(e,t){var r="__APP__"===e;"/"===e.slice(-1)||r||(e+="/"),"devtools"===y.platform?(s.info("[WebNode] injectSubPackages: "+e),h.invoke("injectSubPackages",{subPackages:[e]},t)):(s.info("[WebNode] loadSubpackage: "+e),u.loadSubpackage({name:e,success(){var n=y.subPackages.find((t=>t.root===e))||{},i=Object.assign({},n.plugins);r&&Object.assign(i,y.plugins);var o=Object.keys(i||{}).map((e=>{var t=i[e].provider,r="__plugin__/"+t;return{plugin_id:t,prefix_path:g.includes(t)?null:r}}));x.injectEntryFile(r?"":e,o),t({errMsg:"loadSubPackage:ok",loaded:!0})},fail(){s.error(`[WebNode] loadSubPackage fail ${e}`),t({errMsg:"loadSubPackage:false",loaded:!1})}}))}var m=e=>{var t=y&&y.subPackages;t||(t=[]);for(var r=0;r<t.length;++r){var n=t[r].root||"";if(n&&"/"!==n.slice(-1)&&(n+="/"),e.slice(0,n.length)===n)return{subPackage:n,independent:!!t[r].independent}}return{subPackage:"__APP__",independent:!1}},b=!1,w=[],A=e=>{Object.keys(e).forEach((t=>{var r=t;t.endsWith("*")&&(r=r.slice(0,-1));var n=e[t];e[t].endsWith("*")&&(n=n.slice(0,-1)),w.push({key:r,value:n})}))};"function"==typeof y.onReady?y.onReady((()=>{"object"==typeof y.resolveAlias&&(b=!!Object.keys(y.resolveAlias).length)&&A(y.resolveAlias)})):"object"==typeof y.resolveAlias&&(b=!!Object.keys(y.resolveAlias).length)&&A(y.resolveAlias);var E=e=>{var t=(e=>{var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"})(e),r=function(r,i,a){var s,l=t;if("string"!=typeof r)throw new Error("require args must be a string");if("/__wx__/private-api"===r?s=f(r).join("/"):(b&&(s=(e=>{var t={key:""},r=!1;if(w.forEach((n=>{e.startsWith(n.key)&&t.key.length<n.key.length&&(t=n,r=!0)})),r){var n=e.replace(t.key,t.value);return"/"===n[0]&&(n=n.slice(1)),n}})(r)),void 0!==s?(l="",s=f(s).join("/")):s=f(l+"/"+r).join("/")),!s)throw new Error(`can not find module : ${s}, require args is ${r}`);try{var u=((e,t,r)=>{var i=e;if(/\.js$/.test(i)||(i+=".js"),"string"==typeof i&&n[i])return i;var o=f(t);if(!o)throw new Error("can not find module : "+r);for(var a,s,l=e.substring(o.join("/").length);o.length&&(s=o.join("/")+"/miniprogram_npm"+l,!(a=_(s)));)o.pop();return a||(l="/"===l[0]?l:"/"+l,a=_(s="miniprogram_npm"+l)),a||e})(s,l,r),c=e=>"functional-pages"===f(e)[0];if(c(u)!==c(e)&&o.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+r+'") in '+e}),"devtools"===y.platform&&y.subPackages&&void 0===i){var d=p(u),h=p(e);d&&d!==h&&console.warn(`Requires "${r}" from "${e}" without a callback may fail in production, since they are in different subPackages`)}return S(u,void 0,i,r,t,a)}catch(e){throw e}};return r.async=e=>new Promise(((t,n)=>{try{return r(e,t,n)}catch(e){n(e)}})),r};function S(e,t,r,o="",a,s){if(void 0===t&&(t=!0),"string"!=typeof e)throw new Error("require args must be a string");var u=n[e];if(!u){var d=-1===e.indexOf("/")?e+"/index.js":e;/\.js$/.test(d="miniprogram_npm/"+d)||(d+=".js"),u=n[d]}if(e.endsWith(".js")||(e+=".js"),!u&&"devtools"!==y.platform&&void 0!==x){var p="/"+e.substr(0,e.length-3)+".appservice.js",f=l(),h=x.loadJsFiles([p],null,{waitResult:!0,reportKey:`webnode-require-${e.slice(0,e.length-3)}`});c(f),u=n[e],h&&h(!!u)}if("function"!=typeof r){if(!u)throw new Error(`module '${e}' is not defined, require args is '${""===o?e:o}'`);var _={exports:{}},g=u.factory;if(!t||i[e])return delete u.exports,u.status=1,i[e]=!0,g&&g(E(e),_,_.exports),_.exports;if(1===u.status){var b;u.exports=_.exports,u.status=2;try{g&&(b=g(E(e),_,_.exports))}catch(e){throw u.status=1,console.error(e),e}u.exports=void 0!==_.exports?_.exports:b}return u.exports}var w=t=>{var r="function"==typeof s?s:()=>{},n="async require: fail";"object"==typeof t&&t&&t.message&&(n=t.message),r({errMsg:n,mod:e})},A=function(...e){try{var t=S(...e);r(t)}catch(e){w(e)}};if(u)setTimeout((()=>A(e)));else{var I=l(),T="string"==typeof a&&m(a).independent,{subPackage:C,independent:O}=m(e);!O&&T?v("__APP__",(t=>t&&!1===t.loaded?(w(new Error("loadSubPackage: fail, subPackage: __APP__")),void c(I)):"__APP__"===C?(r(A(e)),void c(I)):void v(C,(t=>{t&&!1===t.loaded?w(new Error(`loadSubPackage: fail, subPackage: ${C}`)):A(e),c(I)})))):v(C,(t=>{t&&!1===t.loaded?w(new Error(`loadSubPackage: fail, subPackage: ${C}`)):A(e),c(I)}))}}function I(e){return S(e,!1)}r.__modules__=n,K=t})();var V=globalThis.define=K.define,J=globalThis.require=K.require;globalThis.requireOnce=K.requireOnce,e.definePlugin=G.definePlugin,e.requirePlugin=G.requirePlugin,b.onLoad((function(){u.setCloudSDK(P),u.setExparser(D),u.setVirtualDOM(L),u.setAppServiceEngine(B),u.setWebNode(K),u.setWeixinNativePluginMgr(_);var t=u.wx;if(N.condomWX(t),Object.assign(e,u.exportGlobal),"function"==typeof __passWAServiceGlobal__){var r={};r.__appServiceEngine__=B,r.__appServiceSDK__=u,r.__virtualDOM__=L,r.__subContextEngine__=x,r.Protect=C,r.WeixinJSBridge=h,r.WeixinNativePluginMgr=_,r.Foundation=b,r.exparser=D,r.Reporter=o,__passWAServiceGlobal__(r)}}))})(this);var __WXML_GLOBAL__=__WXML_GLOBAL__||{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:void 0,total_ops:0},__vd_version_info__=__vd_version_info__||{};__wxRoute=__wxRouteBegin=__wxAppCurrentFile__="";var __WASubContextEndTime__=Date.now();"function"==typeof this.__wxLibrary.onEnd&&this.__wxLibrary.onEnd(),delete this.__wxLibrary;